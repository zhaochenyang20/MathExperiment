<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>Release Notes &mdash; NumPy v1.17 Manual</title>
    
    <link rel="stylesheet" type="text/css" href="_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="_static/css/spc-extend.css">
    <link rel="stylesheet" href="_static/scipy.css" type="text/css" >
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" >
    <link rel="stylesheet" href="_static/graphviz.css" type="text/css" >
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.17.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/js/copybutton.js"></script>
    <link rel="author" title="About these documents" href="about.html" >
    <link rel="index" title="Index" href="genindex.html" >
    <link rel="search" title="Search" href="search.html" >
    <link rel="top" title="NumPy v1.17 Manual" href="index.html" >
    <link rel="next" title="About NumPy" href="about.html" >
    <link rel="prev" title="Building the NumPy API and reference docs" href="docs/howto_build_docs.html" > 
  </head>
  <body>

  <div class="container">
    <div class="header">
    </div>
  </div>


    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
        
        <li class="active"><a href="index.html">NumPy v1.17 Manual</a></li>
        
 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
      <li class="active">
        <a href="about.html" title="About NumPy"
           accesskey="N">next</a>
      </li>
      <li class="active">
        <a href="docs/howto_build_docs.html" title="Building the NumPy API and reference docs"
           accesskey="P">previous</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
  <h3><a href="contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Release Notes</a><ul>
<li><a class="reference internal" href="#numpy-1-17-0-release-notes">NumPy 1.17.0 Release Notes</a><ul>
<li><a class="reference internal" href="#highlights">Highlights</a></li>
<li><a class="reference internal" href="#new-functions">New functions</a></li>
<li><a class="reference internal" href="#deprecations">Deprecations</a><ul>
<li><a class="reference internal" href="#numpy-polynomial-functions-warn-when-passed-float-in-place-of-int"><code class="docutils literal notranslate"><span class="pre">numpy.polynomial</span></code> functions warn when passed <code class="docutils literal notranslate"><span class="pre">float</span></code> in place of <code class="docutils literal notranslate"><span class="pre">int</span></code></a></li>
<li><a class="reference internal" href="#deprecate-numpy-distutils-exec-command-and-temp-file-name">Deprecate <code class="docutils literal notranslate"><span class="pre">numpy.distutils.exec_command</span></code> and <code class="docutils literal notranslate"><span class="pre">temp_file_name</span></code></a></li>
<li><a class="reference internal" href="#writeable-flag-of-c-api-wrapped-arrays">Writeable flag of C-API wrapped arrays</a></li>
<li><a class="reference internal" href="#numpy-nonzero-should-no-longer-be-called-on-0d-arrays"><code class="docutils literal notranslate"><span class="pre">numpy.nonzero</span></code> should no longer be called on 0d arrays</a></li>
<li><a class="reference internal" href="#writing-to-the-result-of-numpy-broadcast-arrays-will-warn">Writing to the result of <code class="docutils literal notranslate"><span class="pre">numpy.broadcast_arrays</span></code> will warn</a></li>
</ul>
</li>
<li><a class="reference internal" href="#future-changes">Future Changes</a><ul>
<li><a class="reference internal" href="#shape-1-fields-in-dtypes-won-t-be-collapsed-to-scalars-in-a-future-version">Shape-1 fields in dtypes won’t be collapsed to scalars in a future version</a></li>
</ul>
</li>
<li><a class="reference internal" href="#compatibility-notes">Compatibility notes</a><ul>
<li><a class="reference internal" href="#float16-subnormal-rounding"><code class="docutils literal notranslate"><span class="pre">float16</span></code> subnormal rounding</a></li>
<li><a class="reference internal" href="#signed-zero-when-using-divmod">Signed zero when using divmod</a></li>
<li><a class="reference internal" href="#maskedarray-mask-now-returns-a-view-of-the-mask-not-the-mask-itself"><code class="docutils literal notranslate"><span class="pre">MaskedArray.mask</span></code> now returns a view of the mask, not the mask itself</a></li>
<li><a class="reference internal" href="#do-not-lookup-buffer-attribute-in-numpy-frombuffer">Do not lookup <code class="docutils literal notranslate"><span class="pre">__buffer__</span></code> attribute in <code class="docutils literal notranslate"><span class="pre">numpy.frombuffer</span></code></a></li>
<li><a class="reference internal" href="#out-is-buffered-for-memory-overlaps-in-take-choose-put"><code class="docutils literal notranslate"><span class="pre">out</span></code> is buffered for memory overlaps in <code class="docutils literal notranslate"><span class="pre">take</span></code>, <code class="docutils literal notranslate"><span class="pre">choose</span></code>, <code class="docutils literal notranslate"><span class="pre">put</span></code></a></li>
<li><a class="reference internal" href="#unpickling-while-loading-requires-explicit-opt-in">Unpickling while loading requires explicit opt-in</a></li>
<li><a class="reference internal" href="#potential-changes-to-the-random-stream-in-old-random-module">Potential changes to the random stream in old random module</a></li>
<li><a class="reference internal" href="#i0-now-always-returns-a-result-with-the-same-shape-as-the-input"><code class="docutils literal notranslate"><span class="pre">i0</span></code> now always returns a result with the same shape as the input</a></li>
<li><a class="reference internal" href="#can-cast-no-longer-assumes-all-unsafe-casting-is-allowed"><code class="docutils literal notranslate"><span class="pre">can_cast</span></code> no longer assumes all unsafe casting is allowed</a></li>
<li><a class="reference internal" href="#ndarray-flags-writeable-can-be-switched-to-true-slightly-more-often"><code class="docutils literal notranslate"><span class="pre">ndarray.flags.writeable</span></code> can be switched to true slightly more often</a></li>
</ul>
</li>
<li><a class="reference internal" href="#c-api-changes">C API changes</a><ul>
<li><a class="reference internal" href="#dimension-or-stride-input-arguments-are-now-passed-by-npy-intp-const">dimension or stride input arguments are now passed by <code class="docutils literal notranslate"><span class="pre">npy_intp</span> <span class="pre">const*</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-features">New Features</a><ul>
<li><a class="reference internal" href="#new-extensible-numpy-random-module-with-selectable-random-number-generators">New extensible <code class="docutils literal notranslate"><span class="pre">numpy.random</span></code> module with selectable random number generators</a></li>
<li><a class="reference internal" href="#libflame">libFLAME</a></li>
<li><a class="reference internal" href="#user-defined-blas-detection-order">User-defined BLAS detection order</a></li>
<li><a class="reference internal" href="#user-defined-lapack-detection-order">User-defined LAPACK detection order</a></li>
<li><a class="reference internal" href="#ufunc-reduce-and-related-functions-now-accept-a-where-mask"><code class="docutils literal notranslate"><span class="pre">ufunc.reduce</span></code> and related functions now accept a <code class="docutils literal notranslate"><span class="pre">where</span></code> mask</a></li>
<li><a class="reference internal" href="#timsort-and-radix-sort-have-replaced-mergesort-for-stable-sorting">Timsort and radix sort have replaced mergesort for stable sorting</a></li>
<li><a class="reference internal" href="#packbits-and-unpackbits-accept-an-order-keyword"><code class="docutils literal notranslate"><span class="pre">packbits</span></code> and <code class="docutils literal notranslate"><span class="pre">unpackbits</span></code> accept an <code class="docutils literal notranslate"><span class="pre">order</span></code> keyword</a></li>
<li><a class="reference internal" href="#unpackbits-now-accepts-a-count-parameter"><code class="docutils literal notranslate"><span class="pre">unpackbits</span></code> now accepts a <code class="docutils literal notranslate"><span class="pre">count</span></code> parameter</a></li>
<li><a class="reference internal" href="#linalg-svd-and-linalg-pinv-can-be-faster-on-hermitian-inputs"><code class="docutils literal notranslate"><span class="pre">linalg.svd</span></code> and <code class="docutils literal notranslate"><span class="pre">linalg.pinv</span></code> can be faster on hermitian inputs</a></li>
<li><a class="reference internal" href="#divmod-operation-is-now-supported-for-two-timedelta64-operands">divmod operation is now supported for two <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> operands</a></li>
<li><a class="reference internal" href="#fromfile-now-takes-an-offset-argument"><code class="docutils literal notranslate"><span class="pre">fromfile</span></code> now takes an <code class="docutils literal notranslate"><span class="pre">offset</span></code> argument</a></li>
<li><a class="reference internal" href="#new-mode-empty-for-pad">New mode “empty” for <code class="docutils literal notranslate"><span class="pre">pad</span></code></a></li>
<li><a class="reference internal" href="#empty-like-and-related-functions-now-accept-a-shape-argument"><code class="docutils literal notranslate"><span class="pre">empty_like</span></code> and related functions now accept a <code class="docutils literal notranslate"><span class="pre">shape</span></code> argument</a></li>
<li><a class="reference internal" href="#floating-point-scalars-implement-as-integer-ratio-to-match-the-builtin-float">Floating point scalars implement <code class="docutils literal notranslate"><span class="pre">as_integer_ratio</span></code> to match the builtin float</a></li>
<li><a class="reference internal" href="#structured-dtype-objects-can-be-indexed-with-multiple-fields-names">Structured <code class="docutils literal notranslate"><span class="pre">dtype</span></code> objects can be indexed with multiple fields names</a></li>
<li><a class="reference internal" href="#npy-files-support-unicode-field-names"><code class="docutils literal notranslate"><span class="pre">.npy</span></code> files support unicode field names</a></li>
</ul>
</li>
<li><a class="reference internal" href="#improvements">Improvements</a><ul>
<li><a class="reference internal" href="#array-comparison-assertions-include-maximum-differences">Array comparison assertions include maximum differences</a></li>
<li><a class="reference internal" href="#replacement-of-the-fftpack-based-fft-module-by-the-pocketfft-library">Replacement of the fftpack based <code class="docutils literal notranslate"><span class="pre">fft</span></code> module by the pocketfft library</a></li>
<li><a class="reference internal" href="#further-improvements-to-ctypes-support-in-numpy-ctypeslib">Further improvements to <code class="docutils literal notranslate"><span class="pre">ctypes</span></code> support in <code class="docutils literal notranslate"><span class="pre">numpy.ctypeslib</span></code></a></li>
<li><a class="reference internal" href="#numpy-errstate-is-now-also-a-function-decorator"><code class="docutils literal notranslate"><span class="pre">numpy.errstate</span></code> is now also a function decorator</a></li>
<li><a class="reference internal" href="#numpy-exp-and-numpy-log-speed-up-for-float32-implementation"><code class="docutils literal notranslate"><span class="pre">numpy.exp</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy.log</span></code> speed up for float32 implementation</a></li>
<li><a class="reference internal" href="#improve-performance-of-numpy-pad">Improve performance of <code class="docutils literal notranslate"><span class="pre">numpy.pad</span></code></a></li>
<li><a class="reference internal" href="#numpy-interp-handles-infinities-more-robustly"><code class="docutils literal notranslate"><span class="pre">numpy.interp</span></code> handles infinities more robustly</a></li>
<li><a class="reference internal" href="#pathlib-support-for-fromfile-tofile-and-ndarray-dump">Pathlib support for <code class="docutils literal notranslate"><span class="pre">fromfile</span></code>, <em class="xref py py-obj">tofile</em> and <code class="docutils literal notranslate"><span class="pre">ndarray.dump</span></code></a></li>
<li><a class="reference internal" href="#specialized-isnan-isinf-and-isfinite-ufuncs-for-bool-and-int-types">Specialized <code class="docutils literal notranslate"><span class="pre">isnan</span></code>, <code class="docutils literal notranslate"><span class="pre">isinf</span></code>, and <code class="docutils literal notranslate"><span class="pre">isfinite</span></code> ufuncs for bool and int types</a></li>
<li><a class="reference internal" href="#isfinite-supports-datetime64-and-timedelta64-types"><code class="docutils literal notranslate"><span class="pre">isfinite</span></code> supports <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> and <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> types</a></li>
<li><a class="reference internal" href="#new-keywords-added-to-nan-to-num">New keywords added to <code class="docutils literal notranslate"><span class="pre">nan_to_num</span></code></a></li>
<li><a class="reference internal" href="#memoryerrors-caused-by-allocated-overly-large-arrays-are-more-descriptive">MemoryErrors caused by allocated overly large arrays are more descriptive</a></li>
<li><a class="reference internal" href="#floor-ceil-and-trunc-now-respect-builtin-magic-methods"><code class="docutils literal notranslate"><span class="pre">floor</span></code>, <code class="docutils literal notranslate"><span class="pre">ceil</span></code>, and <code class="docutils literal notranslate"><span class="pre">trunc</span></code> now respect builtin magic methods</a></li>
<li><a class="reference internal" href="#quantile-now-works-on-fraction-fraction-and-decimal-decimal-objects"><code class="docutils literal notranslate"><span class="pre">quantile</span></code> now works on <em class="xref py py-obj">fraction.Fraction</em> and <code class="docutils literal notranslate"><span class="pre">decimal.Decimal</span></code> objects</a></li>
<li><a class="reference internal" href="#support-of-object-arrays-in-matmul">Support of object arrays in <code class="docutils literal notranslate"><span class="pre">matmul</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#changes">Changes</a><ul>
<li><a class="reference internal" href="#median-and-percentile-family-of-functions-no-longer-warn-about-nan"><code class="docutils literal notranslate"><span class="pre">median</span></code> and <code class="docutils literal notranslate"><span class="pre">percentile</span></code> family of functions no longer warn about <code class="docutils literal notranslate"><span class="pre">nan</span></code></a></li>
<li><a class="reference internal" href="#timedelta64-0-behavior-adjusted-to-return-nat"><code class="docutils literal notranslate"><span class="pre">timedelta64</span> <span class="pre">%</span> <span class="pre">0</span></code> behavior adjusted to return <code class="docutils literal notranslate"><span class="pre">NaT</span></code></a></li>
<li><a class="reference internal" href="#numpy-functions-now-always-support-overrides-with-array-function">NumPy functions now always support overrides with <code class="docutils literal notranslate"><span class="pre">__array_function__</span></code></a></li>
<li><a class="reference internal" href="#lib-recfunctions-structured-to-unstructured-does-not-squeeze-single-field-views"><code class="docutils literal notranslate"><span class="pre">lib.recfunctions.structured_to_unstructured</span></code> does not squeeze single-field views</a></li>
<li><a class="reference internal" href="#clip-now-uses-a-ufunc-under-the-hood"><code class="docutils literal notranslate"><span class="pre">clip</span></code> now uses a ufunc under the hood</a></li>
<li><a class="reference internal" href="#array-interface-offset-now-works-as-documented"><code class="docutils literal notranslate"><span class="pre">__array_interface__</span></code> offset now works as documented</a></li>
<li><a class="reference internal" href="#pickle-protocol-in-savez-set-to-3-for-force-zip64-flag">Pickle protocol in <code class="docutils literal notranslate"><span class="pre">savez</span></code> set to 3 for <code class="docutils literal notranslate"><span class="pre">force</span> <span class="pre">zip64</span></code> flag</a></li>
<li><a class="reference internal" href="#structured-arrays-indexed-with-non-existent-fields-raise-keyerror-not-valueerror">Structured arrays indexed with non-existent fields raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> not <code class="docutils literal notranslate"><span class="pre">ValueError</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-16-4-release-notes">NumPy 1.16.4 Release Notes</a><ul>
<li><a class="reference internal" href="#new-deprecations">New deprecations</a><ul>
<li><a class="reference internal" href="#id2">Writeable flag of C-API wrapped arrays</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id3">Compatibility notes</a><ul>
<li><a class="reference internal" href="#potential-changes-to-the-random-stream">Potential changes to the random stream</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4">Changes</a><ul>
<li><a class="reference internal" href="#numpy-lib-recfunctions-structured-to-unstructured-does-not-squeeze-single-field-views"><code class="docutils literal notranslate"><span class="pre">numpy.lib.recfunctions.structured_to_unstructured</span></code> does not squeeze single-field views</a></li>
</ul>
</li>
<li><a class="reference internal" href="#contributors">Contributors</a></li>
<li><a class="reference internal" href="#pull-requests-merged">Pull requests merged</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-16-3-release-notes">NumPy 1.16.3 Release Notes</a><ul>
<li><a class="reference internal" href="#id6">Compatibility notes</a><ul>
<li><a class="reference internal" href="#id7">Unpickling while loading requires explicit opt-in</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id9">Improvements</a><ul>
<li><a class="reference internal" href="#covariance-in-random-mvnormal-cast-to-double">Covariance in <em class="xref py py-obj">random.mvnormal</em> cast to double</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id10">Changes</a><ul>
<li><a class="reference internal" href="#id11"><code class="docutils literal notranslate"><span class="pre">__array_interface__</span></code> offset now works as documented</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-16-2-release-notes">NumPy 1.16.2 Release Notes</a><ul>
<li><a class="reference internal" href="#id12">Compatibility notes</a><ul>
<li><a class="reference internal" href="#id13">Signed zero when using divmod</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id14">Contributors</a></li>
<li><a class="reference internal" href="#id15">Pull requests merged</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-16-1-release-notes">NumPy 1.16.1 Release Notes</a><ul>
<li><a class="reference internal" href="#id16">Contributors</a></li>
<li><a class="reference internal" href="#enhancements">Enhancements</a></li>
<li><a class="reference internal" href="#id17">Compatibility notes</a></li>
<li><a class="reference internal" href="#id18">New Features</a><ul>
<li><a class="reference internal" href="#id19">divmod operation is now supported for two <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> operands</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id20">Improvements</a><ul>
<li><a class="reference internal" href="#further-improvements-to-ctypes-support-in-np-ctypeslib">Further improvements to <code class="docutils literal notranslate"><span class="pre">ctypes</span></code> support in <code class="docutils literal notranslate"><span class="pre">np.ctypeslib</span></code></a></li>
<li><a class="reference internal" href="#id21">Array comparison assertions include maximum differences</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id22">Changes</a><ul>
<li><a class="reference internal" href="#id23"><code class="docutils literal notranslate"><span class="pre">timedelta64</span> <span class="pre">%</span> <span class="pre">0</span></code> behavior adjusted to return <code class="docutils literal notranslate"><span class="pre">NaT</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-16-0-release-notes">NumPy 1.16.0 Release Notes</a><ul>
<li><a class="reference internal" href="#id24">Highlights</a></li>
<li><a class="reference internal" href="#id25">New functions</a></li>
<li><a class="reference internal" href="#id26">New deprecations</a></li>
<li><a class="reference internal" href="#expired-deprecations">Expired deprecations</a></li>
<li><a class="reference internal" href="#id27">Future changes</a></li>
<li><a class="reference internal" href="#id28">Compatibility notes</a><ul>
<li><a class="reference internal" href="#f2py-script-on-windows">f2py script on Windows</a></li>
<li><a class="reference internal" href="#nat-comparisons">NaT comparisons</a></li>
<li><a class="reference internal" href="#complex64-128-alignment-has-changed">complex64/128 alignment has changed</a></li>
<li><a class="reference internal" href="#nd-grid-len-removal">nd_grid __len__ removal</a></li>
<li><a class="reference internal" href="#np-unravel-index-now-accepts-shape-keyword-argument"><code class="docutils literal notranslate"><span class="pre">np.unravel_index</span></code> now accepts <code class="docutils literal notranslate"><span class="pre">shape</span></code> keyword argument</a></li>
<li><a class="reference internal" href="#multi-field-views-return-a-view-instead-of-a-copy">multi-field views return a view instead of a copy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id29">C API changes</a></li>
<li><a class="reference internal" href="#id30">New Features</a><ul>
<li><a class="reference internal" href="#integrated-squared-error-ise-estimator-added-to-histogram">Integrated squared error (ISE) estimator added to <code class="docutils literal notranslate"><span class="pre">histogram</span></code></a></li>
<li><a class="reference internal" href="#max-rows-keyword-added-for-np-loadtxt"><code class="docutils literal notranslate"><span class="pre">max_rows</span></code> keyword added for <code class="docutils literal notranslate"><span class="pre">np.loadtxt</span></code></a></li>
<li><a class="reference internal" href="#modulus-operator-support-added-for-np-timedelta64-operands">modulus operator support added for <code class="docutils literal notranslate"><span class="pre">np.timedelta64</span></code> operands</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id31">Improvements</a><ul>
<li><a class="reference internal" href="#no-copy-pickling-of-numpy-arrays">no-copy pickling of numpy arrays</a></li>
<li><a class="reference internal" href="#build-shell-independence">build shell independence</a></li>
<li><a class="reference internal" href="#np-polynomial-polynomial-classes-render-in-latex-in-jupyter-notebooks"><em class="xref py py-obj">np.polynomial.Polynomial</em> classes render in LaTeX in Jupyter notebooks</a></li>
<li><a class="reference internal" href="#randint-and-choice-now-work-on-empty-distributions"><code class="docutils literal notranslate"><span class="pre">randint</span></code> and <code class="docutils literal notranslate"><span class="pre">choice</span></code> now work on empty distributions</a></li>
<li><a class="reference internal" href="#linalg-lstsq-linalg-qr-and-linalg-svd-now-work-with-empty-arrays"><code class="docutils literal notranslate"><span class="pre">linalg.lstsq</span></code>, <code class="docutils literal notranslate"><span class="pre">linalg.qr</span></code>, and <code class="docutils literal notranslate"><span class="pre">linalg.svd</span></code> now work with empty arrays</a></li>
<li><a class="reference internal" href="#chain-exceptions-to-give-better-error-messages-for-invalid-pep3118-format-strings">Chain exceptions to give better error messages for invalid PEP3118 format strings</a></li>
<li><a class="reference internal" href="#einsum-optimization-path-updates-and-efficiency-improvements">Einsum optimization path updates and efficiency improvements</a></li>
<li><a class="reference internal" href="#numpy-angle-and-numpy-expand-dims-now-work-on-ndarray-subclasses"><code class="docutils literal notranslate"><span class="pre">numpy.angle</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy.expand_dims</span></code> now work on <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> subclasses</a></li>
<li><a class="reference internal" href="#npy-no-deprecated-api-compiler-warning-suppression"><code class="docutils literal notranslate"><span class="pre">NPY_NO_DEPRECATED_API</span></code> compiler warning suppression</a></li>
<li><a class="reference internal" href="#np-diff-added-kwargs-prepend-and-append"><code class="docutils literal notranslate"><span class="pre">np.diff</span></code> Added kwargs prepend and append</a></li>
<li><a class="reference internal" href="#arm-support-updated">ARM support updated</a></li>
<li><a class="reference internal" href="#appending-to-build-flags">Appending to build flags</a></li>
<li><a class="reference internal" href="#generalized-ufunc-signatures-now-allow-fixed-size-dimensions">Generalized ufunc signatures now allow fixed-size dimensions</a></li>
<li><a class="reference internal" href="#generalized-ufunc-signatures-now-allow-flexible-dimensions">Generalized ufunc signatures now allow flexible dimensions</a></li>
<li><a class="reference internal" href="#np-clip-and-the-clip-method-check-for-memory-overlap"><code class="docutils literal notranslate"><span class="pre">np.clip</span></code> and the <code class="docutils literal notranslate"><span class="pre">clip</span></code> method check for memory overlap</a></li>
<li><a class="reference internal" href="#new-value-unscaled-for-option-cov-in-np-polyfit">New value <code class="docutils literal notranslate"><span class="pre">unscaled</span></code> for option <code class="docutils literal notranslate"><span class="pre">cov</span></code> in <code class="docutils literal notranslate"><span class="pre">np.polyfit</span></code></a></li>
<li><a class="reference internal" href="#detailed-docstrings-for-scalar-numeric-types">Detailed docstrings for scalar numeric types</a></li>
<li><a class="reference internal" href="#module-attribute-now-points-to-public-modules"><code class="docutils literal notranslate"><span class="pre">__module__</span></code> attribute now points to public modules</a></li>
<li><a class="reference internal" href="#large-allocations-marked-as-suitable-for-transparent-hugepages">Large allocations marked as suitable for transparent hugepages</a></li>
<li><a class="reference internal" href="#alpine-linux-and-other-musl-c-library-distros-support">Alpine Linux (and other musl c library distros) support</a></li>
<li><a class="reference internal" href="#speedup-np-block-for-large-arrays">Speedup <code class="docutils literal notranslate"><span class="pre">np.block</span></code> for large arrays</a><ul>
<li><a class="reference internal" href="#arr-ctypes-data-as-holds-a-reference-to-arr"><code class="docutils literal notranslate"><span class="pre">arr.ctypes.data_as(...)</span></code> holds a reference to arr</a></li>
</ul>
</li>
<li><a class="reference internal" href="#speedup-np-take-for-read-only-arrays">Speedup <code class="docutils literal notranslate"><span class="pre">np.take</span></code> for read-only arrays</a></li>
<li><a class="reference internal" href="#support-path-like-objects-for-more-functions">Support path-like objects for more functions</a></li>
<li><a class="reference internal" href="#better-behaviour-of-ufunc-identities-during-reductions">Better behaviour of ufunc identities during reductions</a></li>
<li><a class="reference internal" href="#improved-conversion-from-ctypes-objects">Improved conversion from ctypes objects</a></li>
<li><a class="reference internal" href="#a-new-ndpointer-contents-member">A new <code class="docutils literal notranslate"><span class="pre">ndpointer.contents</span></code> member</a></li>
<li><a class="reference internal" href="#matmul-is-now-a-ufunc"><code class="docutils literal notranslate"><span class="pre">matmul</span></code> is now a <code class="docutils literal notranslate"><span class="pre">ufunc</span></code></a></li>
<li><a class="reference internal" href="#start-and-stop-arrays-for-linspace-logspace-and-geomspace">Start and stop arrays for <code class="docutils literal notranslate"><span class="pre">linspace</span></code>, <code class="docutils literal notranslate"><span class="pre">logspace</span></code> and <code class="docutils literal notranslate"><span class="pre">geomspace</span></code></a></li>
<li><a class="reference internal" href="#ci-extended-with-additional-services">CI extended with additional services</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id32">Changes</a><ul>
<li><a class="reference internal" href="#comparison-ufuncs-will-now-error-rather-than-return-notimplemented">Comparison ufuncs will now error rather than return NotImplemented</a></li>
<li><a class="reference internal" href="#positive-will-now-raise-a-deprecation-warning-for-non-numerical-arrays">Positive will now raise a deprecation warning for non-numerical arrays</a></li>
<li><a class="reference internal" href="#ndarrayoperatorsmixin-now-implements-matrix-multiplication"><code class="docutils literal notranslate"><span class="pre">NDArrayOperatorsMixin</span></code> now implements matrix multiplication</a></li>
<li><a class="reference internal" href="#the-scaling-of-the-covariance-matrix-in-np-polyfit-is-different">The scaling of the covariance matrix in <code class="docutils literal notranslate"><span class="pre">np.polyfit</span></code> is different</a></li>
<li><a class="reference internal" href="#maximum-and-minimum-no-longer-emit-warnings"><code class="docutils literal notranslate"><span class="pre">maximum</span></code> and <code class="docutils literal notranslate"><span class="pre">minimum</span></code> no longer emit warnings</a></li>
<li><a class="reference internal" href="#umath-and-multiarray-c-extension-modules-merged-into-a-single-module">Umath and multiarray c-extension modules merged into a single module</a></li>
<li><a class="reference internal" href="#getfield-validity-checks-extended"><code class="docutils literal notranslate"><span class="pre">getfield</span></code> validity checks extended</a></li>
<li><a class="reference internal" href="#numpy-functions-now-support-overrides-with-array-function">NumPy functions now support overrides with <code class="docutils literal notranslate"><span class="pre">__array_function__</span></code></a></li>
<li><a class="reference internal" href="#arrays-based-off-readonly-buffers-cannot-be-set-writeable">Arrays based off readonly buffers cannot be set <code class="docutils literal notranslate"><span class="pre">writeable</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-15-4-release-notes">NumPy 1.15.4 Release Notes</a><ul>
<li><a class="reference internal" href="#compatibility-note">Compatibility Note</a></li>
<li><a class="reference internal" href="#id34">Contributors</a></li>
<li><a class="reference internal" href="#id35">Pull requests merged</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-15-3-release-notes">NumPy 1.15.3 Release Notes</a><ul>
<li><a class="reference internal" href="#id36">Compatibility Note</a></li>
<li><a class="reference internal" href="#id37">Contributors</a></li>
<li><a class="reference internal" href="#id38">Pull requests merged</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-15-2-release-notes">NumPy 1.15.2 Release Notes</a><ul>
<li><a class="reference internal" href="#id39">Compatibility Note</a></li>
<li><a class="reference internal" href="#id40">Contributors</a></li>
<li><a class="reference internal" href="#id41">Pull requests merged</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-15-1-release-notes">NumPy 1.15.1 Release Notes</a><ul>
<li><a class="reference internal" href="#id42">Compatibility Note</a></li>
<li><a class="reference internal" href="#id43">Contributors</a></li>
<li><a class="reference internal" href="#id44">Pull requests merged</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-15-0-release-notes">NumPy 1.15.0 Release Notes</a><ul>
<li><a class="reference internal" href="#id45">Highlights</a></li>
<li><a class="reference internal" href="#id46">New functions</a></li>
<li><a class="reference internal" href="#id47">Deprecations</a></li>
<li><a class="reference internal" href="#id48">Future Changes</a></li>
<li><a class="reference internal" href="#id49">Compatibility notes</a><ul>
<li><a class="reference internal" href="#compiled-testing-modules-renamed-and-made-private">Compiled testing modules renamed and made private</a></li>
<li><a class="reference internal" href="#the-npzfile-returned-by-np-savez-is-now-a-collections-abc-mapping">The <code class="docutils literal notranslate"><span class="pre">NpzFile</span></code> returned by <code class="docutils literal notranslate"><span class="pre">np.savez</span></code> is now a <code class="docutils literal notranslate"><span class="pre">collections.abc.Mapping</span></code></a></li>
<li><a class="reference internal" href="#under-certain-conditions-nditer-must-be-used-in-a-context-manager">Under certain conditions, <code class="docutils literal notranslate"><span class="pre">nditer</span></code> must be used in a context manager</a></li>
<li><a class="reference internal" href="#numpy-has-switched-to-using-pytest-instead-of-nose-for-testing">Numpy has switched to using pytest instead of nose for testing</a></li>
<li><a class="reference internal" href="#numpy-no-longer-monkey-patches-ctypes-with-array-interface">Numpy no longer monkey-patches <code class="docutils literal notranslate"><span class="pre">ctypes</span></code> with <code class="docutils literal notranslate"><span class="pre">__array_interface__</span></code></a></li>
<li><a class="reference internal" href="#np-ma-notmasked-contiguous-and-np-ma-flatnotmasked-contiguous-always-return-lists"><code class="docutils literal notranslate"><span class="pre">np.ma.notmasked_contiguous</span></code> and <code class="docutils literal notranslate"><span class="pre">np.ma.flatnotmasked_contiguous</span></code> always return lists</a></li>
<li><a class="reference internal" href="#np-squeeze-restores-old-behavior-of-objects-that-cannot-handle-an-axis-argument"><code class="docutils literal notranslate"><span class="pre">np.squeeze</span></code> restores old behavior of objects that cannot handle an <code class="docutils literal notranslate"><span class="pre">axis</span></code> argument</a></li>
<li><a class="reference internal" href="#unstructured-void-array-s-item-method-now-returns-a-bytes-object">unstructured void array’s <code class="docutils literal notranslate"><span class="pre">.item</span></code> method now returns a bytes object</a></li>
<li><a class="reference internal" href="#copy-copy-and-copy-deepcopy-no-longer-turn-masked-into-an-array"><code class="docutils literal notranslate"><span class="pre">copy.copy</span></code> and <code class="docutils literal notranslate"><span class="pre">copy.deepcopy</span></code> no longer turn <code class="docutils literal notranslate"><span class="pre">masked</span></code> into an array</a></li>
<li><a class="reference internal" href="#multifield-indexing-of-structured-arrays-will-still-return-a-copy">Multifield Indexing of Structured Arrays will still return a copy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id50">C API changes</a><ul>
<li><a class="reference internal" href="#new-functions-npy-get-floatstatus-barrier-and-npy-clear-floatstatus-barrier">New functions <code class="docutils literal notranslate"><span class="pre">npy_get_floatstatus_barrier</span></code> and <code class="docutils literal notranslate"><span class="pre">npy_clear_floatstatus_barrier</span></code></a></li>
<li><a class="reference internal" href="#changes-to-pyarray-getdtypetransferfunction">Changes to <code class="docutils literal notranslate"><span class="pre">PyArray_GetDTypeTransferFunction</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#id51">New Features</a><ul>
<li><a class="reference internal" href="#np-gcd-and-np-lcm-ufuncs-added-for-integer-and-objects-types"><code class="docutils literal notranslate"><span class="pre">np.gcd</span></code> and <code class="docutils literal notranslate"><span class="pre">np.lcm</span></code> ufuncs added for integer and objects types</a></li>
<li><a class="reference internal" href="#support-for-cross-platform-builds-for-ios">Support for cross-platform builds for iOS</a></li>
<li><a class="reference internal" href="#return-indices-keyword-added-for-np-intersect1d"><code class="docutils literal notranslate"><span class="pre">return_indices</span></code> keyword added for <code class="docutils literal notranslate"><span class="pre">np.intersect1d</span></code></a></li>
<li><a class="reference internal" href="#np-quantile-and-np-nanquantile"><code class="docutils literal notranslate"><span class="pre">np.quantile</span></code> and <code class="docutils literal notranslate"><span class="pre">np.nanquantile</span></code></a></li>
<li><a class="reference internal" href="#build-system">Build system</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id52">Improvements</a><ul>
<li><a class="reference internal" href="#np-einsum-updates"><code class="docutils literal notranslate"><span class="pre">np.einsum</span></code> updates</a></li>
<li><a class="reference internal" href="#np-ufunc-reduce-and-related-functions-now-accept-an-initial-value"><code class="docutils literal notranslate"><span class="pre">np.ufunc.reduce</span></code> and related functions now accept an initial value</a></li>
<li><a class="reference internal" href="#np-flip-can-operate-over-multiple-axes"><code class="docutils literal notranslate"><span class="pre">np.flip</span></code> can operate over multiple axes</a></li>
<li><a class="reference internal" href="#histogram-and-histogramdd-functions-have-moved-to-np-lib-histograms"><code class="docutils literal notranslate"><span class="pre">histogram</span></code> and <code class="docutils literal notranslate"><span class="pre">histogramdd</span></code> functions have moved to <code class="docutils literal notranslate"><span class="pre">np.lib.histograms</span></code></a></li>
<li><a class="reference internal" href="#histogram-will-accept-nan-values-when-explicit-bins-are-given"><code class="docutils literal notranslate"><span class="pre">histogram</span></code> will accept NaN values when explicit bins are given</a></li>
<li><a class="reference internal" href="#histogram-works-on-datetime-types-when-explicit-bin-edges-are-given"><code class="docutils literal notranslate"><span class="pre">histogram</span></code> works on datetime types, when explicit bin edges are given</a></li>
<li><a class="reference internal" href="#histogram-auto-estimator-handles-limited-variance-better"><code class="docutils literal notranslate"><span class="pre">histogram</span></code> “auto” estimator handles limited variance better</a></li>
<li><a class="reference internal" href="#the-edges-retuned-by-histogram-and-histogramdd-now-match-the-data-float-type">The edges retuned by <em class="xref py py-obj">histogram`</em> and <code class="docutils literal notranslate"><span class="pre">histogramdd</span></code> now match the data float type</a></li>
<li><a class="reference internal" href="#histogramdd-allows-explicit-ranges-to-be-given-in-a-subset-of-axes"><code class="docutils literal notranslate"><span class="pre">histogramdd</span></code> allows explicit ranges to be given in a subset of axes</a></li>
<li><a class="reference internal" href="#the-normed-arguments-of-histogramdd-and-histogram2d-have-been-renamed">The normed arguments of <code class="docutils literal notranslate"><span class="pre">histogramdd</span></code> and <code class="docutils literal notranslate"><span class="pre">histogram2d</span></code> have been renamed</a></li>
<li><a class="reference internal" href="#np-r-works-with-0d-arrays-and-np-ma-mr-works-with-np-ma-masked"><code class="docutils literal notranslate"><span class="pre">np.r_</span></code> works with 0d arrays, and <code class="docutils literal notranslate"><span class="pre">np.ma.mr_</span></code> works with <code class="docutils literal notranslate"><span class="pre">np.ma.masked</span></code></a></li>
<li><a class="reference internal" href="#np-ptp-accepts-a-keepdims-argument-and-extended-axis-tuples"><code class="docutils literal notranslate"><span class="pre">np.ptp</span></code> accepts a <code class="docutils literal notranslate"><span class="pre">keepdims</span></code> argument, and extended axis tuples</a></li>
<li><a class="reference internal" href="#maskedarray-astype-now-is-identical-to-ndarray-astype"><code class="docutils literal notranslate"><span class="pre">MaskedArray.astype</span></code> now is identical to <code class="docutils literal notranslate"><span class="pre">ndarray.astype</span></code></a></li>
<li><a class="reference internal" href="#enable-avx2-avx512-at-compile-time">Enable AVX2/AVX512 at compile time</a></li>
<li><a class="reference internal" href="#nan-to-num-always-returns-scalars-when-receiving-scalar-or-0d-inputs"><code class="docutils literal notranslate"><span class="pre">nan_to_num</span></code> always returns scalars when receiving scalar or 0d inputs</a></li>
<li><a class="reference internal" href="#np-flatnonzero-works-on-numpy-convertible-types"><code class="docutils literal notranslate"><span class="pre">np.flatnonzero</span></code> works on numpy-convertible types</a></li>
<li><a class="reference internal" href="#np-interp-returns-numpy-scalars-rather-than-builtin-scalars"><code class="docutils literal notranslate"><span class="pre">np.interp</span></code> returns numpy scalars rather than builtin scalars</a></li>
<li><a class="reference internal" href="#allow-dtype-field-names-to-be-unicode-in-python-2">Allow dtype field names to be unicode in Python 2</a></li>
<li><a class="reference internal" href="#comparison-ufuncs-accept-dtype-object-overriding-the-default-bool">Comparison ufuncs accept <code class="docutils literal notranslate"><span class="pre">dtype=object</span></code>, overriding the default <code class="docutils literal notranslate"><span class="pre">bool</span></code></a></li>
<li><a class="reference internal" href="#sort-functions-accept-kind-stable"><code class="docutils literal notranslate"><span class="pre">sort</span></code> functions accept <code class="docutils literal notranslate"><span class="pre">kind='stable'</span></code></a></li>
<li><a class="reference internal" href="#do-not-make-temporary-copies-for-in-place-accumulation">Do not make temporary copies for in-place accumulation</a></li>
<li><a class="reference internal" href="#linalg-matrix-power-can-now-handle-stacks-of-matrices"><code class="docutils literal notranslate"><span class="pre">linalg.matrix_power</span></code> can now handle stacks of matrices</a></li>
<li><a class="reference internal" href="#increased-performance-in-random-permutation-for-multidimensional-arrays">Increased performance in <code class="docutils literal notranslate"><span class="pre">random.permutation</span></code> for multidimensional arrays</a></li>
<li><a class="reference internal" href="#generalized-ufuncs-now-accept-axes-axis-and-keepdims-arguments">Generalized ufuncs now accept <code class="docutils literal notranslate"><span class="pre">axes</span></code>, <code class="docutils literal notranslate"><span class="pre">axis</span></code> and <code class="docutils literal notranslate"><span class="pre">keepdims</span></code> arguments</a></li>
<li><a class="reference internal" href="#float128-values-now-print-correctly-on-ppc-systems">float128 values now print correctly on ppc systems</a></li>
<li><a class="reference internal" href="#new-np-take-along-axis-and-np-put-along-axis-functions">New <code class="docutils literal notranslate"><span class="pre">np.take_along_axis</span></code> and <code class="docutils literal notranslate"><span class="pre">np.put_along_axis</span></code> functions</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-14-6-release-notes">NumPy 1.14.6 Release Notes</a><ul>
<li><a class="reference internal" href="#id53">Contributors</a></li>
<li><a class="reference internal" href="#id54">Pull requests merged</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-14-5-release-notes">NumPy 1.14.5 Release Notes</a><ul>
<li><a class="reference internal" href="#id55">Contributors</a></li>
<li><a class="reference internal" href="#id56">Pull requests merged</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-14-4-release-notes">NumPy 1.14.4 Release Notes</a><ul>
<li><a class="reference internal" href="#id57">Contributors</a></li>
<li><a class="reference internal" href="#id58">Pull requests merged</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-14-3-release-notes">NumPy 1.14.3 Release Notes</a><ul>
<li><a class="reference internal" href="#id59">Contributors</a></li>
<li><a class="reference internal" href="#id60">Pull requests merged</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-14-2-release-notes">NumPy 1.14.2 Release Notes</a><ul>
<li><a class="reference internal" href="#id61">Contributors</a></li>
<li><a class="reference internal" href="#id62">Pull requests merged</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-14-1-release-notes">NumPy 1.14.1 Release Notes</a><ul>
<li><a class="reference internal" href="#id63">Contributors</a></li>
<li><a class="reference internal" href="#id64">Pull requests merged</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-14-0-release-notes">NumPy 1.14.0 Release Notes</a><ul>
<li><a class="reference internal" href="#id65">Highlights</a></li>
<li><a class="reference internal" href="#id66">New functions</a></li>
<li><a class="reference internal" href="#id67">Deprecations</a></li>
<li><a class="reference internal" href="#id68">Future Changes</a></li>
<li><a class="reference internal" href="#id69">Compatibility notes</a><ul>
<li><a class="reference internal" href="#the-mask-of-a-masked-array-view-is-also-a-view-rather-than-a-copy">The mask of a masked array view is also a view rather than a copy</a></li>
<li><a class="reference internal" href="#np-ma-masked-is-no-longer-writeable"><code class="docutils literal notranslate"><span class="pre">np.ma.masked</span></code> is no longer writeable</a></li>
<li><a class="reference internal" href="#np-ma-functions-producing-fill-value-s-have-changed"><code class="docutils literal notranslate"><span class="pre">np.ma</span></code> functions producing <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> s have changed</a></li>
<li><a class="reference internal" href="#a-flat-array-returns-non-writeable-arrays-when-a-is-non-contiguous"><code class="docutils literal notranslate"><span class="pre">a.flat.__array__()</span></code> returns non-writeable arrays when <code class="docutils literal notranslate"><span class="pre">a</span></code> is non-contiguous</a></li>
<li><a class="reference internal" href="#np-tensordot-now-returns-zero-array-when-contracting-over-0-length-dimension"><code class="docutils literal notranslate"><span class="pre">np.tensordot</span></code> now returns zero array when contracting over 0-length dimension</a></li>
<li><a class="reference internal" href="#numpy-testing-reorganized"><code class="docutils literal notranslate"><span class="pre">numpy.testing</span></code> reorganized</a></li>
<li><a class="reference internal" href="#np-asfarray-no-longer-accepts-non-dtypes-through-the-dtype-argument"><code class="docutils literal notranslate"><span class="pre">np.asfarray</span></code> no longer accepts non-dtypes through the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> argument</a></li>
<li><a class="reference internal" href="#d-np-linalg-norm-preserves-float-input-types-even-for-arbitrary-orders">1D <code class="docutils literal notranslate"><span class="pre">np.linalg.norm</span></code> preserves float input types, even for arbitrary orders</a></li>
<li><a class="reference internal" href="#count-nonzero-arr-axis-now-counts-over-no-axes-not-all-axes"><code class="docutils literal notranslate"><span class="pre">count_nonzero(arr,</span> <span class="pre">axis=())</span></code> now counts over no axes, not all axes</a></li>
<li><a class="reference internal" href="#init-py-files-added-to-test-directories"><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> files added to test directories</a></li>
<li><a class="reference internal" href="#astype-bool-on-unstructured-void-arrays-now-calls-bool-on-each-element"><code class="docutils literal notranslate"><span class="pre">.astype(bool)</span></code> on unstructured void arrays now calls <code class="docutils literal notranslate"><span class="pre">bool</span></code> on each element</a></li>
<li><a class="reference internal" href="#maskedarray-squeeze-never-returns-np-ma-masked"><code class="docutils literal notranslate"><span class="pre">MaskedArray.squeeze</span></code> never returns <code class="docutils literal notranslate"><span class="pre">np.ma.masked</span></code></a></li>
<li><a class="reference internal" href="#renamed-first-parameter-of-can-cast-from-from-to-from">Renamed first parameter of <code class="docutils literal notranslate"><span class="pre">can_cast</span></code> from <code class="docutils literal notranslate"><span class="pre">from</span></code> to <code class="docutils literal notranslate"><span class="pre">from_</span></code></a></li>
<li><a class="reference internal" href="#isnat-raises-typeerror-when-passed-wrong-type"><code class="docutils literal notranslate"><span class="pre">isnat</span></code> raises <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> when passed wrong type</a></li>
<li><a class="reference internal" href="#dtype-getitem-raises-typeerror-when-passed-wrong-type"><code class="docutils literal notranslate"><span class="pre">dtype.__getitem__</span></code> raises <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> when passed wrong type</a></li>
<li><a class="reference internal" href="#user-defined-types-now-need-to-implement-str-and-repr">User-defined types now need to implement <code class="docutils literal notranslate"><span class="pre">__str__</span></code> and <code class="docutils literal notranslate"><span class="pre">__repr__</span></code></a></li>
<li><a class="reference internal" href="#many-changes-to-array-printing-disableable-with-the-new-legacy-printing-mode">Many changes to array printing, disableable with the new “legacy” printing mode</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id70">C API changes</a><ul>
<li><a class="reference internal" href="#pypy-compatible-alternative-to-updateifcopy-arrays">PyPy compatible alternative to <code class="docutils literal notranslate"><span class="pre">UPDATEIFCOPY</span></code> arrays</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id71">New Features</a><ul>
<li><a class="reference internal" href="#encoding-argument-for-text-io-functions">Encoding argument for text IO functions</a></li>
<li><a class="reference internal" href="#external-nose-plugins-are-usable-by-numpy-testing-tester">External <code class="docutils literal notranslate"><span class="pre">nose</span></code> plugins are usable by <code class="docutils literal notranslate"><span class="pre">numpy.testing.Tester</span></code></a></li>
<li><a class="reference internal" href="#parametrize-decorator-added-to-numpy-testing"><code class="docutils literal notranslate"><span class="pre">parametrize</span></code> decorator added to <code class="docutils literal notranslate"><span class="pre">numpy.testing</span></code></a></li>
<li><a class="reference internal" href="#chebinterpolate-function-added-to-numpy-polynomial-chebyshev"><code class="docutils literal notranslate"><span class="pre">chebinterpolate</span></code> function added to <code class="docutils literal notranslate"><span class="pre">numpy.polynomial.chebyshev</span></code></a></li>
<li><a class="reference internal" href="#support-for-reading-lzma-compressed-text-files-in-python-3">Support for reading lzma compressed text files in Python 3</a></li>
<li><a class="reference internal" href="#sign-option-added-to-np-setprintoptions-and-np-array2string"><code class="docutils literal notranslate"><span class="pre">sign</span></code> option added to <code class="docutils literal notranslate"><span class="pre">np.setprintoptions</span></code> and <code class="docutils literal notranslate"><span class="pre">np.array2string</span></code></a></li>
<li><a class="reference internal" href="#hermitian-option-added-to-np-linalg-matrix-rank"><code class="docutils literal notranslate"><span class="pre">hermitian</span></code> option added to``np.linalg.matrix_rank``</a></li>
<li><a class="reference internal" href="#threshold-and-edgeitems-options-added-to-np-array2string"><code class="docutils literal notranslate"><span class="pre">threshold</span></code> and <code class="docutils literal notranslate"><span class="pre">edgeitems</span></code> options added to <code class="docutils literal notranslate"><span class="pre">np.array2string</span></code></a></li>
<li><a class="reference internal" href="#concatenate-and-stack-gained-an-out-argument"><code class="docutils literal notranslate"><span class="pre">concatenate</span></code> and <code class="docutils literal notranslate"><span class="pre">stack</span></code> gained an <code class="docutils literal notranslate"><span class="pre">out</span></code> argument</a></li>
<li><a class="reference internal" href="#support-for-pgi-flang-compiler-on-windows">Support for PGI flang compiler on Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id72">Improvements</a><ul>
<li><a class="reference internal" href="#numerator-degrees-of-freedom-in-random-noncentral-f-need-only-be-positive">Numerator degrees of freedom in <code class="docutils literal notranslate"><span class="pre">random.noncentral_f</span></code> need only be positive.</a></li>
<li><a class="reference internal" href="#the-gil-is-released-for-all-np-einsum-variations">The GIL is released for all <code class="docutils literal notranslate"><span class="pre">np.einsum</span></code> variations</a></li>
<li><a class="reference internal" href="#the-np-einsum-function-will-use-blas-when-possible-and-optimize-by-default">The <em class="xref py py-obj">np.einsum</em> function will use BLAS when possible and optimize by default</a></li>
<li><a class="reference internal" href="#f2py-now-handles-arrays-of-dimension-0"><code class="docutils literal notranslate"><span class="pre">f2py</span></code> now handles arrays of dimension 0</a></li>
<li><a class="reference internal" href="#numpy-distutils-supports-using-msvc-and-mingw64-gfortran-together"><code class="docutils literal notranslate"><span class="pre">numpy.distutils</span></code> supports using MSVC and mingw64-gfortran together</a></li>
<li><a class="reference internal" href="#np-linalg-pinv-now-works-on-stacked-matrices"><code class="docutils literal notranslate"><span class="pre">np.linalg.pinv</span></code> now works on stacked matrices</a></li>
<li><a class="reference internal" href="#numpy-save-aligns-data-to-64-bytes-instead-of-16"><code class="docutils literal notranslate"><span class="pre">numpy.save</span></code> aligns data to 64 bytes instead of 16</a></li>
<li><a class="reference internal" href="#npz-files-now-can-be-written-without-using-temporary-files">NPZ files now can be written without using temporary files</a></li>
<li><a class="reference internal" href="#better-support-for-empty-structured-and-string-types">Better support for empty structured and string types</a></li>
<li><a class="reference internal" href="#support-for-decimal-decimal-in-np-lib-financial">Support for <code class="docutils literal notranslate"><span class="pre">decimal.Decimal</span></code> in <code class="docutils literal notranslate"><span class="pre">np.lib.financial</span></code></a></li>
<li><a class="reference internal" href="#float-printing-now-uses-dragon4-algorithm-for-shortest-decimal-representation">Float printing now uses “dragon4” algorithm for shortest decimal representation</a></li>
<li><a class="reference internal" href="#void-datatype-elements-are-now-printed-in-hex-notation"><code class="docutils literal notranslate"><span class="pre">void</span></code> datatype elements are now printed in hex notation</a></li>
<li><a class="reference internal" href="#printing-style-for-void-datatypes-is-now-independently-customizable">printing style for <code class="docutils literal notranslate"><span class="pre">void</span></code> datatypes is now independently customizable</a></li>
<li><a class="reference internal" href="#reduced-memory-usage-of-np-loadtxt">Reduced memory usage of <code class="docutils literal notranslate"><span class="pre">np.loadtxt</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#id73">Changes</a><ul>
<li><a class="reference internal" href="#multiple-field-indexing-assignment-of-structured-arrays">Multiple-field indexing/assignment of structured arrays</a></li>
<li><a class="reference internal" href="#integer-and-void-scalars-are-now-unaffected-by-np-set-string-function">Integer and Void scalars are now unaffected by <code class="docutils literal notranslate"><span class="pre">np.set_string_function</span></code></a></li>
<li><a class="reference internal" href="#d-array-printing-changed-style-arg-of-array2string-deprecated">0d array printing changed, <code class="docutils literal notranslate"><span class="pre">style</span></code> arg of array2string deprecated</a></li>
<li><a class="reference internal" href="#seeding-randomstate-using-an-array-requires-a-1-d-array">Seeding <code class="docutils literal notranslate"><span class="pre">RandomState</span></code> using an array requires a 1-d array</a></li>
<li><a class="reference internal" href="#maskedarray-objects-show-a-more-useful-repr"><code class="docutils literal notranslate"><span class="pre">MaskedArray</span></code> objects show a more useful <code class="docutils literal notranslate"><span class="pre">repr</span></code></a></li>
<li><a class="reference internal" href="#the-repr-of-np-polynomial-classes-is-more-explicit">The <code class="docutils literal notranslate"><span class="pre">repr</span></code> of <code class="docutils literal notranslate"><span class="pre">np.polynomial</span></code> classes is more explicit</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-13-3-release-notes">NumPy 1.13.3 Release Notes</a><ul>
<li><a class="reference internal" href="#id74">Contributors</a></li>
<li><a class="reference internal" href="#id75">Pull requests merged</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-13-2-release-notes">NumPy 1.13.2 Release Notes</a><ul>
<li><a class="reference internal" href="#id76">Contributors</a></li>
<li><a class="reference internal" href="#id77">Pull requests merged</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-13-1-release-notes">NumPy 1.13.1 Release Notes</a><ul>
<li><a class="reference internal" href="#id79">Pull requests merged</a></li>
<li><a class="reference internal" href="#id80">Contributors</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-13-0-release-notes">NumPy 1.13.0 Release Notes</a><ul>
<li><a class="reference internal" href="#id81">Highlights</a></li>
<li><a class="reference internal" href="#id82">New functions</a></li>
<li><a class="reference internal" href="#id83">Deprecations</a></li>
<li><a class="reference internal" href="#id84">Future Changes</a></li>
<li><a class="reference internal" href="#build-system-changes">Build System Changes</a></li>
<li><a class="reference internal" href="#id85">Compatibility notes</a><ul>
<li><a class="reference internal" href="#error-type-changes">Error type changes</a></li>
<li><a class="reference internal" href="#tuple-object-dtypes">Tuple object dtypes</a></li>
<li><a class="reference internal" href="#deprecationwarning-to-error">DeprecationWarning to error</a></li>
<li><a class="reference internal" href="#futurewarning-to-changed-behavior">FutureWarning to changed behavior</a></li>
<li><a class="reference internal" href="#dtypes-are-now-always-true">dtypes are now always true</a></li>
<li><a class="reference internal" href="#getslice-and-setslice-are-no-longer-needed-in-ndarray-subclasses"><code class="docutils literal notranslate"><span class="pre">__getslice__</span></code> and <code class="docutils literal notranslate"><span class="pre">__setslice__</span></code> are no longer needed in <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> subclasses</a></li>
<li><a class="reference internal" href="#indexing-maskedarrays-constants-with-ellipsis-now-returns-maskedarray">Indexing MaskedArrays/Constants with <code class="docutils literal notranslate"><span class="pre">...</span></code> (ellipsis) now returns MaskedArray</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id86">C API changes</a><ul>
<li><a class="reference internal" href="#gufuncs-on-empty-arrays-and-npyiter-axis-removal">GUfuncs on empty arrays and NpyIter axis removal</a></li>
<li><a class="reference internal" href="#pyarray-mapiterarraycopyifoverlap-added-to-numpy-c-api"><code class="docutils literal notranslate"><span class="pre">PyArray_MapIterArrayCopyIfOverlap</span></code> added to NumPy C-API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id87">New Features</a><ul>
<li><a class="reference internal" href="#array-ufunc-added"><code class="docutils literal notranslate"><span class="pre">__array_ufunc__</span></code> added</a></li>
<li><a class="reference internal" href="#new-positive-ufunc">New <code class="docutils literal notranslate"><span class="pre">positive</span></code> ufunc</a></li>
<li><a class="reference internal" href="#new-divmod-ufunc">New <code class="docutils literal notranslate"><span class="pre">divmod</span></code> ufunc</a></li>
<li><a class="reference internal" href="#np-isnat-ufunc-tests-for-nat-special-datetime-and-timedelta-values"><code class="docutils literal notranslate"><span class="pre">np.isnat</span></code> ufunc tests for NaT special datetime and timedelta values</a></li>
<li><a class="reference internal" href="#np-heaviside-ufunc-computes-the-heaviside-function"><code class="docutils literal notranslate"><span class="pre">np.heaviside</span></code> ufunc computes the Heaviside function</a></li>
<li><a class="reference internal" href="#np-block-function-for-creating-blocked-arrays"><code class="docutils literal notranslate"><span class="pre">np.block</span></code> function for creating blocked arrays</a></li>
<li><a class="reference internal" href="#isin-function-improving-on-in1d"><code class="docutils literal notranslate"><span class="pre">isin</span></code> function, improving on <code class="docutils literal notranslate"><span class="pre">in1d</span></code></a></li>
<li><a class="reference internal" href="#temporary-elision">Temporary elision</a></li>
<li><a class="reference internal" href="#axes-argument-for-unique"><code class="docutils literal notranslate"><span class="pre">axes</span></code> argument for <code class="docutils literal notranslate"><span class="pre">unique</span></code></a></li>
<li><a class="reference internal" href="#np-gradient-now-supports-unevenly-spaced-data"><code class="docutils literal notranslate"><span class="pre">np.gradient</span></code> now supports unevenly spaced data</a></li>
<li><a class="reference internal" href="#support-for-returning-arrays-of-arbitrary-dimensions-in-apply-along-axis">Support for returning arrays of arbitrary dimensions in <code class="docutils literal notranslate"><span class="pre">apply_along_axis</span></code></a></li>
<li><a class="reference internal" href="#ndim-property-added-to-dtype-to-complement-shape"><code class="docutils literal notranslate"><span class="pre">.ndim</span></code> property added to <code class="docutils literal notranslate"><span class="pre">dtype</span></code> to complement <code class="docutils literal notranslate"><span class="pre">.shape</span></code></a></li>
<li><a class="reference internal" href="#support-for-tracemalloc-in-python-3-6">Support for tracemalloc in Python 3.6</a></li>
<li><a class="reference internal" href="#numpy-may-be-built-with-relaxed-stride-checking-debugging">NumPy may be built with relaxed stride checking debugging</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id88">Improvements</a><ul>
<li><a class="reference internal" href="#ufunc-behavior-for-overlapping-inputs">Ufunc behavior for overlapping inputs</a></li>
<li><a class="reference internal" href="#partial-support-for-64-bit-f2py-extensions-with-mingw">Partial support for 64-bit f2py extensions with MinGW</a></li>
<li><a class="reference internal" href="#performance-improvements-for-packbits-and-unpackbits">Performance improvements for <code class="docutils literal notranslate"><span class="pre">packbits</span></code> and <code class="docutils literal notranslate"><span class="pre">unpackbits</span></code></a></li>
<li><a class="reference internal" href="#fix-for-ppc-long-double-floating-point-information">Fix for PPC long double floating point information</a></li>
<li><a class="reference internal" href="#better-default-repr-for-ndarray-subclasses">Better default repr for <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> subclasses</a></li>
<li><a class="reference internal" href="#more-reliable-comparisons-of-masked-arrays">More reliable comparisons of masked arrays</a></li>
<li><a class="reference internal" href="#np-matrix-with-booleans-elements-can-now-be-created-using-the-string-syntax">np.matrix with booleans elements can now be created using the string syntax</a></li>
<li><a class="reference internal" href="#more-linalg-operations-now-accept-empty-vectors-and-matrices">More <code class="docutils literal notranslate"><span class="pre">linalg</span></code> operations now accept empty vectors and matrices</a></li>
<li><a class="reference internal" href="#bundled-version-of-lapack-is-now-3-2-2">Bundled version of LAPACK is now 3.2.2</a></li>
<li><a class="reference internal" href="#reduce-of-np-hypot-reduce-and-np-logical-xor-allowed-in-more-cases"><code class="docutils literal notranslate"><span class="pre">reduce</span></code> of <code class="docutils literal notranslate"><span class="pre">np.hypot.reduce</span></code> and <code class="docutils literal notranslate"><span class="pre">np.logical_xor</span></code> allowed in more cases</a></li>
<li><a class="reference internal" href="#better-repr-of-object-arrays">Better <code class="docutils literal notranslate"><span class="pre">repr</span></code> of object arrays</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id89">Changes</a><ul>
<li><a class="reference internal" href="#argsort-on-masked-arrays-takes-the-same-default-arguments-as-sort"><code class="docutils literal notranslate"><span class="pre">argsort</span></code> on masked arrays takes the same default arguments as <code class="docutils literal notranslate"><span class="pre">sort</span></code></a></li>
<li><a class="reference internal" href="#average-now-preserves-subclasses"><code class="docutils literal notranslate"><span class="pre">average</span></code> now preserves subclasses</a></li>
<li><a class="reference internal" href="#array-none-and-array-none-do-element-wise-comparison"><code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">==</span> <span class="pre">None</span></code> and <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">!=</span> <span class="pre">None</span></code> do element-wise comparison</a></li>
<li><a class="reference internal" href="#np-equal-np-not-equal-for-object-arrays-ignores-object-identity"><code class="docutils literal notranslate"><span class="pre">np.equal,</span> <span class="pre">np.not_equal</span></code> for object arrays ignores object identity</a></li>
<li><a class="reference internal" href="#boolean-indexing-changes">Boolean indexing changes</a></li>
<li><a class="reference internal" href="#np-random-multivariate-normal-behavior-with-bad-covariance-matrix"><code class="docutils literal notranslate"><span class="pre">np.random.multivariate_normal</span></code> behavior with bad covariance matrix</a></li>
<li><a class="reference internal" href="#assert-array-less-compares-np-inf-and-np-inf-now"><code class="docutils literal notranslate"><span class="pre">assert_array_less</span></code> compares <code class="docutils literal notranslate"><span class="pre">np.inf</span></code> and <code class="docutils literal notranslate"><span class="pre">-np.inf</span></code> now</a></li>
<li><a class="reference internal" href="#assert-array-and-masked-arrays-assert-equal-hide-less-warnings"><code class="docutils literal notranslate"><span class="pre">assert_array_</span></code> and masked arrays <code class="docutils literal notranslate"><span class="pre">assert_equal</span></code> hide less warnings</a></li>
<li><a class="reference internal" href="#offset-attribute-value-in-memmap-objects"><code class="docutils literal notranslate"><span class="pre">offset</span></code> attribute value in <code class="docutils literal notranslate"><span class="pre">memmap</span></code> objects</a></li>
<li><a class="reference internal" href="#np-real-and-np-imag-return-scalars-for-scalar-inputs"><code class="docutils literal notranslate"><span class="pre">np.real</span></code> and <code class="docutils literal notranslate"><span class="pre">np.imag</span></code> return scalars for scalar inputs</a></li>
<li><a class="reference internal" href="#the-polynomial-convenience-classes-cannot-be-passed-to-ufuncs">The polynomial convenience classes cannot be passed to ufuncs</a></li>
<li><a class="reference internal" href="#output-arguments-to-ufuncs-can-be-tuples-also-for-ufunc-methods">Output arguments to ufuncs can be tuples also for ufunc methods</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-12-1-release-notes">NumPy 1.12.1 Release Notes</a><ul>
<li><a class="reference internal" href="#bugs-fixed">Bugs Fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-12-0-release-notes">NumPy 1.12.0 Release Notes</a><ul>
<li><a class="reference internal" href="#id90">Highlights</a></li>
<li><a class="reference internal" href="#dropped-support">Dropped Support</a></li>
<li><a class="reference internal" href="#added-support">Added Support</a></li>
<li><a class="reference internal" href="#id91">Build System Changes</a></li>
<li><a class="reference internal" href="#id92">Deprecations</a><ul>
<li><a class="reference internal" href="#assignment-of-ndarray-object-s-data-attribute">Assignment of ndarray object’s <code class="docutils literal notranslate"><span class="pre">data</span></code> attribute</a></li>
<li><a class="reference internal" href="#unsafe-int-casting-of-the-num-attribute-in-linspace">Unsafe int casting of the num attribute in <code class="docutils literal notranslate"><span class="pre">linspace</span></code></a></li>
<li><a class="reference internal" href="#insufficient-bit-width-parameter-to-binary-repr">Insufficient bit width parameter to <code class="docutils literal notranslate"><span class="pre">binary_repr</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#id93">Future Changes</a><ul>
<li><a class="reference internal" href="#multiple-field-manipulation-of-structured-arrays">Multiple-field manipulation of structured arrays</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id94">Compatibility notes</a><ul>
<li><a class="reference internal" href="#id95">DeprecationWarning to error</a></li>
<li><a class="reference internal" href="#id96">FutureWarning to changed behavior</a></li>
<li><a class="reference internal" href="#power-and-raise-errors-for-integer-to-negative-integer-powers"><code class="docutils literal notranslate"><span class="pre">power</span></code> and <code class="docutils literal notranslate"><span class="pre">**</span></code> raise errors for integer to negative integer powers</a></li>
<li><a class="reference internal" href="#relaxed-stride-checking-is-the-default">Relaxed stride checking is the default</a></li>
<li><a class="reference internal" href="#the-np-percentile-midpoint-interpolation-method-fixed-for-exact-indices">The <code class="docutils literal notranslate"><span class="pre">np.percentile</span></code> ‘midpoint’ interpolation method fixed for exact indices</a></li>
<li><a class="reference internal" href="#keepdims-kwarg-is-passed-through-to-user-class-methods"><code class="docutils literal notranslate"><span class="pre">keepdims</span></code> kwarg is passed through to user-class methods</a></li>
<li><a class="reference internal" href="#bitwise-and-identity-changed"><code class="docutils literal notranslate"><span class="pre">bitwise_and</span></code> identity changed</a></li>
<li><a class="reference internal" href="#ma-median-warns-and-returns-nan-when-unmasked-invalid-values-are-encountered">ma.median warns and returns nan when unmasked invalid values are encountered</a></li>
<li><a class="reference internal" href="#greater-consistency-in-assert-almost-equal">Greater consistency in <code class="docutils literal notranslate"><span class="pre">assert_almost_equal</span></code></a></li>
<li><a class="reference internal" href="#nosetester-behaviour-of-warnings-during-testing"><code class="docutils literal notranslate"><span class="pre">NoseTester</span></code> behaviour of warnings during testing</a></li>
<li><a class="reference internal" href="#assert-warns-and-deprecated-decorator-more-specific"><code class="docutils literal notranslate"><span class="pre">assert_warns</span></code> and <code class="docutils literal notranslate"><span class="pre">deprecated</span></code> decorator more specific</a></li>
<li><a class="reference internal" href="#id97">C API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id98">New Features</a><ul>
<li><a class="reference internal" href="#writeable-keyword-argument-for-as-strided">Writeable keyword argument for <code class="docutils literal notranslate"><span class="pre">as_strided</span></code></a></li>
<li><a class="reference internal" href="#axes-keyword-argument-for-rot90"><code class="docutils literal notranslate"><span class="pre">axes</span></code> keyword argument for <code class="docutils literal notranslate"><span class="pre">rot90</span></code></a></li>
<li><a class="reference internal" href="#generalized-flip">Generalized <code class="docutils literal notranslate"><span class="pre">flip</span></code></a></li>
<li><a class="reference internal" href="#blis-support-in-numpy-distutils">BLIS support in <code class="docutils literal notranslate"><span class="pre">numpy.distutils</span></code></a></li>
<li><a class="reference internal" href="#hook-in-numpy-init-py-to-run-distribution-specific-checks">Hook in <code class="docutils literal notranslate"><span class="pre">numpy/__init__.py</span></code> to run distribution-specific checks</a></li>
<li><a class="reference internal" href="#new-nanfunctions-nancumsum-and-nancumprod-added">New nanfunctions <code class="docutils literal notranslate"><span class="pre">nancumsum</span></code> and <code class="docutils literal notranslate"><span class="pre">nancumprod</span></code> added</a></li>
<li><a class="reference internal" href="#np-interp-can-now-interpolate-complex-values"><code class="docutils literal notranslate"><span class="pre">np.interp</span></code> can now interpolate complex values</a></li>
<li><a class="reference internal" href="#new-polynomial-evaluation-function-polyvalfromroots-added">New polynomial evaluation function <code class="docutils literal notranslate"><span class="pre">polyvalfromroots</span></code> added</a></li>
<li><a class="reference internal" href="#new-array-creation-function-geomspace-added">New array creation function <code class="docutils literal notranslate"><span class="pre">geomspace</span></code> added</a></li>
<li><a class="reference internal" href="#new-context-manager-for-testing-warnings">New context manager for testing warnings</a></li>
<li><a class="reference internal" href="#new-masked-array-functions-ma-convolve-and-ma-correlate-added">New masked array functions <code class="docutils literal notranslate"><span class="pre">ma.convolve</span></code> and <code class="docutils literal notranslate"><span class="pre">ma.correlate</span></code> added</a></li>
<li><a class="reference internal" href="#new-float-power-ufunc">New <code class="docutils literal notranslate"><span class="pre">float_power</span></code> ufunc</a></li>
<li><a class="reference internal" href="#np-loadtxt-now-supports-a-single-integer-as-usecol-argument"><code class="docutils literal notranslate"><span class="pre">np.loadtxt</span></code> now supports a single integer as <code class="docutils literal notranslate"><span class="pre">usecol</span></code> argument</a></li>
<li><a class="reference internal" href="#improved-automated-bin-estimators-for-histogram">Improved automated bin estimators for <code class="docutils literal notranslate"><span class="pre">histogram</span></code></a></li>
<li><a class="reference internal" href="#np-roll-can-now-roll-multiple-axes-at-the-same-time"><code class="docutils literal notranslate"><span class="pre">np.roll</span></code> can now roll multiple axes at the same time</a></li>
<li><a class="reference internal" href="#the-complex-method-has-been-implemented-for-the-ndarrays">The <code class="docutils literal notranslate"><span class="pre">__complex__</span></code> method has been implemented for the ndarrays</a></li>
<li><a class="reference internal" href="#pathlib-path-objects-now-supported"><code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code> objects now supported</a></li>
<li><a class="reference internal" href="#new-bits-attribute-for-np-finfo">New <code class="docutils literal notranslate"><span class="pre">bits</span></code> attribute for <code class="docutils literal notranslate"><span class="pre">np.finfo</span></code></a></li>
<li><a class="reference internal" href="#new-signature-argument-to-np-vectorize">New <code class="docutils literal notranslate"><span class="pre">signature</span></code> argument to <code class="docutils literal notranslate"><span class="pre">np.vectorize</span></code></a></li>
<li><a class="reference internal" href="#emit-py3kwarnings-for-division-of-integer-arrays">Emit py3kwarnings for division of integer arrays</a></li>
<li><a class="reference internal" href="#numpy-sctypes-now-includes-bytes-on-python3-too">numpy.sctypes now includes bytes on Python3 too</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id99">Improvements</a><ul>
<li><a class="reference internal" href="#id100"><code class="docutils literal notranslate"><span class="pre">bitwise_and</span></code> identity changed</a></li>
<li><a class="reference internal" href="#generalized-ufuncs-will-now-unlock-the-gil">Generalized Ufuncs will now unlock the GIL</a></li>
<li><a class="reference internal" href="#caches-in-np-fft-are-now-bounded-in-total-size-and-item-count">Caches in <em class="xref py py-obj">np.fft</em> are now bounded in total size and item count</a></li>
<li><a class="reference internal" href="#improved-handling-of-zero-width-string-unicode-dtypes">Improved handling of zero-width string/unicode dtypes</a></li>
<li><a class="reference internal" href="#integer-ufuncs-vectorized-with-avx2">Integer ufuncs vectorized with AVX2</a></li>
<li><a class="reference internal" href="#order-of-operations-optimization-in-np-einsum">Order of operations optimization in <code class="docutils literal notranslate"><span class="pre">np.einsum</span></code></a></li>
<li><a class="reference internal" href="#quicksort-has-been-changed-to-an-introsort">quicksort has been changed to an introsort</a></li>
<li><a class="reference internal" href="#ediff1d-improved-performance-and-subclass-handling"><code class="docutils literal notranslate"><span class="pre">ediff1d</span></code> improved performance and subclass handling</a></li>
<li><a class="reference internal" href="#improved-precision-of-ndarray-mean-for-float16-arrays">Improved precision of <code class="docutils literal notranslate"><span class="pre">ndarray.mean</span></code> for float16 arrays</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id101">Changes</a><ul>
<li><a class="reference internal" href="#all-array-like-methods-are-now-called-with-keyword-arguments-in-fromnumeric-py">All array-like methods are now called with keyword arguments in fromnumeric.py</a></li>
<li><a class="reference internal" href="#operations-on-np-memmap-objects-return-numpy-arrays-in-most-cases">Operations on np.memmap objects return numpy arrays in most cases</a></li>
<li><a class="reference internal" href="#stacklevel-of-warnings-increased">stacklevel of warnings increased</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-11-3-release-notes">NumPy 1.11.3 Release Notes</a><ul>
<li><a class="reference internal" href="#contributors-to-maintenance-1-11-3">Contributors to maintenance/1.11.3</a></li>
<li><a class="reference internal" href="#id102">Pull Requests Merged</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-11-2-release-notes">NumPy 1.11.2 Release Notes</a><ul>
<li><a class="reference internal" href="#id103">Pull Requests Merged</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-11-1-release-notes">NumPy 1.11.1 Release Notes</a><ul>
<li><a class="reference internal" href="#fixes-merged">Fixes Merged</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-11-0-release-notes">NumPy 1.11.0 Release Notes</a><ul>
<li><a class="reference internal" href="#id104">Highlights</a></li>
<li><a class="reference internal" href="#id105">Build System Changes</a></li>
<li><a class="reference internal" href="#id106">Future Changes</a></li>
<li><a class="reference internal" href="#id107">Compatibility notes</a><ul>
<li><a class="reference internal" href="#datetime64-changes">datetime64 changes</a></li>
<li><a class="reference internal" href="#linalg-norm-return-type-changes"><code class="docutils literal notranslate"><span class="pre">linalg.norm</span></code> return type changes</a></li>
<li><a class="reference internal" href="#polynomial-fit-changes">polynomial fit changes</a></li>
<li><a class="reference internal" href="#np-dot-now-raises-typeerror-instead-of-valueerror"><em>np.dot</em> now raises <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> instead of <code class="docutils literal notranslate"><span class="pre">ValueError</span></code></a></li>
<li><a class="reference internal" href="#id108">FutureWarning to changed behavior</a></li>
<li><a class="reference internal" href="#and-operators"><code class="docutils literal notranslate"><span class="pre">%</span></code> and <code class="docutils literal notranslate"><span class="pre">//</span></code> operators</a></li>
<li><a class="reference internal" href="#id109">C API</a></li>
<li><a class="reference internal" href="#object-dtype-detection-for-old-style-classes">object dtype detection for old-style classes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id110">New Features</a></li>
<li><a class="reference internal" href="#id111">Improvements</a><ul>
<li><a class="reference internal" href="#np-gradient-now-supports-an-axis-argument"><code class="docutils literal notranslate"><span class="pre">np.gradient</span></code> now supports an <code class="docutils literal notranslate"><span class="pre">axis</span></code> argument</a></li>
<li><a class="reference internal" href="#np-lexsort-now-supports-arrays-with-object-data-type"><code class="docutils literal notranslate"><span class="pre">np.lexsort</span></code> now supports arrays with object data-type</a></li>
<li><a class="reference internal" href="#np-ma-core-maskedarray-now-supports-an-order-argument"><code class="docutils literal notranslate"><span class="pre">np.ma.core.MaskedArray</span></code> now supports an <code class="docutils literal notranslate"><span class="pre">order</span></code> argument</a></li>
<li><a class="reference internal" href="#memory-and-speed-improvements-for-masked-arrays">Memory and speed improvements for masked arrays</a></li>
<li><a class="reference internal" href="#ndarray-tofile-now-uses-fallocate-on-linux"><code class="docutils literal notranslate"><span class="pre">ndarray.tofile</span></code> now uses fallocate on linux</a></li>
<li><a class="reference internal" href="#optimizations-for-operations-of-the-form-a-t-a-and-a-a-t">Optimizations for operations of the form <code class="docutils literal notranslate"><span class="pre">A.T</span> <span class="pre">&#64;</span> <span class="pre">A</span></code> and <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&#64;</span> <span class="pre">A.T</span></code></a></li>
<li><a class="reference internal" href="#np-testing-assert-warns-can-now-be-used-as-a-context-manager"><code class="docutils literal notranslate"><span class="pre">np.testing.assert_warns</span></code> can now be used as a context manager</a></li>
<li><a class="reference internal" href="#speed-improvement-for-np-random-shuffle">Speed improvement for np.random.shuffle</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id112">Changes</a><ul>
<li><a class="reference internal" href="#pyrex-support-was-removed-from-numpy-distutils">Pyrex support was removed from <code class="docutils literal notranslate"><span class="pre">numpy.distutils</span></code></a></li>
<li><a class="reference internal" href="#np-broadcast-can-now-be-called-with-a-single-argument"><code class="docutils literal notranslate"><span class="pre">np.broadcast</span></code> can now be called with a single argument</a></li>
<li><a class="reference internal" href="#np-trace-now-respects-array-subclasses"><code class="docutils literal notranslate"><span class="pre">np.trace</span></code> now respects array subclasses</a></li>
<li><a class="reference internal" href="#id113"><code class="docutils literal notranslate"><span class="pre">np.dot</span></code> now raises <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> instead of <code class="docutils literal notranslate"><span class="pre">ValueError</span></code></a></li>
<li><a class="reference internal" href="#id114"><code class="docutils literal notranslate"><span class="pre">linalg.norm</span></code> return type changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id115">Deprecations</a><ul>
<li><a class="reference internal" href="#views-of-arrays-in-fortran-order">Views of arrays in Fortran order</a></li>
<li><a class="reference internal" href="#invalid-arguments-for-array-ordering">Invalid arguments for array ordering</a></li>
<li><a class="reference internal" href="#random-number-generator-in-the-testing-namespace">Random number generator in the <code class="docutils literal notranslate"><span class="pre">testing</span></code> namespace</a></li>
<li><a class="reference internal" href="#random-integer-generation-on-a-closed-interval">Random integer generation on a closed interval</a></li>
</ul>
</li>
<li><a class="reference internal" href="#futurewarnings">FutureWarnings</a><ul>
<li><a class="reference internal" href="#assigning-to-slices-views-of-maskedarray">Assigning to slices/views of <code class="docutils literal notranslate"><span class="pre">MaskedArray</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-10-4-release-notes">NumPy 1.10.4 Release Notes</a><ul>
<li><a class="reference internal" href="#id116">Compatibility notes</a></li>
<li><a class="reference internal" href="#issues-fixed">Issues Fixed</a></li>
<li><a class="reference internal" href="#merged-prs">Merged PRs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-10-3-release-notes">NumPy 1.10.3 Release Notes</a></li>
<li><a class="reference internal" href="#numpy-1-10-2-release-notes">NumPy 1.10.2 Release Notes</a><ul>
<li><a class="reference internal" href="#id117">Compatibility notes</a><ul>
<li><a class="reference internal" href="#relaxed-stride-checking-is-no-longer-the-default">Relaxed stride checking is no longer the default</a></li>
<li><a class="reference internal" href="#fix-swig-bug-in-numpy-i">Fix swig bug in <code class="docutils literal notranslate"><span class="pre">numpy.i</span></code></a></li>
<li><a class="reference internal" href="#deprecate-views-changing-dimensions-in-fortran-order">Deprecate views changing dimensions in fortran order</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id118">Issues Fixed</a></li>
<li><a class="reference internal" href="#id119">Merged PRs</a></li>
<li><a class="reference internal" href="#notes">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-10-1-release-notes">NumPy 1.10.1 Release Notes</a></li>
<li><a class="reference internal" href="#numpy-1-10-0-release-notes">NumPy 1.10.0 Release Notes</a><ul>
<li><a class="reference internal" href="#id120">Highlights</a></li>
<li><a class="reference internal" href="#id121">Dropped Support</a></li>
<li><a class="reference internal" href="#id122">Future Changes</a></li>
<li><a class="reference internal" href="#id123">Compatibility notes</a><ul>
<li><a class="reference internal" href="#default-casting-rule-change">Default casting rule change</a></li>
<li><a class="reference internal" href="#numpy-version-string">numpy version string</a></li>
<li><a class="reference internal" href="#relaxed-stride-checking">relaxed stride checking</a></li>
<li><a class="reference internal" href="#concatenation-of-1d-arrays-along-any-but-axis-0-raises-indexerror">Concatenation of 1d arrays along any but <code class="docutils literal notranslate"><span class="pre">axis=0</span></code> raises <code class="docutils literal notranslate"><span class="pre">IndexError</span></code></a></li>
<li><a class="reference internal" href="#np-ravel-np-diagonal-and-np-diag-now-preserve-subtypes"><em>np.ravel</em>, <em>np.diagonal</em> and <em>np.diag</em> now preserve subtypes</a></li>
<li><a class="reference internal" href="#rollaxis-and-swapaxes-always-return-a-view"><em>rollaxis</em> and <em>swapaxes</em> always return a view</a></li>
<li><a class="reference internal" href="#nonzero-now-returns-base-ndarrays"><em>nonzero</em> now returns base ndarrays</a></li>
<li><a class="reference internal" href="#id124">C API</a></li>
<li><a class="reference internal" href="#recarray-field-return-types">recarray field return types</a></li>
<li><a class="reference internal" href="#recarray-views">recarray views</a></li>
<li><a class="reference internal" href="#out-keyword-argument-of-ufuncs-now-accepts-tuples-of-arrays">‘out’ keyword argument of ufuncs now accepts tuples of arrays</a></li>
<li><a class="reference internal" href="#byte-array-indices-now-raises-an-indexerror">byte-array indices now raises an IndexError</a></li>
<li><a class="reference internal" href="#masked-arrays-containing-objects-with-arrays">Masked arrays containing objects with arrays</a></li>
<li><a class="reference internal" href="#median-warns-and-returns-nan-when-invalid-values-are-encountered">Median warns and returns nan when invalid values are encountered</a></li>
<li><a class="reference internal" href="#functions-available-from-numpy-ma-testutils-have-changed">Functions available from numpy.ma.testutils have changed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id125">New Features</a><ul>
<li><a class="reference internal" href="#reading-extra-flags-from-site-cfg">Reading extra flags from site.cfg</a></li>
<li><a class="reference internal" href="#np-cbrt-to-compute-cube-root-for-real-floats"><em>np.cbrt</em> to compute cube root for real floats</a></li>
<li><a class="reference internal" href="#numpy-distutils-now-allows-parallel-compilation">numpy.distutils now allows parallel compilation</a></li>
<li><a class="reference internal" href="#genfromtxt-has-a-new-max-rows-argument"><em>genfromtxt</em> has a new <code class="docutils literal notranslate"><span class="pre">max_rows</span></code> argument</a></li>
<li><a class="reference internal" href="#new-function-np-broadcast-to-for-invoking-array-broadcasting">New function <em>np.broadcast_to</em> for invoking array broadcasting</a></li>
<li><a class="reference internal" href="#new-context-manager-clear-and-catch-warnings-for-testing-warnings">New context manager <em>clear_and_catch_warnings</em> for testing warnings</a></li>
<li><a class="reference internal" href="#cov-has-new-fweights-and-aweights-arguments"><em>cov</em> has new <code class="docutils literal notranslate"><span class="pre">fweights</span></code> and <code class="docutils literal notranslate"><span class="pre">aweights</span></code> arguments</a></li>
<li><a class="reference internal" href="#support-for-the-operator-in-python-3-5">Support for the ‘&#64;’ operator in Python 3.5+</a></li>
<li><a class="reference internal" href="#new-argument-norm-to-fft-functions">New argument <code class="docutils literal notranslate"><span class="pre">norm</span></code> to fft functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id126">Improvements</a><ul>
<li><a class="reference internal" href="#np-digitize-using-binary-search"><em>np.digitize</em> using binary search</a></li>
<li><a class="reference internal" href="#np-poly-now-casts-integer-inputs-to-float"><em>np.poly</em> now casts integer inputs to float</a></li>
<li><a class="reference internal" href="#np-interp-can-now-be-used-with-periodic-functions"><em>np.interp</em> can now be used with periodic functions</a></li>
<li><a class="reference internal" href="#np-pad-supports-more-input-types-for-pad-width-and-constant-values"><em>np.pad</em> supports more input types for <code class="docutils literal notranslate"><span class="pre">pad_width</span></code> and <code class="docutils literal notranslate"><span class="pre">constant_values</span></code></a></li>
<li><a class="reference internal" href="#np-argmax-and-np-argmin-now-support-an-out-argument"><em>np.argmax</em> and <em>np.argmin</em> now support an <code class="docutils literal notranslate"><span class="pre">out</span></code> argument</a></li>
<li><a class="reference internal" href="#more-system-c99-complex-functions-detected-and-used">More system C99 complex functions detected and used</a></li>
<li><a class="reference internal" href="#np-loadtxt-support-for-the-strings-produced-by-the-float-hex-method"><em>np.loadtxt</em> support for the strings produced by the <code class="docutils literal notranslate"><span class="pre">float.hex</span></code> method</a></li>
<li><a class="reference internal" href="#np-isclose-properly-handles-minimal-values-of-integer-dtypes"><em>np.isclose</em> properly handles minimal values of integer dtypes</a></li>
<li><a class="reference internal" href="#np-allclose-uses-np-isclose-internally"><em>np.allclose</em> uses <em>np.isclose</em> internally.</a></li>
<li><a class="reference internal" href="#np-genfromtxt-now-handles-large-integers-correctly"><em>np.genfromtxt</em> now handles large integers correctly</a></li>
<li><a class="reference internal" href="#np-load-np-save-have-pickle-backward-compatibility-flags"><em>np.load</em>, <em>np.save</em> have pickle backward compatibility flags</a></li>
<li><a class="reference internal" href="#maskedarray-support-for-more-complicated-base-classes">MaskedArray support for more complicated base classes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id127">Changes</a><ul>
<li><a class="reference internal" href="#dotblas-functionality-moved-to-multiarray">dotblas functionality moved to multiarray</a></li>
<li><a class="reference internal" href="#stricter-check-of-gufunc-signature-compliance">stricter check of gufunc signature compliance</a></li>
<li><a class="reference internal" href="#views-returned-from-np-einsum-are-writeable">views returned from <em>np.einsum</em> are writeable</a></li>
<li><a class="reference internal" href="#np-argmin-skips-nat-values"><em>np.argmin</em> skips NaT values</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id128">Deprecations</a><ul>
<li><a class="reference internal" href="#array-comparisons-involving-strings-or-structured-dtypes">Array comparisons involving strings or structured dtypes</a></li>
<li><a class="reference internal" href="#safeeval">SafeEval</a></li>
<li><a class="reference internal" href="#alterdot-restoredot">alterdot, restoredot</a></li>
<li><a class="reference internal" href="#pkgload-packageloader">pkgload, PackageLoader</a></li>
<li><a class="reference internal" href="#bias-ddof-arguments-to-corrcoef">bias, ddof arguments to corrcoef</a></li>
<li><a class="reference internal" href="#dtype-string-representation-changes">dtype string representation changes</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-9-2-release-notes">NumPy 1.9.2 Release Notes</a><ul>
<li><a class="reference internal" href="#id129">Issues fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-9-1-release-notes">NumPy 1.9.1 Release Notes</a><ul>
<li><a class="reference internal" href="#id130">Issues fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-9-0-release-notes">NumPy 1.9.0 Release Notes</a><ul>
<li><a class="reference internal" href="#id131">Highlights</a></li>
<li><a class="reference internal" href="#id132">Dropped Support</a></li>
<li><a class="reference internal" href="#id133">Future Changes</a></li>
<li><a class="reference internal" href="#id134">Compatibility notes</a><ul>
<li><a class="reference internal" href="#the-diagonal-and-diag-functions-return-readonly-views">The diagonal and diag functions return readonly views.</a></li>
<li><a class="reference internal" href="#special-scalar-float-values-don-t-cause-upcast-to-double-anymore">Special scalar float values don’t cause upcast to double anymore</a></li>
<li><a class="reference internal" href="#percentile-output-changes">Percentile output changes</a></li>
<li><a class="reference internal" href="#ndarray-tofile-exception-type">ndarray.tofile exception type</a></li>
<li><a class="reference internal" href="#invalid-fill-value-exceptions">Invalid fill value exceptions</a></li>
<li><a class="reference internal" href="#polynomial-classes-no-longer-derived-from-polybase">Polynomial Classes no longer derived from PolyBase</a></li>
<li><a class="reference internal" href="#using-numpy-random-binomial-may-change-the-rng-state-vs-numpy-1-9">Using numpy.random.binomial may change the RNG state vs. numpy &lt; 1.9</a></li>
<li><a class="reference internal" href="#random-seed-enforced-to-be-a-32-bit-unsigned-integer">Random seed enforced to be a 32 bit unsigned integer</a></li>
<li><a class="reference internal" href="#argmin-and-argmax-out-argument">Argmin and argmax out argument</a></li>
<li><a class="reference internal" href="#einsum">Einsum</a></li>
<li><a class="reference internal" href="#indexing">Indexing</a></li>
<li><a class="reference internal" href="#non-integer-reduction-axis-indexes-are-deprecated">Non-integer reduction axis indexes are deprecated</a></li>
<li><a class="reference internal" href="#promote-types-and-string-dtype"><code class="docutils literal notranslate"><span class="pre">promote_types</span></code> and string dtype</a></li>
<li><a class="reference internal" href="#can-cast-and-string-dtype"><code class="docutils literal notranslate"><span class="pre">can_cast</span></code> and string dtype</a></li>
<li><a class="reference internal" href="#astype-and-string-dtype">astype and string dtype</a></li>
<li><a class="reference internal" href="#npyio-recfromcsv-keyword-arguments-change"><em class="xref py py-obj">npyio.recfromcsv</em> keyword arguments change</a></li>
<li><a class="reference internal" href="#the-doc-swig-directory-moved">The <code class="docutils literal notranslate"><span class="pre">doc/swig</span></code> directory moved</a></li>
<li><a class="reference internal" href="#the-npy-3kcompat-h-header-changed">The <code class="docutils literal notranslate"><span class="pre">npy_3kcompat.h</span></code> header changed</a></li>
<li><a class="reference internal" href="#negative-indices-in-c-api-sq-item-and-sq-ass-item-sequence-methods">Negative indices in C-Api <code class="docutils literal notranslate"><span class="pre">sq_item</span></code> and <code class="docutils literal notranslate"><span class="pre">sq_ass_item</span></code> sequence methods</a></li>
<li><a class="reference internal" href="#nditer">NDIter</a></li>
<li><a class="reference internal" href="#zeros-like-for-string-dtypes-now-returns-empty-strings"><code class="docutils literal notranslate"><span class="pre">zeros_like</span></code> for string dtypes now returns empty strings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id135">New Features</a><ul>
<li><a class="reference internal" href="#percentile-supports-more-interpolation-options">Percentile supports more interpolation options</a></li>
<li><a class="reference internal" href="#generalized-axis-support-for-median-and-percentile">Generalized axis support for median and percentile</a></li>
<li><a class="reference internal" href="#dtype-parameter-added-to-np-linspace-and-np-logspace">Dtype parameter added to <code class="docutils literal notranslate"><span class="pre">np.linspace</span></code> and <code class="docutils literal notranslate"><span class="pre">np.logspace</span></code></a></li>
<li><a class="reference internal" href="#more-general-np-triu-and-np-tril-broadcasting">More general <code class="docutils literal notranslate"><span class="pre">np.triu</span></code> and <code class="docutils literal notranslate"><span class="pre">np.tril</span></code> broadcasting</a></li>
<li><a class="reference internal" href="#tobytes-alias-for-tostring-method"><code class="docutils literal notranslate"><span class="pre">tobytes</span></code> alias for <code class="docutils literal notranslate"><span class="pre">tostring</span></code> method</a></li>
<li><a class="reference internal" href="#id136">Build system</a></li>
<li><a class="reference internal" href="#compatibility-to-python-numbers-module">Compatibility to python <code class="docutils literal notranslate"><span class="pre">numbers</span></code> module</a></li>
<li><a class="reference internal" href="#increasing-parameter-added-to-np-vander"><code class="docutils literal notranslate"><span class="pre">increasing</span></code> parameter added to <code class="docutils literal notranslate"><span class="pre">np.vander</span></code></a></li>
<li><a class="reference internal" href="#unique-counts-parameter-added-to-np-unique"><code class="docutils literal notranslate"><span class="pre">unique_counts</span></code> parameter added to <code class="docutils literal notranslate"><span class="pre">np.unique</span></code></a></li>
<li><a class="reference internal" href="#support-for-median-and-percentile-in-nanfunctions">Support for median and percentile in nanfunctions</a></li>
<li><a class="reference internal" href="#numpyversion-class-added">NumpyVersion class added</a></li>
<li><a class="reference internal" href="#allow-saving-arrays-with-large-number-of-named-columns">Allow saving arrays with large number of named columns</a></li>
<li><a class="reference internal" href="#full-broadcasting-support-for-np-cross">Full broadcasting support for <code class="docutils literal notranslate"><span class="pre">np.cross</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#id137">Improvements</a><ul>
<li><a class="reference internal" href="#better-numerical-stability-for-sum-in-some-cases">Better numerical stability for sum in some cases</a></li>
<li><a class="reference internal" href="#percentile-implemented-in-terms-of-np-partition">Percentile implemented in terms of <code class="docutils literal notranslate"><span class="pre">np.partition</span></code></a></li>
<li><a class="reference internal" href="#performance-improvement-for-np-array">Performance improvement for <code class="docutils literal notranslate"><span class="pre">np.array</span></code></a></li>
<li><a class="reference internal" href="#performance-improvement-for-np-searchsorted">Performance improvement for <code class="docutils literal notranslate"><span class="pre">np.searchsorted</span></code></a></li>
<li><a class="reference internal" href="#optional-reduced-verbosity-for-np-distutils">Optional reduced verbosity for np.distutils</a></li>
<li><a class="reference internal" href="#covariance-check-in-np-random-multivariate-normal">Covariance check in <code class="docutils literal notranslate"><span class="pre">np.random.multivariate_normal</span></code></a></li>
<li><a class="reference internal" href="#polynomial-classes-no-longer-template-based">Polynomial Classes no longer template based</a></li>
<li><a class="reference internal" href="#more-gil-releases">More GIL releases</a></li>
<li><a class="reference internal" href="#id138">MaskedArray support for more complicated base classes</a></li>
<li><a class="reference internal" href="#id139">C-API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id140">Deprecations</a><ul>
<li><a class="reference internal" href="#non-integer-scalars-for-sequence-repetition">Non-integer scalars for sequence repetition</a></li>
<li><a class="reference internal" href="#select-input-deprecations"><code class="docutils literal notranslate"><span class="pre">select</span></code> input deprecations</a></li>
<li><a class="reference internal" href="#rank-function"><code class="docutils literal notranslate"><span class="pre">rank</span></code> function</a></li>
<li><a class="reference internal" href="#object-array-equality-comparisons">Object array equality comparisons</a></li>
<li><a class="reference internal" href="#id141">C-API</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-8-2-release-notes">NumPy 1.8.2 Release Notes</a><ul>
<li><a class="reference internal" href="#id142">Issues fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-8-1-release-notes">NumPy 1.8.1 Release Notes</a><ul>
<li><a class="reference internal" href="#id143">Issues fixed</a></li>
<li><a class="reference internal" href="#id144">Changes</a><ul>
<li><a class="reference internal" href="#id145">NDIter</a></li>
<li><a class="reference internal" href="#id146">Optional reduced verbosity for np.distutils</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id147">Deprecations</a><ul>
<li><a class="reference internal" href="#id148">C-API</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-8-0-release-notes">NumPy 1.8.0 Release Notes</a><ul>
<li><a class="reference internal" href="#id149">Highlights</a></li>
<li><a class="reference internal" href="#id150">Dropped Support</a></li>
<li><a class="reference internal" href="#id151">Future Changes</a></li>
<li><a class="reference internal" href="#id152">Compatibility notes</a><ul>
<li><a class="reference internal" href="#npy-relaxed-strides-checking">NPY_RELAXED_STRIDES_CHECKING</a></li>
<li><a class="reference internal" href="#binary-operations-with-non-arrays-as-second-argument">Binary operations with non-arrays as second argument</a></li>
<li><a class="reference internal" href="#function-median-used-with-overwrite-input-only-partially-sorts-array">Function <code class="docutils literal notranslate"><span class="pre">median</span></code> used with <em class="xref py py-obj">overwrite_input</em> only partially sorts array</a></li>
<li><a class="reference internal" href="#fix-to-financial-npv">Fix to financial.npv</a></li>
<li><a class="reference internal" href="#runtime-warnings-when-comparing-nan-numbers">Runtime warnings when comparing NaN numbers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id153">New Features</a><ul>
<li><a class="reference internal" href="#support-for-linear-algebra-on-stacked-arrays">Support for linear algebra on stacked arrays</a></li>
<li><a class="reference internal" href="#in-place-fancy-indexing-for-ufuncs">In place fancy indexing for ufuncs</a></li>
<li><a class="reference internal" href="#new-functions-partition-and-argpartition">New functions <code class="docutils literal notranslate"><span class="pre">partition</span></code> and <code class="docutils literal notranslate"><span class="pre">argpartition</span></code></a></li>
<li><a class="reference internal" href="#new-functions-nanmean-nanvar-and-nanstd">New functions <code class="docutils literal notranslate"><span class="pre">nanmean</span></code>, <code class="docutils literal notranslate"><span class="pre">nanvar</span></code> and <code class="docutils literal notranslate"><span class="pre">nanstd</span></code></a></li>
<li><a class="reference internal" href="#new-functions-full-and-full-like">New functions <code class="docutils literal notranslate"><span class="pre">full</span></code> and <code class="docutils literal notranslate"><span class="pre">full_like</span></code></a></li>
<li><a class="reference internal" href="#io-compatibility-with-large-files">IO compatibility with large files</a></li>
<li><a class="reference internal" href="#building-against-openblas">Building against OpenBLAS</a></li>
<li><a class="reference internal" href="#new-constant">New constant</a></li>
<li><a class="reference internal" href="#new-modes-for-qr">New modes for qr</a></li>
<li><a class="reference internal" href="#new-invert-argument-to-in1d">New <code class="docutils literal notranslate"><span class="pre">invert</span></code> argument to <code class="docutils literal notranslate"><span class="pre">in1d</span></code></a></li>
<li><a class="reference internal" href="#advanced-indexing-using-np-newaxis">Advanced indexing using <em class="xref py py-obj">np.newaxis</em></a></li>
<li><a class="reference internal" href="#id154">C-API</a></li>
<li><a class="reference internal" href="#runtests-py">runtests.py</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id155">Improvements</a><ul>
<li><a class="reference internal" href="#io-performance-improvements">IO performance improvements</a></li>
<li><a class="reference internal" href="#performance-improvements-to-pad">Performance improvements to <code class="docutils literal notranslate"><span class="pre">pad</span></code></a></li>
<li><a class="reference internal" href="#performance-improvements-to-isnan-isinf-isfinite-and-byteswap">Performance improvements to <code class="docutils literal notranslate"><span class="pre">isnan</span></code>, <code class="docutils literal notranslate"><span class="pre">isinf</span></code>, <code class="docutils literal notranslate"><span class="pre">isfinite</span></code> and <em class="xref py py-obj">byteswap</em></a></li>
<li><a class="reference internal" href="#performance-improvements-via-sse2-vectorization">Performance improvements via SSE2 vectorization</a></li>
<li><a class="reference internal" href="#performance-improvements-to-median">Performance improvements to <code class="docutils literal notranslate"><span class="pre">median</span></code></a></li>
<li><a class="reference internal" href="#overrideable-operand-flags-in-ufunc-c-api">Overrideable operand flags in ufunc C-API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id156">Changes</a><ul>
<li><a class="reference internal" href="#general">General</a></li>
<li><a class="reference internal" href="#c-api-array-additions">C-API Array Additions</a></li>
<li><a class="reference internal" href="#c-api-ufunc-additions">C-API Ufunc Additions</a></li>
<li><a class="reference internal" href="#c-api-developer-improvements">C-API Developer Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id157">Deprecations</a><ul>
<li><a class="reference internal" href="#id158">General</a></li>
</ul>
</li>
<li><a class="reference internal" href="#authors">Authors</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-7-2-release-notes">NumPy 1.7.2 Release Notes</a><ul>
<li><a class="reference internal" href="#id159">Issues fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-7-1-release-notes">NumPy 1.7.1 Release Notes</a><ul>
<li><a class="reference internal" href="#id160">Issues fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-7-0-release-notes">NumPy 1.7.0 Release Notes</a><ul>
<li><a class="reference internal" href="#id161">Highlights</a></li>
<li><a class="reference internal" href="#id162">Compatibility notes</a></li>
<li><a class="reference internal" href="#id163">New features</a><ul>
<li><a class="reference internal" href="#reduction-ufuncs-generalize-axis-parameter">Reduction UFuncs Generalize axis= Parameter</a></li>
<li><a class="reference internal" href="#reduction-ufuncs-new-keepdims-parameter">Reduction UFuncs New keepdims= Parameter</a></li>
<li><a class="reference internal" href="#datetime-support">Datetime support</a></li>
<li><a class="reference internal" href="#custom-formatter-for-printing-arrays">Custom formatter for printing arrays</a></li>
<li><a class="reference internal" href="#new-function-numpy-random-choice">New function numpy.random.choice</a></li>
<li><a class="reference internal" href="#new-function-isclose">New function isclose</a></li>
<li><a class="reference internal" href="#preliminary-multi-dimensional-support-in-the-polynomial-package">Preliminary multi-dimensional support in the polynomial package</a></li>
<li><a class="reference internal" href="#ability-to-pad-rank-n-arrays">Ability to pad rank-n arrays</a></li>
<li><a class="reference internal" href="#new-argument-to-searchsorted">New argument to searchsorted</a></li>
<li><a class="reference internal" href="#id164">Build system</a></li>
<li><a class="reference internal" href="#id165">C API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id166">Changes</a><ul>
<li><a class="reference internal" href="#id167">General</a></li>
<li><a class="reference internal" href="#casting-rules">Casting Rules</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id168">Deprecations</a><ul>
<li><a class="reference internal" href="#id169">General</a></li>
<li><a class="reference internal" href="#id170">C-API</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-6-2-release-notes">NumPy 1.6.2 Release Notes</a><ul>
<li><a class="reference internal" href="#id171">Issues fixed</a><ul>
<li><a class="reference internal" href="#numpy-core"><code class="docutils literal notranslate"><span class="pre">numpy.core</span></code></a></li>
<li><a class="reference internal" href="#numpy-lib"><code class="docutils literal notranslate"><span class="pre">numpy.lib</span></code></a></li>
<li><a class="reference internal" href="#numpy-distutils"><code class="docutils literal notranslate"><span class="pre">numpy.distutils</span></code></a></li>
<li><a class="reference internal" href="#numpy-random"><code class="docutils literal notranslate"><span class="pre">numpy.random</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#id172">Changes</a><ul>
<li><a class="reference internal" href="#numpy-f2py"><code class="docutils literal notranslate"><span class="pre">numpy.f2py</span></code></a></li>
<li><a class="reference internal" href="#numpy-poly"><code class="docutils literal notranslate"><span class="pre">numpy.poly</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-6-1-release-notes">NumPy 1.6.1 Release Notes</a><ul>
<li><a class="reference internal" href="#id173">Issues Fixed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-6-0-release-notes">NumPy 1.6.0 Release Notes</a><ul>
<li><a class="reference internal" href="#id174">Highlights</a></li>
<li><a class="reference internal" href="#id175">New features</a><ul>
<li><a class="reference internal" href="#new-16-bit-floating-point-type">New 16-bit floating point type</a></li>
<li><a class="reference internal" href="#new-iterator">New iterator</a></li>
<li><a class="reference internal" href="#legendre-laguerre-hermite-hermitee-polynomials-in-numpy-polynomial">Legendre, Laguerre, Hermite, HermiteE polynomials in <code class="docutils literal notranslate"><span class="pre">numpy.polynomial</span></code></a></li>
<li><a class="reference internal" href="#fortran-assumed-shape-array-and-size-function-support-in-numpy-f2py">Fortran assumed shape array and size function support in <code class="docutils literal notranslate"><span class="pre">numpy.f2py</span></code></a></li>
<li><a class="reference internal" href="#other-new-functions">Other new functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id176">Changes</a><ul>
<li><a class="reference internal" href="#default-error-handling"><code class="docutils literal notranslate"><span class="pre">default</span> <span class="pre">error</span> <span class="pre">handling</span></code></a></li>
<li><a class="reference internal" href="#id177"><code class="docutils literal notranslate"><span class="pre">numpy.distutils</span></code></a></li>
<li><a class="reference internal" href="#numpy-testing"><code class="docutils literal notranslate"><span class="pre">numpy.testing</span></code></a></li>
<li><a class="reference internal" href="#id178"><code class="docutils literal notranslate"><span class="pre">C</span> <span class="pre">API</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#deprecated-features">Deprecated features</a></li>
<li><a class="reference internal" href="#removed-features">Removed features</a><ul>
<li><a class="reference internal" href="#numpy-fft"><code class="docutils literal notranslate"><span class="pre">numpy.fft</span></code></a></li>
<li><a class="reference internal" href="#numpy-memmap"><code class="docutils literal notranslate"><span class="pre">numpy.memmap</span></code></a></li>
<li><a class="reference internal" href="#id179"><code class="docutils literal notranslate"><span class="pre">numpy.lib</span></code></a></li>
<li><a class="reference internal" href="#numpy-ma"><code class="docutils literal notranslate"><span class="pre">numpy.ma</span></code></a></li>
<li><a class="reference internal" href="#id180"><code class="docutils literal notranslate"><span class="pre">numpy.distutils</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-5-0-release-notes">NumPy 1.5.0 Release Notes</a><ul>
<li><a class="reference internal" href="#id181">Highlights</a><ul>
<li><a class="reference internal" href="#python-3-compatibility">Python 3 compatibility</a></li>
<li><a class="reference internal" href="#pep-3118-compatibility"><strong>PEP 3118</strong> compatibility</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id182">New features</a><ul>
<li><a class="reference internal" href="#warning-on-casting-complex-to-real">Warning on casting complex to real</a></li>
<li><a class="reference internal" href="#dot-method-for-ndarrays">Dot method for ndarrays</a></li>
<li><a class="reference internal" href="#linalg-slogdet-function">linalg.slogdet function</a></li>
<li><a class="reference internal" href="#new-header">new header</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id183">Changes</a><ul>
<li><a class="reference internal" href="#polynomial-polynomial">polynomial.polynomial</a></li>
<li><a class="reference internal" href="#polynomial-chebyshev">polynomial.chebyshev</a></li>
<li><a class="reference internal" href="#histogram">histogram</a></li>
<li><a class="reference internal" href="#correlate">correlate</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-4-0-release-notes">NumPy 1.4.0 Release Notes</a><ul>
<li><a class="reference internal" href="#id184">Highlights</a></li>
<li><a class="reference internal" href="#id185">New features</a><ul>
<li><a class="reference internal" href="#extended-array-wrapping-mechanism-for-ufuncs">Extended array wrapping mechanism for ufuncs</a></li>
<li><a class="reference internal" href="#automatic-detection-of-forward-incompatibilities">Automatic detection of forward incompatibilities</a></li>
<li><a class="reference internal" href="#new-iterators">New iterators</a></li>
<li><a class="reference internal" href="#new-polynomial-support">New polynomial support</a></li>
<li><a class="reference internal" href="#new-c-api">New C API</a></li>
<li><a class="reference internal" href="#new-ufuncs">New ufuncs</a></li>
<li><a class="reference internal" href="#new-defines">New defines</a></li>
<li><a class="reference internal" href="#testing">Testing</a></li>
<li><a class="reference internal" href="#reusing-npymath">Reusing npymath</a></li>
<li><a class="reference internal" href="#improved-set-operations">Improved set operations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id186">Improvements</a></li>
<li><a class="reference internal" href="#id187">Deprecations</a></li>
<li><a class="reference internal" href="#internal-changes">Internal changes</a><ul>
<li><a class="reference internal" href="#use-c99-complex-functions-when-available">Use C99 complex functions when available</a></li>
<li><a class="reference internal" href="#split-multiarray-and-umath-source-code">split multiarray and umath source code</a></li>
<li><a class="reference internal" href="#separate-compilation">Separate compilation</a></li>
<li><a class="reference internal" href="#separate-core-math-library">Separate core math library</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#numpy-1-3-0-release-notes">NumPy 1.3.0 Release Notes</a><ul>
<li><a class="reference internal" href="#id188">Highlights</a><ul>
<li><a class="reference internal" href="#python-2-6-support">Python 2.6 support</a></li>
<li><a class="reference internal" href="#generalized-ufuncs">Generalized ufuncs</a></li>
<li><a class="reference internal" href="#experimental-windows-64-bits-support">Experimental Windows 64 bits support</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id189">New features</a><ul>
<li><a class="reference internal" href="#formatting-issues">Formatting issues</a></li>
<li><a class="reference internal" href="#nan-handling-in-max-min">Nan handling in max/min</a></li>
<li><a class="reference internal" href="#nan-handling-in-sign">Nan handling in sign</a></li>
<li><a class="reference internal" href="#id190">New ufuncs</a></li>
<li><a class="reference internal" href="#masked-arrays">Masked arrays</a></li>
<li><a class="reference internal" href="#gfortran-support-on-windows">gfortran support on windows</a></li>
<li><a class="reference internal" href="#arch-option-for-windows-binary">Arch option for windows binary</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id191">Deprecated features</a><ul>
<li><a class="reference internal" href="#id192">Histogram</a></li>
</ul>
</li>
<li><a class="reference internal" href="#documentation-changes">Documentation changes</a></li>
<li><a class="reference internal" href="#id193">New C API</a><ul>
<li><a class="reference internal" href="#multiarray-api">Multiarray API</a></li>
<li><a class="reference internal" href="#ufunc-api">Ufunc API</a></li>
<li><a class="reference internal" href="#id194">New defines</a></li>
<li><a class="reference internal" href="#portable-nan-infinity-etc">Portable NAN, INFINITY, etc…</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id195">Internal changes</a><ul>
<li><a class="reference internal" href="#numpy-core-math-configuration-revamp">numpy.core math configuration revamp</a></li>
<li><a class="reference internal" href="#umath-refactor">umath refactor</a></li>
<li><a class="reference internal" href="#improvements-to-build-warnings">Improvements to build warnings</a></li>
<li><a class="reference internal" href="#id196">Separate core math library</a></li>
<li><a class="reference internal" href="#cpu-arch-detection">CPU arch detection</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="docs/howto_build_docs.html"
                        title="previous chapter">Building the NumPy API and reference docs</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="about.html"
                        title="next chapter">About NumPy</a></p>
<div id="searchbox" style="display: none" role="search">
  <h4>Quick search</h4>
    <div>
    <form class="search" action="search.html" method="get">
      <input type="text" style="width: inherit;" name="q" />
      <input type="submit" value="search" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body">
            
  <div class="section" id="release-notes">
<h1>Release Notes<a class="headerlink" href="#release-notes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="numpy-1-17-0-release-notes">
<h2>NumPy 1.17.0 Release Notes<a class="headerlink" href="#numpy-1-17-0-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This NumPy release contains a number of new features that should substantially
improve its performance and usefulness, see Highlights below for a summary. The
Python versions supported are 3.5-3.7, note that Python 2.7 has been dropped.
Python 3.8b2 should work with the released source packages, but there are no
future guarantees.</p>
<p>Downstream developers should use Cython &gt;= 0.29.11 for Python 3.8 support and
OpenBLAS &gt;= 3.7 (not currently out) to avoid problems on the Skylake
architecture. The NumPy wheels on PyPI are built from the OpenBLAS development
branch in order to avoid those problems.</p>
<div class="section" id="highlights">
<h3>Highlights<a class="headerlink" href="#highlights" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A new extensible <a class="reference internal" href="reference/random/index.html#module-numpy.random" title="numpy.random"><code class="xref py py-obj docutils literal notranslate"><span class="pre">random</span></code></a> module along with four selectable <em class="xref py py-obj">random number
generators</em> and improved seeding designed for use in parallel
processes has been added. The currently available bit generators are <a class="reference internal" href="reference/random/bit_generators/mt19937.html#numpy.random.mt19937.MT19937" title="numpy.random.mt19937.MT19937"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MT19937</span></code></a>, <a class="reference internal" href="reference/random/bit_generators/pcg64.html#numpy.random.pcg64.PCG64" title="numpy.random.pcg64.PCG64"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PCG64</span></code></a>, <a class="reference internal" href="reference/random/bit_generators/philox.html#numpy.random.philox.Philox" title="numpy.random.philox.Philox"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Philox</span></code></a>, and <a class="reference internal" href="reference/random/bit_generators/sfc64.html#numpy.random.sfc64.SFC64" title="numpy.random.sfc64.SFC64"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SFC64</span></code></a>. See below under
New Features.</li>
<li>NumPy’s <a class="reference internal" href="reference/routines.fft.html#module-numpy.fft" title="numpy.fft"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FFT</span></code></a> implementation was changed from fftpack to pocketfft,
resulting in faster, more accurate transforms and better handling of datasets
of prime length. See below under Improvements.</li>
<li>New radix sort and timsort sorting methods. It is currently not possible to
choose which will be used. They are hardwired to the datatype and used
when either <code class="docutils literal notranslate"><span class="pre">stable</span></code> or <code class="docutils literal notranslate"><span class="pre">mergesort</span></code> is passed as the method. See below
under Improvements.</li>
<li>Overriding numpy functions is now possible by default,
see <code class="docutils literal notranslate"><span class="pre">__array_function__</span></code> below.</li>
</ul>
</div>
<div class="section" id="new-functions">
<h3>New functions<a class="headerlink" href="#new-functions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="reference/generated/numpy.errstate.html#numpy.errstate" title="numpy.errstate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.errstate</span></code></a> is now also a function decorator</li>
</ul>
</div>
<div class="section" id="deprecations">
<h3>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h3>
<div class="section" id="numpy-polynomial-functions-warn-when-passed-float-in-place-of-int">
<h4><a class="reference internal" href="reference/routines.polynomials.package.html#module-numpy.polynomial" title="numpy.polynomial"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.polynomial</span></code></a> functions warn when passed <code class="docutils literal notranslate"><span class="pre">float</span></code> in place of <code class="docutils literal notranslate"><span class="pre">int</span></code><a class="headerlink" href="#numpy-polynomial-functions-warn-when-passed-float-in-place-of-int" title="Permalink to this headline">¶</a></h4>
<p>Previously functions in this module would accept <code class="docutils literal notranslate"><span class="pre">float</span></code> values provided they
were integral (<code class="docutils literal notranslate"><span class="pre">1.0</span></code>, <code class="docutils literal notranslate"><span class="pre">2.0</span></code>, etc). For consistency with the rest of numpy,
doing so is now deprecated, and in future will raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.</p>
<p>Similarly, passing a float like <code class="docutils literal notranslate"><span class="pre">0.5</span></code> in place of an integer will now raise a
<code class="docutils literal notranslate"><span class="pre">TypeError</span></code> instead of the previous <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>.</p>
</div>
<div class="section" id="deprecate-numpy-distutils-exec-command-and-temp-file-name">
<h4>Deprecate <a class="reference internal" href="reference/generated/numpy.distutils.exec_command.html#module-numpy.distutils.exec_command" title="numpy.distutils.exec_command"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.distutils.exec_command</span></code></a> and <code class="docutils literal notranslate"><span class="pre">temp_file_name</span></code><a class="headerlink" href="#deprecate-numpy-distutils-exec-command-and-temp-file-name" title="Permalink to this headline">¶</a></h4>
<p>The internal use of these functions has been refactored and there are better
alternatives. Replace <code class="docutils literal notranslate"><span class="pre">exec_command</span></code> with <a class="reference external" href="https://docs.python.org/dev/library/subprocess.html#subprocess.Popen" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a> and
<a class="reference internal" href="reference/generated/numpy.distutils.exec_command.html#module-numpy.distutils.exec_command" title="numpy.distutils.exec_command"><code class="xref py py-obj docutils literal notranslate"><span class="pre">temp_file_name</span></code></a> with <a class="reference external" href="https://docs.python.org/dev/library/tempfile.html#tempfile.mkstemp" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tempfile.mkstemp</span></code></a>.</p>
</div>
<div class="section" id="writeable-flag-of-c-api-wrapped-arrays">
<h4>Writeable flag of C-API wrapped arrays<a class="headerlink" href="#writeable-flag-of-c-api-wrapped-arrays" title="Permalink to this headline">¶</a></h4>
<p>When an array is created from the C-API to wrap a pointer to data, the only
indication we have of the read-write nature of the data is the <code class="docutils literal notranslate"><span class="pre">writeable</span></code>
flag set during creation. It is dangerous to force the flag to writeable.
In the future it will not be possible to switch the writeable flag to <code class="docutils literal notranslate"><span class="pre">True</span></code>
from python.
This deprecation should not affect many users since arrays created in such
a manner are very rare in practice and only available through the NumPy C-API.</p>
</div>
<div class="section" id="numpy-nonzero-should-no-longer-be-called-on-0d-arrays">
<h4><a class="reference internal" href="reference/generated/numpy.nonzero.html#numpy.nonzero" title="numpy.nonzero"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.nonzero</span></code></a> should no longer be called on 0d arrays<a class="headerlink" href="#numpy-nonzero-should-no-longer-be-called-on-0d-arrays" title="Permalink to this headline">¶</a></h4>
<p>The behavior of <a class="reference internal" href="reference/generated/numpy.nonzero.html#numpy.nonzero" title="numpy.nonzero"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.nonzero</span></code></a> on 0d arrays was surprising, making uses of it
almost always incorrect. If the old behavior was intended, it can be preserved
without a warning by using <code class="docutils literal notranslate"><span class="pre">nonzero(atleast_1d(arr))</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">nonzero(arr)</span></code>.  In a future release, it is most likely this will raise a
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code>.</p>
</div>
<div class="section" id="writing-to-the-result-of-numpy-broadcast-arrays-will-warn">
<h4>Writing to the result of <a class="reference internal" href="reference/generated/numpy.broadcast_arrays.html#numpy.broadcast_arrays" title="numpy.broadcast_arrays"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.broadcast_arrays</span></code></a> will warn<a class="headerlink" href="#writing-to-the-result-of-numpy-broadcast-arrays-will-warn" title="Permalink to this headline">¶</a></h4>
<p>Commonly <a class="reference internal" href="reference/generated/numpy.broadcast_arrays.html#numpy.broadcast_arrays" title="numpy.broadcast_arrays"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.broadcast_arrays</span></code></a> returns a writeable array with internal
overlap, making it unsafe to write to. A future version will set the
<code class="docutils literal notranslate"><span class="pre">writeable</span></code> flag to <code class="docutils literal notranslate"><span class="pre">False</span></code>, and require users to manually set it to
<code class="docutils literal notranslate"><span class="pre">True</span></code> if they are sure that is what they want to do. Now writing to it will
emit a deprecation warning with instructions to set the <code class="docutils literal notranslate"><span class="pre">writeable</span></code> flag
<code class="docutils literal notranslate"><span class="pre">True</span></code>.  Note that if one were to inspect the flag before setting it, one
would find it would already be <code class="docutils literal notranslate"><span class="pre">True</span></code>.  Explicitly setting it, though, as one
will need to do in future versions, clears an internal flag that is used to
produce the deprecation warning. To help alleviate confusion, an additional
<em class="xref py py-obj">FutureWarning</em> will be emitted when accessing the <code class="docutils literal notranslate"><span class="pre">writeable</span></code> flag state to
clarify the contradiction.</p>
<p>Note that for the C-side buffer protocol such an array will return a
readonly buffer immediately unless a writable buffer is requested. If
a writeable buffer is requested a warning will be given. When using
cython, the <code class="docutils literal notranslate"><span class="pre">const</span></code> qualifier should be used with such arrays to avoid
the warning (e.g. <code class="docutils literal notranslate"><span class="pre">cdef</span> <span class="pre">const</span> <span class="pre">double[::1]</span> <span class="pre">view</span></code>).</p>
</div>
</div>
<div class="section" id="future-changes">
<h3>Future Changes<a class="headerlink" href="#future-changes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="shape-1-fields-in-dtypes-won-t-be-collapsed-to-scalars-in-a-future-version">
<h4>Shape-1 fields in dtypes won’t be collapsed to scalars in a future version<a class="headerlink" href="#shape-1-fields-in-dtypes-won-t-be-collapsed-to-scalars-in-a-future-version" title="Permalink to this headline">¶</a></h4>
<p>Currently, a field specified as <code class="docutils literal notranslate"><span class="pre">[(name,</span> <span class="pre">dtype,</span> <span class="pre">1)]</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;1type&quot;</span></code> is
interpreted as a scalar field (i.e., the same as <code class="docutils literal notranslate"><span class="pre">[(name,</span> <span class="pre">dtype)]</span></code> or
<code class="docutils literal notranslate"><span class="pre">[(name,</span> <span class="pre">dtype,</span> <span class="pre">()]</span></code>). This now raises a FutureWarning; in a future version,
it will be interpreted as a shape-(1,) field, i.e. the same as <code class="docutils literal notranslate"><span class="pre">[(name,</span>
<span class="pre">dtype,</span> <span class="pre">(1,))]</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;(1,)type&quot;</span></code> (consistently with <code class="docutils literal notranslate"><span class="pre">[(name,</span> <span class="pre">dtype,</span> <span class="pre">n)]</span></code>
/ <code class="docutils literal notranslate"><span class="pre">&quot;ntype&quot;</span></code> with <code class="docutils literal notranslate"><span class="pre">n&gt;1</span></code>, which is already equivalent to <code class="docutils literal notranslate"><span class="pre">[(name,</span> <span class="pre">dtype,</span>
<span class="pre">(n,)]</span></code> / <code class="docutils literal notranslate"><span class="pre">&quot;(n,)type&quot;</span></code>).</p>
</div>
</div>
<div class="section" id="compatibility-notes">
<h3>Compatibility notes<a class="headerlink" href="#compatibility-notes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="float16-subnormal-rounding">
<h4><code class="docutils literal notranslate"><span class="pre">float16</span></code> subnormal rounding<a class="headerlink" href="#float16-subnormal-rounding" title="Permalink to this headline">¶</a></h4>
<p>Casting from a different floating point precision to <code class="docutils literal notranslate"><span class="pre">float16</span></code> used incorrect
rounding in some edge cases. This means in rare cases, subnormal results will
now be rounded up instead of down, changing the last bit (ULP) of the result.</p>
</div>
<div class="section" id="signed-zero-when-using-divmod">
<h4>Signed zero when using divmod<a class="headerlink" href="#signed-zero-when-using-divmod" title="Permalink to this headline">¶</a></h4>
<p>Starting in version <em class="xref py py-obj">1.12.0</em>, numpy incorrectly returned a negatively signed zero
when using the <code class="docutils literal notranslate"><span class="pre">divmod</span></code> and <code class="docutils literal notranslate"><span class="pre">floor_divide</span></code> functions when the result was
zero. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">//</span><span class="mi">1</span>
<span class="go">array([-0., -0., -0., -0., -0., -0., -0., -0., -0., -0.])</span>
</pre></div>
</div>
<p>With this release, the result is correctly returned as a positively signed
zero:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">//</span><span class="mi">1</span>
<span class="go">array([0., 0., 0., 0., 0., 0., 0., 0., 0., 0.])</span>
</pre></div>
</div>
</div>
<div class="section" id="maskedarray-mask-now-returns-a-view-of-the-mask-not-the-mask-itself">
<h4><code class="docutils literal notranslate"><span class="pre">MaskedArray.mask</span></code> now returns a view of the mask, not the mask itself<a class="headerlink" href="#maskedarray-mask-now-returns-a-view-of-the-mask-not-the-mask-itself" title="Permalink to this headline">¶</a></h4>
<p>Returning the mask itself was unsafe, as it could be reshaped in place which
would violate expectations of the masked array code. The behavior of <a class="reference internal" href="reference/maskedarray.baseclass.html#numpy.ma.MaskedArray.mask" title="numpy.ma.MaskedArray.mask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mask</span></code></a> is now consistent with <a class="reference internal" href="reference/maskedarray.baseclass.html#numpy.ma.MaskedArray.data" title="numpy.ma.MaskedArray.data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">data</span></code></a>,
which also returns a view.</p>
<p>The underlying mask can still be accessed with <code class="docutils literal notranslate"><span class="pre">._mask</span></code> if it is needed.
Tests that contain <code class="docutils literal notranslate"><span class="pre">assert</span> <span class="pre">x.mask</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">y.mask</span></code> or similar will need to be
updated.</p>
</div>
<div class="section" id="do-not-lookup-buffer-attribute-in-numpy-frombuffer">
<h4>Do not lookup <code class="docutils literal notranslate"><span class="pre">__buffer__</span></code> attribute in <a class="reference internal" href="reference/generated/numpy.frombuffer.html#numpy.frombuffer" title="numpy.frombuffer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.frombuffer</span></code></a><a class="headerlink" href="#do-not-lookup-buffer-attribute-in-numpy-frombuffer" title="Permalink to this headline">¶</a></h4>
<p>Looking up <code class="docutils literal notranslate"><span class="pre">__buffer__</span></code> attribute in <a class="reference internal" href="reference/generated/numpy.frombuffer.html#numpy.frombuffer" title="numpy.frombuffer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.frombuffer</span></code></a> was undocumented and
non-functional. This code was removed. If needed, use
<code class="docutils literal notranslate"><span class="pre">frombuffer(memoryview(obj),</span> <span class="pre">...)</span></code> instead.</p>
</div>
<div class="section" id="out-is-buffered-for-memory-overlaps-in-take-choose-put">
<h4><code class="docutils literal notranslate"><span class="pre">out</span></code> is buffered for memory overlaps in <a class="reference internal" href="reference/generated/numpy.take.html#numpy.take" title="numpy.take"><code class="xref py py-obj docutils literal notranslate"><span class="pre">take</span></code></a>, <a class="reference internal" href="reference/generated/numpy.choose.html#numpy.choose" title="numpy.choose"><code class="xref py py-obj docutils literal notranslate"><span class="pre">choose</span></code></a>, <a class="reference internal" href="reference/generated/numpy.put.html#numpy.put" title="numpy.put"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put</span></code></a><a class="headerlink" href="#out-is-buffered-for-memory-overlaps-in-take-choose-put" title="Permalink to this headline">¶</a></h4>
<p>If the out argument to these functions is provided and has memory overlap with
the other arguments, it is now buffered to avoid order-dependent behavior.</p>
</div>
<div class="section" id="unpickling-while-loading-requires-explicit-opt-in">
<h4>Unpickling while loading requires explicit opt-in<a class="headerlink" href="#unpickling-while-loading-requires-explicit-opt-in" title="Permalink to this headline">¶</a></h4>
<p>The functions <a class="reference internal" href="reference/generated/numpy.load.html#numpy.load" title="numpy.load"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load</span></code></a>, and <code class="docutils literal notranslate"><span class="pre">lib.format.read_array</span></code> take an
<code class="docutils literal notranslate"><span class="pre">allow_pickle</span></code> keyword which now defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code> in response to
<a class="reference external" href="https://nvd.nist.gov/vuln/detail/CVE-2019-6446">CVE-2019-6446</a>.</p>
</div>
<div class="section" id="potential-changes-to-the-random-stream-in-old-random-module">
<h4>Potential changes to the random stream in old random module<a class="headerlink" href="#potential-changes-to-the-random-stream-in-old-random-module" title="Permalink to this headline">¶</a></h4>
<p>Due to bugs in the application of <code class="docutils literal notranslate"><span class="pre">log</span></code> to random floating point numbers,
the stream may change when sampling from <a class="reference internal" href="reference/random/generated/numpy.random.mtrand.RandomState.beta.html#numpy.random.mtrand.RandomState.beta" title="numpy.random.mtrand.RandomState.beta"><code class="xref py py-obj docutils literal notranslate"><span class="pre">beta</span></code></a>, <a class="reference internal" href="reference/random/generated/numpy.random.mtrand.RandomState.binomial.html#numpy.random.mtrand.RandomState.binomial" title="numpy.random.mtrand.RandomState.binomial"><code class="xref py py-obj docutils literal notranslate"><span class="pre">binomial</span></code></a>,
<a class="reference internal" href="reference/random/generated/numpy.random.mtrand.RandomState.laplace.html#numpy.random.mtrand.RandomState.laplace" title="numpy.random.mtrand.RandomState.laplace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">laplace</span></code></a>, <a class="reference internal" href="reference/random/generated/numpy.random.mtrand.RandomState.logistic.html#numpy.random.mtrand.RandomState.logistic" title="numpy.random.mtrand.RandomState.logistic"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logistic</span></code></a>, <a class="reference internal" href="reference/random/generated/numpy.random.mtrand.RandomState.logseries.html#numpy.random.mtrand.RandomState.logseries" title="numpy.random.mtrand.RandomState.logseries"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logseries</span></code></a> or
<a class="reference internal" href="reference/random/generated/numpy.random.mtrand.RandomState.multinomial.html#numpy.random.mtrand.RandomState.multinomial" title="numpy.random.mtrand.RandomState.multinomial"><code class="xref py py-obj docutils literal notranslate"><span class="pre">multinomial</span></code></a> if a <code class="docutils literal notranslate"><span class="pre">0</span></code> is generated in the underlying <em class="xref py py-obj">MT19937</em> random stream.  There is a <code class="docutils literal notranslate"><span class="pre">1</span></code> in
<img class="math" src="_images/math/68dd3c21c372950e00a95ff6daa6b68ab150abf6.svg" alt="10^{53}"/> chance of this occurring, so the probability that the stream
changes for any given seed is extremely small. If a <code class="docutils literal notranslate"><span class="pre">0</span></code> is encountered in the
underlying generator, then the incorrect value produced (either <a class="reference internal" href="reference/constants.html#numpy.inf" title="numpy.inf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.inf</span></code></a> or
<a class="reference internal" href="reference/constants.html#numpy.nan" title="numpy.nan"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.nan</span></code></a>) is now dropped.</p>
</div>
<div class="section" id="i0-now-always-returns-a-result-with-the-same-shape-as-the-input">
<h4><a class="reference internal" href="reference/generated/numpy.i0.html#numpy.i0" title="numpy.i0"><code class="xref py py-obj docutils literal notranslate"><span class="pre">i0</span></code></a> now always returns a result with the same shape as the input<a class="headerlink" href="#i0-now-always-returns-a-result-with-the-same-shape-as-the-input" title="Permalink to this headline">¶</a></h4>
<p>Previously, the output was squeezed, such that, e.g., input with just a single
element would lead to an array scalar being returned, and inputs with shapes
such as <code class="docutils literal notranslate"><span class="pre">(10,</span> <span class="pre">1)</span></code> would yield results that would not broadcast against the
input.</p>
<p>Note that we generally recommend the SciPy implementation over the numpy one:
it is a proper ufunc written in C, and more than an order of magnitude faster.</p>
</div>
<div class="section" id="can-cast-no-longer-assumes-all-unsafe-casting-is-allowed">
<h4><a class="reference internal" href="reference/generated/numpy.can_cast.html#numpy.can_cast" title="numpy.can_cast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">can_cast</span></code></a> no longer assumes all unsafe casting is allowed<a class="headerlink" href="#can-cast-no-longer-assumes-all-unsafe-casting-is-allowed" title="Permalink to this headline">¶</a></h4>
<p>Previously, <a class="reference internal" href="reference/generated/numpy.can_cast.html#numpy.can_cast" title="numpy.can_cast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">can_cast</span></code></a> returned <em class="xref py py-obj">True</em> for almost all inputs for
<code class="docutils literal notranslate"><span class="pre">casting='unsafe'</span></code>, even for cases where casting was not possible, such as
from a structured dtype to a regular one.  This has been fixed, making it
more consistent with actual casting using, e.g., the <a class="reference internal" href="reference/generated/numpy.ndarray.astype.html#numpy.ndarray.astype" title="numpy.ndarray.astype"><code class="xref py py-obj docutils literal notranslate"><span class="pre">.astype</span></code></a>
method.</p>
</div>
<div class="section" id="ndarray-flags-writeable-can-be-switched-to-true-slightly-more-often">
<h4><code class="docutils literal notranslate"><span class="pre">ndarray.flags.writeable</span></code> can be switched to true slightly more often<a class="headerlink" href="#ndarray-flags-writeable-can-be-switched-to-true-slightly-more-often" title="Permalink to this headline">¶</a></h4>
<p>In rare cases, it was not possible to switch an array from not writeable
to writeable, although a base array is writeable. This can happen if an
intermediate <a class="reference internal" href="reference/generated/numpy.ndarray.base.html#numpy.ndarray.base" title="numpy.ndarray.base"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ndarray.base</span></code></a> object is writeable. Previously, only the deepest
base object was considered for this decision. However, in rare cases this
object does not have the necessary information. In that case switching to
writeable was never allowed. This has now been fixed.</p>
</div>
</div>
<div class="section" id="c-api-changes">
<h3>C API changes<a class="headerlink" href="#c-api-changes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="dimension-or-stride-input-arguments-are-now-passed-by-npy-intp-const">
<h4>dimension or stride input arguments are now passed by <code class="docutils literal notranslate"><span class="pre">npy_intp</span> <span class="pre">const*</span></code><a class="headerlink" href="#dimension-or-stride-input-arguments-are-now-passed-by-npy-intp-const" title="Permalink to this headline">¶</a></h4>
<p>Previously these function arguments were declared as the more strict
<code class="docutils literal notranslate"><span class="pre">npy_intp*</span></code>, which prevented the caller passing constant data.
This change is backwards compatible, but now allows code like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npy_intp</span> <span class="n">const</span> <span class="n">fixed_dims</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">};</span>
<span class="o">//</span> <span class="n">no</span> <span class="n">longer</span> <span class="n">complains</span> <span class="n">that</span> <span class="n">the</span> <span class="n">const</span><span class="o">-</span><span class="n">qualifier</span> <span class="ow">is</span> <span class="n">discarded</span>
<span class="n">npy_intp</span> <span class="n">size</span> <span class="o">=</span> <span class="n">PyArray_MultiplyList</span><span class="p">(</span><span class="n">fixed_dims</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="new-features">
<h3>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h3>
<div class="section" id="new-extensible-numpy-random-module-with-selectable-random-number-generators">
<h4>New extensible <a class="reference internal" href="reference/random/index.html#module-numpy.random" title="numpy.random"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.random</span></code></a> module with selectable random number generators<a class="headerlink" href="#new-extensible-numpy-random-module-with-selectable-random-number-generators" title="Permalink to this headline">¶</a></h4>
<p>A new extensible <a class="reference internal" href="reference/random/index.html#module-numpy.random" title="numpy.random"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.random</span></code></a> module along with four selectable random number
generators and improved seeding designed for use in parallel processes has been
added. The currently available <a class="reference internal" href="reference/random/bit_generators/index.html#bit-generator"><span class="std std-ref">Bit Generators</span></a> are
<a class="reference internal" href="reference/random/bit_generators/mt19937.html#numpy.random.mt19937.MT19937" title="numpy.random.mt19937.MT19937"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MT19937</span></code></a>, <a class="reference internal" href="reference/random/bit_generators/pcg64.html#numpy.random.pcg64.PCG64" title="numpy.random.pcg64.PCG64"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PCG64</span></code></a>, <a class="reference internal" href="reference/random/bit_generators/philox.html#numpy.random.philox.Philox" title="numpy.random.philox.Philox"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Philox</span></code></a>, and <a class="reference internal" href="reference/random/bit_generators/sfc64.html#numpy.random.sfc64.SFC64" title="numpy.random.sfc64.SFC64"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SFC64</span></code></a>.
<code class="docutils literal notranslate"><span class="pre">PCG64</span></code> is the new default while <code class="docutils literal notranslate"><span class="pre">MT19937</span></code> is retained for backwards
compatibility. Note that the legacy random module is unchanged and is now
frozen, your current results will not change. More information is available in
the <a class="reference internal" href="reference/random/new-or-different.html#new-or-different"><span class="std std-ref">API change description</span></a> and in the <a class="reference internal" href="reference/random/index.html#module-numpy.random" title="numpy.random"><code class="xref py py-obj docutils literal notranslate"><span class="pre">top-level</span> <span class="pre">view</span></code></a> documentation.</p>
</div>
<div class="section" id="libflame">
<h4>libFLAME<a class="headerlink" href="#libflame" title="Permalink to this headline">¶</a></h4>
<p>Support for building NumPy with the libFLAME linear algebra package as the LAPACK,
implementation, see
<a class="reference external" href="https://www.cs.utexas.edu/~flame/web/libFLAME.html">libFLAME</a> for details.</p>
</div>
<div class="section" id="user-defined-blas-detection-order">
<h4>User-defined BLAS detection order<a class="headerlink" href="#user-defined-blas-detection-order" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="reference/distutils.html#module-numpy.distutils" title="numpy.distutils"><code class="xref py py-obj docutils literal notranslate"><span class="pre">distutils</span></code></a> now uses an environment variable, comma-separated and case
insensitive, to determine the detection order for BLAS libraries.
By default <code class="docutils literal notranslate"><span class="pre">NPY_BLAS_ORDER=mkl,blis,openblas,atlas,accelerate,blas</span></code>.
However, to force the use of OpenBLAS simply do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">NPY_BLAS_ORDER</span><span class="o">=</span><span class="n">openblas</span> <span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span>
</pre></div>
</div>
<p>which forces the use of OpenBLAS.
This may be helpful for users which have a MKL installation but wishes to try
out different implementations.</p>
</div>
<div class="section" id="user-defined-lapack-detection-order">
<h4>User-defined LAPACK detection order<a class="headerlink" href="#user-defined-lapack-detection-order" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">numpy.distutils</span></code> now uses an environment variable, comma-separated and case
insensitive, to determine the detection order for LAPACK libraries.
By default <code class="docutils literal notranslate"><span class="pre">NPY_LAPACK_ORDER=mkl,openblas,flame,atlas,accelerate,lapack</span></code>.
However, to force the use of OpenBLAS simply do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">NPY_LAPACK_ORDER</span><span class="o">=</span><span class="n">openblas</span> <span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span>
</pre></div>
</div>
<p>which forces the use of OpenBLAS.
This may be helpful for users which have a MKL installation but wishes to try
out different implementations.</p>
</div>
<div class="section" id="ufunc-reduce-and-related-functions-now-accept-a-where-mask">
<h4><a class="reference internal" href="reference/generated/numpy.ufunc.reduce.html#numpy.ufunc.reduce" title="numpy.ufunc.reduce"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ufunc.reduce</span></code></a> and related functions now accept a <code class="docutils literal notranslate"><span class="pre">where</span></code> mask<a class="headerlink" href="#ufunc-reduce-and-related-functions-now-accept-a-where-mask" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="reference/generated/numpy.ufunc.reduce.html#numpy.ufunc.reduce" title="numpy.ufunc.reduce"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ufunc.reduce</span></code></a>, <a class="reference internal" href="reference/generated/numpy.sum.html#numpy.sum" title="numpy.sum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sum</span></code></a>, <a class="reference internal" href="reference/generated/numpy.prod.html#numpy.prod" title="numpy.prod"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prod</span></code></a>, <a class="reference external" href="https://docs.python.org/dev/library/functions.html#min" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">min</span></code></a>, <a class="reference external" href="https://docs.python.org/dev/library/functions.html#max" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">max</span></code></a> all
now accept a <code class="docutils literal notranslate"><span class="pre">where</span></code> keyword argument, which can be used to tell which
elements to include in the reduction.  For reductions that do not have an
identity, it is necessary to also pass in an initial value (e.g.,
<code class="docutils literal notranslate"><span class="pre">initial=np.inf</span></code> for <a class="reference external" href="https://docs.python.org/dev/library/functions.html#min" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">min</span></code></a>).  For instance, the equivalent of
<a class="reference internal" href="reference/generated/numpy.nansum.html#numpy.nansum" title="numpy.nansum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nansum</span></code></a> would be <code class="docutils literal notranslate"><span class="pre">np.sum(a,</span> <span class="pre">where=~np.isnan(a))</span></code>.</p>
</div>
<div class="section" id="timsort-and-radix-sort-have-replaced-mergesort-for-stable-sorting">
<h4>Timsort and radix sort have replaced mergesort for stable sorting<a class="headerlink" href="#timsort-and-radix-sort-have-replaced-mergesort-for-stable-sorting" title="Permalink to this headline">¶</a></h4>
<p>Both radix sort and timsort have been implemented and are now used in place of
mergesort. Due to the need to maintain backward compatibility, the sorting
<code class="docutils literal notranslate"><span class="pre">kind</span></code> options <code class="docutils literal notranslate"><span class="pre">&quot;stable&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;mergesort&quot;</span></code> have been made aliases of
each other with the actual sort implementation depending on the array type.
Radix sort is used for small integer types of 16 bits or less and timsort for
the remaining types.  Timsort features improved performace on data containing
already or nearly sorted data and performs like mergesort on random data and
requires <img class="math" src="_images/math/c3c5f68e12e6d684034e0d34c905cdb975c62997.svg" alt="O(n/2)"/> working space.  Details of the timsort algorithm can be
found at <a class="reference external" href="https://github.com/python/cpython/blob/3.7/Objects/listsort.txt">CPython listsort.txt</a>.</p>
</div>
<div class="section" id="packbits-and-unpackbits-accept-an-order-keyword">
<h4><a class="reference internal" href="reference/generated/numpy.packbits.html#numpy.packbits" title="numpy.packbits"><code class="xref py py-obj docutils literal notranslate"><span class="pre">packbits</span></code></a> and <a class="reference internal" href="reference/generated/numpy.unpackbits.html#numpy.unpackbits" title="numpy.unpackbits"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unpackbits</span></code></a> accept an <code class="docutils literal notranslate"><span class="pre">order</span></code> keyword<a class="headerlink" href="#packbits-and-unpackbits-accept-an-order-keyword" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">order</span></code> keyword defaults to <code class="docutils literal notranslate"><span class="pre">big</span></code>, and will order the <strong>bits</strong>
accordingly. For <code class="docutils literal notranslate"><span class="pre">'order=big'</span></code> 3 will become <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">1,</span> <span class="pre">1]</span></code>,
and <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0]</span></code> for <code class="docutils literal notranslate"><span class="pre">order=little</span></code></p>
</div>
<div class="section" id="unpackbits-now-accepts-a-count-parameter">
<h4><a class="reference internal" href="reference/generated/numpy.unpackbits.html#numpy.unpackbits" title="numpy.unpackbits"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unpackbits</span></code></a> now accepts a <code class="docutils literal notranslate"><span class="pre">count</span></code> parameter<a class="headerlink" href="#unpackbits-now-accepts-a-count-parameter" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">count</span></code> allows subsetting the number of bits that will be unpacked up-front,
rather than reshaping and subsetting later, making the <a class="reference internal" href="reference/generated/numpy.packbits.html#numpy.packbits" title="numpy.packbits"><code class="xref py py-obj docutils literal notranslate"><span class="pre">packbits</span></code></a> operation
invertible, and the unpacking less wasteful. Counts larger than the number of
available bits add zero padding. Negative counts trim bits off the end instead
of counting from the beginning. None counts implement the existing behavior of
unpacking everything.</p>
</div>
<div class="section" id="linalg-svd-and-linalg-pinv-can-be-faster-on-hermitian-inputs">
<h4><a class="reference internal" href="reference/generated/numpy.linalg.svd.html#numpy.linalg.svd" title="numpy.linalg.svd"><code class="xref py py-obj docutils literal notranslate"><span class="pre">linalg.svd</span></code></a> and <a class="reference internal" href="reference/generated/numpy.linalg.pinv.html#numpy.linalg.pinv" title="numpy.linalg.pinv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">linalg.pinv</span></code></a> can be faster on hermitian inputs<a class="headerlink" href="#linalg-svd-and-linalg-pinv-can-be-faster-on-hermitian-inputs" title="Permalink to this headline">¶</a></h4>
<p>These functions now accept a <code class="docutils literal notranslate"><span class="pre">hermitian</span></code> argument, matching the one added
to <a class="reference internal" href="reference/generated/numpy.linalg.matrix_rank.html#numpy.linalg.matrix_rank" title="numpy.linalg.matrix_rank"><code class="xref py py-obj docutils literal notranslate"><span class="pre">linalg.matrix_rank</span></code></a> in 1.14.0.</p>
</div>
<div class="section" id="divmod-operation-is-now-supported-for-two-timedelta64-operands">
<h4>divmod operation is now supported for two <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> operands<a class="headerlink" href="#divmod-operation-is-now-supported-for-two-timedelta64-operands" title="Permalink to this headline">¶</a></h4>
<p>The divmod operator now handles two <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> operands, with
type signature <code class="docutils literal notranslate"><span class="pre">mm-&gt;qm</span></code>.</p>
</div>
<div class="section" id="fromfile-now-takes-an-offset-argument">
<h4><a class="reference internal" href="reference/generated/numpy.fromfile.html#numpy.fromfile" title="numpy.fromfile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fromfile</span></code></a> now takes an <code class="docutils literal notranslate"><span class="pre">offset</span></code> argument<a class="headerlink" href="#fromfile-now-takes-an-offset-argument" title="Permalink to this headline">¶</a></h4>
<p>This function now takes an <code class="docutils literal notranslate"><span class="pre">offset</span></code> keyword argument for binary files,
which specifics the offset (in bytes) from the file’s current position.
Defaults to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</div>
<div class="section" id="new-mode-empty-for-pad">
<h4>New mode “empty” for <a class="reference internal" href="reference/generated/numpy.pad.html#numpy.pad" title="numpy.pad"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pad</span></code></a><a class="headerlink" href="#new-mode-empty-for-pad" title="Permalink to this headline">¶</a></h4>
<p>This mode pads an array to a desired shape without initializing the new
entries.</p>
</div>
<div class="section" id="empty-like-and-related-functions-now-accept-a-shape-argument">
<h4><a class="reference internal" href="reference/generated/numpy.empty_like.html#numpy.empty_like" title="numpy.empty_like"><code class="xref py py-obj docutils literal notranslate"><span class="pre">empty_like</span></code></a> and related functions now accept a <code class="docutils literal notranslate"><span class="pre">shape</span></code> argument<a class="headerlink" href="#empty-like-and-related-functions-now-accept-a-shape-argument" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="reference/generated/numpy.empty_like.html#numpy.empty_like" title="numpy.empty_like"><code class="xref py py-obj docutils literal notranslate"><span class="pre">empty_like</span></code></a>, <a class="reference internal" href="reference/generated/numpy.full_like.html#numpy.full_like" title="numpy.full_like"><code class="xref py py-obj docutils literal notranslate"><span class="pre">full_like</span></code></a>, <a class="reference internal" href="reference/generated/numpy.ones_like.html#numpy.ones_like" title="numpy.ones_like"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ones_like</span></code></a> and <a class="reference internal" href="reference/generated/numpy.zeros_like.html#numpy.zeros_like" title="numpy.zeros_like"><code class="xref py py-obj docutils literal notranslate"><span class="pre">zeros_like</span></code></a> now accept a <code class="docutils literal notranslate"><span class="pre">shape</span></code>
keyword argument, which can be used to create a new array
as the prototype, overriding its shape as well. This is particularly useful
when combined with the <code class="docutils literal notranslate"><span class="pre">__array_function__</span></code> protocol, allowing the creation
of new arbitrary-shape arrays from NumPy-like libraries when such an array
is used as the prototype.</p>
</div>
<div class="section" id="floating-point-scalars-implement-as-integer-ratio-to-match-the-builtin-float">
<h4>Floating point scalars implement <code class="docutils literal notranslate"><span class="pre">as_integer_ratio</span></code> to match the builtin float<a class="headerlink" href="#floating-point-scalars-implement-as-integer-ratio-to-match-the-builtin-float" title="Permalink to this headline">¶</a></h4>
<p>This returns a (numerator, denominator) pair, which can be used to construct a
<a class="reference external" href="https://docs.python.org/dev/library/fractions.html#fractions.Fraction" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fractions.Fraction</span></code></a>.</p>
</div>
<div class="section" id="structured-dtype-objects-can-be-indexed-with-multiple-fields-names">
<h4>Structured <code class="docutils literal notranslate"><span class="pre">dtype</span></code> objects can be indexed with multiple fields names<a class="headerlink" href="#structured-dtype-objects-can-be-indexed-with-multiple-fields-names" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">arr.dtype[['a',</span> <span class="pre">'b']]</span></code> now returns a dtype that is equivalent to
<code class="docutils literal notranslate"><span class="pre">arr[['a',</span> <span class="pre">'b']].dtype</span></code>, for consistency with
<code class="docutils literal notranslate"><span class="pre">arr.dtype['a']</span> <span class="pre">==</span> <span class="pre">arr['a'].dtype</span></code>.</p>
<p>Like the dtype of structured arrays indexed with a list of fields, this dtype
has the same <code class="docutils literal notranslate"><span class="pre">itemsize</span></code> as the original, but only keeps a subset of the fields.</p>
<p>This means that <code class="docutils literal notranslate"><span class="pre">arr[['a',</span> <span class="pre">'b']]</span></code> and <code class="docutils literal notranslate"><span class="pre">arr.view(arr.dtype[['a',</span> <span class="pre">'b']])</span></code> are
equivalent.</p>
</div>
<div class="section" id="npy-files-support-unicode-field-names">
<h4><code class="docutils literal notranslate"><span class="pre">.npy</span></code> files support unicode field names<a class="headerlink" href="#npy-files-support-unicode-field-names" title="Permalink to this headline">¶</a></h4>
<p>A new format version of 3.0 has been introduced, which enables structured types
with non-latin1 field names. This is used automatically when needed.</p>
</div>
</div>
<div class="section" id="improvements">
<h3>Improvements<a class="headerlink" href="#improvements" title="Permalink to this headline">¶</a></h3>
<div class="section" id="array-comparison-assertions-include-maximum-differences">
<h4>Array comparison assertions include maximum differences<a class="headerlink" href="#array-comparison-assertions-include-maximum-differences" title="Permalink to this headline">¶</a></h4>
<p>Error messages from array comparison tests such as
<a class="reference internal" href="reference/generated/numpy.testing.assert_allclose.html#numpy.testing.assert_allclose" title="numpy.testing.assert_allclose"><code class="xref py py-obj docutils literal notranslate"><span class="pre">testing.assert_allclose</span></code></a> now include “max absolute difference” and
“max relative difference,” in addition to the previous “mismatch” percentage.
This information makes it easier to update absolute and relative error
tolerances.</p>
</div>
<div class="section" id="replacement-of-the-fftpack-based-fft-module-by-the-pocketfft-library">
<h4>Replacement of the fftpack based <a class="reference internal" href="reference/routines.fft.html#module-numpy.fft" title="numpy.fft"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fft</span></code></a> module by the pocketfft library<a class="headerlink" href="#replacement-of-the-fftpack-based-fft-module-by-the-pocketfft-library" title="Permalink to this headline">¶</a></h4>
<p>Both implementations have the same ancestor (Fortran77 FFTPACK by Paul N.
Swarztrauber), but pocketfft contains additional modifications which improve
both accuracy and performance in some circumstances. For FFT lengths containing
large prime factors, pocketfft uses Bluestein’s algorithm, which maintains
<img class="math" src="_images/math/e5209e90ea454be6f1a21dd3ef8c137dc5b96804.svg" alt="O(N log N)"/> run time complexity instead of deteriorating towards
<img class="math" src="_images/math/570afe62bd341fdcb268b11dbd83b157003b8bb5.svg" alt="O(N*N)"/> for prime lengths. Also, accuracy for real valued FFTs with near
prime lengths has improved and is on par with complex valued FFTs.</p>
</div>
<div class="section" id="further-improvements-to-ctypes-support-in-numpy-ctypeslib">
<h4>Further improvements to <code class="docutils literal notranslate"><span class="pre">ctypes</span></code> support in <a class="reference internal" href="reference/routines.ctypeslib.html#module-numpy.ctypeslib" title="numpy.ctypeslib"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ctypeslib</span></code></a><a class="headerlink" href="#further-improvements-to-ctypes-support-in-numpy-ctypeslib" title="Permalink to this headline">¶</a></h4>
<p>A new <a class="reference internal" href="reference/routines.ctypeslib.html#numpy.ctypeslib.as_ctypes_type" title="numpy.ctypeslib.as_ctypes_type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ctypeslib.as_ctypes_type</span></code></a> function has been added, which can be
used to converts a <a class="reference internal" href="reference/generated/numpy.dtype.html#numpy.dtype" title="numpy.dtype"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dtype</span></code></a> into a best-guess <a class="reference external" href="https://docs.python.org/dev/library/ctypes.html#module-ctypes" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ctypes</span></code></a> type. Thanks to this
new function, <a class="reference internal" href="reference/routines.ctypeslib.html#numpy.ctypeslib.as_ctypes" title="numpy.ctypeslib.as_ctypes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ctypeslib.as_ctypes</span></code></a> now supports a much wider range of
array types, including structures, booleans, and integers of non-native
endianness.</p>
</div>
<div class="section" id="numpy-errstate-is-now-also-a-function-decorator">
<h4><a class="reference internal" href="reference/generated/numpy.errstate.html#numpy.errstate" title="numpy.errstate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.errstate</span></code></a> is now also a function decorator<a class="headerlink" href="#numpy-errstate-is-now-also-a-function-decorator" title="Permalink to this headline">¶</a></h4>
<p>Currently, if you have a function like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>and you want to wrap the whole thing in <a class="reference internal" href="reference/generated/numpy.errstate.html#numpy.errstate" title="numpy.errstate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">errstate</span></code></a>, you have to rewrite it
like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">np</span><span class="o">.</span><span class="n">errstate</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>but with this change, you can do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@np</span><span class="o">.</span><span class="n">errstate</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>thereby saving a level of indentation</p>
</div>
<div class="section" id="numpy-exp-and-numpy-log-speed-up-for-float32-implementation">
<h4><a class="reference internal" href="reference/generated/numpy.exp.html#numpy.exp" title="numpy.exp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.exp</span></code></a> and <a class="reference internal" href="reference/generated/numpy.log.html#numpy.log" title="numpy.log"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.log</span></code></a> speed up for float32 implementation<a class="headerlink" href="#numpy-exp-and-numpy-log-speed-up-for-float32-implementation" title="Permalink to this headline">¶</a></h4>
<p>float32 implementation of <a class="reference internal" href="reference/generated/numpy.exp.html#numpy.exp" title="numpy.exp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">exp</span></code></a> and <a class="reference internal" href="reference/generated/numpy.log.html#numpy.log" title="numpy.log"><code class="xref py py-obj docutils literal notranslate"><span class="pre">log</span></code></a> now benefit from AVX2/AVX512
instruction set which are detected during runtime. <a class="reference internal" href="reference/generated/numpy.exp.html#numpy.exp" title="numpy.exp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">exp</span></code></a> has a max ulp
error of 2.52 and <a class="reference internal" href="reference/generated/numpy.log.html#numpy.log" title="numpy.log"><code class="xref py py-obj docutils literal notranslate"><span class="pre">log</span></code></a> has a max ulp error or 3.83.</p>
</div>
<div class="section" id="improve-performance-of-numpy-pad">
<h4>Improve performance of <a class="reference internal" href="reference/generated/numpy.pad.html#numpy.pad" title="numpy.pad"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.pad</span></code></a><a class="headerlink" href="#improve-performance-of-numpy-pad" title="Permalink to this headline">¶</a></h4>
<p>The performance of the function has been improved for most cases by filling in
a preallocated array with the desired padded shape instead of using
concatenation.</p>
</div>
<div class="section" id="numpy-interp-handles-infinities-more-robustly">
<h4><a class="reference internal" href="reference/generated/numpy.interp.html#numpy.interp" title="numpy.interp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.interp</span></code></a> handles infinities more robustly<a class="headerlink" href="#numpy-interp-handles-infinities-more-robustly" title="Permalink to this headline">¶</a></h4>
<p>In some cases where <a class="reference internal" href="reference/generated/numpy.interp.html#numpy.interp" title="numpy.interp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">interp</span></code></a> would previously return <a class="reference internal" href="reference/constants.html#numpy.nan" title="numpy.nan"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nan</span></code></a>, it now
returns an appropriate infinity.</p>
</div>
<div class="section" id="pathlib-support-for-fromfile-tofile-and-ndarray-dump">
<h4>Pathlib support for <a class="reference internal" href="reference/generated/numpy.fromfile.html#numpy.fromfile" title="numpy.fromfile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fromfile</span></code></a>, <em class="xref py py-obj">tofile</em> and <a class="reference internal" href="reference/generated/numpy.ndarray.dump.html#numpy.ndarray.dump" title="numpy.ndarray.dump"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ndarray.dump</span></code></a><a class="headerlink" href="#pathlib-support-for-fromfile-tofile-and-ndarray-dump" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="reference/generated/numpy.fromfile.html#numpy.fromfile" title="numpy.fromfile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fromfile</span></code></a>, <em class="xref py py-obj">ndarray.ndarray.tofile</em> and <a class="reference internal" href="reference/generated/numpy.ndarray.dump.html#numpy.ndarray.dump" title="numpy.ndarray.dump"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ndarray.dump</span></code></a> now support
the <a class="reference external" href="https://docs.python.org/dev/library/pathlib.html#pathlib.Path" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> type for the <code class="docutils literal notranslate"><span class="pre">file</span></code>/<code class="docutils literal notranslate"><span class="pre">fid</span></code> parameter.</p>
</div>
<div class="section" id="specialized-isnan-isinf-and-isfinite-ufuncs-for-bool-and-int-types">
<h4>Specialized <a class="reference internal" href="reference/generated/numpy.isnan.html#numpy.isnan" title="numpy.isnan"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isnan</span></code></a>, <a class="reference internal" href="reference/generated/numpy.isinf.html#numpy.isinf" title="numpy.isinf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isinf</span></code></a>, and <a class="reference internal" href="reference/generated/numpy.isfinite.html#numpy.isfinite" title="numpy.isfinite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isfinite</span></code></a> ufuncs for bool and int types<a class="headerlink" href="#specialized-isnan-isinf-and-isfinite-ufuncs-for-bool-and-int-types" title="Permalink to this headline">¶</a></h4>
<p>The boolean and integer types are incapable of storing <a class="reference internal" href="reference/constants.html#numpy.nan" title="numpy.nan"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nan</span></code></a> and <a class="reference internal" href="reference/constants.html#numpy.inf" title="numpy.inf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">inf</span></code></a> values,
which allows us to provide specialized ufuncs that are up to 250x faster than
the previous approach.</p>
</div>
<div class="section" id="isfinite-supports-datetime64-and-timedelta64-types">
<h4><a class="reference internal" href="reference/generated/numpy.isfinite.html#numpy.isfinite" title="numpy.isfinite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isfinite</span></code></a> supports <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> and <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> types<a class="headerlink" href="#isfinite-supports-datetime64-and-timedelta64-types" title="Permalink to this headline">¶</a></h4>
<p>Previously, <a class="reference internal" href="reference/generated/numpy.isfinite.html#numpy.isfinite" title="numpy.isfinite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isfinite</span></code></a> used to raise a <em class="xref py py-obj">TypeError</em> on being used on these
two types.</p>
</div>
<div class="section" id="new-keywords-added-to-nan-to-num">
<h4>New keywords added to <a class="reference internal" href="reference/generated/numpy.nan_to_num.html#numpy.nan_to_num" title="numpy.nan_to_num"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nan_to_num</span></code></a><a class="headerlink" href="#new-keywords-added-to-nan-to-num" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="reference/generated/numpy.nan_to_num.html#numpy.nan_to_num" title="numpy.nan_to_num"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nan_to_num</span></code></a> now accepts keywords <code class="docutils literal notranslate"><span class="pre">nan</span></code>, <code class="docutils literal notranslate"><span class="pre">posinf</span></code> and <code class="docutils literal notranslate"><span class="pre">neginf</span></code>
allowing the user to define the value to replace the <code class="docutils literal notranslate"><span class="pre">nan</span></code>, positive and
negative <code class="docutils literal notranslate"><span class="pre">np.inf</span></code> values respectively.</p>
</div>
<div class="section" id="memoryerrors-caused-by-allocated-overly-large-arrays-are-more-descriptive">
<h4>MemoryErrors caused by allocated overly large arrays are more descriptive<a class="headerlink" href="#memoryerrors-caused-by-allocated-overly-large-arrays-are-more-descriptive" title="Permalink to this headline">¶</a></h4>
<p>Often the cause of a MemoryError is incorrect broadcasting, which results in a
very large and incorrect shape. The message of the error now includes this
shape to help diagnose the cause of failure.</p>
</div>
<div class="section" id="floor-ceil-and-trunc-now-respect-builtin-magic-methods">
<h4><a class="reference internal" href="reference/generated/numpy.floor.html#numpy.floor" title="numpy.floor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">floor</span></code></a>, <a class="reference internal" href="reference/generated/numpy.ceil.html#numpy.ceil" title="numpy.ceil"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ceil</span></code></a>, and <a class="reference internal" href="reference/generated/numpy.trunc.html#numpy.trunc" title="numpy.trunc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trunc</span></code></a> now respect builtin magic methods<a class="headerlink" href="#floor-ceil-and-trunc-now-respect-builtin-magic-methods" title="Permalink to this headline">¶</a></h4>
<p>These ufuncs now call the <code class="docutils literal notranslate"><span class="pre">__floor__</span></code>, <code class="docutils literal notranslate"><span class="pre">__ceil__</span></code>, and <code class="docutils literal notranslate"><span class="pre">__trunc__</span></code>
methods when called on object arrays, making them compatible with
<a class="reference external" href="https://docs.python.org/dev/library/decimal.html#decimal.Decimal" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">decimal.Decimal</span></code></a> and <a class="reference external" href="https://docs.python.org/dev/library/fractions.html#fractions.Fraction" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fractions.Fraction</span></code></a> objects.</p>
</div>
<div class="section" id="quantile-now-works-on-fraction-fraction-and-decimal-decimal-objects">
<h4><a class="reference internal" href="reference/generated/numpy.quantile.html#numpy.quantile" title="numpy.quantile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">quantile</span></code></a> now works on <em class="xref py py-obj">fraction.Fraction</em> and <a class="reference external" href="https://docs.python.org/dev/library/decimal.html#decimal.Decimal" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">decimal.Decimal</span></code></a> objects<a class="headerlink" href="#quantile-now-works-on-fraction-fraction-and-decimal-decimal-objects" title="Permalink to this headline">¶</a></h4>
<p>In general, this handles object arrays more gracefully, and avoids floating-
point operations if exact arithmetic types are used.</p>
</div>
<div class="section" id="support-of-object-arrays-in-matmul">
<h4>Support of object arrays in <a class="reference internal" href="reference/generated/numpy.matmul.html#numpy.matmul" title="numpy.matmul"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matmul</span></code></a><a class="headerlink" href="#support-of-object-arrays-in-matmul" title="Permalink to this headline">¶</a></h4>
<p>It is now possible to use <a class="reference internal" href="reference/generated/numpy.matmul.html#numpy.matmul" title="numpy.matmul"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matmul</span></code></a> (or the <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> operator) with object arrays.
For instance, it is now possible to do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fractions</span> <span class="k">import</span> <span class="n">Fraction</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span> <span class="p">[</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">@</span> <span class="n">a</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="changes">
<h3>Changes<a class="headerlink" href="#changes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="median-and-percentile-family-of-functions-no-longer-warn-about-nan">
<h4><a class="reference internal" href="reference/generated/numpy.median.html#numpy.median" title="numpy.median"><code class="xref py py-obj docutils literal notranslate"><span class="pre">median</span></code></a> and <a class="reference internal" href="reference/generated/numpy.percentile.html#numpy.percentile" title="numpy.percentile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">percentile</span></code></a> family of functions no longer warn about <code class="docutils literal notranslate"><span class="pre">nan</span></code><a class="headerlink" href="#median-and-percentile-family-of-functions-no-longer-warn-about-nan" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="reference/generated/numpy.median.html#numpy.median" title="numpy.median"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.median</span></code></a>, <a class="reference internal" href="reference/generated/numpy.percentile.html#numpy.percentile" title="numpy.percentile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.percentile</span></code></a>, and <a class="reference internal" href="reference/generated/numpy.quantile.html#numpy.quantile" title="numpy.quantile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.quantile</span></code></a> used to emit a
<code class="docutils literal notranslate"><span class="pre">RuntimeWarning</span></code> when encountering an <a class="reference internal" href="reference/constants.html#numpy.nan" title="numpy.nan"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nan</span></code></a>. Since they return the
<code class="docutils literal notranslate"><span class="pre">nan</span></code> value, the warning is redundant and has been removed.</p>
</div>
<div class="section" id="timedelta64-0-behavior-adjusted-to-return-nat">
<h4><code class="docutils literal notranslate"><span class="pre">timedelta64</span> <span class="pre">%</span> <span class="pre">0</span></code> behavior adjusted to return <code class="docutils literal notranslate"><span class="pre">NaT</span></code><a class="headerlink" href="#timedelta64-0-behavior-adjusted-to-return-nat" title="Permalink to this headline">¶</a></h4>
<p>The modulus operation with two <code class="docutils literal notranslate"><span class="pre">np.timedelta64</span></code> operands now returns
<code class="docutils literal notranslate"><span class="pre">NaT</span></code> in the case of division by zero, rather than returning zero</p>
</div>
<div class="section" id="numpy-functions-now-always-support-overrides-with-array-function">
<h4>NumPy functions now always support overrides with <code class="docutils literal notranslate"><span class="pre">__array_function__</span></code><a class="headerlink" href="#numpy-functions-now-always-support-overrides-with-array-function" title="Permalink to this headline">¶</a></h4>
<p>NumPy now always checks the <code class="docutils literal notranslate"><span class="pre">__array_function__</span></code> method to implement overrides
of NumPy functions on non-NumPy arrays, as described in <a class="reference external" href="http://www.numpy.org/neps/nep-0018-array-function-protocol.html">NEP 18</a>. The feature
was available for testing with NumPy 1.16 if appropriate environment variables
are set, but is now always enabled.</p>
</div>
<div class="section" id="lib-recfunctions-structured-to-unstructured-does-not-squeeze-single-field-views">
<h4><code class="docutils literal notranslate"><span class="pre">lib.recfunctions.structured_to_unstructured</span></code> does not squeeze single-field views<a class="headerlink" href="#lib-recfunctions-structured-to-unstructured-does-not-squeeze-single-field-views" title="Permalink to this headline">¶</a></h4>
<p>Previously <code class="docutils literal notranslate"><span class="pre">structured_to_unstructured(arr[['a']])</span></code> would produce a squeezed
result inconsistent with <code class="docutils literal notranslate"><span class="pre">structured_to_unstructured(arr[['a',</span> <span class="pre">b']])</span></code>. This
was accidental. The old behavior can be retained with
<code class="docutils literal notranslate"><span class="pre">structured_to_unstructured(arr[['a']]).squeeze(axis=-1)</span></code> or far more simply,
<code class="docutils literal notranslate"><span class="pre">arr['a']</span></code>.</p>
</div>
<div class="section" id="clip-now-uses-a-ufunc-under-the-hood">
<h4><a class="reference internal" href="reference/generated/numpy.clip.html#numpy.clip" title="numpy.clip"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clip</span></code></a> now uses a ufunc under the hood<a class="headerlink" href="#clip-now-uses-a-ufunc-under-the-hood" title="Permalink to this headline">¶</a></h4>
<p>This means that registering clip functions for custom dtypes in C via
<code class="docutils literal notranslate"><span class="pre">descr-&gt;f-&gt;fastclip</span></code> is deprecated - they should use the ufunc registration
mechanism instead, attaching to the <code class="docutils literal notranslate"><span class="pre">np.core.umath.clip</span></code> ufunc.</p>
<p>It also means that <code class="docutils literal notranslate"><span class="pre">clip</span></code> accepts <code class="docutils literal notranslate"><span class="pre">where</span></code> and <code class="docutils literal notranslate"><span class="pre">casting</span></code> arguments,
and can be override with <code class="docutils literal notranslate"><span class="pre">__array_ufunc__</span></code>.</p>
<p>A consequence of this change is that some behaviors of the old <code class="docutils literal notranslate"><span class="pre">clip</span></code> have
been deprecated:</p>
<ul class="simple">
<li>Passing <code class="docutils literal notranslate"><span class="pre">nan</span></code> to mean “do not clip” as one or both bounds. This didn’t work
in all cases anyway, and can be better handled by passing infinities of the
appropriate sign.</li>
<li>Using “unsafe” casting by default when an <code class="docutils literal notranslate"><span class="pre">out</span></code> argument is passed. Using
<code class="docutils literal notranslate"><span class="pre">casting=&quot;unsafe&quot;</span></code> explicitly will silence this warning.</li>
</ul>
<p>Additionally, there are some corner cases with behavior changes:</p>
<ul class="simple">
<li>Padding <code class="docutils literal notranslate"><span class="pre">max</span> <span class="pre">&lt;</span> <span class="pre">min</span></code> has changed to be more consistent across dtypes, but
should not be relied upon.</li>
<li>Scalar <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> take part in promotion rules like they do in all
other ufuncs.</li>
</ul>
</div>
<div class="section" id="array-interface-offset-now-works-as-documented">
<h4><code class="docutils literal notranslate"><span class="pre">__array_interface__</span></code> offset now works as documented<a class="headerlink" href="#array-interface-offset-now-works-as-documented" title="Permalink to this headline">¶</a></h4>
<p>The interface may use an <code class="docutils literal notranslate"><span class="pre">offset</span></code> value that was mistakenly ignored.</p>
</div>
<div class="section" id="pickle-protocol-in-savez-set-to-3-for-force-zip64-flag">
<h4>Pickle protocol in <a class="reference internal" href="reference/generated/numpy.savez.html#numpy.savez" title="numpy.savez"><code class="xref py py-obj docutils literal notranslate"><span class="pre">savez</span></code></a> set to 3 for <code class="docutils literal notranslate"><span class="pre">force</span> <span class="pre">zip64</span></code> flag<a class="headerlink" href="#pickle-protocol-in-savez-set-to-3-for-force-zip64-flag" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="reference/generated/numpy.savez.html#numpy.savez" title="numpy.savez"><code class="xref py py-obj docutils literal notranslate"><span class="pre">savez</span></code></a> was not using the <code class="docutils literal notranslate"><span class="pre">force_zip64</span></code> flag, which limited the size of
the archive to 2GB. But using the flag requires us to use pickle protocol 3 to
write <code class="docutils literal notranslate"><span class="pre">object</span></code> arrays. The protocol used was bumped to 3, meaning the archive
will be unreadable by Python2.</p>
</div>
<div class="section" id="structured-arrays-indexed-with-non-existent-fields-raise-keyerror-not-valueerror">
<h4>Structured arrays indexed with non-existent fields raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> not <code class="docutils literal notranslate"><span class="pre">ValueError</span></code><a class="headerlink" href="#structured-arrays-indexed-with-non-existent-fields-raise-keyerror-not-valueerror" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">arr['bad_field']</span></code> on a structured type raises <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>, for consistency
with <code class="docutils literal notranslate"><span class="pre">dict['bad_field']</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="numpy-1-16-4-release-notes">
<h2>NumPy 1.16.4 Release Notes<a class="headerlink" href="#numpy-1-16-4-release-notes" title="Permalink to this headline">¶</a></h2>
<p>The NumPy 1.16.4 release fixes bugs reported against the 1.16.3 release, and
also backports several enhancements from master that seem appropriate for a
release series that is the last to support Python 2.7. The wheels on PyPI are
linked with OpenBLAS v0.3.7-dev, which should fix issues on Skylake series
cpus.</p>
<p>Downstream developers building this release should use Cython &gt;= 0.29.2 and,
if using OpenBLAS, OpenBLAS &gt; v0.3.7. The supported Python versions are 2.7 and
3.5-3.7.</p>
<div class="section" id="new-deprecations">
<h3>New deprecations<a class="headerlink" href="#new-deprecations" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id2">
<h4>Writeable flag of C-API wrapped arrays<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>When an array is created from the C-API to wrap a pointer to data, the only
indication we have of the read-write nature of the data is the <code class="docutils literal notranslate"><span class="pre">writeable</span></code>
flag set during creation. It is dangerous to force the flag to writeable.  In
the future it will not be possible to switch the writeable flag to <code class="docutils literal notranslate"><span class="pre">True</span></code>
from python.  This deprecation should not affect many users since arrays
created in such a manner are very rare in practice and only available through
the NumPy C-API.</p>
</div>
</div>
<div class="section" id="id3">
<h3>Compatibility notes<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="section" id="potential-changes-to-the-random-stream">
<h4>Potential changes to the random stream<a class="headerlink" href="#potential-changes-to-the-random-stream" title="Permalink to this headline">¶</a></h4>
<p>Due to bugs in the application of log to random floating point numbers,
the stream may change when sampling from <code class="docutils literal notranslate"><span class="pre">np.random.beta</span></code>, <code class="docutils literal notranslate"><span class="pre">np.random.binomial</span></code>,
<code class="docutils literal notranslate"><span class="pre">np.random.laplace</span></code>, <code class="docutils literal notranslate"><span class="pre">np.random.logistic</span></code>, <code class="docutils literal notranslate"><span class="pre">np.random.logseries</span></code> or
<code class="docutils literal notranslate"><span class="pre">np.random.multinomial</span></code> if a 0 is generated in the underlying MT19937 random stream.
There is a 1 in <img class="math" src="_images/math/68dd3c21c372950e00a95ff6daa6b68ab150abf6.svg" alt="10^{53}"/> chance of this occurring, and so the probability that
the stream changes for any given seed is extremely small. If a 0 is encountered in the
underlying generator, then the incorrect value produced (either <code class="docutils literal notranslate"><span class="pre">np.inf</span></code>
or <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>) is now dropped.</p>
</div>
</div>
<div class="section" id="id4">
<h3>Changes<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="section" id="numpy-lib-recfunctions-structured-to-unstructured-does-not-squeeze-single-field-views">
<h4><a class="reference internal" href="user/basics.rec.html#numpy.lib.recfunctions.structured_to_unstructured" title="numpy.lib.recfunctions.structured_to_unstructured"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.lib.recfunctions.structured_to_unstructured</span></code></a> does not squeeze single-field views<a class="headerlink" href="#numpy-lib-recfunctions-structured-to-unstructured-does-not-squeeze-single-field-views" title="Permalink to this headline">¶</a></h4>
<p>Previously <code class="docutils literal notranslate"><span class="pre">structured_to_unstructured(arr[['a']])</span></code> would produce a squeezed
result inconsistent with <code class="docutils literal notranslate"><span class="pre">structured_to_unstructured(arr[['a',</span> <span class="pre">b']])</span></code>. This
was accidental. The old behavior can be retained with
<code class="docutils literal notranslate"><span class="pre">structured_to_unstructured(arr[['a']]).squeeze(axis=-1)</span></code> or far more simply,
<code class="docutils literal notranslate"><span class="pre">arr['a']</span></code>.</p>
</div>
</div>
<div class="section" id="contributors">
<h3>Contributors<a class="headerlink" href="#contributors" title="Permalink to this headline">¶</a></h3>
<p>A total of 10 people contributed to this release.  People with a “+” by their
names contributed a patch for the first time.</p>
<ul class="simple">
<li>Charles Harris</li>
<li>Eric Wieser</li>
<li>Dennis Zollo +</li>
<li>Hunter Damron +</li>
<li>Jingbei Li +</li>
<li>Kevin Sheppard</li>
<li>Matti Picus</li>
<li>Nicola Soranzo +</li>
<li>Sebastian Berg</li>
<li>Tyler Reddy</li>
</ul>
</div>
<div class="section" id="pull-requests-merged">
<h3>Pull requests merged<a class="headerlink" href="#pull-requests-merged" title="Permalink to this headline">¶</a></h3>
<p>A total of 16 pull requests were merged for this release.</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13392">#13392</a>: BUG: Some PyPy versions lack PyStructSequence_InitType2.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13394">#13394</a>: MAINT, DEP: Fix deprecated <code class="docutils literal notranslate"><span class="pre">assertEquals()</span></code></li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13396">#13396</a>: BUG: Fix structured_to_unstructured on single-field types (backport)</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13549">#13549</a>: BLD: Make CI pass again with pytest 4.5</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13552">#13552</a>: TST: Register markers in conftest.py.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13559">#13559</a>: BUG: Removes ValueError for empty kwargs in arraymultiter_new</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13560">#13560</a>: BUG: Add TypeError to accepted exceptions in crackfortran.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13561">#13561</a>: BUG: Handle subarrays in descr_to_dtype</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13562">#13562</a>: BUG: Protect generators from log(0.0)</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13563">#13563</a>: BUG: Always return views from structured_to_unstructured when…</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13564">#13564</a>: BUG: Catch stderr when checking compiler version</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13565">#13565</a>: BUG: longdouble(int) does not work</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13587">#13587</a>: BUG: distutils/system_info.py fix missing subprocess import (#13523)</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13620">#13620</a>: BUG,DEP: Fix writeable flag setting for arrays without base</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13641">#13641</a>: MAINT: Prepare for the 1.16.4 release.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13644">#13644</a>: BUG: special case object arrays when printing rel-, abs-error</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-16-3-release-notes">
<h2>NumPy 1.16.3 Release Notes<a class="headerlink" href="#numpy-1-16-3-release-notes" title="Permalink to this headline">¶</a></h2>
<p>The NumPy 1.16.3 release fixes bugs reported against the 1.16.2 release, and
also backports several enhancements from master that seem appropriate for a
release series that is the last to support Python 2.7. The wheels on PyPI are
linked with OpenBLAS v0.3.4+,  which should fix the known threading issues
found in previous OpenBLAS versions.</p>
<p>Downstream developers building this release should use Cython &gt;= 0.29.2 and,
if using OpenBLAS, OpenBLAS &gt; v0.3.4.</p>
<p>The most noticeable change in this release is that unpickling object arrays
when loading <code class="docutils literal notranslate"><span class="pre">*.npy</span></code> or <code class="docutils literal notranslate"><span class="pre">*.npz</span></code> files now requires an explicit opt-in.
This backwards incompatible change was made in response to
<a class="reference external" href="https://nvd.nist.gov/vuln/detail/CVE-2019-6446">CVE-2019-6446</a>.</p>
<div class="section" id="id6">
<h3>Compatibility notes<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id7">
<h4>Unpickling while loading requires explicit opt-in<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p>The functions <code class="docutils literal notranslate"><span class="pre">np.load</span></code>, and <code class="docutils literal notranslate"><span class="pre">np.lib.format.read_array</span></code> take an
<em class="xref py py-obj">allow_pickle</em> keyword which now defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code> in response to
<a class="reference external" href="https://nvd.nist.gov/vuln/detail/CVE-2019-6446">CVE-2019-6446</a>.</p>
</div>
</div>
<div class="section" id="id9">
<h3>Improvements<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<div class="section" id="covariance-in-random-mvnormal-cast-to-double">
<h4>Covariance in <em class="xref py py-obj">random.mvnormal</em> cast to double<a class="headerlink" href="#covariance-in-random-mvnormal-cast-to-double" title="Permalink to this headline">¶</a></h4>
<p>This should make the tolerance used when checking the singular values of the
covariance matrix more meaningful.</p>
</div>
</div>
<div class="section" id="id10">
<h3>Changes<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id11">
<h4><code class="docutils literal notranslate"><span class="pre">__array_interface__</span></code> offset now works as documented<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p>The interface may use an <code class="docutils literal notranslate"><span class="pre">offset</span></code> value that was previously mistakenly
ignored.</p>
</div>
</div>
</div>
<div class="section" id="numpy-1-16-2-release-notes">
<h2>NumPy 1.16.2 Release Notes<a class="headerlink" href="#numpy-1-16-2-release-notes" title="Permalink to this headline">¶</a></h2>
<p>NumPy 1.16.2 is a quick release fixing several problems encountered on Windows.
The Python versions supported are 2.7 and 3.5-3.7. The Windows problems
addressed are:</p>
<ul class="simple">
<li>DLL load problems for NumPy wheels on Windows,</li>
<li>distutils command line parsing on Windows.</li>
</ul>
<p>There is also a regression fix correcting signed zeros produced by divmod, see
below for details.</p>
<p>Downstream developers building this release should use Cython &gt;= 0.29.2 and, if
using OpenBLAS, OpenBLAS &gt; v0.3.4.</p>
<p>If you are installing using pip, you may encounter a problem with older
installed versions of NumPy that pip did not delete becoming mixed with the
current version, resulting in an <code class="docutils literal notranslate"><span class="pre">ImportError</span></code>. That problem is particularly
common on Debian derived distributions due to a modified pip.  The fix is to
make sure all previous NumPy versions installed by pip have been removed. See
<a class="reference external" href="https://github.com/numpy/numpy/issues/12736">#12736</a> for discussion of the
issue.</p>
<div class="section" id="id12">
<h3>Compatibility notes<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id13">
<h4>Signed zero when using divmod<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<p>Starting in version 1.12.0, numpy incorrectly returned a negatively signed zero
when using the <code class="docutils literal notranslate"><span class="pre">divmod</span></code> and <code class="docutils literal notranslate"><span class="pre">floor_divide</span></code> functions when the result was
zero. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">//</span><span class="mi">1</span>
<span class="go">array([-0., -0., -0., -0., -0., -0., -0., -0., -0., -0.])</span>
</pre></div>
</div>
<p>With this release, the result is correctly returned as a positively signed
zero:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">//</span><span class="mi">1</span>
<span class="go">array([0., 0., 0., 0., 0., 0., 0., 0., 0., 0.])</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id14">
<h3>Contributors<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<p>A total of 5 people contributed to this release.  People with a “+” by their
names contributed a patch for the first time.</p>
<ul class="simple">
<li>Charles Harris</li>
<li>Eric Wieser</li>
<li>Matti Picus</li>
<li>Tyler Reddy</li>
<li>Tony LaTorre +</li>
</ul>
</div>
<div class="section" id="id15">
<h3>Pull requests merged<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<p>A total of 7 pull requests were merged for this release.</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12909">#12909</a>: TST: fix vmImage dispatch in Azure</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12923">#12923</a>: MAINT: remove complicated test of multiarray import failure mode</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13020">#13020</a>: BUG: fix signed zero behavior in npy_divmod</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13026">#13026</a>: MAINT: Add functions to parse shell-strings in the platform-native…</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13028">#13028</a>: BUG: Fix regression in parsing of F90 and F77 environment variables</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13038">#13038</a>: BUG: parse shell escaping in extra_compile_args and extra_link_args</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/13041">#13041</a>: BLD: Windows absolute path DLL loading</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-16-1-release-notes">
<h2>NumPy 1.16.1 Release Notes<a class="headerlink" href="#numpy-1-16-1-release-notes" title="Permalink to this headline">¶</a></h2>
<p>The NumPy 1.16.1 release fixes bugs reported against the 1.16.0 release, and
also backports several enhancements from master that seem appropriate for a
release series that is the last to support Python 2.7. The wheels on PyPI are
linked with OpenBLAS v0.3.4+,  which should fix the known threading issues
found in previous OpenBLAS versions.</p>
<p>Downstream developers building this release should use Cython &gt;= 0.29.2 and, if
using OpenBLAS, OpenBLAS &gt; v0.3.4.</p>
<p>If you are installing using pip, you may encounter a problem with older
installed versions of NumPy that pip did not delete becoming mixed with the
current version, resulting in an <code class="docutils literal notranslate"><span class="pre">ImportError</span></code>. That problem is particularly
common on Debian derived distributions due to a modified pip.  The fix is to
make sure all previous NumPy versions installed by pip have been removed. See
<a class="reference external" href="https://github.com/numpy/numpy/issues/12736">#12736</a> for discussion of the
issue. Note that previously this problem resulted in an <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>.</p>
<div class="section" id="id16">
<h3>Contributors<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<p>A total of 16 people contributed to this release.  People with a “+” by their
names contributed a patch for the first time.</p>
<ul class="simple">
<li>Antoine Pitrou</li>
<li>Arcesio Castaneda Medina +</li>
<li>Charles Harris</li>
<li>Chris Markiewicz +</li>
<li>Christoph Gohlke</li>
<li>Christopher J. Markiewicz +</li>
<li>Daniel Hrisca +</li>
<li>EelcoPeacs +</li>
<li>Eric Wieser</li>
<li>Kevin Sheppard</li>
<li>Matti Picus</li>
<li>OBATA Akio +</li>
<li>Ralf Gommers</li>
<li>Sebastian Berg</li>
<li>Stephan Hoyer</li>
<li>Tyler Reddy</li>
</ul>
</div>
<div class="section" id="enhancements">
<h3>Enhancements<a class="headerlink" href="#enhancements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12767">#12767</a>: ENH: add mm-&gt;q floordiv</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12768">#12768</a>: ENH: port np.core.overrides to C for speed</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12769">#12769</a>: ENH: Add np.ctypeslib.as_ctypes_type(dtype), improve <em class="xref py py-obj">np.ctypeslib.as_ctypes</em></li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12773">#12773</a>: ENH: add “max difference” messages to np.testing.assert_array_equal…</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12820">#12820</a>: ENH: Add mm-&gt;qm divmod</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12890">#12890</a>: ENH: add _dtype_ctype to namespace for freeze analysis</li>
</ul>
</div>
<div class="section" id="id17">
<h3>Compatibility notes<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The changed error message emited by array comparison testing functions may
affect doctests. See below for detail.</li>
<li>Casting from double and single denormals to float16 has been corrected.  In
some rare cases, this may result in results being rounded up instead of down,
changing the last bit (ULP) of the result.</li>
</ul>
</div>
<div class="section" id="id18">
<h3>New Features<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id19">
<h4>divmod operation is now supported for two <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> operands<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h4>
<p>The divmod operator now handles two <code class="docutils literal notranslate"><span class="pre">np.timedelta64</span></code> operands, with
type signature <code class="docutils literal notranslate"><span class="pre">mm-&gt;qm</span></code>.</p>
</div>
</div>
<div class="section" id="id20">
<h3>Improvements<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<div class="section" id="further-improvements-to-ctypes-support-in-np-ctypeslib">
<h4>Further improvements to <code class="docutils literal notranslate"><span class="pre">ctypes</span></code> support in <code class="docutils literal notranslate"><span class="pre">np.ctypeslib</span></code><a class="headerlink" href="#further-improvements-to-ctypes-support-in-np-ctypeslib" title="Permalink to this headline">¶</a></h4>
<p>A new <a class="reference internal" href="reference/routines.ctypeslib.html#numpy.ctypeslib.as_ctypes_type" title="numpy.ctypeslib.as_ctypes_type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ctypeslib.as_ctypes_type</span></code></a> function has been added, which can be
used to converts a <a class="reference internal" href="reference/generated/numpy.dtype.html#numpy.dtype" title="numpy.dtype"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dtype</span></code></a> into a best-guess <a class="reference external" href="https://docs.python.org/dev/library/ctypes.html#module-ctypes" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ctypes</span></code></a> type. Thanks to this
new function, <a class="reference internal" href="reference/routines.ctypeslib.html#numpy.ctypeslib.as_ctypes" title="numpy.ctypeslib.as_ctypes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ctypeslib.as_ctypes</span></code></a> now supports a much wider range of
array types, including structures, booleans, and integers of non-native
endianness.</p>
</div>
<div class="section" id="id21">
<h4>Array comparison assertions include maximum differences<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h4>
<p>Error messages from array comparison tests such as
<em class="xref py py-obj">np.testing.assert_allclose</em> now include “max absolute difference” and
“max relative difference,” in addition to the previous “mismatch” percentage.
This information makes it easier to update absolute and relative error
tolerances.</p>
</div>
</div>
<div class="section" id="id22">
<h3>Changes<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id23">
<h4><code class="docutils literal notranslate"><span class="pre">timedelta64</span> <span class="pre">%</span> <span class="pre">0</span></code> behavior adjusted to return <code class="docutils literal notranslate"><span class="pre">NaT</span></code><a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h4>
<p>The modulus operation with two <code class="docutils literal notranslate"><span class="pre">np.timedelta64</span></code> operands now returns
<code class="docutils literal notranslate"><span class="pre">NaT</span></code> in the case of division by zero, rather than returning zero</p>
</div>
</div>
</div>
<div class="section" id="numpy-1-16-0-release-notes">
<h2>NumPy 1.16.0 Release Notes<a class="headerlink" href="#numpy-1-16-0-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This NumPy release is the last one to support Python 2.7 and will be maintained
as a long term release with bug fixes until 2020.  Support for Python 3.4 been
dropped, the supported Python versions are 2.7 and 3.5-3.7. The wheels on PyPI
are linked with OpenBLAS v0.3.4+,  which should fix the known threading issues
found in previous OpenBLAS versions.</p>
<p>Downstream developers building this release should use Cython &gt;= 0.29 and, if
using OpenBLAS, OpenBLAS &gt; v0.3.4.</p>
<p>This release has seen a lot of refactoring and features many bug fixes, improved
code organization, and better cross platform compatibility. Not all of these
improvements will be visible to users, but they should help make maintenance
easier going forward.</p>
<div class="section" id="id24">
<h3>Highlights<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Experimental (opt-in only) support for overriding numpy functions,
see <code class="docutils literal notranslate"><span class="pre">__array_function__</span></code> below.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">matmul</span></code> function is now a ufunc. This provides better
performance and allows overriding with <code class="docutils literal notranslate"><span class="pre">__array_ufunc__</span></code>.</li>
<li>Improved support for the ARM and POWER architectures.</li>
<li>Improved support for AIX and PyPy.</li>
<li>Improved interop with ctypes.</li>
<li>Improved support for PEP 3118.</li>
</ul>
</div>
<div class="section" id="id25">
<h3>New functions<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">New functions added to the <em class="xref py py-obj">numpy.lib.recfuntions</em> module to ease the
structured assignment changes:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">assign_fields_by_name</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">structured_to_unstructured</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">unstructured_to_structured</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">apply_along_fields</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">require_fields</span></code></li>
</ul>
</div></blockquote>
<p>See the user guide at &lt;<a class="reference external" href="https://docs.scipy.org/doc/numpy/user/basics.rec.html">https://docs.scipy.org/doc/numpy/user/basics.rec.html</a>&gt;
for more info.</p>
</li>
</ul>
</div>
<div class="section" id="id26">
<h3>New deprecations<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The type dictionaries <code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.core.typeNA</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.core.sctypeNA</span></code> are
deprecated. They were buggy and not documented and will be removed in the
1.18 release. Use`numpy.sctypeDict` instead.</li>
<li>The <a class="reference internal" href="reference/generated/numpy.asscalar.html#numpy.asscalar" title="numpy.asscalar"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.asscalar</span></code></a> function is deprecated. It is an alias to the more
powerful <a class="reference internal" href="reference/generated/numpy.ndarray.item.html#numpy.ndarray.item" title="numpy.ndarray.item"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray.item</span></code></a>, not tested, and fails for scalars.</li>
<li>The <em class="xref py py-obj">numpy.set_array_ops</em> and <em class="xref py py-obj">numpy.get_array_ops</em> functions are deprecated.
As part of <em class="xref py py-obj">NEP 15</em>, they have been deprecated along with the C-API functions
<a class="reference internal" href="reference/c-api.array.html#c.PyArray_SetNumericOps" title="PyArray_SetNumericOps"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArray_SetNumericOps</span></code></a> and <a class="reference internal" href="reference/c-api.array.html#c.PyArray_GetNumericOps" title="PyArray_GetNumericOps"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArray_GetNumericOps</span></code></a>. Users
who wish to override the inner loop functions in built-in ufuncs should use
<a class="reference internal" href="reference/c-api.ufunc.html#c.PyUFunc_ReplaceLoopBySignature" title="PyUFunc_ReplaceLoopBySignature"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUFunc_ReplaceLoopBySignature</span></code></a>.</li>
<li>The <a class="reference internal" href="reference/generated/numpy.unravel_index.html#numpy.unravel_index" title="numpy.unravel_index"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.unravel_index</span></code></a> keyword argument <code class="docutils literal notranslate"><span class="pre">dims</span></code> is deprecated, use
<code class="docutils literal notranslate"><span class="pre">shape</span></code> instead.</li>
<li>The <a class="reference internal" href="reference/generated/numpy.histogram.html#numpy.histogram" title="numpy.histogram"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.histogram</span></code></a> <code class="docutils literal notranslate"><span class="pre">normed</span></code> argument is deprecated.  It was deprecated
previously, but no warning was issued.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">positive</span></code> operator (<code class="docutils literal notranslate"><span class="pre">+</span></code>) applied to non-numerical arrays is
deprecated. See below for details.</li>
<li>Passing an iterator to the stack functions is deprecated</li>
</ul>
</div>
<div class="section" id="expired-deprecations">
<h3>Expired deprecations<a class="headerlink" href="#expired-deprecations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>NaT comparisons now return <code class="docutils literal notranslate"><span class="pre">False</span></code> without a warning, finishing a
deprecation cycle begun in NumPy 1.11.</li>
<li><code class="docutils literal notranslate"><span class="pre">np.lib.function_base.unique</span></code> was removed, finishing a deprecation cycle
begun in NumPy 1.4. Use <a class="reference internal" href="reference/generated/numpy.unique.html#numpy.unique" title="numpy.unique"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.unique</span></code></a> instead.</li>
<li>multi-field indexing now returns views instead of copies, finishing a
deprecation cycle begun in NumPy 1.7. The change was previously attempted in
NumPy 1.14 but reverted until now.</li>
<li><code class="docutils literal notranslate"><span class="pre">np.PackageLoader</span></code> and <code class="docutils literal notranslate"><span class="pre">np.pkgload</span></code> have been removed. These were
deprecated in 1.10, had no tests, and seem to no longer work in 1.15.</li>
</ul>
</div>
<div class="section" id="id27">
<h3>Future changes<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>NumPy 1.17 will drop support for Python 2.7.</li>
</ul>
</div>
<div class="section" id="id28">
<h3>Compatibility notes<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h3>
<div class="section" id="f2py-script-on-windows">
<h4>f2py script on Windows<a class="headerlink" href="#f2py-script-on-windows" title="Permalink to this headline">¶</a></h4>
<p>On Windows, the installed script for running f2py is now an <code class="docutils literal notranslate"><span class="pre">.exe</span></code> file
rather than a <code class="docutils literal notranslate"><span class="pre">*.py</span></code> file and should be run from the command line as <code class="docutils literal notranslate"><span class="pre">f2py</span></code>
whenever the <code class="docutils literal notranslate"><span class="pre">Scripts</span></code> directory is in the path. Running <code class="docutils literal notranslate"><span class="pre">f2py</span></code> as a module
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">numpy.f2py</span> <span class="pre">[...]</span></code> will work without path modification in any
version of NumPy.</p>
</div>
<div class="section" id="nat-comparisons">
<h4>NaT comparisons<a class="headerlink" href="#nat-comparisons" title="Permalink to this headline">¶</a></h4>
<p>Consistent with the behavior of NaN, all comparisons other than inequality
checks with datetime64 or timedelta64 NaT (“not-a-time”) values now always
return <code class="docutils literal notranslate"><span class="pre">False</span></code>, and inequality checks with NaT now always return <code class="docutils literal notranslate"><span class="pre">True</span></code>.
This includes comparisons beteween NaT values. For compatibility with the
old behavior, use <code class="docutils literal notranslate"><span class="pre">np.isnat</span></code> to explicitly check for NaT or convert
datetime64/timedelta64 arrays with <code class="docutils literal notranslate"><span class="pre">.astype(np.int64)</span></code> before making
comparisons.</p>
</div>
<div class="section" id="complex64-128-alignment-has-changed">
<h4>complex64/128 alignment has changed<a class="headerlink" href="#complex64-128-alignment-has-changed" title="Permalink to this headline">¶</a></h4>
<p>The memory alignment of complex types is now the same as a C-struct composed of
two floating point values, while before it was equal to the size of the type.
For many users (for instance on x64/unix/gcc) this means that complex64 is now
4-byte aligned instead of 8-byte aligned. An important consequence is that
aligned structured dtypes may now have a different size. For instance,
<code class="docutils literal notranslate"><span class="pre">np.dtype('c8,u1',</span> <span class="pre">align=True)</span></code> used to have an itemsize of 16 (on x64/gcc)
but now it is 12.</p>
<p>More in detail, the complex64 type now has the same alignment as a C-struct
<code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">{float</span> <span class="pre">r,</span> <span class="pre">i;}</span></code>, according to the compiler used to compile numpy, and
similarly for the complex128 and complex256 types.</p>
</div>
<div class="section" id="nd-grid-len-removal">
<h4>nd_grid __len__ removal<a class="headerlink" href="#nd-grid-len-removal" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">len(np.mgrid)</span></code> and <code class="docutils literal notranslate"><span class="pre">len(np.ogrid)</span></code> are now considered nonsensical
and raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.</p>
</div>
<div class="section" id="np-unravel-index-now-accepts-shape-keyword-argument">
<h4><code class="docutils literal notranslate"><span class="pre">np.unravel_index</span></code> now accepts <code class="docutils literal notranslate"><span class="pre">shape</span></code> keyword argument<a class="headerlink" href="#np-unravel-index-now-accepts-shape-keyword-argument" title="Permalink to this headline">¶</a></h4>
<p>Previously, only the <code class="docutils literal notranslate"><span class="pre">dims</span></code> keyword argument was accepted
for specification of the shape of the array to be used
for unraveling. <code class="docutils literal notranslate"><span class="pre">dims</span></code> remains supported, but is now deprecated.</p>
</div>
<div class="section" id="multi-field-views-return-a-view-instead-of-a-copy">
<h4>multi-field views return a view instead of a copy<a class="headerlink" href="#multi-field-views-return-a-view-instead-of-a-copy" title="Permalink to this headline">¶</a></h4>
<p>Indexing a structured array with multiple fields, e.g., <code class="docutils literal notranslate"><span class="pre">arr[['f1',</span> <span class="pre">'f3']]</span></code>,
returns a view into the original array instead of a copy. The returned view
will often have extra padding bytes corresponding to intervening fields in the
original array, unlike before, which will affect code such as
<code class="docutils literal notranslate"><span class="pre">arr[['f1',</span> <span class="pre">'f3']].view('float64')</span></code>. This change has been planned since numpy
1.7. Operations hitting this path have emitted <code class="docutils literal notranslate"><span class="pre">FutureWarnings</span></code> since then.
Additional <code class="docutils literal notranslate"><span class="pre">FutureWarnings</span></code> about this change were added in 1.12.</p>
<p>To help users update their code to account for these changes, a number of
functions have been added to the <code class="docutils literal notranslate"><span class="pre">numpy.lib.recfunctions</span></code> module which
safely allow such operations. For instance, the code above can be replaced
with <code class="docutils literal notranslate"><span class="pre">structured_to_unstructured(arr[['f1',</span> <span class="pre">'f3']],</span> <span class="pre">dtype='float64')</span></code>.
See the “accessing multiple fields” section of the
<a class="reference external" href="https://docs.scipy.org/doc/numpy/user/basics.rec.html#accessing-multiple-fields">user guide</a>.</p>
</div>
</div>
<div class="section" id="id29">
<h3>C API changes<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h3>
<p>The <code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_API_VERSION</span></code> was incremented to 0x0000D, due to the addition
of:</p>
<ul class="simple">
<li><code class="xref c c-member docutils literal notranslate"><span class="pre">PyUFuncObject.core_dim_flags</span></code></li>
<li><code class="xref c c-member docutils literal notranslate"><span class="pre">PyUFuncObject.core_dim_sizes</span></code></li>
<li><code class="xref c c-member docutils literal notranslate"><span class="pre">PyUFuncObject.identity_value</span></code></li>
<li><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUFunc_FromFuncAndDataAndSignatureAndIdentity</span></code></li>
</ul>
</div>
<div class="section" id="id30">
<h3>New Features<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<div class="section" id="integrated-squared-error-ise-estimator-added-to-histogram">
<h4>Integrated squared error (ISE) estimator added to <code class="docutils literal notranslate"><span class="pre">histogram</span></code><a class="headerlink" href="#integrated-squared-error-ise-estimator-added-to-histogram" title="Permalink to this headline">¶</a></h4>
<p>This method (<code class="docutils literal notranslate"><span class="pre">bins='stone'</span></code>) for optimizing the bin number is a
generalization of the Scott’s rule. The Scott’s rule assumes the distribution
is approximately Normal, while the <a class="reference external" href="https://en.wikipedia.org/wiki/Histogram#Minimizing_cross-validation_estimated_squared_error">ISE</a> is a non-parametric method based on
cross-validation.</p>
</div>
<div class="section" id="max-rows-keyword-added-for-np-loadtxt">
<h4><code class="docutils literal notranslate"><span class="pre">max_rows</span></code> keyword added for <code class="docutils literal notranslate"><span class="pre">np.loadtxt</span></code><a class="headerlink" href="#max-rows-keyword-added-for-np-loadtxt" title="Permalink to this headline">¶</a></h4>
<p>New keyword <code class="docutils literal notranslate"><span class="pre">max_rows</span></code> in <a class="reference internal" href="reference/generated/numpy.loadtxt.html#numpy.loadtxt" title="numpy.loadtxt"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.loadtxt</span></code></a> sets the maximum rows of the
content to be read after <code class="docutils literal notranslate"><span class="pre">skiprows</span></code>, as in <a class="reference internal" href="reference/generated/numpy.genfromtxt.html#numpy.genfromtxt" title="numpy.genfromtxt"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.genfromtxt</span></code></a>.</p>
</div>
<div class="section" id="modulus-operator-support-added-for-np-timedelta64-operands">
<h4>modulus operator support added for <code class="docutils literal notranslate"><span class="pre">np.timedelta64</span></code> operands<a class="headerlink" href="#modulus-operator-support-added-for-np-timedelta64-operands" title="Permalink to this headline">¶</a></h4>
<p>The modulus (remainder) operator is now supported for two operands
of type <code class="docutils literal notranslate"><span class="pre">np.timedelta64</span></code>. The operands may have different units
and the return value will match the type of the operands.</p>
</div>
</div>
<div class="section" id="id31">
<h3>Improvements<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<div class="section" id="no-copy-pickling-of-numpy-arrays">
<h4>no-copy pickling of numpy arrays<a class="headerlink" href="#no-copy-pickling-of-numpy-arrays" title="Permalink to this headline">¶</a></h4>
<p>Up to protocol 4, numpy array pickling created 2 spurious copies of the data
being serialized.  With pickle protocol 5, and the <code class="docutils literal notranslate"><span class="pre">PickleBuffer</span></code> API, a
large variety of numpy arrays can now be serialized without any copy using
out-of-band buffers, and with one less copy using in-band buffers. This
results, for large arrays, in an up to 66% drop in peak memory usage.</p>
</div>
<div class="section" id="build-shell-independence">
<h4>build shell independence<a class="headerlink" href="#build-shell-independence" title="Permalink to this headline">¶</a></h4>
<p>NumPy builds should no longer interact with the host machine
shell directly. <code class="docutils literal notranslate"><span class="pre">exec_command</span></code> has been replaced with
<code class="docutils literal notranslate"><span class="pre">subprocess.check_output</span></code> where appropriate.</p>
</div>
<div class="section" id="np-polynomial-polynomial-classes-render-in-latex-in-jupyter-notebooks">
<h4><em class="xref py py-obj">np.polynomial.Polynomial</em> classes render in LaTeX in Jupyter notebooks<a class="headerlink" href="#np-polynomial-polynomial-classes-render-in-latex-in-jupyter-notebooks" title="Permalink to this headline">¶</a></h4>
<p>When used in a front-end that supports it, <em class="xref py py-obj">Polynomial</em> instances are now
rendered through LaTeX. The current format is experimental, and is subject to
change.</p>
</div>
<div class="section" id="randint-and-choice-now-work-on-empty-distributions">
<h4><code class="docutils literal notranslate"><span class="pre">randint</span></code> and <code class="docutils literal notranslate"><span class="pre">choice</span></code> now work on empty distributions<a class="headerlink" href="#randint-and-choice-now-work-on-empty-distributions" title="Permalink to this headline">¶</a></h4>
<p>Even when no elements needed to be drawn, <code class="docutils literal notranslate"><span class="pre">np.random.randint</span></code> and
<code class="docutils literal notranslate"><span class="pre">np.random.choice</span></code> raised an error when the arguments described an empty
distribution. This has been fixed so that e.g.
<code class="docutils literal notranslate"><span class="pre">np.random.choice([],</span> <span class="pre">0)</span> <span class="pre">==</span> <span class="pre">np.array([],</span> <span class="pre">dtype=float64)</span></code>.</p>
</div>
<div class="section" id="linalg-lstsq-linalg-qr-and-linalg-svd-now-work-with-empty-arrays">
<h4><code class="docutils literal notranslate"><span class="pre">linalg.lstsq</span></code>, <code class="docutils literal notranslate"><span class="pre">linalg.qr</span></code>, and <code class="docutils literal notranslate"><span class="pre">linalg.svd</span></code> now work with empty arrays<a class="headerlink" href="#linalg-lstsq-linalg-qr-and-linalg-svd-now-work-with-empty-arrays" title="Permalink to this headline">¶</a></h4>
<p>Previously, a <code class="docutils literal notranslate"><span class="pre">LinAlgError</span></code> would be raised when an empty matrix/empty
matrices (with zero rows and/or columns) is/are passed in. Now outputs of
appropriate shapes are returned.</p>
</div>
<div class="section" id="chain-exceptions-to-give-better-error-messages-for-invalid-pep3118-format-strings">
<h4>Chain exceptions to give better error messages for invalid PEP3118 format strings<a class="headerlink" href="#chain-exceptions-to-give-better-error-messages-for-invalid-pep3118-format-strings" title="Permalink to this headline">¶</a></h4>
<p>This should help track down problems.</p>
</div>
<div class="section" id="einsum-optimization-path-updates-and-efficiency-improvements">
<h4>Einsum optimization path updates and efficiency improvements<a class="headerlink" href="#einsum-optimization-path-updates-and-efficiency-improvements" title="Permalink to this headline">¶</a></h4>
<p>Einsum was synchronized with the current upstream work.</p>
</div>
<div class="section" id="numpy-angle-and-numpy-expand-dims-now-work-on-ndarray-subclasses">
<h4><a class="reference internal" href="reference/generated/numpy.angle.html#numpy.angle" title="numpy.angle"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.angle</span></code></a> and <a class="reference internal" href="reference/generated/numpy.expand_dims.html#numpy.expand_dims" title="numpy.expand_dims"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.expand_dims</span></code></a> now work on <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> subclasses<a class="headerlink" href="#numpy-angle-and-numpy-expand-dims-now-work-on-ndarray-subclasses" title="Permalink to this headline">¶</a></h4>
<p>In particular, they now work for masked arrays.</p>
</div>
<div class="section" id="npy-no-deprecated-api-compiler-warning-suppression">
<h4><code class="docutils literal notranslate"><span class="pre">NPY_NO_DEPRECATED_API</span></code> compiler warning suppression<a class="headerlink" href="#npy-no-deprecated-api-compiler-warning-suppression" title="Permalink to this headline">¶</a></h4>
<p>Setting <code class="docutils literal notranslate"><span class="pre">NPY_NO_DEPRECATED_API</span></code> to a value of 0 will suppress the current compiler
warnings when the deprecated numpy API is used.</p>
</div>
<div class="section" id="np-diff-added-kwargs-prepend-and-append">
<h4><code class="docutils literal notranslate"><span class="pre">np.diff</span></code> Added kwargs prepend and append<a class="headerlink" href="#np-diff-added-kwargs-prepend-and-append" title="Permalink to this headline">¶</a></h4>
<p>New kwargs <code class="docutils literal notranslate"><span class="pre">prepend</span></code> and <code class="docutils literal notranslate"><span class="pre">append</span></code>, allow for values to be inserted on
either end of the differences.  Similar to options for <a class="reference internal" href="reference/generated/numpy.ediff1d.html#numpy.ediff1d" title="numpy.ediff1d"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ediff1d</span></code></a>. Now the
inverse of <a class="reference internal" href="reference/generated/numpy.cumsum.html#numpy.cumsum" title="numpy.cumsum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cumsum</span></code></a> can be obtained easily via <code class="docutils literal notranslate"><span class="pre">prepend=0</span></code>.</p>
</div>
<div class="section" id="arm-support-updated">
<h4>ARM support updated<a class="headerlink" href="#arm-support-updated" title="Permalink to this headline">¶</a></h4>
<p>Support for ARM CPUs has been updated to accommodate 32 and 64 bit targets,
and also big and little endian byte ordering. AARCH32 memory alignment issues
have been addressed. CI testing has been expanded to include AARCH64 targets
via the services of shippable.com.</p>
</div>
<div class="section" id="appending-to-build-flags">
<h4>Appending to build flags<a class="headerlink" href="#appending-to-build-flags" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="reference/distutils.html#module-numpy.distutils" title="numpy.distutils"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.distutils</span></code></a> has always overridden rather than appended to <em class="xref py py-obj">LDFLAGS</em> and
other similar such environment variables for compiling Fortran extensions.
Now, if the <em class="xref py py-obj">NPY_DISTUTILS_APPEND_FLAGS</em> environment variable is set to 1, the
behavior will be appending.  This applied to: <em class="xref py py-obj">LDFLAGS</em>, <em class="xref py py-obj">F77FLAGS</em>,
<em class="xref py py-obj">F90FLAGS</em>, <em class="xref py py-obj">FREEFLAGS</em>, <em class="xref py py-obj">FOPT</em>, <em class="xref py py-obj">FDEBUG</em>, and <em class="xref py py-obj">FFLAGS</em>.  See gh-11525 for more
details.</p>
</div>
<div class="section" id="generalized-ufunc-signatures-now-allow-fixed-size-dimensions">
<h4>Generalized ufunc signatures now allow fixed-size dimensions<a class="headerlink" href="#generalized-ufunc-signatures-now-allow-fixed-size-dimensions" title="Permalink to this headline">¶</a></h4>
<p>By using a numerical value in the signature of a generalized ufunc, one can
indicate that the given function requires input or output to have dimensions
with the given size. E.g., the signature of a function that converts a polar
angle to a two-dimensional cartesian unit vector would be <code class="docutils literal notranslate"><span class="pre">()-&gt;(2)</span></code>; that
for one that converts two spherical angles to a three-dimensional unit vector
would be <code class="docutils literal notranslate"><span class="pre">(),()-&gt;(3)</span></code>; and that for the cross product of two
three-dimensional vectors would be <code class="docutils literal notranslate"><span class="pre">(3),(3)-&gt;(3)</span></code>.</p>
<p>Note that to the elementary function these dimensions are not treated any
differently from variable ones indicated with a name starting with a letter;
the loop still is passed the corresponding size, but it can now count on that
size being equal to the fixed one given in the signature.</p>
</div>
<div class="section" id="generalized-ufunc-signatures-now-allow-flexible-dimensions">
<h4>Generalized ufunc signatures now allow flexible dimensions<a class="headerlink" href="#generalized-ufunc-signatures-now-allow-flexible-dimensions" title="Permalink to this headline">¶</a></h4>
<p>Some functions, in particular numpy’s implementation of <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> as <code class="docutils literal notranslate"><span class="pre">matmul</span></code>,
are very similar to generalized ufuncs in that they operate over core
dimensions, but one could not present them as such because they were able to
deal with inputs in which a dimension is missing. To support this, it is now
allowed to postfix a dimension name with a question mark to indicate that the
dimension does not necessarily have to be present.</p>
<p>With this addition, the signature for <code class="docutils literal notranslate"><span class="pre">matmul</span></code> can be expressed as
<code class="docutils literal notranslate"><span class="pre">(m?,n),(n,p?)-&gt;(m?,p?)</span></code>.  This indicates that if, e.g., the second operand
has only one dimension, for the purposes of the elementary function it will be
treated as if that input has core shape <code class="docutils literal notranslate"><span class="pre">(n,</span> <span class="pre">1)</span></code>, and the output has the
corresponding core shape of <code class="docutils literal notranslate"><span class="pre">(m,</span> <span class="pre">1)</span></code>. The actual output array, however, has
the flexible dimension removed, i.e., it will have shape <code class="docutils literal notranslate"><span class="pre">(...,</span> <span class="pre">m)</span></code>.
Similarly, if both arguments have only a single dimension, the inputs will be
presented as having shapes <code class="docutils literal notranslate"><span class="pre">(1,</span> <span class="pre">n)</span></code> and <code class="docutils literal notranslate"><span class="pre">(n,</span> <span class="pre">1)</span></code> to the elementary
function, and the output as <code class="docutils literal notranslate"><span class="pre">(1,</span> <span class="pre">1)</span></code>, while the actual output array returned
will have shape <code class="docutils literal notranslate"><span class="pre">()</span></code>. In this way, the signature allows one to use a
single elementary function for four related but different signatures,
<code class="docutils literal notranslate"><span class="pre">(m,n),(n,p)-&gt;(m,p)</span></code>, <code class="docutils literal notranslate"><span class="pre">(n),(n,p)-&gt;(p)</span></code>, <code class="docutils literal notranslate"><span class="pre">(m,n),(n)-&gt;(m)</span></code> and
<code class="docutils literal notranslate"><span class="pre">(n),(n)-&gt;()</span></code>.</p>
</div>
<div class="section" id="np-clip-and-the-clip-method-check-for-memory-overlap">
<h4><code class="docutils literal notranslate"><span class="pre">np.clip</span></code> and the <code class="docutils literal notranslate"><span class="pre">clip</span></code> method check for memory overlap<a class="headerlink" href="#np-clip-and-the-clip-method-check-for-memory-overlap" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">out</span></code> argument to these functions is now always tested for memory overlap
to avoid corrupted results when memory overlap occurs.</p>
</div>
<div class="section" id="new-value-unscaled-for-option-cov-in-np-polyfit">
<h4>New value <code class="docutils literal notranslate"><span class="pre">unscaled</span></code> for option <code class="docutils literal notranslate"><span class="pre">cov</span></code> in <code class="docutils literal notranslate"><span class="pre">np.polyfit</span></code><a class="headerlink" href="#new-value-unscaled-for-option-cov-in-np-polyfit" title="Permalink to this headline">¶</a></h4>
<p>A further possible value has been added to the <code class="docutils literal notranslate"><span class="pre">cov</span></code> parameter of the
<code class="docutils literal notranslate"><span class="pre">np.polyfit</span></code> function. With <code class="docutils literal notranslate"><span class="pre">cov='unscaled'</span></code> the scaling of the covariance
matrix is disabled completely (similar to setting <code class="docutils literal notranslate"><span class="pre">absolute_sigma=True</span></code> in
<code class="docutils literal notranslate"><span class="pre">scipy.optimize.curve_fit</span></code>). This would be useful in occasions, where the
weights are given by 1/sigma with sigma being the (known) standard errors of
(Gaussian distributed) data points, in which case the unscaled matrix is
already a correct estimate for the covariance matrix.</p>
</div>
<div class="section" id="detailed-docstrings-for-scalar-numeric-types">
<h4>Detailed docstrings for scalar numeric types<a class="headerlink" href="#detailed-docstrings-for-scalar-numeric-types" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">help</span></code> function, when applied to numeric types such as <code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.intc</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.int_</span></code>, and <code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.longlong</span></code>, now lists all of the aliased names for that
type, distinguishing between platform -dependent and -independent aliases.</p>
</div>
<div class="section" id="module-attribute-now-points-to-public-modules">
<h4><code class="docutils literal notranslate"><span class="pre">__module__</span></code> attribute now points to public modules<a class="headerlink" href="#module-attribute-now-points-to-public-modules" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">__module__</span></code> attribute on most NumPy functions has been updated to refer
to the preferred public module from which to access a function, rather than
the module in which the function happens to be defined. This produces more
informative displays for functions in tools such as IPython, e.g., instead of
<code class="docutils literal notranslate"><span class="pre">&lt;function</span> <span class="pre">'numpy.core.fromnumeric.sum'&gt;</span></code> you now see
<code class="docutils literal notranslate"><span class="pre">&lt;function</span> <span class="pre">'numpy.sum'&gt;</span></code>.</p>
</div>
<div class="section" id="large-allocations-marked-as-suitable-for-transparent-hugepages">
<h4>Large allocations marked as suitable for transparent hugepages<a class="headerlink" href="#large-allocations-marked-as-suitable-for-transparent-hugepages" title="Permalink to this headline">¶</a></h4>
<p>On systems that support transparent hugepages over the madvise system call
numpy now marks that large memory allocations can be backed by hugepages which
reduces page fault overhead and can in some fault heavy cases improve
performance significantly. On Linux the setting for huge pages to be used,
<em class="xref py py-obj">/sys/kernel/mm/transparent_hugepage/enabled</em>, must be at least <em class="xref py py-obj">madvise</em>.
Systems which already have it set to <em class="xref py py-obj">always</em> will not see much difference as
the kernel will automatically use huge pages where appropriate.</p>
<p>Users of very old Linux kernels (~3.x and older) should make sure that
<em class="xref py py-obj">/sys/kernel/mm/transparent_hugepage/defrag</em> is not set to <em class="xref py py-obj">always</em> to avoid
performance problems due concurrency issues in the memory defragmentation.</p>
</div>
<div class="section" id="alpine-linux-and-other-musl-c-library-distros-support">
<h4>Alpine Linux (and other musl c library distros) support<a class="headerlink" href="#alpine-linux-and-other-musl-c-library-distros-support" title="Permalink to this headline">¶</a></h4>
<p>We now default to use <em class="xref py py-obj">fenv.h</em> for floating point status error reporting.
Previously we had a broken default that sometimes would not report underflow,
overflow, and invalid floating point operations. Now we can support non-glibc
distrubutions like Alpine Linux as long as they ship <em class="xref py py-obj">fenv.h</em>.</p>
</div>
<div class="section" id="speedup-np-block-for-large-arrays">
<h4>Speedup <code class="docutils literal notranslate"><span class="pre">np.block</span></code> for large arrays<a class="headerlink" href="#speedup-np-block-for-large-arrays" title="Permalink to this headline">¶</a></h4>
<p>Large arrays (greater than <code class="docutils literal notranslate"><span class="pre">512</span> <span class="pre">*</span> <span class="pre">512</span></code>) now use a blocking algorithm based on
copying the data directly into the appropriate slice of the resulting array.
This results in significant speedups for these large arrays, particularly for
arrays being blocked along more than 2 dimensions.</p>
<div class="section" id="arr-ctypes-data-as-holds-a-reference-to-arr">
<h5><code class="docutils literal notranslate"><span class="pre">arr.ctypes.data_as(...)</span></code> holds a reference to arr<a class="headerlink" href="#arr-ctypes-data-as-holds-a-reference-to-arr" title="Permalink to this headline">¶</a></h5>
<p>Previously the caller was responsible for keeping the array alive for the
lifetime of the pointer.</p>
</div>
</div>
<div class="section" id="speedup-np-take-for-read-only-arrays">
<h4>Speedup <code class="docutils literal notranslate"><span class="pre">np.take</span></code> for read-only arrays<a class="headerlink" href="#speedup-np-take-for-read-only-arrays" title="Permalink to this headline">¶</a></h4>
<p>The implementation of <code class="docutils literal notranslate"><span class="pre">np.take</span></code> no longer makes an unnecessary copy of the
source array when its <code class="docutils literal notranslate"><span class="pre">writeable</span></code> flag is set to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</div>
<div class="section" id="support-path-like-objects-for-more-functions">
<h4>Support path-like objects for more functions<a class="headerlink" href="#support-path-like-objects-for-more-functions" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">np.core.records.fromfile</span></code> function now supports <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code>
and other path-like objects in addition to a file object. Furthermore, the
<code class="docutils literal notranslate"><span class="pre">np.load</span></code> function now also supports path-like objects when using memory
mapping (<code class="docutils literal notranslate"><span class="pre">mmap_mode</span></code> keyword argument).</p>
</div>
<div class="section" id="better-behaviour-of-ufunc-identities-during-reductions">
<h4>Better behaviour of ufunc identities during reductions<a class="headerlink" href="#better-behaviour-of-ufunc-identities-during-reductions" title="Permalink to this headline">¶</a></h4>
<p>Universal functions have an <code class="docutils literal notranslate"><span class="pre">.identity</span></code> which is used when <code class="docutils literal notranslate"><span class="pre">.reduce</span></code> is
called on an empty axis.</p>
<p>As of this release, the logical binary ufuncs, <a class="reference internal" href="reference/generated/numpy.logical_and.html#numpy.logical_and" title="numpy.logical_and"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logical_and</span></code></a>, <a class="reference internal" href="reference/generated/numpy.logical_or.html#numpy.logical_or" title="numpy.logical_or"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logical_or</span></code></a>,
and <a class="reference internal" href="reference/generated/numpy.logical_xor.html#numpy.logical_xor" title="numpy.logical_xor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logical_xor</span></code></a>, now have <code class="docutils literal notranslate"><span class="pre">identity</span></code> s of type <a class="reference external" href="https://docs.python.org/dev/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, where previously they
were of type <a class="reference external" href="https://docs.python.org/dev/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a>. This restores the 1.14 behavior of getting <code class="docutils literal notranslate"><span class="pre">bool</span></code> s when
reducing empty object arrays with these ufuncs, while also keeping the 1.15
behavior of getting <code class="docutils literal notranslate"><span class="pre">int</span></code> s when reducing empty object arrays with arithmetic
ufuncs like <code class="docutils literal notranslate"><span class="pre">add</span></code> and <code class="docutils literal notranslate"><span class="pre">multiply</span></code>.</p>
<p>Additionally, <a class="reference internal" href="reference/generated/numpy.logaddexp.html#numpy.logaddexp" title="numpy.logaddexp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logaddexp</span></code></a> now has an identity of <code class="docutils literal notranslate"><span class="pre">-inf</span></code>, allowing it to be
called on empty sequences, where previously it could not be.</p>
<p>This is possible thanks to the new
<code class="xref c c-func docutils literal notranslate"><span class="pre">PyUFunc_FromFuncAndDataAndSignatureAndIdentity</span></code>, which allows
arbitrary values to be used as identities now.</p>
</div>
<div class="section" id="improved-conversion-from-ctypes-objects">
<h4>Improved conversion from ctypes objects<a class="headerlink" href="#improved-conversion-from-ctypes-objects" title="Permalink to this headline">¶</a></h4>
<p>Numpy has always supported taking a value or type from <code class="docutils literal notranslate"><span class="pre">ctypes</span></code> and
converting it into an array or dtype, but only behaved correctly for simpler
types. As of this release, this caveat is lifted - now:</p>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">_pack_</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">ctypes.Structure</span></code>, used to emulate C’s
<code class="docutils literal notranslate"><span class="pre">__attribute__((packed))</span></code>, is respected.</li>
<li>Endianness of all ctypes objects is preserved</li>
<li><code class="docutils literal notranslate"><span class="pre">ctypes.Union</span></code> is supported</li>
<li>Non-representable constructs raise exceptions, rather than producing
dangerously incorrect results:<ul>
<li>Bitfields are no longer interpreted as sub-arrays</li>
<li>Pointers are no longer replaced with the type that they point to</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="a-new-ndpointer-contents-member">
<h4>A new <code class="docutils literal notranslate"><span class="pre">ndpointer.contents</span></code> member<a class="headerlink" href="#a-new-ndpointer-contents-member" title="Permalink to this headline">¶</a></h4>
<p>This matches the <code class="docutils literal notranslate"><span class="pre">.contents</span></code> member of normal ctypes arrays, and can be used
to construct an <code class="docutils literal notranslate"><span class="pre">np.array</span></code> around the pointers contents.  This replaces
<code class="docutils literal notranslate"><span class="pre">np.array(some_nd_pointer)</span></code>, which stopped working in 1.15.  As a side effect
of this change, <code class="docutils literal notranslate"><span class="pre">ndpointer</span></code> now supports dtypes with overlapping fields and
padding.</p>
</div>
<div class="section" id="matmul-is-now-a-ufunc">
<h4><code class="docutils literal notranslate"><span class="pre">matmul</span></code> is now a <code class="docutils literal notranslate"><span class="pre">ufunc</span></code><a class="headerlink" href="#matmul-is-now-a-ufunc" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="reference/generated/numpy.matmul.html#numpy.matmul" title="numpy.matmul"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.matmul</span></code></a> is now a ufunc which means that both the function and the
<code class="docutils literal notranslate"><span class="pre">__matmul__</span></code> operator can now be overridden by <code class="docutils literal notranslate"><span class="pre">__array_ufunc__</span></code>. Its
implementation has also changed. It uses the same BLAS routines as
<a class="reference internal" href="reference/generated/numpy.dot.html#numpy.dot" title="numpy.dot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.dot</span></code></a>, ensuring its performance is similar for large matrices.</p>
</div>
<div class="section" id="start-and-stop-arrays-for-linspace-logspace-and-geomspace">
<h4>Start and stop arrays for <code class="docutils literal notranslate"><span class="pre">linspace</span></code>, <code class="docutils literal notranslate"><span class="pre">logspace</span></code> and <code class="docutils literal notranslate"><span class="pre">geomspace</span></code><a class="headerlink" href="#start-and-stop-arrays-for-linspace-logspace-and-geomspace" title="Permalink to this headline">¶</a></h4>
<p>These functions used to be limited to scalar stop and start values, but can
now take arrays, which will be properly broadcast and result in an output
which has one axis prepended.  This can be used, e.g., to obtain linearly
interpolated points between sets of points.</p>
</div>
<div class="section" id="ci-extended-with-additional-services">
<h4>CI extended with additional services<a class="headerlink" href="#ci-extended-with-additional-services" title="Permalink to this headline">¶</a></h4>
<p>We now use additional free CI services, thanks to the companies that provide:</p>
<ul class="simple">
<li>Codecoverage testing via codecov.io</li>
<li>Arm testing via shippable.com</li>
<li>Additional test runs on azure pipelines</li>
</ul>
<p>These are in addition to our continued use of travis, appveyor (for wheels) and
LGTM</p>
</div>
</div>
<div class="section" id="id32">
<h3>Changes<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<div class="section" id="comparison-ufuncs-will-now-error-rather-than-return-notimplemented">
<h4>Comparison ufuncs will now error rather than return NotImplemented<a class="headerlink" href="#comparison-ufuncs-will-now-error-rather-than-return-notimplemented" title="Permalink to this headline">¶</a></h4>
<p>Previously, comparison ufuncs such as <code class="docutils literal notranslate"><span class="pre">np.equal</span></code> would return
<em class="xref py py-obj">NotImplemented</em> if their arguments had structured dtypes, to help comparison
operators such as <code class="docutils literal notranslate"><span class="pre">__eq__</span></code> deal with those.  This is no longer needed, as the
relevant logic has moved to the comparison operators proper (which thus do
continue to return <em class="xref py py-obj">NotImplemented</em> as needed). Hence, like all other ufuncs,
the comparison ufuncs will now error on structured dtypes.</p>
</div>
<div class="section" id="positive-will-now-raise-a-deprecation-warning-for-non-numerical-arrays">
<h4>Positive will now raise a deprecation warning for non-numerical arrays<a class="headerlink" href="#positive-will-now-raise-a-deprecation-warning-for-non-numerical-arrays" title="Permalink to this headline">¶</a></h4>
<p>Previously, <code class="docutils literal notranslate"><span class="pre">+array</span></code> unconditionally returned a copy. Now, it will
raise a <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> if the array is not numerical (i.e.,
if <code class="docutils literal notranslate"><span class="pre">np.positive(array)</span></code> raises a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>. For <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>
subclasses that override the default <code class="docutils literal notranslate"><span class="pre">__array_ufunc__</span></code> implementation,
the <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> is passed on.</p>
</div>
<div class="section" id="ndarrayoperatorsmixin-now-implements-matrix-multiplication">
<h4><code class="docutils literal notranslate"><span class="pre">NDArrayOperatorsMixin</span></code> now implements matrix multiplication<a class="headerlink" href="#ndarrayoperatorsmixin-now-implements-matrix-multiplication" title="Permalink to this headline">¶</a></h4>
<p>Previously, <code class="docutils literal notranslate"><span class="pre">np.lib.mixins.NDArrayOperatorsMixin</span></code> did not implement the
special methods for Python’s matrix multiplication operator (<code class="docutils literal notranslate"><span class="pre">&#64;</span></code>). This has
changed now that <code class="docutils literal notranslate"><span class="pre">matmul</span></code> is a ufunc and can be overridden using
<code class="docutils literal notranslate"><span class="pre">__array_ufunc__</span></code>.</p>
</div>
<div class="section" id="the-scaling-of-the-covariance-matrix-in-np-polyfit-is-different">
<h4>The scaling of the covariance matrix in <code class="docutils literal notranslate"><span class="pre">np.polyfit</span></code> is different<a class="headerlink" href="#the-scaling-of-the-covariance-matrix-in-np-polyfit-is-different" title="Permalink to this headline">¶</a></h4>
<p>So far, <code class="docutils literal notranslate"><span class="pre">np.polyfit</span></code> used a non-standard factor in the scaling of the the
covariance matrix. Namely, rather than using the standard <code class="docutils literal notranslate"><span class="pre">chisq/(M-N)</span></code>, it
scaled it with <code class="docutils literal notranslate"><span class="pre">chisq/(M-N-2)</span></code> where M is the number of data points and N is the
number of parameters.  This scaling is inconsistent with other fitting programs
such as e.g. <code class="docutils literal notranslate"><span class="pre">scipy.optimize.curve_fit</span></code> and was changed to <code class="docutils literal notranslate"><span class="pre">chisq/(M-N)</span></code>.</p>
</div>
<div class="section" id="maximum-and-minimum-no-longer-emit-warnings">
<h4><code class="docutils literal notranslate"><span class="pre">maximum</span></code> and <code class="docutils literal notranslate"><span class="pre">minimum</span></code> no longer emit warnings<a class="headerlink" href="#maximum-and-minimum-no-longer-emit-warnings" title="Permalink to this headline">¶</a></h4>
<p>As part of code introduced in 1.10,  <code class="docutils literal notranslate"><span class="pre">float32</span></code> and <code class="docutils literal notranslate"><span class="pre">float64</span></code> set invalid
float status when a Nan is encountered in <a class="reference internal" href="reference/generated/numpy.maximum.html#numpy.maximum" title="numpy.maximum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.maximum</span></code></a> and <a class="reference internal" href="reference/generated/numpy.minimum.html#numpy.minimum" title="numpy.minimum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.minimum</span></code></a>,
when using SSE2 semantics. This caused a <em class="xref py py-obj">RuntimeWarning</em> to sometimes be
emitted. In 1.15 we fixed the inconsistencies which caused the warnings to
become more conspicuous. Now no warnings will be emitted.</p>
</div>
<div class="section" id="umath-and-multiarray-c-extension-modules-merged-into-a-single-module">
<h4>Umath and multiarray c-extension modules merged into a single module<a class="headerlink" href="#umath-and-multiarray-c-extension-modules-merged-into-a-single-module" title="Permalink to this headline">¶</a></h4>
<p>The two modules were merged, according to <a class="reference external" href="http://www.numpy.org/neps/nep-0015-merge-multiarray-umath.html">NEP 15</a>. Previously <em class="xref py py-obj">np.core.umath</em>
and <em class="xref py py-obj">np.core.multiarray</em> were seperate c-extension modules. They are now python
wrappers to the single <em class="xref py py-obj">np.core/_multiarray_math</em> c-extension module.</p>
</div>
<div class="section" id="getfield-validity-checks-extended">
<h4><code class="docutils literal notranslate"><span class="pre">getfield</span></code> validity checks extended<a class="headerlink" href="#getfield-validity-checks-extended" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="reference/generated/numpy.ndarray.getfield.html#numpy.ndarray.getfield" title="numpy.ndarray.getfield"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray.getfield</span></code></a> now checks the dtype and offset arguments to prevent
accessing invalid memory locations.</p>
</div>
<div class="section" id="numpy-functions-now-support-overrides-with-array-function">
<h4>NumPy functions now support overrides with <code class="docutils literal notranslate"><span class="pre">__array_function__</span></code><a class="headerlink" href="#numpy-functions-now-support-overrides-with-array-function" title="Permalink to this headline">¶</a></h4>
<p>NumPy has a new experimental mechanism for overriding the implementation of
almost all NumPy functions on non-NumPy arrays by defining an
<code class="docutils literal notranslate"><span class="pre">__array_function__</span></code> method, as described in <a class="reference external" href="http://www.numpy.org/neps/nep-0018-array-function-protocol.html">NEP 18</a>.</p>
<p>This feature is not yet been enabled by default, but has been released to
facilitate experimentation by potential users. See the NEP for details on
setting the appropriate environment variable. We expect the NumPy 1.17 release
will enable overrides by default, which will also be more performant due to a
new implementation written in C.</p>
</div>
<div class="section" id="arrays-based-off-readonly-buffers-cannot-be-set-writeable">
<h4>Arrays based off readonly buffers cannot be set <code class="docutils literal notranslate"><span class="pre">writeable</span></code><a class="headerlink" href="#arrays-based-off-readonly-buffers-cannot-be-set-writeable" title="Permalink to this headline">¶</a></h4>
<p>We now disallow setting the <code class="docutils literal notranslate"><span class="pre">writeable</span></code> flag True on arrays created
from <code class="docutils literal notranslate"><span class="pre">fromstring(readonly-buffer)</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="numpy-1-15-4-release-notes">
<h2>NumPy 1.15.4 Release Notes<a class="headerlink" href="#numpy-1-15-4-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix release for bugs and regressions reported following the 1.15.3
release.  The Python versions supported by this release are 2.7, 3.4-3.7. The
wheels are linked with OpenBLAS v0.3.0, which should fix some of the linalg
problems reported for NumPy 1.14.</p>
<div class="section" id="compatibility-note">
<h3>Compatibility Note<a class="headerlink" href="#compatibility-note" title="Permalink to this headline">¶</a></h3>
<p>The NumPy 1.15.x OS X wheels released on PyPI no longer contain 32-bit
binaries.  That will also be the case in future releases. See
<a class="reference external" href="https://github.com/numpy/numpy/issues/11625">#11625</a> for the related
discussion.  Those needing 32-bit support should look elsewhere or build
from source.</p>
</div>
<div class="section" id="id34">
<h3>Contributors<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
<p>A total of 4 people contributed to this release.  People with a “+” by their
names contributed a patch for the first time.</p>
<ul class="simple">
<li>Charles Harris</li>
<li>Matti Picus</li>
<li>Sebastian Berg</li>
<li>bbbbbbbbba +</li>
</ul>
</div>
<div class="section" id="id35">
<h3>Pull requests merged<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<p>A total of 4 pull requests were merged for this release.</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12296">#12296</a>: BUG: Dealloc cached buffer info</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12297">#12297</a>: BUG: Fix fill value in masked array ‘==’ and ‘!=’ ops.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12307">#12307</a>: DOC: Correct the default value of <em class="xref py py-obj">optimize</em> in <a class="reference internal" href="reference/generated/numpy.einsum.html#numpy.einsum" title="numpy.einsum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.einsum</span></code></a></li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12320">#12320</a>: REL: Prepare for the NumPy 1.15.4 release</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-15-3-release-notes">
<h2>NumPy 1.15.3 Release Notes<a class="headerlink" href="#numpy-1-15-3-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix release for bugs and regressions reported following the 1.15.2
release.  The Python versions supported by this release are 2.7, 3.4-3.7. The
wheels are linked with OpenBLAS v0.3.0, which should fix some of the linalg
problems reported for NumPy 1.14.</p>
<div class="section" id="id36">
<h3>Compatibility Note<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<p>The NumPy 1.15.x OS X wheels released on PyPI no longer contain 32-bit
binaries.  That will also be the case in future releases. See
<a class="reference external" href="https://github.com/numpy/numpy/issues/11625">#11625</a> for the related
discussion.  Those needing 32-bit support should look elsewhere or build
from source.</p>
</div>
<div class="section" id="id37">
<h3>Contributors<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<p>A total of 7 people contributed to this release.  People with a “+” by their
names contributed a patch for the first time.</p>
<ul class="simple">
<li>Allan Haldane</li>
<li>Charles Harris</li>
<li>Jeroen Demeyer</li>
<li>Kevin Sheppard</li>
<li>Matthew Bowden +</li>
<li>Matti Picus</li>
<li>Tyler Reddy</li>
</ul>
</div>
<div class="section" id="id38">
<h3>Pull requests merged<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h3>
<p>A total of 12 pull requests were merged for this release.</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12080">#12080</a>: MAINT: Blacklist some MSVC complex functions.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12083">#12083</a>: TST: Add azure CI testing to 1.15.x branch.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12084">#12084</a>: BUG: test_path() now uses Path.resolve()</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12085">#12085</a>: TST, MAINT: Fix some failing tests on azure-pipelines mac and…</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12187">#12187</a>: BUG: Fix memory leak in mapping.c</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12188">#12188</a>: BUG: Allow boolean subtract in histogram</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12189">#12189</a>: BUG: Fix in-place permutation</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12190">#12190</a>: BUG: limit default for get_num_build_jobs() to 8</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12191">#12191</a>: BUG: OBJECT_to_* should check for errors</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12192">#12192</a>: DOC: Prepare for NumPy 1.15.3 release.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12237">#12237</a>: BUG: Fix MaskedArray fill_value type conversion.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/12238">#12238</a>: TST: Backport azure-pipeline testing fixes for Mac</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-15-2-release-notes">
<h2>NumPy 1.15.2 Release Notes<a class="headerlink" href="#numpy-1-15-2-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix release for bugs and regressions reported following the 1.15.1
release.</p>
<ul class="simple">
<li>The matrix PendingDeprecationWarning is now suppressed in pytest 3.8.</li>
<li>The new cached allocations machinery has been fixed to be thread safe.</li>
<li>The boolean indexing of subclasses now works correctly.</li>
<li>A small memory leak in PyArray_AdaptFlexibleDType has been fixed.</li>
</ul>
<p>The Python versions supported by this release are 2.7, 3.4-3.7. The wheels are
linked with OpenBLAS v0.3.0, which should fix some of the linalg problems
reported for NumPy 1.14.</p>
<div class="section" id="id39">
<h3>Compatibility Note<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h3>
<p>The NumPy 1.15.x OS X wheels released on PyPI no longer contain 32-bit
binaries.  That will also be the case in future releases. See
<a class="reference external" href="https://github.com/numpy/numpy/issues/11625">#11625</a> for the related
discussion.  Those needing 32-bit support should look elsewhere or build
from source.</p>
</div>
<div class="section" id="id40">
<h3>Contributors<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h3>
<p>A total of 4 people contributed to this release.  People with a “+” by their
names contributed a patch for the first time.</p>
<ul class="simple">
<li>Charles Harris</li>
<li>Julian Taylor</li>
<li>Marten van Kerkwijk</li>
<li>Matti Picus</li>
</ul>
</div>
<div class="section" id="id41">
<h3>Pull requests merged<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h3>
<p>A total of 4 pull requests were merged for this release.</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11902">#11902</a>: BUG: Fix matrix PendingDeprecationWarning suppression for pytest…</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11981">#11981</a>: BUG: fix cached allocations without the GIL for 1.15.x</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11982">#11982</a>: BUG: fix refcount leak in PyArray_AdaptFlexibleDType</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11992">#11992</a>: BUG: Ensure boolean indexing of subclasses sets base correctly.</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-15-1-release-notes">
<h2>NumPy 1.15.1 Release Notes<a class="headerlink" href="#numpy-1-15-1-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix release for bugs and regressions reported following the 1.15.0
release.</p>
<ul class="simple">
<li>The annoying but harmless RuntimeWarning that “numpy.dtype size changed” has
been suppressed. The long standing suppression was lost in the transition to
pytest.</li>
<li>The update to Cython 0.28.3 exposed a problematic use of a gcc attribute used
to prefer code size over speed in module initialization, possibly resulting in
incorrect compiled code. This has been fixed in latest Cython but has been
disabled here for safety.</li>
<li>Support for big-endian and ARMv8 architectures has been improved.</li>
</ul>
<p>The Python versions supported by this release are 2.7, 3.4-3.7. The wheels are
linked with OpenBLAS v0.3.0, which should fix some of the linalg problems
reported for NumPy 1.14.</p>
<div class="section" id="id42">
<h3>Compatibility Note<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h3>
<p>The NumPy 1.15.x OS X wheels released on PyPI no longer contain 32-bit
binaries.  That will also be the case in future releases. See
<a class="reference external" href="https://github.com/numpy/numpy/issues/11625">#11625</a> for the related
discussion.  Those needing 32-bit support should look elsewhere or build
from source.</p>
</div>
<div class="section" id="id43">
<h3>Contributors<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h3>
<p>A total of 7 people contributed to this release.  People with a “+” by their
names contributed a patch for the first time.</p>
<ul class="simple">
<li>Charles Harris</li>
<li>Chris Billington</li>
<li>Elliott Sales de Andrade +</li>
<li>Eric Wieser</li>
<li>Jeremy Manning +</li>
<li>Matti Picus</li>
<li>Ralf Gommers</li>
</ul>
</div>
<div class="section" id="id44">
<h3>Pull requests merged<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h3>
<p>A total of 24 pull requests were merged for this release.</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11647">#11647</a>: MAINT: Filter Cython warnings in <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code></li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11648">#11648</a>: BUG: Fix doc source links to unwrap decorators</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11657">#11657</a>: BUG: Ensure singleton dimensions are not dropped when converting…</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11661">#11661</a>: BUG: Warn on Nan in minimum,maximum for scalars</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11665">#11665</a>: BUG: cython sometimes emits invalid gcc attribute</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11682">#11682</a>: BUG: Fix regression in void_getitem</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11698">#11698</a>: BUG: Make matrix_power again work for object arrays.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11700">#11700</a>: BUG: Add missing PyErr_NoMemory after failing malloc</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11719">#11719</a>: BUG: Fix undefined functions on big-endian systems.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11720">#11720</a>: MAINT: Make einsum optimize default to False.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11746">#11746</a>: BUG: Fix regression in loadtxt for bz2 text files in Python 2.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11757">#11757</a>: BUG: Revert use of <em class="xref py py-obj">console_scripts</em>.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11758">#11758</a>: BUG: Fix Fortran kind detection for aarch64 &amp; s390x.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11759">#11759</a>: BUG: Fix printing of longdouble on ppc64le.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11760">#11760</a>: BUG: Fixes for unicode field names in Python 2</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11761">#11761</a>: BUG: Increase required cython version on python 3.7</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11763">#11763</a>: BUG: check return value of _buffer_format_string</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11775">#11775</a>: MAINT: Make assert_array_compare more generic.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11776">#11776</a>: TST: Fix urlopen stubbing.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11777">#11777</a>: BUG: Fix regression in intersect1d.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11779">#11779</a>: BUG: Fix test sensitive to platform byte order.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11781">#11781</a>: BUG: Avoid signed overflow in histogram</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11785">#11785</a>: BUG: Fix pickle and memoryview for datetime64, timedelta64 scalars</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11786">#11786</a>: BUG: Deprecation triggers segfault</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-15-0-release-notes">
<h2>NumPy 1.15.0 Release Notes<a class="headerlink" href="#numpy-1-15-0-release-notes" title="Permalink to this headline">¶</a></h2>
<p>NumPy 1.15.0 is a release with an unusual number of cleanups, many deprecations
of old functions, and improvements to many existing functions. Please read the
detailed descriptions below to see if you are affected.</p>
<p>For testing, we have switched to pytest as a replacement for the no longer
maintained nose framework. The old nose based interface remains for downstream
projects who may still be using it.</p>
<p>The Python versions supported by this release are 2.7, 3.4-3.7. The wheels are
linked with OpenBLAS v0.3.0, which should fix some of the linalg problems
reported for NumPy 1.14.</p>
<div class="section" id="id45">
<h3>Highlights<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>NumPy has switched to pytest for testing.</li>
<li>A new  <a class="reference internal" href="reference/generated/numpy.printoptions.html#numpy.printoptions" title="numpy.printoptions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.printoptions</span></code></a> context manager.</li>
<li>Many improvements to the histogram functions.</li>
<li>Support for unicode field names in python 2.7.</li>
<li>Improved support for PyPy.</li>
<li>Fixes and improvements to <a class="reference internal" href="reference/generated/numpy.einsum.html#numpy.einsum" title="numpy.einsum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.einsum</span></code></a>.</li>
</ul>
</div>
<div class="section" id="id46">
<h3>New functions<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><a class="reference internal" href="reference/generated/numpy.gcd.html#numpy.gcd" title="numpy.gcd"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.gcd</span></code></a> and <a class="reference internal" href="reference/generated/numpy.lcm.html#numpy.lcm" title="numpy.lcm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.lcm</span></code></a>, to compute the greatest common divisor and least
common multiple.</p>
</li>
<li><p class="first"><a class="reference internal" href="reference/generated/numpy.ma.stack.html#numpy.ma.stack" title="numpy.ma.stack"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ma.stack</span></code></a>, the <a class="reference internal" href="reference/generated/numpy.stack.html#numpy.stack" title="numpy.stack"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.stack</span></code></a> array-joining function generalized to
masked arrays.</p>
</li>
<li><p class="first"><a class="reference internal" href="reference/generated/numpy.quantile.html#numpy.quantile" title="numpy.quantile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.quantile</span></code></a> function, an interface to <code class="docutils literal notranslate"><span class="pre">percentile</span></code> without factors of
100</p>
</li>
<li><p class="first"><a class="reference internal" href="reference/generated/numpy.nanquantile.html#numpy.nanquantile" title="numpy.nanquantile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.nanquantile</span></code></a> function, an interface to <code class="docutils literal notranslate"><span class="pre">nanpercentile</span></code> without
factors of 100</p>
</li>
<li><p class="first"><a class="reference internal" href="reference/generated/numpy.printoptions.html#numpy.printoptions" title="numpy.printoptions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.printoptions</span></code></a>, a context manager that sets print options temporarily
for the scope of the <code class="docutils literal notranslate"><span class="pre">with</span></code> block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">np</span><span class="o">.</span><span class="n">printoptions</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">2.0</span><span class="p">])</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">[0.67]</span>
</pre></div>
</div>
</li>
<li><p class="first"><a class="reference internal" href="reference/generated/numpy.histogram_bin_edges.html#numpy.histogram_bin_edges" title="numpy.histogram_bin_edges"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.histogram_bin_edges</span></code></a>, a function to get the edges of the bins used by a
histogram without needing to calculate the histogram.</p>
</li>
<li><p class="first">C functions <em class="xref py py-obj">npy_get_floatstatus_barrier</em> and <em class="xref py py-obj">npy_clear_floatstatus_barrier</em>
have been added to deal with compiler optimization changing the order of
operations.  See below for details.</p>
</li>
</ul>
</div>
<div class="section" id="id47">
<h3>Deprecations<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Aliases of builtin <a class="reference external" href="https://docs.python.org/dev/library/pickle.html#module-pickle" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pickle</span></code></a> functions are deprecated, in favor of their
unaliased <code class="docutils literal notranslate"><span class="pre">pickle.&lt;func&gt;</span></code> names:<ul>
<li><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.loads</span></code></li>
<li><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.core.numeric.load</span></code></li>
<li><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.core.numeric.loads</span></code></li>
<li><a class="reference internal" href="reference/generated/numpy.ma.loads.html#numpy.ma.loads" title="numpy.ma.loads"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ma.loads</span></code></a>, <a class="reference internal" href="reference/generated/numpy.ma.dumps.html#numpy.ma.dumps" title="numpy.ma.dumps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ma.dumps</span></code></a></li>
<li><a class="reference internal" href="reference/generated/numpy.ma.load.html#numpy.ma.load" title="numpy.ma.load"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ma.load</span></code></a>, <a class="reference internal" href="reference/generated/numpy.ma.dump.html#numpy.ma.dump" title="numpy.ma.dump"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ma.dump</span></code></a> - these functions already failed on
python 3 when called with a string.</li>
</ul>
</li>
<li>Multidimensional indexing with anything but a tuple is deprecated. This means
that the index list in <code class="docutils literal notranslate"><span class="pre">ind</span> <span class="pre">=</span> <span class="pre">[slice(None),</span> <span class="pre">0];</span> <span class="pre">arr[ind]</span></code> should be changed
to a tuple, e.g., <code class="docutils literal notranslate"><span class="pre">ind</span> <span class="pre">=</span> <span class="pre">[slice(None),</span> <span class="pre">0];</span> <span class="pre">arr[tuple(ind)]</span></code> or
<code class="docutils literal notranslate"><span class="pre">arr[(slice(None),</span> <span class="pre">0)]</span></code>. That change is necessary to avoid ambiguity in
expressions such as <code class="docutils literal notranslate"><span class="pre">arr[[[0,</span> <span class="pre">1],</span> <span class="pre">[0,</span> <span class="pre">1]]]</span></code>, currently interpreted as
<code class="docutils literal notranslate"><span class="pre">arr[array([0,</span> <span class="pre">1]),</span> <span class="pre">array([0,</span> <span class="pre">1])]</span></code>, that will be interpreted
as <code class="docutils literal notranslate"><span class="pre">arr[array([[0,</span> <span class="pre">1],</span> <span class="pre">[0,</span> <span class="pre">1]])]</span></code> in the future.</li>
<li>Imports from the following sub-modules are deprecated, they will be removed
at some future date.<ul>
<li><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.testing.utils</span></code></li>
<li><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.testing.decorators</span></code></li>
<li><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.testing.nosetester</span></code></li>
<li><em class="xref py py-obj">numpy.testing.noseclasses</em></li>
<li><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.core.umath_tests</span></code></li>
</ul>
</li>
<li>Giving a generator to <a class="reference internal" href="reference/generated/numpy.sum.html#numpy.sum" title="numpy.sum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.sum</span></code></a> is now deprecated. This was undocumented
behavior, but worked. Previously, it would calculate the sum of the generator
expression.  In the future, it might return a different result. Use
<code class="docutils literal notranslate"><span class="pre">np.sum(np.from_iter(generator))</span></code> or the built-in Python <code class="docutils literal notranslate"><span class="pre">sum</span></code> instead.</li>
<li>Users of the C-API should call <code class="docutils literal notranslate"><span class="pre">PyArrayResolveWriteBackIfCopy</span></code> or
<code class="docutils literal notranslate"><span class="pre">PyArray_DiscardWritbackIfCopy</span></code> on any array with the <code class="docutils literal notranslate"><span class="pre">WRITEBACKIFCOPY</span></code>
flag set, before deallocating the array. A deprecation warning will be
emitted if those calls are not used when needed.</li>
<li>Users of <code class="docutils literal notranslate"><span class="pre">nditer</span></code> should use the nditer object as a context manager
anytime one of the iterator operands is writeable, so that numpy can
manage writeback semantics, or should call <code class="docutils literal notranslate"><span class="pre">it.close()</span></code>. A
<em class="xref py py-obj">RuntimeWarning</em> may be emitted otherwise in these cases.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">normed</span></code> argument of <code class="docutils literal notranslate"><span class="pre">np.histogram</span></code>, deprecated long ago in 1.6.0,
now emits a <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code>.</li>
</ul>
</div>
<div class="section" id="id48">
<h3>Future Changes<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>NumPy 1.16 will drop support for Python 3.4.</li>
<li>NumPy 1.17 will drop support for Python 2.7.</li>
</ul>
</div>
<div class="section" id="id49">
<h3>Compatibility notes<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h3>
<div class="section" id="compiled-testing-modules-renamed-and-made-private">
<h4>Compiled testing modules renamed and made private<a class="headerlink" href="#compiled-testing-modules-renamed-and-made-private" title="Permalink to this headline">¶</a></h4>
<p>The following compiled modules have been renamed and made private:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">umath_tests</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">_umath_tests</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">test_rational</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">_rational_tests</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">multiarray_tests</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">_multiarray_tests</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">struct_ufunc_test</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">_struct_ufunc_tests</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">operand_flag_tests</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">_operand_flag_tests</span></code></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">umath_tests</span></code> module is still available for backwards compatibility, but
will be removed in the future.</p>
</div>
<div class="section" id="the-npzfile-returned-by-np-savez-is-now-a-collections-abc-mapping">
<h4>The <code class="docutils literal notranslate"><span class="pre">NpzFile</span></code> returned by <code class="docutils literal notranslate"><span class="pre">np.savez</span></code> is now a <code class="docutils literal notranslate"><span class="pre">collections.abc.Mapping</span></code><a class="headerlink" href="#the-npzfile-returned-by-np-savez-is-now-a-collections-abc-mapping" title="Permalink to this headline">¶</a></h4>
<p>This means it behaves like a readonly dictionary, and has a new <code class="docutils literal notranslate"><span class="pre">.values()</span></code>
method and <code class="docutils literal notranslate"><span class="pre">len()</span></code> implementation.</p>
<p>For python 3, this means that <code class="docutils literal notranslate"><span class="pre">.iteritems()</span></code>, <code class="docutils literal notranslate"><span class="pre">.iterkeys()</span></code> have been
deprecated, and <code class="docutils literal notranslate"><span class="pre">.keys()</span></code> and <code class="docutils literal notranslate"><span class="pre">.items()</span></code> now return views and not lists.
This is consistent with how the builtin <code class="docutils literal notranslate"><span class="pre">dict</span></code> type changed between python 2
and python 3.</p>
</div>
<div class="section" id="under-certain-conditions-nditer-must-be-used-in-a-context-manager">
<h4>Under certain conditions, <code class="docutils literal notranslate"><span class="pre">nditer</span></code> must be used in a context manager<a class="headerlink" href="#under-certain-conditions-nditer-must-be-used-in-a-context-manager" title="Permalink to this headline">¶</a></h4>
<p>When using an <a class="reference internal" href="reference/generated/numpy.nditer.html#numpy.nditer" title="numpy.nditer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.nditer</span></code></a> with the <code class="docutils literal notranslate"><span class="pre">&quot;writeonly&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;readwrite&quot;</span></code> flags, there
are some circumstances where nditer doesn’t actually give you a view of the
writable array. Instead, it gives you a copy, and if you make changes to the
copy, nditer later writes those changes back into your actual array. Currently,
this writeback occurs when the array objects are garbage collected, which makes
this API error-prone on CPython and entirely broken on PyPy. Therefore,
<code class="docutils literal notranslate"><span class="pre">nditer</span></code> should now be used as a context manager whenever it is used
with writeable arrays, e.g., <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">np.nditer(...)</span> <span class="pre">as</span> <span class="pre">it:</span> <span class="pre">...</span></code>. You may also
explicitly call <code class="docutils literal notranslate"><span class="pre">it.close()</span></code> for cases where a context manager is unusable,
for instance in generator expressions.</p>
</div>
<div class="section" id="numpy-has-switched-to-using-pytest-instead-of-nose-for-testing">
<h4>Numpy has switched to using pytest instead of nose for testing<a class="headerlink" href="#numpy-has-switched-to-using-pytest-instead-of-nose-for-testing" title="Permalink to this headline">¶</a></h4>
<p>The last nose release was 1.3.7 in June, 2015, and development of that tool has
ended, consequently NumPy has now switched to using pytest. The old decorators
and nose tools that were previously used by some downstream projects remain
available, but will not be maintained. The standard testing utilities,
<code class="docutils literal notranslate"><span class="pre">assert_almost_equal</span></code> and such, are not be affected by this change except for
the nose specific functions <code class="docutils literal notranslate"><span class="pre">import_nose</span></code> and <code class="docutils literal notranslate"><span class="pre">raises</span></code>. Those functions are
not used in numpy, but are kept for downstream compatibility.</p>
</div>
<div class="section" id="numpy-no-longer-monkey-patches-ctypes-with-array-interface">
<h4>Numpy no longer monkey-patches <code class="docutils literal notranslate"><span class="pre">ctypes</span></code> with <code class="docutils literal notranslate"><span class="pre">__array_interface__</span></code><a class="headerlink" href="#numpy-no-longer-monkey-patches-ctypes-with-array-interface" title="Permalink to this headline">¶</a></h4>
<p>Previously numpy added <code class="docutils literal notranslate"><span class="pre">__array_interface__</span></code> attributes to all the integer
types from <code class="docutils literal notranslate"><span class="pre">ctypes</span></code>.</p>
</div>
<div class="section" id="np-ma-notmasked-contiguous-and-np-ma-flatnotmasked-contiguous-always-return-lists">
<h4><code class="docutils literal notranslate"><span class="pre">np.ma.notmasked_contiguous</span></code> and <code class="docutils literal notranslate"><span class="pre">np.ma.flatnotmasked_contiguous</span></code> always return lists<a class="headerlink" href="#np-ma-notmasked-contiguous-and-np-ma-flatnotmasked-contiguous-always-return-lists" title="Permalink to this headline">¶</a></h4>
<p>This is the documented behavior, but previously the result could be any of
slice, None, or list.</p>
<p>All downstream users seem to check for the <code class="docutils literal notranslate"><span class="pre">None</span></code> result from
<code class="docutils literal notranslate"><span class="pre">flatnotmasked_contiguous</span></code> and replace it with <code class="docutils literal notranslate"><span class="pre">[]</span></code>.  Those callers will
continue to work as before.</p>
</div>
<div class="section" id="np-squeeze-restores-old-behavior-of-objects-that-cannot-handle-an-axis-argument">
<h4><code class="docutils literal notranslate"><span class="pre">np.squeeze</span></code> restores old behavior of objects that cannot handle an <code class="docutils literal notranslate"><span class="pre">axis</span></code> argument<a class="headerlink" href="#np-squeeze-restores-old-behavior-of-objects-that-cannot-handle-an-axis-argument" title="Permalink to this headline">¶</a></h4>
<p>Prior to version <code class="docutils literal notranslate"><span class="pre">1.7.0</span></code>, <a class="reference internal" href="reference/generated/numpy.squeeze.html#numpy.squeeze" title="numpy.squeeze"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.squeeze</span></code></a> did not have an <code class="docutils literal notranslate"><span class="pre">axis</span></code> argument and
all empty axes were removed by default. The incorporation of an <code class="docutils literal notranslate"><span class="pre">axis</span></code>
argument made it possible to selectively squeeze single or multiple empty axes,
but the old API expectation was not respected because axes could still be
selectively removed (silent success) from an object expecting all empty axes to
be removed. That silent, selective removal of empty axes for objects expecting
the old behavior has been fixed and the old behavior restored.</p>
</div>
<div class="section" id="unstructured-void-array-s-item-method-now-returns-a-bytes-object">
<h4>unstructured void array’s <code class="docutils literal notranslate"><span class="pre">.item</span></code> method now returns a bytes object<a class="headerlink" href="#unstructured-void-array-s-item-method-now-returns-a-bytes-object" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">.item</span></code> now returns a <code class="docutils literal notranslate"><span class="pre">bytes</span></code> object instead of a buffer or byte array.
This may affect code which assumed the return value was mutable, which is no
longer the case.</p>
</div>
<div class="section" id="copy-copy-and-copy-deepcopy-no-longer-turn-masked-into-an-array">
<h4><code class="docutils literal notranslate"><span class="pre">copy.copy</span></code> and <code class="docutils literal notranslate"><span class="pre">copy.deepcopy</span></code> no longer turn <code class="docutils literal notranslate"><span class="pre">masked</span></code> into an array<a class="headerlink" href="#copy-copy-and-copy-deepcopy-no-longer-turn-masked-into-an-array" title="Permalink to this headline">¶</a></h4>
<p>Since <code class="docutils literal notranslate"><span class="pre">np.ma.masked</span></code> is a readonly scalar, copying should be a no-op. These
functions now behave consistently with <code class="docutils literal notranslate"><span class="pre">np.copy()</span></code>.</p>
</div>
<div class="section" id="multifield-indexing-of-structured-arrays-will-still-return-a-copy">
<h4>Multifield Indexing of Structured Arrays will still return a copy<a class="headerlink" href="#multifield-indexing-of-structured-arrays-will-still-return-a-copy" title="Permalink to this headline">¶</a></h4>
<p>The change that multi-field indexing of structured arrays returns a view
instead of a copy is pushed back to 1.16. A new method
<code class="docutils literal notranslate"><span class="pre">numpy.lib.recfunctions.repack_fields</span></code> has been introduced to help mitigate
the effects of this change, which can be used to write code compatible with
both numpy 1.15 and 1.16. For more information on how to update code to account
for this future change see the “accessing multiple fields” section of the
<a class="reference external" href="https://docs.scipy.org/doc/numpy/user/basics.rec.html">user guide</a>.</p>
</div>
</div>
<div class="section" id="id50">
<h3>C API changes<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h3>
<div class="section" id="new-functions-npy-get-floatstatus-barrier-and-npy-clear-floatstatus-barrier">
<h4>New functions <code class="docutils literal notranslate"><span class="pre">npy_get_floatstatus_barrier</span></code> and <code class="docutils literal notranslate"><span class="pre">npy_clear_floatstatus_barrier</span></code><a class="headerlink" href="#new-functions-npy-get-floatstatus-barrier-and-npy-clear-floatstatus-barrier" title="Permalink to this headline">¶</a></h4>
<p>Functions <code class="docutils literal notranslate"><span class="pre">npy_get_floatstatus_barrier</span></code> and <code class="docutils literal notranslate"><span class="pre">npy_clear_floatstatus_barrier</span></code>
have been added and should be used in place of the <code class="docutils literal notranslate"><span class="pre">npy_get_floatstatus``and</span>
<span class="pre">``npy_clear_status</span></code> functions. Optimizing compilers like GCC 8.1 and Clang
were rearranging the order of operations when the previous functions were used
in the ufunc SIMD functions, resulting in the floatstatus flags being checked
before the operation whose status we wanted to check was run.  See <a class="reference external" href="https://github.com/numpy/numpy/issues/10370">#10339</a>.</p>
</div>
<div class="section" id="changes-to-pyarray-getdtypetransferfunction">
<h4>Changes to <code class="docutils literal notranslate"><span class="pre">PyArray_GetDTypeTransferFunction</span></code><a class="headerlink" href="#changes-to-pyarray-getdtypetransferfunction" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">PyArray_GetDTypeTransferFunction</span></code> now defaults to using user-defined
<code class="docutils literal notranslate"><span class="pre">copyswapn</span></code> / <code class="docutils literal notranslate"><span class="pre">copyswap</span></code> for user-defined dtypes. If this causes a
significant performance hit, consider implementing <code class="docutils literal notranslate"><span class="pre">copyswapn</span></code> to reflect the
implementation of <code class="docutils literal notranslate"><span class="pre">PyArray_GetStridedCopyFn</span></code>.  See <a class="reference external" href="https://github.com/numpy/numpy/pull/10898">#10898</a>.</p>
</div>
</div>
<div class="section" id="id51">
<h3>New Features<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h3>
<div class="section" id="np-gcd-and-np-lcm-ufuncs-added-for-integer-and-objects-types">
<h4><code class="docutils literal notranslate"><span class="pre">np.gcd</span></code> and <code class="docutils literal notranslate"><span class="pre">np.lcm</span></code> ufuncs added for integer and objects types<a class="headerlink" href="#np-gcd-and-np-lcm-ufuncs-added-for-integer-and-objects-types" title="Permalink to this headline">¶</a></h4>
<p>These compute the greatest common divisor, and lowest common multiple,
respectively. These work on all the numpy integer types, as well as the
builtin arbitrary-precision <code class="docutils literal notranslate"><span class="pre">Decimal</span></code> and <code class="docutils literal notranslate"><span class="pre">long</span></code> types.</p>
</div>
<div class="section" id="support-for-cross-platform-builds-for-ios">
<h4>Support for cross-platform builds for iOS<a class="headerlink" href="#support-for-cross-platform-builds-for-ios" title="Permalink to this headline">¶</a></h4>
<p>The build system has been modified to add support for the
<code class="docutils literal notranslate"><span class="pre">_PYTHON_HOST_PLATFORM</span></code> environment variable, used by <code class="docutils literal notranslate"><span class="pre">distutils</span></code> when
compiling on one platform for another platform. This makes it possible to
compile NumPy for iOS targets.</p>
<p>This only enables you to compile NumPy for one specific platform at a time.
Creating a full iOS-compatible NumPy package requires building for the 5
architectures supported by iOS (i386, x86_64, armv7, armv7s and arm64), and
combining these 5 compiled builds products into a single “fat” binary.</p>
</div>
<div class="section" id="return-indices-keyword-added-for-np-intersect1d">
<h4><code class="docutils literal notranslate"><span class="pre">return_indices</span></code> keyword added for <code class="docutils literal notranslate"><span class="pre">np.intersect1d</span></code><a class="headerlink" href="#return-indices-keyword-added-for-np-intersect1d" title="Permalink to this headline">¶</a></h4>
<p>New keyword <code class="docutils literal notranslate"><span class="pre">return_indices</span></code> returns the indices of the two input arrays
that correspond to the common elements.</p>
</div>
<div class="section" id="np-quantile-and-np-nanquantile">
<h4><code class="docutils literal notranslate"><span class="pre">np.quantile</span></code> and <code class="docutils literal notranslate"><span class="pre">np.nanquantile</span></code><a class="headerlink" href="#np-quantile-and-np-nanquantile" title="Permalink to this headline">¶</a></h4>
<p>Like <code class="docutils literal notranslate"><span class="pre">np.percentile</span></code> and <code class="docutils literal notranslate"><span class="pre">np.nanpercentile</span></code>, but takes quantiles in [0, 1]
rather than percentiles in [0, 100]. <code class="docutils literal notranslate"><span class="pre">np.percentile</span></code> is now a thin wrapper
around <code class="docutils literal notranslate"><span class="pre">np.quantile</span></code> with the extra step of dividing by 100.</p>
</div>
<div class="section" id="build-system">
<h4>Build system<a class="headerlink" href="#build-system" title="Permalink to this headline">¶</a></h4>
<p>Added experimental support for the 64-bit RISC-V architecture.</p>
</div>
</div>
<div class="section" id="id52">
<h3>Improvements<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h3>
<div class="section" id="np-einsum-updates">
<h4><code class="docutils literal notranslate"><span class="pre">np.einsum</span></code> updates<a class="headerlink" href="#np-einsum-updates" title="Permalink to this headline">¶</a></h4>
<p>Syncs einsum path optimization tech between <a class="reference internal" href="reference/index.html#module-numpy" title="numpy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span></code></a> and <em class="xref py py-obj">opt_einsum</em>. In
particular, the <em class="xref py py-obj">greedy</em> path has received many enhancements by &#64;jcmgray. A
full list of issues fixed are:</p>
<ul class="simple">
<li>Arbitrary memory can be passed into the <em class="xref py py-obj">greedy</em> path. Fixes gh-11210.</li>
<li>The greedy path has been updated to contain more dynamic programming ideas
preventing a large number of duplicate (and expensive) calls that figure out
the actual pair contraction that takes place. Now takes a few seconds on
several hundred input tensors. Useful for matrix product state theories.</li>
<li>Reworks the broadcasting dot error catching found in gh-11218 gh-10352 to be
a bit earlier in the process.</li>
<li>Enhances the <em class="xref py py-obj">can_dot</em> functionality that previous missed an edge case (part
of gh-11308).</li>
</ul>
</div>
<div class="section" id="np-ufunc-reduce-and-related-functions-now-accept-an-initial-value">
<h4><code class="docutils literal notranslate"><span class="pre">np.ufunc.reduce</span></code> and related functions now accept an initial value<a class="headerlink" href="#np-ufunc-reduce-and-related-functions-now-accept-an-initial-value" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">np.ufunc.reduce</span></code>, <code class="docutils literal notranslate"><span class="pre">np.sum</span></code>, <code class="docutils literal notranslate"><span class="pre">np.prod</span></code>, <code class="docutils literal notranslate"><span class="pre">np.min</span></code> and <code class="docutils literal notranslate"><span class="pre">np.max</span></code> all
now accept an <code class="docutils literal notranslate"><span class="pre">initial</span></code> keyword argument that specifies the value to start
the reduction with.</p>
</div>
<div class="section" id="np-flip-can-operate-over-multiple-axes">
<h4><code class="docutils literal notranslate"><span class="pre">np.flip</span></code> can operate over multiple axes<a class="headerlink" href="#np-flip-can-operate-over-multiple-axes" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">np.flip</span></code> now accepts None, or tuples of int, in its <code class="docutils literal notranslate"><span class="pre">axis</span></code> argument. If
axis is None, it will flip over all the axes.</p>
</div>
<div class="section" id="histogram-and-histogramdd-functions-have-moved-to-np-lib-histograms">
<h4><code class="docutils literal notranslate"><span class="pre">histogram</span></code> and <code class="docutils literal notranslate"><span class="pre">histogramdd</span></code> functions have moved to <code class="docutils literal notranslate"><span class="pre">np.lib.histograms</span></code><a class="headerlink" href="#histogram-and-histogramdd-functions-have-moved-to-np-lib-histograms" title="Permalink to this headline">¶</a></h4>
<p>These were originally found in <code class="docutils literal notranslate"><span class="pre">np.lib.function_base</span></code>. They are still
available under their un-scoped <code class="docutils literal notranslate"><span class="pre">np.histogram(dd)</span></code> names, and
to maintain compatibility, aliased at <code class="docutils literal notranslate"><span class="pre">np.lib.function_base.histogram(dd)</span></code>.</p>
<p>Code that does <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">np.lib.function_base</span> <span class="pre">import</span> <span class="pre">*</span></code> will need to be updated
with the new location, and should consider not using <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">*</span></code> in future.</p>
</div>
<div class="section" id="histogram-will-accept-nan-values-when-explicit-bins-are-given">
<h4><code class="docutils literal notranslate"><span class="pre">histogram</span></code> will accept NaN values when explicit bins are given<a class="headerlink" href="#histogram-will-accept-nan-values-when-explicit-bins-are-given" title="Permalink to this headline">¶</a></h4>
<p>Previously it would fail when trying to compute a finite range for the data.
Since the range is ignored anyway when the bins are given explicitly, this error
was needless.</p>
<p>Note that calling <code class="docutils literal notranslate"><span class="pre">histogram</span></code> on NaN values continues to raise the
<code class="docutils literal notranslate"><span class="pre">RuntimeWarning</span></code> s typical of working with nan values, which can be silenced
as usual with <code class="docutils literal notranslate"><span class="pre">errstate</span></code>.</p>
</div>
<div class="section" id="histogram-works-on-datetime-types-when-explicit-bin-edges-are-given">
<h4><code class="docutils literal notranslate"><span class="pre">histogram</span></code> works on datetime types, when explicit bin edges are given<a class="headerlink" href="#histogram-works-on-datetime-types-when-explicit-bin-edges-are-given" title="Permalink to this headline">¶</a></h4>
<p>Dates, times, and timedeltas can now be histogrammed. The bin edges must be
passed explicitly, and are not yet computed automatically.</p>
</div>
<div class="section" id="histogram-auto-estimator-handles-limited-variance-better">
<h4><code class="docutils literal notranslate"><span class="pre">histogram</span></code> “auto” estimator handles limited variance better<a class="headerlink" href="#histogram-auto-estimator-handles-limited-variance-better" title="Permalink to this headline">¶</a></h4>
<p>No longer does an IQR of 0 result in <code class="docutils literal notranslate"><span class="pre">n_bins=1</span></code>, rather the number of bins
chosen is related to the data size in this situation.</p>
</div>
<div class="section" id="the-edges-retuned-by-histogram-and-histogramdd-now-match-the-data-float-type">
<h4>The edges retuned by <em class="xref py py-obj">histogram`</em> and <code class="docutils literal notranslate"><span class="pre">histogramdd</span></code> now match the data float type<a class="headerlink" href="#the-edges-retuned-by-histogram-and-histogramdd-now-match-the-data-float-type" title="Permalink to this headline">¶</a></h4>
<p>When passed <code class="docutils literal notranslate"><span class="pre">np.float16</span></code>, <code class="docutils literal notranslate"><span class="pre">np.float32</span></code>, or <code class="docutils literal notranslate"><span class="pre">np.longdouble</span></code> data, the
returned edges are now of the same dtype. Previously, <code class="docutils literal notranslate"><span class="pre">histogram</span></code> would only
return the same type if explicit bins were given, and <code class="docutils literal notranslate"><span class="pre">histogram</span></code> would
produce <code class="docutils literal notranslate"><span class="pre">float64</span></code> bins no matter what the inputs.</p>
</div>
<div class="section" id="histogramdd-allows-explicit-ranges-to-be-given-in-a-subset-of-axes">
<h4><code class="docutils literal notranslate"><span class="pre">histogramdd</span></code> allows explicit ranges to be given in a subset of axes<a class="headerlink" href="#histogramdd-allows-explicit-ranges-to-be-given-in-a-subset-of-axes" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">range</span></code> argument of <a class="reference internal" href="reference/generated/numpy.histogramdd.html#numpy.histogramdd" title="numpy.histogramdd"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.histogramdd</span></code></a> can now contain <code class="docutils literal notranslate"><span class="pre">None</span></code> values to
indicate that the range for the corresponding axis should be computed from the
data. Previously, this could not be specified on a per-axis basis.</p>
</div>
<div class="section" id="the-normed-arguments-of-histogramdd-and-histogram2d-have-been-renamed">
<h4>The normed arguments of <code class="docutils literal notranslate"><span class="pre">histogramdd</span></code> and <code class="docutils literal notranslate"><span class="pre">histogram2d</span></code> have been renamed<a class="headerlink" href="#the-normed-arguments-of-histogramdd-and-histogram2d-have-been-renamed" title="Permalink to this headline">¶</a></h4>
<p>These arguments are now called <code class="docutils literal notranslate"><span class="pre">density</span></code>, which is consistent with
<code class="docutils literal notranslate"><span class="pre">histogram</span></code>. The old argument continues to work, but the new name should be
preferred.</p>
</div>
<div class="section" id="np-r-works-with-0d-arrays-and-np-ma-mr-works-with-np-ma-masked">
<h4><code class="docutils literal notranslate"><span class="pre">np.r_</span></code> works with 0d arrays, and <code class="docutils literal notranslate"><span class="pre">np.ma.mr_</span></code> works with <code class="docutils literal notranslate"><span class="pre">np.ma.masked</span></code><a class="headerlink" href="#np-r-works-with-0d-arrays-and-np-ma-mr-works-with-np-ma-masked" title="Permalink to this headline">¶</a></h4>
<p>0d arrays passed to the <a class="reference internal" href="reference/generated/numpy.r_.html#numpy.r_" title="numpy.r_"><code class="xref py py-obj docutils literal notranslate"><span class="pre">r_</span></code></a> and <em class="xref py py-obj">mr_</em> concatenation helpers are now treated as
though they are arrays of length 1. Previously, passing these was an error.
As a result, <a class="reference internal" href="reference/generated/numpy.ma.mr_.html#numpy.ma.mr_" title="numpy.ma.mr_"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ma.mr_</span></code></a> now works correctly on the <code class="docutils literal notranslate"><span class="pre">masked</span></code> constant.</p>
</div>
<div class="section" id="np-ptp-accepts-a-keepdims-argument-and-extended-axis-tuples">
<h4><code class="docutils literal notranslate"><span class="pre">np.ptp</span></code> accepts a <code class="docutils literal notranslate"><span class="pre">keepdims</span></code> argument, and extended axis tuples<a class="headerlink" href="#np-ptp-accepts-a-keepdims-argument-and-extended-axis-tuples" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">np.ptp</span></code> (peak-to-peak) can now work over multiple axes, just like <code class="docutils literal notranslate"><span class="pre">np.max</span></code>
and <code class="docutils literal notranslate"><span class="pre">np.min</span></code>.</p>
</div>
<div class="section" id="maskedarray-astype-now-is-identical-to-ndarray-astype">
<h4><code class="docutils literal notranslate"><span class="pre">MaskedArray.astype</span></code> now is identical to <code class="docutils literal notranslate"><span class="pre">ndarray.astype</span></code><a class="headerlink" href="#maskedarray-astype-now-is-identical-to-ndarray-astype" title="Permalink to this headline">¶</a></h4>
<p>This means it takes all the same arguments, making more code written for
ndarray work for masked array too.</p>
</div>
<div class="section" id="enable-avx2-avx512-at-compile-time">
<h4>Enable AVX2/AVX512 at compile time<a class="headerlink" href="#enable-avx2-avx512-at-compile-time" title="Permalink to this headline">¶</a></h4>
<p>Change to simd.inc.src to allow use of AVX2 or AVX512 at compile time. Previously
compilation for avx2 (or 512) with -march=native would still use the SSE
code for the simd functions even when the rest of the code got AVX2.</p>
</div>
<div class="section" id="nan-to-num-always-returns-scalars-when-receiving-scalar-or-0d-inputs">
<h4><code class="docutils literal notranslate"><span class="pre">nan_to_num</span></code> always returns scalars when receiving scalar or 0d inputs<a class="headerlink" href="#nan-to-num-always-returns-scalars-when-receiving-scalar-or-0d-inputs" title="Permalink to this headline">¶</a></h4>
<p>Previously an array was returned for integer scalar inputs, which is
inconsistent with the behavior for float inputs, and that of ufuncs in general.
For all types of scalar or 0d input, the result is now a scalar.</p>
</div>
<div class="section" id="np-flatnonzero-works-on-numpy-convertible-types">
<h4><code class="docutils literal notranslate"><span class="pre">np.flatnonzero</span></code> works on numpy-convertible types<a class="headerlink" href="#np-flatnonzero-works-on-numpy-convertible-types" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">np.flatnonzero</span></code> now uses <code class="docutils literal notranslate"><span class="pre">np.ravel(a)</span></code> instead of <code class="docutils literal notranslate"><span class="pre">a.ravel()</span></code>, so it
works for lists, tuples, etc.</p>
</div>
<div class="section" id="np-interp-returns-numpy-scalars-rather-than-builtin-scalars">
<h4><code class="docutils literal notranslate"><span class="pre">np.interp</span></code> returns numpy scalars rather than builtin scalars<a class="headerlink" href="#np-interp-returns-numpy-scalars-rather-than-builtin-scalars" title="Permalink to this headline">¶</a></h4>
<p>Previously <code class="docutils literal notranslate"><span class="pre">np.interp(0.5,</span> <span class="pre">[0,</span> <span class="pre">1],</span> <span class="pre">[10,</span> <span class="pre">20])</span></code> would return a <code class="docutils literal notranslate"><span class="pre">float</span></code>, but
now it returns a <code class="docutils literal notranslate"><span class="pre">np.float64</span></code> object, which more closely matches the behavior
of other functions.</p>
<p>Additionally, the special case of <code class="docutils literal notranslate"><span class="pre">np.interp(object_array_0d,</span> <span class="pre">...)</span></code> is no
longer supported, as <code class="docutils literal notranslate"><span class="pre">np.interp(object_array_nd)</span></code> was never supported anyway.</p>
<p>As a result of this change, the <code class="docutils literal notranslate"><span class="pre">period</span></code> argument can now be used on 0d
arrays.</p>
</div>
<div class="section" id="allow-dtype-field-names-to-be-unicode-in-python-2">
<h4>Allow dtype field names to be unicode in Python 2<a class="headerlink" href="#allow-dtype-field-names-to-be-unicode-in-python-2" title="Permalink to this headline">¶</a></h4>
<p>Previously <code class="docutils literal notranslate"><span class="pre">np.dtype([(u'name',</span> <span class="pre">float)])</span></code> would raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> in
Python 2, as only bytestrings were allowed in field names. Now any unicode
string field names will be encoded with the <code class="docutils literal notranslate"><span class="pre">ascii</span></code> codec, raising a
<code class="docutils literal notranslate"><span class="pre">UnicodeEncodeError</span></code> upon failure.</p>
<p>This change makes it easier to write Python 2/3 compatible code using
<code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">unicode_literals</span></code>, which previously would cause
string literal field names to raise a TypeError in Python 2.</p>
</div>
<div class="section" id="comparison-ufuncs-accept-dtype-object-overriding-the-default-bool">
<h4>Comparison ufuncs accept <code class="docutils literal notranslate"><span class="pre">dtype=object</span></code>, overriding the default <code class="docutils literal notranslate"><span class="pre">bool</span></code><a class="headerlink" href="#comparison-ufuncs-accept-dtype-object-overriding-the-default-bool" title="Permalink to this headline">¶</a></h4>
<p>This allows object arrays of symbolic types, which override <code class="docutils literal notranslate"><span class="pre">==</span></code> and other
operators to return expressions, to be compared elementwise with
<code class="docutils literal notranslate"><span class="pre">np.equal(a,</span> <span class="pre">b,</span> <span class="pre">dtype=object)</span></code>.</p>
</div>
<div class="section" id="sort-functions-accept-kind-stable">
<h4><code class="docutils literal notranslate"><span class="pre">sort</span></code> functions accept <code class="docutils literal notranslate"><span class="pre">kind='stable'</span></code><a class="headerlink" href="#sort-functions-accept-kind-stable" title="Permalink to this headline">¶</a></h4>
<p>Up until now, to perform a stable sort on the data, the user must do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;mergesort&#39;</span><span class="p">)</span>
<span class="go">[1, 2, 2, 5, 6]</span>
</pre></div>
</div>
<p>because merge sort is the only stable sorting algorithm available in
NumPy. However, having kind=’mergesort’ does not make it explicit that
the user wants to perform a stable sort thus harming the readability.</p>
<p>This change allows the user to specify kind=’stable’ thus clarifying
the intent.</p>
</div>
<div class="section" id="do-not-make-temporary-copies-for-in-place-accumulation">
<h4>Do not make temporary copies for in-place accumulation<a class="headerlink" href="#do-not-make-temporary-copies-for-in-place-accumulation" title="Permalink to this headline">¶</a></h4>
<p>When ufuncs perform accumulation they no longer make temporary copies because
of the overlap between input an output, that is, the next element accumulated
is added before the accumulated result is stored in its place, hence the
overlap is safe. Avoiding the copy results in faster execution.</p>
</div>
<div class="section" id="linalg-matrix-power-can-now-handle-stacks-of-matrices">
<h4><code class="docutils literal notranslate"><span class="pre">linalg.matrix_power</span></code> can now handle stacks of matrices<a class="headerlink" href="#linalg-matrix-power-can-now-handle-stacks-of-matrices" title="Permalink to this headline">¶</a></h4>
<p>Like other functions in <code class="docutils literal notranslate"><span class="pre">linalg</span></code>, <code class="docutils literal notranslate"><span class="pre">matrix_power</span></code> can now deal with arrays
of dimension larger than 2, which are treated as stacks of matrices. As part
of the change, to further improve consistency, the name of the first argument
has been changed to <code class="docutils literal notranslate"><span class="pre">a</span></code> (from <code class="docutils literal notranslate"><span class="pre">M</span></code>), and the exceptions for non-square
matrices have been changed to <code class="docutils literal notranslate"><span class="pre">LinAlgError</span></code> (from <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>).</p>
</div>
<div class="section" id="increased-performance-in-random-permutation-for-multidimensional-arrays">
<h4>Increased performance in <code class="docutils literal notranslate"><span class="pre">random.permutation</span></code> for multidimensional arrays<a class="headerlink" href="#increased-performance-in-random-permutation-for-multidimensional-arrays" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">permutation</span></code> uses the fast path in <code class="docutils literal notranslate"><span class="pre">random.shuffle</span></code> for all input
array dimensions.  Previously the fast path was only used for 1-d arrays.</p>
</div>
<div class="section" id="generalized-ufuncs-now-accept-axes-axis-and-keepdims-arguments">
<h4>Generalized ufuncs now accept <code class="docutils literal notranslate"><span class="pre">axes</span></code>, <code class="docutils literal notranslate"><span class="pre">axis</span></code> and <code class="docutils literal notranslate"><span class="pre">keepdims</span></code> arguments<a class="headerlink" href="#generalized-ufuncs-now-accept-axes-axis-and-keepdims-arguments" title="Permalink to this headline">¶</a></h4>
<p>One can control over which axes a generalized ufunc operates by passing in an
<code class="docutils literal notranslate"><span class="pre">axes</span></code> argument, a list of tuples with indices of particular axes.  For
instance, for a signature of <code class="docutils literal notranslate"><span class="pre">(i,j),(j,k)-&gt;(i,k)</span></code> appropriate for matrix
multiplication, the base elements are two-dimensional matrices and these are
taken to be stored in the two last axes of each argument.  The corresponding
axes keyword would be <code class="docutils literal notranslate"><span class="pre">[(-2,</span> <span class="pre">-1),</span> <span class="pre">(-2,</span> <span class="pre">-1),</span> <span class="pre">(-2,</span> <span class="pre">-1)]</span></code>. If one wanted to
use leading dimensions instead, one would pass in <code class="docutils literal notranslate"><span class="pre">[(0,</span> <span class="pre">1),</span> <span class="pre">(0,</span> <span class="pre">1),</span> <span class="pre">(0,</span> <span class="pre">1)]</span></code>.</p>
<p>For simplicity, for generalized ufuncs that operate on 1-dimensional arrays
(vectors), a single integer is accepted instead of a single-element tuple, and
for generalized ufuncs for which all outputs are scalars, the (empty) output
tuples can be omitted.  Hence, for a signature of <code class="docutils literal notranslate"><span class="pre">(i),(i)-&gt;()</span></code> appropriate
for an inner product, one could pass in <code class="docutils literal notranslate"><span class="pre">axes=[0,</span> <span class="pre">0]</span></code> to indicate that the
vectors are stored in the first dimensions of the two inputs arguments.</p>
<p>As a short-cut for generalized ufuncs that are similar to reductions, i.e.,
that act on a single, shared core dimension such as the inner product example
above, one can pass an <code class="docutils literal notranslate"><span class="pre">axis</span></code> argument. This is equivalent to passing in
<code class="docutils literal notranslate"><span class="pre">axes</span></code> with identical entries for all arguments with that core dimension
(e.g., for the example above, <code class="docutils literal notranslate"><span class="pre">axes=[(axis,),</span> <span class="pre">(axis,)]</span></code>).</p>
<p>Furthermore, like for reductions, for generalized ufuncs that have inputs that
all have the same number of core dimensions and outputs with no core dimension,
one can pass in <code class="docutils literal notranslate"><span class="pre">keepdims</span></code> to leave a dimension with size 1 in the outputs,
thus allowing proper broadcasting against the original inputs. The location of
the extra dimension can be controlled with <code class="docutils literal notranslate"><span class="pre">axes</span></code>. For instance, for the
inner-product example, <code class="docutils literal notranslate"><span class="pre">keepdims=True,</span> <span class="pre">axes=[-2,</span> <span class="pre">-2,</span> <span class="pre">-2]</span></code> would act on the
inner-product example, <code class="docutils literal notranslate"><span class="pre">keepdims=True,</span> <span class="pre">axis=-2</span></code> would act on the
one-but-last dimension of the input arguments, and leave a size 1 dimension in
that place in the output.</p>
</div>
<div class="section" id="float128-values-now-print-correctly-on-ppc-systems">
<h4>float128 values now print correctly on ppc systems<a class="headerlink" href="#float128-values-now-print-correctly-on-ppc-systems" title="Permalink to this headline">¶</a></h4>
<p>Previously printing float128 values was buggy on ppc, since the special
double-double floating-point-format on these systems was not accounted for.
float128s now print with correct rounding and uniqueness.</p>
<p>Warning to ppc users: You should upgrade glibc if it is version &lt;=2.23,
especially if using float128. On ppc, glibc’s malloc in these version often
misaligns allocated memory which can crash numpy when using float128 values.</p>
</div>
<div class="section" id="new-np-take-along-axis-and-np-put-along-axis-functions">
<h4>New <code class="docutils literal notranslate"><span class="pre">np.take_along_axis</span></code> and <code class="docutils literal notranslate"><span class="pre">np.put_along_axis</span></code> functions<a class="headerlink" href="#new-np-take-along-axis-and-np-put-along-axis-functions" title="Permalink to this headline">¶</a></h4>
<p>When used on multidimensional arrays, <code class="docutils literal notranslate"><span class="pre">argsort</span></code>, <code class="docutils literal notranslate"><span class="pre">argmin</span></code>, <code class="docutils literal notranslate"><span class="pre">argmax</span></code>, and
<code class="docutils literal notranslate"><span class="pre">argpartition</span></code> return arrays that are difficult to use as indices.
<code class="docutils literal notranslate"><span class="pre">take_along_axis</span></code> provides an easy way to use these indices to lookup values
within an array, so that:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">take_along_axis</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
</pre></div>
</div>
<p>is the same as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">np.put_along_axis</span></code> acts as the dual operation for writing to these indices
within an array.</p>
</div>
</div>
</div>
<div class="section" id="numpy-1-14-6-release-notes">
<h2>NumPy 1.14.6 Release Notes<a class="headerlink" href="#numpy-1-14-6-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix release for bugs reported following the 1.14.5 release. The
most significant fixes are:</p>
<ul class="simple">
<li>Fix for behavior change in <code class="docutils literal notranslate"><span class="pre">ma.masked_values(shrink=True)</span></code></li>
<li>Fix the new cached allocations machinery to be thread safe.</li>
</ul>
<p>The Python versions supported in this release are 2.7 and 3.4 - 3.7. The Python
3.6 wheels on PyPI should be compatible with all Python 3.6 versions.</p>
<div class="section" id="id53">
<h3>Contributors<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h3>
<p>A total of 4 people contributed to this release.  People with a “+” by their
names contributed a patch for the first time.</p>
<ul class="simple">
<li>Charles Harris</li>
<li>Eric Wieser</li>
<li>Julian Taylor</li>
<li>Matti Picus</li>
</ul>
</div>
<div class="section" id="id54">
<h3>Pull requests merged<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h3>
<p>A total of 4 pull requests were merged for this release.</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11985">#11985</a>: BUG: fix cached allocations without the GIL</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11986">#11986</a>: BUG: Undo behavior change in ma.masked_values(shrink=True)</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11987">#11987</a>: BUG: fix refcount leak in PyArray_AdaptFlexibleDType</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11995">#11995</a>: TST: Add Python 3.7 testing to NumPy 1.14.</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-14-5-release-notes">
<h2>NumPy 1.14.5 Release Notes<a class="headerlink" href="#numpy-1-14-5-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix release for bugs reported following the 1.14.4 release. The
most significant fixes are:</p>
<ul class="simple">
<li>fixes for compilation errors on alpine and NetBSD</li>
</ul>
<p>The Python versions supported in this release are 2.7 and 3.4 - 3.6. The Python
3.6 wheels available from PIP are built with Python 3.6.2 and should be
compatible with all previous versions of Python 3.6. The source releases were
cythonized with Cython 0.28.2 and should work for the upcoming Python 3.7.</p>
<div class="section" id="id55">
<h3>Contributors<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h3>
<p>A total of 1 person contributed to this release.  People with a “+” by their
names contributed a patch for the first time.</p>
<ul class="simple">
<li>Charles Harris</li>
</ul>
</div>
<div class="section" id="id56">
<h3>Pull requests merged<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h3>
<p>A total of 2 pull requests were merged for this release.</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11274">#11274</a>: BUG: Correct use of NPY_UNUSED.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11294">#11294</a>: BUG: Remove extra trailing parentheses.</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-14-4-release-notes">
<h2>NumPy 1.14.4 Release Notes<a class="headerlink" href="#numpy-1-14-4-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix release for bugs reported following the 1.14.3 release. The
most significant fixes are:</p>
<ul class="simple">
<li>fixes for compiler instruction reordering that resulted in NaN’s not being
properly propagated in <em class="xref py py-obj">np.max</em> and <em class="xref py py-obj">np.min</em>,</li>
<li>fixes for bus faults on SPARC and older ARM due to incorrect alignment
checks.</li>
</ul>
<p>There are also improvements to printing of long doubles on PPC platforms. All
is not yet perfect on that platform, the whitespace padding is still incorrect
and is to be fixed in numpy 1.15, consequently NumPy still fails some
printing-related (and other) unit tests on ppc systems. However, the printed
values are now correct.</p>
<p>Note that NumPy will error on import if it detects incorrect float32 <a class="reference internal" href="reference/generated/numpy.dot.html#numpy.dot" title="numpy.dot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dot</span></code></a>
results. This problem has been seen on the Mac when working in the Anaconda
environment and is due to a subtle interaction between MKL and PyQt5.  It is not
strictly a NumPy problem, but it is best that users be aware of it.  See the
gh-8577 NumPy issue for more information.</p>
<p>The Python versions supported in this release are 2.7 and 3.4 - 3.6. The Python
3.6 wheels available from PIP are built with Python 3.6.2 and should be
compatible with all previous versions of Python 3.6. The source releases were
cythonized with Cython 0.28.2 and should work for the upcoming Python 3.7.</p>
<div class="section" id="id57">
<h3>Contributors<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h3>
<p>A total of 7 people contributed to this release.  People with a “+” by their
names contributed a patch for the first time.</p>
<ul class="simple">
<li>Allan Haldane</li>
<li>Charles Harris</li>
<li>Marten van Kerkwijk</li>
<li>Matti Picus</li>
<li>Pauli Virtanen</li>
<li>Ryan Soklaski +</li>
<li>Sebastian Berg</li>
</ul>
</div>
<div class="section" id="id58">
<h3>Pull requests merged<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h3>
<p>A total of 11 pull requests were merged for this release.</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11104">#11104</a>: BUG: str of DOUBLE_DOUBLE format wrong on ppc64</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11170">#11170</a>: TST: linalg: add regression test for gh-8577</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11174">#11174</a>: MAINT: add sanity-checks to be run at import time</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11181">#11181</a>: BUG: void dtype setup checked offset not actual pointer for alignment</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11194">#11194</a>: BUG: Python2 doubles don’t print correctly in interactive shell.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11198">#11198</a>: BUG: optimizing compilers can reorder call to npy_get_floatstatus</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11199">#11199</a>: BUG: reduce using SSE only warns if inside SSE loop</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11203">#11203</a>: BUG: Bytes delimiter/comments in genfromtxt should be decoded</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11211">#11211</a>: BUG: Fix reference count/memory leak exposed by better testing</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11219">#11219</a>: BUG: Fixes einsum broadcasting bug when optimize=True</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/11251">#11251</a>: DOC: Document 1.14.4 release.</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-14-3-release-notes">
<h2>NumPy 1.14.3 Release Notes<a class="headerlink" href="#numpy-1-14-3-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix release for a few bugs reported following the 1.14.2 release:</p>
<ul class="simple">
<li>np.lib.recfunctions.fromrecords accepts a list-of-lists, until 1.15</li>
<li>In python2, float types use the new print style when printing to a file</li>
<li>style arg in “legacy” print mode now works for 0d arrays</li>
</ul>
<p>The Python versions supported in this release are 2.7 and 3.4 - 3.6. The Python
3.6 wheels available from PIP are built with Python 3.6.2 and should be
compatible with all previous versions of Python 3.6. The source releases were
cythonized with Cython 0.28.2.</p>
<div class="section" id="id59">
<h3>Contributors<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h3>
<p>A total of 6 people contributed to this release.  People with a “+” by their
names contributed a patch for the first time.</p>
<ul class="simple">
<li>Allan Haldane</li>
<li>Charles Harris</li>
<li>Jonathan March +</li>
<li>Malcolm Smith +</li>
<li>Matti Picus</li>
<li>Pauli Virtanen</li>
</ul>
</div>
<div class="section" id="id60">
<h3>Pull requests merged<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h3>
<p>A total of 8 pull requests were merged for this release.</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10862">#10862</a>: BUG: floating types should override tp_print (1.14 backport)</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10905">#10905</a>: BUG: for 1.14 back-compat, accept list-of-lists in fromrecords</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10947">#10947</a>: BUG: ‘style’ arg to array2string broken in legacy mode (1.14…</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10959">#10959</a>: BUG: test, fix for missing flags[‘WRITEBACKIFCOPY’] key</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10960">#10960</a>: BUG: Add missing underscore to prototype in check_embedded_lapack</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10961">#10961</a>: BUG: Fix encoding regression in ma/bench.py (Issue #10868)</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10962">#10962</a>: BUG: core: fix NPY_TITLE_KEY macro on pypy</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10974">#10974</a>: BUG: test, fix PyArray_DiscardWritebackIfCopy…</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-14-2-release-notes">
<h2>NumPy 1.14.2 Release Notes<a class="headerlink" href="#numpy-1-14-2-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix release for some bugs reported following the 1.14.1 release. The major
problems dealt with are as follows.</p>
<ul class="simple">
<li>Residual bugs in the new array printing functionality.</li>
<li>Regression resulting in a relocation problem with shared library.</li>
<li>Improved PyPy compatibility.</li>
</ul>
<p>The Python versions supported in this release are 2.7 and 3.4 - 3.6. The Python
3.6 wheels available from PIP are built with Python 3.6.2 and should be
compatible with all previous versions of Python 3.6. The source releases were
cythonized with Cython 0.26.1, which is known to <strong>not</strong> support the upcoming
Python 3.7 release.  People who wish to run Python 3.7 should check out the
NumPy repo and try building with the, as yet, unreleased master branch of
Cython.</p>
<div class="section" id="id61">
<h3>Contributors<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h3>
<p>A total of 4 people contributed to this release.  People with a “+” by their
names contributed a patch for the first time.</p>
<ul class="simple">
<li>Allan Haldane</li>
<li>Charles Harris</li>
<li>Eric Wieser</li>
<li>Pauli Virtanen</li>
</ul>
</div>
<div class="section" id="id62">
<h3>Pull requests merged<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h3>
<p>A total of 5 pull requests were merged for this release.</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10674">#10674</a>: BUG: Further back-compat fix for subclassed array repr</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10725">#10725</a>: BUG: dragon4 fractional output mode adds too many trailing zeros</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10726">#10726</a>: BUG: Fix f2py generated code to work on PyPy</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10727">#10727</a>: BUG: Fix missing NPY_VISIBILITY_HIDDEN on npy_longdouble_to_PyLong</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10729">#10729</a>: DOC: Create 1.14.2 notes and changelog.</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-14-1-release-notes">
<h2>NumPy 1.14.1 Release Notes<a class="headerlink" href="#numpy-1-14-1-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix release for some problems reported following the 1.14.0 release. The major
problems fixed are the following.</p>
<ul class="simple">
<li>Problems with the new array printing, particularly the printing of complex
values, Please report any additional problems that may turn up.</li>
<li>Problems with <code class="docutils literal notranslate"><span class="pre">np.einsum</span></code> due to the new <code class="docutils literal notranslate"><span class="pre">optimized=True</span></code> default. Some
fixes for optimization have been applied and <code class="docutils literal notranslate"><span class="pre">optimize=False</span></code> is now the
default.</li>
<li>The sort order in <code class="docutils literal notranslate"><span class="pre">np.unique</span></code> when <code class="docutils literal notranslate"><span class="pre">axis=&lt;some-number&gt;</span></code> will now always
be lexicographic in the subarray elements. In previous NumPy versions there
was an optimization that could result in sorting the subarrays as unsigned
byte strings.</li>
<li>The change in 1.14.0 that multi-field indexing of structured arrays returns a
view instead of a copy has been reverted but remains on track for NumPy 1.15.
Affected users should read the 1.14.1 Numpy User Guide section
“basics/structured arrays/accessing multiple fields” for advice on how to
manage this transition.</li>
</ul>
<p>The Python versions supported in this release are 2.7 and 3.4 - 3.6. The Python
3.6 wheels available from PIP are built with Python 3.6.2 and should be
compatible with all previous versions of Python 3.6. The source releases were
cythonized with Cython 0.26.1, which is known to <strong>not</strong> support the upcoming
Python 3.7 release.  People who wish to run Python 3.7 should check out the
NumPy repo and try building with the, as yet, unreleased master branch of
Cython.</p>
<div class="section" id="id63">
<h3>Contributors<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h3>
<p>A total of 14 people contributed to this release.  People with a “+” by their
names contributed a patch for the first time.</p>
<ul class="simple">
<li>Allan Haldane</li>
<li>Charles Harris</li>
<li>Daniel Smith</li>
<li>Dennis Weyland +</li>
<li>Eric Larson</li>
<li>Eric Wieser</li>
<li>Jarrod Millman</li>
<li>Kenichi Maehashi +</li>
<li>Marten van Kerkwijk</li>
<li>Mathieu Lamarre</li>
<li>Sebastian Berg</li>
<li>Simon Conseil</li>
<li>Simon Gibbons</li>
<li>xoviat</li>
</ul>
</div>
<div class="section" id="id64">
<h3>Pull requests merged<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h3>
<p>A total of 36 pull requests were merged for this release.</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10339">#10339</a>: BUG: restrict the __config__ modifications to win32</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10368">#10368</a>: MAINT: Adjust type promotion in linalg.norm</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10375">#10375</a>: BUG: add missing paren and remove quotes from repr of fieldless…</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10395">#10395</a>: MAINT: Update download URL in setup.py.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10396">#10396</a>: BUG: fix einsum issue with unicode input and py2</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10397">#10397</a>: BUG: fix error message not formatted in einsum</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10398">#10398</a>: DOC: add documentation about how to handle new array printing</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10403">#10403</a>: BUG: Set einsum optimize parameter default to <em class="xref py py-obj">False</em>.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10424">#10424</a>: ENH: Fix repr of np.record objects to match np.void types #10412</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10425">#10425</a>: MAINT: Update zesty to artful for i386 testing</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10431">#10431</a>: REL: Add 1.14.1 release notes template</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10435">#10435</a>: MAINT: Use ValueError for duplicate field names in lookup (backport)</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10534">#10534</a>: BUG: Provide a better error message for out-of-order fields</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10536">#10536</a>: BUG: Resize bytes columns in genfromtxt (backport of #10401)</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10537">#10537</a>: BUG: multifield-indexing adds padding bytes: revert for 1.14.1</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10539">#10539</a>: BUG: fix np.save issue with python 2.7.5</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10540">#10540</a>: BUG: Add missing DECREF in Py2 int() cast</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10541">#10541</a>: TST: Add circleci document testing to maintenance/1.14.x</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10542">#10542</a>: BUG: complex repr has extra spaces, missing + (1.14 backport)</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10550">#10550</a>: BUG: Set missing exception after malloc</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10557">#10557</a>: BUG: In numpy.i, clear CARRAY flag if wrapped buffer is not C_CONTIGUOUS.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10558">#10558</a>: DEP: Issue FutureWarning when malformed records detected.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10559">#10559</a>: BUG: Fix einsum optimize logic for singleton dimensions</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10560">#10560</a>: BUG: Fix calling ufuncs with a positional output argument.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10561">#10561</a>: BUG: Fix various Big-Endian test failures (ppc64)</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10562">#10562</a>: BUG: Make dtype.descr error for out-of-order fields.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10563">#10563</a>: BUG: arrays not being flattened in <a class="reference internal" href="reference/generated/numpy.union1d.html#numpy.union1d" title="numpy.union1d"><code class="xref py py-obj docutils literal notranslate"><span class="pre">union1d</span></code></a></li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10607">#10607</a>: MAINT: Update sphinxext submodule hash.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10608">#10608</a>: BUG: Revert sort optimization in np.unique.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10609">#10609</a>: BUG: infinite recursion in str of 0d subclasses</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10610">#10610</a>: BUG: Align type definition with generated lapack</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10612">#10612</a>: BUG/ENH: Improve output for structured non-void types</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10622">#10622</a>: BUG: deallocate recursive closure in arrayprint.py (1.14 backport)</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10624">#10624</a>: BUG: Correctly identify comma separated dtype strings</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10629">#10629</a>: BUG: deallocate recursive closure in arrayprint.py (backport…</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/10630">#10630</a>: REL: Prepare for 1.14.1 release.</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-14-0-release-notes">
<h2>NumPy 1.14.0 Release Notes<a class="headerlink" href="#numpy-1-14-0-release-notes" title="Permalink to this headline">¶</a></h2>
<p>Numpy 1.14.0 is the result of seven months of work and contains a large number
of bug fixes and new features, along with several changes with potential
compatibility issues. The major change that users will notice are the
stylistic changes in the way numpy arrays and scalars are printed, a change
that will affect doctests. See below for details on how to preserve the
old style printing when needed.</p>
<p>A major decision affecting future development concerns the schedule for
dropping Python 2.7 support in the runup to 2020. The decision has been made to
support 2.7 for all releases made in 2018, with the last release being
designated a long term release with support for bug fixes extending through
2019. In 2019 support for 2.7 will be dropped in all new releases. More details
can be found in <a class="reference external" href="http://www.numpy.org/neps/nep-0014-dropping-python2.7-proposal.html">NEP 12</a>.</p>
<p>This release supports Python 2.7 and 3.4 - 3.6.</p>
<div class="section" id="id65">
<h3>Highlights<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <em class="xref py py-obj">np.einsum</em> function uses BLAS when possible</li>
<li><code class="docutils literal notranslate"><span class="pre">genfromtxt</span></code>, <code class="docutils literal notranslate"><span class="pre">loadtxt</span></code>, <code class="docutils literal notranslate"><span class="pre">fromregex</span></code> and <code class="docutils literal notranslate"><span class="pre">savetxt</span></code> can now handle
files with arbitrary Python supported encoding.</li>
<li>Major improvements to printing of NumPy arrays and scalars.</li>
</ul>
</div>
<div class="section" id="id66">
<h3>New functions<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">parametrize</span></code>: decorator added to numpy.testing</li>
<li><code class="docutils literal notranslate"><span class="pre">chebinterpolate</span></code>: Interpolate function at Chebyshev points.</li>
<li><code class="docutils literal notranslate"><span class="pre">format_float_positional</span></code> and <code class="docutils literal notranslate"><span class="pre">format_float_scientific</span></code> : format
floating-point scalars unambiguously with control of rounding and padding.</li>
<li><code class="docutils literal notranslate"><span class="pre">PyArray_ResolveWritebackIfCopy</span></code> and <code class="docutils literal notranslate"><span class="pre">PyArray_SetWritebackIfCopyBase</span></code>,
new C-API functions useful in achieving PyPy compatibity.</li>
</ul>
</div>
<div class="section" id="id67">
<h3>Deprecations<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Using <code class="docutils literal notranslate"><span class="pre">np.bool_</span></code> objects in place of integers is deprecated.  Previously
<code class="docutils literal notranslate"><span class="pre">operator.index(np.bool_)</span></code> was legal and allowed constructs such as
<code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3][np.True_]</span></code>. That was misleading, as it behaved differently from
<code class="docutils literal notranslate"><span class="pre">np.array([1,</span> <span class="pre">2,</span> <span class="pre">3])[np.True_]</span></code>.</li>
<li>Truth testing of an empty array is deprecated. To check if an array is not
empty, use <code class="docutils literal notranslate"><span class="pre">array.size</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>.</li>
<li>Calling <code class="docutils literal notranslate"><span class="pre">np.bincount</span></code> with <code class="docutils literal notranslate"><span class="pre">minlength=None</span></code> is deprecated.
<code class="docutils literal notranslate"><span class="pre">minlength=0</span></code> should be used instead.</li>
<li>Calling <code class="docutils literal notranslate"><span class="pre">np.fromstring</span></code> with the default value of the <code class="docutils literal notranslate"><span class="pre">sep</span></code> argument is
deprecated.  When that argument is not provided, a broken version of
<code class="docutils literal notranslate"><span class="pre">np.frombuffer</span></code> is used that silently accepts unicode strings and – after
encoding them as either utf-8 (python 3) or the default encoding
(python 2) – treats them as binary data. If reading binary data is
desired, <code class="docutils literal notranslate"><span class="pre">np.frombuffer</span></code> should be used directly.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">style</span></code> option of array2string is deprecated in non-legacy printing mode.</li>
<li><code class="docutils literal notranslate"><span class="pre">PyArray_SetUpdateIfCopyBase</span></code> has been deprecated. For NumPy versions &gt;= 1.14
use <code class="docutils literal notranslate"><span class="pre">PyArray_SetWritebackIfCopyBase</span></code> instead, see <em class="xref py py-obj">C API changes</em> below for
more details.</li>
<li>The use of <code class="docutils literal notranslate"><span class="pre">UPDATEIFCOPY</span></code> arrays is deprecated, see  <em class="xref py py-obj">C API changes</em> below
for details.  We will not be dropping support for those arrays, but they are
not compatible with PyPy.</li>
</ul>
</div>
<div class="section" id="id68">
<h3>Future Changes<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">np.issubdtype</span></code> will stop downcasting dtype-like arguments.
It might be expected that <code class="docutils literal notranslate"><span class="pre">issubdtype(np.float32,</span> <span class="pre">'float64')</span></code> and
<code class="docutils literal notranslate"><span class="pre">issubdtype(np.float32,</span> <span class="pre">np.float64)</span></code> mean the same thing - however, there
was an undocumented special case that translated the former into
<code class="docutils literal notranslate"><span class="pre">issubdtype(np.float32,</span> <span class="pre">np.floating)</span></code>, giving the surprising result of True.</p>
<p>This translation now gives a warning that explains what translation is
occurring.  In the future, the translation will be disabled, and the first
example will be made equivalent to the second.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">np.linalg.lstsq</span></code> default for <code class="docutils literal notranslate"><span class="pre">rcond</span></code> will be changed.  The <code class="docutils literal notranslate"><span class="pre">rcond</span></code>
parameter to <code class="docutils literal notranslate"><span class="pre">np.linalg.lstsq</span></code> will change its default to machine precision
times the largest of the input array dimensions. A FutureWarning is issued
when <code class="docutils literal notranslate"><span class="pre">rcond</span></code> is not passed explicitly.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">a.flat.__array__()</span></code> will return a writeable copy of <code class="docutils literal notranslate"><span class="pre">a</span></code> when <code class="docutils literal notranslate"><span class="pre">a</span></code> is
non-contiguous.  Previously it returned an UPDATEIFCOPY array when <code class="docutils literal notranslate"><span class="pre">a</span></code> was
writeable. Currently it returns a non-writeable copy. See gh-7054 for a
discussion of the issue.</p>
</li>
<li><p class="first">Unstructured void array’s <code class="docutils literal notranslate"><span class="pre">.item</span></code> method will return a bytes object. In the
future, calling <code class="docutils literal notranslate"><span class="pre">.item()</span></code> on arrays or scalars of <code class="docutils literal notranslate"><span class="pre">np.void</span></code> datatype will
return a <code class="docutils literal notranslate"><span class="pre">bytes</span></code> object instead of a buffer or int array, the same as
returned by <code class="docutils literal notranslate"><span class="pre">bytes(void_scalar)</span></code>. This may affect code which assumed the
return value was mutable, which will no longer be the case. A
<code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code> is now issued when this would occur.</p>
</li>
</ul>
</div>
<div class="section" id="id69">
<h3>Compatibility notes<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h3>
<div class="section" id="the-mask-of-a-masked-array-view-is-also-a-view-rather-than-a-copy">
<h4>The mask of a masked array view is also a view rather than a copy<a class="headerlink" href="#the-mask-of-a-masked-array-view-is-also-a-view-rather-than-a-copy" title="Permalink to this headline">¶</a></h4>
<p>There was a FutureWarning about this change in NumPy 1.11.x. In short, it is
now the case that, when changing a view of a masked array, changes to the mask
are propagated to the original. That was not previously the case. This change
affects slices in particular. Note that this does not yet work properly if the
mask of the original array is <code class="docutils literal notranslate"><span class="pre">nomask</span></code> and the mask of the view is changed.
See gh-5580 for an extended discussion. The original behavior of having a copy
of the mask can be obtained by calling the <code class="docutils literal notranslate"><span class="pre">unshare_mask</span></code> method of the view.</p>
</div>
<div class="section" id="np-ma-masked-is-no-longer-writeable">
<h4><code class="docutils literal notranslate"><span class="pre">np.ma.masked</span></code> is no longer writeable<a class="headerlink" href="#np-ma-masked-is-no-longer-writeable" title="Permalink to this headline">¶</a></h4>
<p>Attempts to mutate the <code class="docutils literal notranslate"><span class="pre">masked</span></code> constant now error, as the underlying arrays
are marked readonly. In the past, it was possible to get away with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># emulating a function that sometimes returns np.ma.masked</span>
<span class="n">val</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
<span class="n">var_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<span class="n">val_arr</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># now errors, previously changed np.ma.masked.data</span>
</pre></div>
</div>
</div>
<div class="section" id="np-ma-functions-producing-fill-value-s-have-changed">
<h4><code class="docutils literal notranslate"><span class="pre">np.ma</span></code> functions producing <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> s have changed<a class="headerlink" href="#np-ma-functions-producing-fill-value-s-have-changed" title="Permalink to this headline">¶</a></h4>
<p>Previously, <code class="docutils literal notranslate"><span class="pre">np.ma.default_fill_value</span></code> would return a 0d array, but
<code class="docutils literal notranslate"><span class="pre">np.ma.minimum_fill_value</span></code> and <code class="docutils literal notranslate"><span class="pre">np.ma.maximum_fill_value</span></code> would return a
tuple of the fields. Instead, all three methods return a structured <code class="docutils literal notranslate"><span class="pre">np.void</span></code>
object, which is what you would already find in the <code class="docutils literal notranslate"><span class="pre">.fill_value</span></code> attribute.</p>
<p>Additionally, the dtype guessing now matches that of <code class="docutils literal notranslate"><span class="pre">np.array</span></code> - so when
passing a python scalar <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">maximum_fill_value(x)</span></code> is always the same as
<code class="docutils literal notranslate"><span class="pre">maximum_fill_value(np.array(x))</span></code>. Previously <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">long(1)</span></code> on Python 2
violated this assumption.</p>
</div>
<div class="section" id="a-flat-array-returns-non-writeable-arrays-when-a-is-non-contiguous">
<h4><code class="docutils literal notranslate"><span class="pre">a.flat.__array__()</span></code> returns non-writeable arrays when <code class="docutils literal notranslate"><span class="pre">a</span></code> is non-contiguous<a class="headerlink" href="#a-flat-array-returns-non-writeable-arrays-when-a-is-non-contiguous" title="Permalink to this headline">¶</a></h4>
<p>The intent is that the UPDATEIFCOPY array previously returned when <code class="docutils literal notranslate"><span class="pre">a</span></code> was
non-contiguous will be replaced by a writeable copy in the future. This
temporary measure is aimed to notify folks who expect the underlying array be
modified in this situation that that will no longer be the case. The most
likely places for this to be noticed is when expressions of the form
<code class="docutils literal notranslate"><span class="pre">np.asarray(a.flat)</span></code> are used, or when <code class="docutils literal notranslate"><span class="pre">a.flat</span></code> is passed as the out
parameter to a ufunc.</p>
</div>
<div class="section" id="np-tensordot-now-returns-zero-array-when-contracting-over-0-length-dimension">
<h4><code class="docutils literal notranslate"><span class="pre">np.tensordot</span></code> now returns zero array when contracting over 0-length dimension<a class="headerlink" href="#np-tensordot-now-returns-zero-array-when-contracting-over-0-length-dimension" title="Permalink to this headline">¶</a></h4>
<p>Previously <code class="docutils literal notranslate"><span class="pre">np.tensordot</span></code> raised a ValueError when contracting over 0-length
dimension. Now it returns a zero array, which is consistent with the behaviour
of <code class="docutils literal notranslate"><span class="pre">np.dot</span></code> and <code class="docutils literal notranslate"><span class="pre">np.einsum</span></code>.</p>
</div>
<div class="section" id="numpy-testing-reorganized">
<h4><code class="docutils literal notranslate"><span class="pre">numpy.testing</span></code> reorganized<a class="headerlink" href="#numpy-testing-reorganized" title="Permalink to this headline">¶</a></h4>
<p>This is not expected to cause problems, but possibly something has been left
out. If you experience an unexpected import problem using <code class="docutils literal notranslate"><span class="pre">numpy.testing</span></code>
let us know.</p>
</div>
<div class="section" id="np-asfarray-no-longer-accepts-non-dtypes-through-the-dtype-argument">
<h4><code class="docutils literal notranslate"><span class="pre">np.asfarray</span></code> no longer accepts non-dtypes through the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> argument<a class="headerlink" href="#np-asfarray-no-longer-accepts-non-dtypes-through-the-dtype-argument" title="Permalink to this headline">¶</a></h4>
<p>This previously would accept <code class="docutils literal notranslate"><span class="pre">dtype=some_array</span></code>, with the implied semantics
of <code class="docutils literal notranslate"><span class="pre">dtype=some_array.dtype</span></code>. This was undocumented, unique across the numpy
functions, and if used would likely correspond to a typo.</p>
</div>
<div class="section" id="d-np-linalg-norm-preserves-float-input-types-even-for-arbitrary-orders">
<h4>1D <code class="docutils literal notranslate"><span class="pre">np.linalg.norm</span></code> preserves float input types, even for arbitrary orders<a class="headerlink" href="#d-np-linalg-norm-preserves-float-input-types-even-for-arbitrary-orders" title="Permalink to this headline">¶</a></h4>
<p>Previously, this would promote to <code class="docutils literal notranslate"><span class="pre">float64</span></code> when arbitrary orders were
passed, despite not doing so under the simple cases:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f32</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">f32</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">dtype</span>
<span class="go">dtype(&#39;float32&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">f32</span><span class="p">,</span> <span class="mf">2.0001</span><span class="p">,</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">dtype</span>
<span class="go">dtype(&#39;float64&#39;)  # numpy 1.13</span>
<span class="go">dtype(&#39;float32&#39;)  # numpy 1.14</span>
</pre></div>
</div>
<p>This change affects only <code class="docutils literal notranslate"><span class="pre">float32</span></code> and <code class="docutils literal notranslate"><span class="pre">float16</span></code> arrays.</p>
</div>
<div class="section" id="count-nonzero-arr-axis-now-counts-over-no-axes-not-all-axes">
<h4><code class="docutils literal notranslate"><span class="pre">count_nonzero(arr,</span> <span class="pre">axis=())</span></code> now counts over no axes, not all axes<a class="headerlink" href="#count-nonzero-arr-axis-now-counts-over-no-axes-not-all-axes" title="Permalink to this headline">¶</a></h4>
<p>Elsewhere, <code class="docutils literal notranslate"><span class="pre">axis==()</span></code> is always understood as “no axes”, but
<a class="reference internal" href="reference/generated/numpy.count_nonzero.html#numpy.count_nonzero" title="numpy.count_nonzero"><code class="xref py py-obj docutils literal notranslate"><span class="pre">count_nonzero</span></code></a> had a special case to treat this as “all axes”. This was
inconsistent and surprising. The correct way to count over all axes has always
been to pass <code class="docutils literal notranslate"><span class="pre">axis</span> <span class="pre">==</span> <span class="pre">None</span></code>.</p>
</div>
<div class="section" id="init-py-files-added-to-test-directories">
<h4><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> files added to test directories<a class="headerlink" href="#init-py-files-added-to-test-directories" title="Permalink to this headline">¶</a></h4>
<p>This is for pytest compatibility in the case of duplicate test file names in
the different directories. As a result, <code class="docutils literal notranslate"><span class="pre">run_module_suite</span></code> no longer works,
i.e., <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">&lt;path-to-test-file&gt;</span></code> results in an error.</p>
</div>
<div class="section" id="astype-bool-on-unstructured-void-arrays-now-calls-bool-on-each-element">
<h4><code class="docutils literal notranslate"><span class="pre">.astype(bool)</span></code> on unstructured void arrays now calls <code class="docutils literal notranslate"><span class="pre">bool</span></code> on each element<a class="headerlink" href="#astype-bool-on-unstructured-void-arrays-now-calls-bool-on-each-element" title="Permalink to this headline">¶</a></h4>
<p>On Python 2, <code class="docutils literal notranslate"><span class="pre">void_array.astype(bool)</span></code> would always return an array of
<code class="docutils literal notranslate"><span class="pre">True</span></code>, unless the dtype is <code class="docutils literal notranslate"><span class="pre">V0</span></code>. On Python 3, this operation would usually
crash. Going forwards, <em class="xref py py-obj">astype</em> matches the behavior of <code class="docutils literal notranslate"><span class="pre">bool(np.void)</span></code>,
considering a buffer of all zeros as false, and anything else as true.
Checks for <code class="docutils literal notranslate"><span class="pre">V0</span></code> can still be done with <code class="docutils literal notranslate"><span class="pre">arr.dtype.itemsize</span> <span class="pre">==</span> <span class="pre">0</span></code>.</p>
</div>
<div class="section" id="maskedarray-squeeze-never-returns-np-ma-masked">
<h4><code class="docutils literal notranslate"><span class="pre">MaskedArray.squeeze</span></code> never returns <code class="docutils literal notranslate"><span class="pre">np.ma.masked</span></code><a class="headerlink" href="#maskedarray-squeeze-never-returns-np-ma-masked" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">np.squeeze</span></code> is documented as returning a view, but the masked variant would
sometimes return <code class="docutils literal notranslate"><span class="pre">masked</span></code>, which is not a view. This has been fixed, so that
the result is always a view on the original masked array.
This breaks any code that used <code class="docutils literal notranslate"><span class="pre">masked_arr.squeeze()</span> <span class="pre">is</span> <span class="pre">np.ma.masked</span></code>, but
fixes code that writes to the result of <em class="xref py py-obj">squeeze()</em>.</p>
</div>
<div class="section" id="renamed-first-parameter-of-can-cast-from-from-to-from">
<h4>Renamed first parameter of <code class="docutils literal notranslate"><span class="pre">can_cast</span></code> from <code class="docutils literal notranslate"><span class="pre">from</span></code> to <code class="docutils literal notranslate"><span class="pre">from_</span></code><a class="headerlink" href="#renamed-first-parameter-of-can-cast-from-from-to-from" title="Permalink to this headline">¶</a></h4>
<p>The previous parameter name <code class="docutils literal notranslate"><span class="pre">from</span></code> is a reserved keyword in Python, which made
it difficult to pass the argument by name. This has been fixed by renaming
the parameter to <code class="docutils literal notranslate"><span class="pre">from_</span></code>.</p>
</div>
<div class="section" id="isnat-raises-typeerror-when-passed-wrong-type">
<h4><code class="docutils literal notranslate"><span class="pre">isnat</span></code> raises <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> when passed wrong type<a class="headerlink" href="#isnat-raises-typeerror-when-passed-wrong-type" title="Permalink to this headline">¶</a></h4>
<p>The ufunc <code class="docutils literal notranslate"><span class="pre">isnat</span></code> used to raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> when it was not passed
variables of type <code class="docutils literal notranslate"><span class="pre">datetime</span></code> or <code class="docutils literal notranslate"><span class="pre">timedelta</span></code>. This has been changed to
raising a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.</p>
</div>
<div class="section" id="dtype-getitem-raises-typeerror-when-passed-wrong-type">
<h4><code class="docutils literal notranslate"><span class="pre">dtype.__getitem__</span></code> raises <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> when passed wrong type<a class="headerlink" href="#dtype-getitem-raises-typeerror-when-passed-wrong-type" title="Permalink to this headline">¶</a></h4>
<p>When indexed with a float, the dtype object used to raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>.</p>
</div>
<div class="section" id="user-defined-types-now-need-to-implement-str-and-repr">
<h4>User-defined types now need to implement <code class="docutils literal notranslate"><span class="pre">__str__</span></code> and <code class="docutils literal notranslate"><span class="pre">__repr__</span></code><a class="headerlink" href="#user-defined-types-now-need-to-implement-str-and-repr" title="Permalink to this headline">¶</a></h4>
<p>Previously, user-defined types could fall back to a default implementation of
<code class="docutils literal notranslate"><span class="pre">__str__</span></code> and <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> implemented in numpy, but this has now been
removed. Now user-defined types will fall back to the python default
<code class="docutils literal notranslate"><span class="pre">object.__str__</span></code> and <code class="docutils literal notranslate"><span class="pre">object.__repr__</span></code>.</p>
</div>
<div class="section" id="many-changes-to-array-printing-disableable-with-the-new-legacy-printing-mode">
<h4>Many changes to array printing, disableable with the new “legacy” printing mode<a class="headerlink" href="#many-changes-to-array-printing-disableable-with-the-new-legacy-printing-mode" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">str</span></code> and <code class="docutils literal notranslate"><span class="pre">repr</span></code> of ndarrays and numpy scalars have been changed in
a variety of ways. These changes are likely to break downstream user’s
doctests.</p>
<p>These new behaviors can be disabled to mostly reproduce numpy 1.13 behavior by
enabling the new 1.13 “legacy” printing mode. This is enabled by calling
<code class="docutils literal notranslate"><span class="pre">np.set_printoptions(legacy=&quot;1.13&quot;)</span></code>, or using the new <code class="docutils literal notranslate"><span class="pre">legacy</span></code> argument to
<code class="docutils literal notranslate"><span class="pre">np.array2string</span></code>, as <code class="docutils literal notranslate"><span class="pre">np.array2string(arr,</span> <span class="pre">legacy='1.13')</span></code>.</p>
<p>In summary, the major changes are:</p>
<ul class="simple">
<li>For floating-point types:<ul>
<li>The <code class="docutils literal notranslate"><span class="pre">repr</span></code> of float arrays often omits a space previously printed
in the sign position. See the new <code class="docutils literal notranslate"><span class="pre">sign</span></code> option to <code class="docutils literal notranslate"><span class="pre">np.set_printoptions</span></code>.</li>
<li>Floating-point arrays and scalars use a new algorithm for decimal
representations, giving the shortest unique representation. This will
usually shorten <code class="docutils literal notranslate"><span class="pre">float16</span></code> fractional output, and sometimes <code class="docutils literal notranslate"><span class="pre">float32</span></code> and
<code class="docutils literal notranslate"><span class="pre">float128</span></code> output. <code class="docutils literal notranslate"><span class="pre">float64</span></code> should be unaffected.  See the new
<code class="docutils literal notranslate"><span class="pre">floatmode</span></code> option to <code class="docutils literal notranslate"><span class="pre">np.set_printoptions</span></code>.</li>
<li>Float arrays printed in scientific notation no longer use fixed-precision,
and now instead show the shortest unique representation.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">str</span></code> of floating-point scalars is no longer truncated in python2.</li>
</ul>
</li>
<li>For other data types:<ul>
<li>Non-finite complex scalars print like <code class="docutils literal notranslate"><span class="pre">nanj</span></code> instead of <code class="docutils literal notranslate"><span class="pre">nan*j</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">NaT</span></code> values in datetime arrays are now properly aligned.</li>
<li>Arrays and scalars of <code class="docutils literal notranslate"><span class="pre">np.void</span></code> datatype are now printed using hex
notation.</li>
</ul>
</li>
<li>For line-wrapping:<ul>
<li>The “dtype” part of ndarray reprs will now be printed on the next line
if there isn’t space on the last line of array output.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">linewidth</span></code> format option is now always respected.
The <em class="xref py py-obj">repr</em> or <a class="reference external" href="https://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a> of an array will never exceed this, unless a single
element is too wide.</li>
<li>The last line of an array string will never have more elements than earlier
lines.</li>
<li>An extra space is no longer inserted on the first line if the elements are
too wide.</li>
</ul>
</li>
<li>For summarization (the use of <code class="docutils literal notranslate"><span class="pre">...</span></code> to shorten long arrays):<ul>
<li>A trailing comma is no longer inserted for <code class="docutils literal notranslate"><span class="pre">str</span></code>.
Previously, <code class="docutils literal notranslate"><span class="pre">str(np.arange(1001))</span></code> gave
<code class="docutils literal notranslate"><span class="pre">'[</span>&#160;&#160; <span class="pre">0</span>&#160;&#160;&#160; <span class="pre">1</span>&#160;&#160;&#160; <span class="pre">2</span> <span class="pre">...,</span>&#160; <span class="pre">998</span>&#160; <span class="pre">999</span> <span class="pre">1000]'</span></code>, which has an extra comma.</li>
<li>For arrays of 2-D and beyond, when <code class="docutils literal notranslate"><span class="pre">...</span></code> is printed on its own line in
order to summarize any but the last axis, newlines are now appended to that
line to match its leading newlines and a trailing space character is
removed.</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">MaskedArray</span></code> arrays now separate printed elements with commas, always
print the dtype, and correctly wrap the elements of long arrays to multiple
lines. If there is more than 1 dimension, the array attributes are now
printed in a new “left-justified” printing style.</li>
<li><code class="docutils literal notranslate"><span class="pre">recarray</span></code> arrays no longer print a trailing space before their dtype, and
wrap to the right number of columns.</li>
<li>0d arrays no longer have their own idiosyncratic implementations of <code class="docutils literal notranslate"><span class="pre">str</span></code>
and <code class="docutils literal notranslate"><span class="pre">repr</span></code>. The <code class="docutils literal notranslate"><span class="pre">style</span></code> argument to <code class="docutils literal notranslate"><span class="pre">np.array2string</span></code> is deprecated.</li>
<li>Arrays of <code class="docutils literal notranslate"><span class="pre">bool</span></code> datatype will omit the datatype in the <code class="docutils literal notranslate"><span class="pre">repr</span></code>.</li>
<li>User-defined <code class="docutils literal notranslate"><span class="pre">dtypes</span></code> (subclasses of <code class="docutils literal notranslate"><span class="pre">np.generic</span></code>) now need to
implement <code class="docutils literal notranslate"><span class="pre">__str__</span></code> and <code class="docutils literal notranslate"><span class="pre">__repr__</span></code>.</li>
</ul>
<p>Some of these changes are described in more detail below. If you need to retain
the previous behavior for doctests or other reasons, you may want to do
something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># FIXME: We need the str/repr formatting used in Numpy &lt; 1.14.</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">legacy</span><span class="o">=</span><span class="s1">&#39;1.13&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id70">
<h3>C API changes<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h3>
<div class="section" id="pypy-compatible-alternative-to-updateifcopy-arrays">
<h4>PyPy compatible alternative to <code class="docutils literal notranslate"><span class="pre">UPDATEIFCOPY</span></code> arrays<a class="headerlink" href="#pypy-compatible-alternative-to-updateifcopy-arrays" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">UPDATEIFCOPY</span></code> arrays are contiguous copies of existing arrays, possibly with
different dimensions, whose contents are copied back to the original array when
their refcount goes to zero and they are deallocated. Because PyPy does not use
refcounts, they do not function correctly with PyPy. NumPy is in the process of
eliminating their use internally and two new C-API functions,</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PyArray_SetWritebackIfCopyBase</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PyArray_ResolveWritebackIfCopy</span></code>,</li>
</ul>
<p>have been added together with a complimentary flag,
<code class="docutils literal notranslate"><span class="pre">NPY_ARRAY_WRITEBACKIFCOPY</span></code>. Using the new functionality also requires that
some flags be changed when new arrays are created, to wit:
<code class="docutils literal notranslate"><span class="pre">NPY_ARRAY_INOUT_ARRAY</span></code> should be replaced by <code class="docutils literal notranslate"><span class="pre">NPY_ARRAY_INOUT_ARRAY2</span></code> and
<code class="docutils literal notranslate"><span class="pre">NPY_ARRAY_INOUT_FARRAY</span></code> should be replaced by <code class="docutils literal notranslate"><span class="pre">NPY_ARRAY_INOUT_FARRAY2</span></code>.
Arrays created with these new flags will then have the <code class="docutils literal notranslate"><span class="pre">WRITEBACKIFCOPY</span></code>
semantics.</p>
<p>If PyPy compatibility is not a concern, these new functions can be ignored,
although there will be a <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code>. If you do wish to pursue PyPy
compatibility, more information on these functions and their use may be found
in the <a class="reference external" href="https://github.com/numpy/numpy/blob/master/doc/source/reference/c-api.array.rst">c-api</a> documentation and the example in <a class="reference external" href="https://github.com/numpy/numpy/blob/master/doc/source/user/c-info.how-to-extend.rst">how-to-extend</a>.</p>
</div>
</div>
<div class="section" id="id71">
<h3>New Features<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h3>
<div class="section" id="encoding-argument-for-text-io-functions">
<h4>Encoding argument for text IO functions<a class="headerlink" href="#encoding-argument-for-text-io-functions" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">genfromtxt</span></code>, <code class="docutils literal notranslate"><span class="pre">loadtxt</span></code>, <code class="docutils literal notranslate"><span class="pre">fromregex</span></code> and <code class="docutils literal notranslate"><span class="pre">savetxt</span></code> can now handle files
with arbitrary encoding supported by Python via the encoding argument.
For backward compatibility the argument defaults to the special <code class="docutils literal notranslate"><span class="pre">bytes</span></code> value
which continues to treat text as raw byte values and continues to pass latin1
encoded bytes to custom converters.
Using any other value (including <code class="docutils literal notranslate"><span class="pre">None</span></code> for system default) will switch the
functions to real text IO so one receives unicode strings instead of bytes in
the resulting arrays.</p>
</div>
<div class="section" id="external-nose-plugins-are-usable-by-numpy-testing-tester">
<h4>External <code class="docutils literal notranslate"><span class="pre">nose</span></code> plugins are usable by <code class="docutils literal notranslate"><span class="pre">numpy.testing.Tester</span></code><a class="headerlink" href="#external-nose-plugins-are-usable-by-numpy-testing-tester" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">numpy.testing.Tester</span></code> is now aware of <code class="docutils literal notranslate"><span class="pre">nose</span></code> plugins that are outside the
<code class="docutils literal notranslate"><span class="pre">nose</span></code> built-in ones.  This allows using, for example, <code class="docutils literal notranslate"><span class="pre">nose-timer</span></code> like
so:  <code class="docutils literal notranslate"><span class="pre">np.test(extra_argv=['--with-timer',</span> <span class="pre">'--timer-top-n',</span> <span class="pre">'20'])</span></code> to
obtain the runtime of the 20 slowest tests.  An extra keyword <code class="docutils literal notranslate"><span class="pre">timer</span></code> was
also added to <code class="docutils literal notranslate"><span class="pre">Tester.test</span></code>, so <code class="docutils literal notranslate"><span class="pre">np.test(timer=20)</span></code> will also report the 20
slowest tests.</p>
</div>
<div class="section" id="parametrize-decorator-added-to-numpy-testing">
<h4><code class="docutils literal notranslate"><span class="pre">parametrize</span></code> decorator added to <code class="docutils literal notranslate"><span class="pre">numpy.testing</span></code><a class="headerlink" href="#parametrize-decorator-added-to-numpy-testing" title="Permalink to this headline">¶</a></h4>
<p>A basic <code class="docutils literal notranslate"><span class="pre">parametrize</span></code> decorator is now available in <code class="docutils literal notranslate"><span class="pre">numpy.testing</span></code>. It is
intended to allow rewriting yield based tests that have been deprecated in
pytest so as to facilitate the transition to pytest in the future. The nose
testing framework has not been supported for several years and looks like
abandonware.</p>
<p>The new <code class="docutils literal notranslate"><span class="pre">parametrize</span></code> decorator does not have the full functionality of the
one in pytest. It doesn’t work for classes, doesn’t support nesting, and does
not substitute variable names. Even so, it should be adequate to rewrite the
NumPy tests.</p>
</div>
<div class="section" id="chebinterpolate-function-added-to-numpy-polynomial-chebyshev">
<h4><code class="docutils literal notranslate"><span class="pre">chebinterpolate</span></code> function added to <code class="docutils literal notranslate"><span class="pre">numpy.polynomial.chebyshev</span></code><a class="headerlink" href="#chebinterpolate-function-added-to-numpy-polynomial-chebyshev" title="Permalink to this headline">¶</a></h4>
<p>The new <code class="docutils literal notranslate"><span class="pre">chebinterpolate</span></code> function interpolates a given function at the
Chebyshev points of the first kind. A new <code class="docutils literal notranslate"><span class="pre">Chebyshev.interpolate</span></code> class
method adds support for interpolation over arbitrary intervals using the scaled
and shifted Chebyshev points of the first kind.</p>
</div>
<div class="section" id="support-for-reading-lzma-compressed-text-files-in-python-3">
<h4>Support for reading lzma compressed text files in Python 3<a class="headerlink" href="#support-for-reading-lzma-compressed-text-files-in-python-3" title="Permalink to this headline">¶</a></h4>
<p>With Python versions containing the <code class="docutils literal notranslate"><span class="pre">lzma</span></code> module the text IO functions can
now transparently read from files with <code class="docutils literal notranslate"><span class="pre">xz</span></code> or <code class="docutils literal notranslate"><span class="pre">lzma</span></code> extension.</p>
</div>
<div class="section" id="sign-option-added-to-np-setprintoptions-and-np-array2string">
<h4><code class="docutils literal notranslate"><span class="pre">sign</span></code> option added to <code class="docutils literal notranslate"><span class="pre">np.setprintoptions</span></code> and <code class="docutils literal notranslate"><span class="pre">np.array2string</span></code><a class="headerlink" href="#sign-option-added-to-np-setprintoptions-and-np-array2string" title="Permalink to this headline">¶</a></h4>
<p>This option controls printing of the sign of floating-point types, and may be
one of the characters ‘-‘, ‘+’ or ‘ ‘. With ‘+’ numpy always prints the sign of
positive values, with ‘ ‘ it always prints a space (whitespace character) in
the sign position of positive values, and with ‘-‘ it will omit the sign
character for positive values. The new default is ‘-‘.</p>
<p>This new default changes the float output relative to numpy 1.13. The old
behavior can be obtained in 1.13 “legacy” printing mode, see compatibility
notes above.</p>
</div>
<div class="section" id="hermitian-option-added-to-np-linalg-matrix-rank">
<h4><code class="docutils literal notranslate"><span class="pre">hermitian</span></code> option added to``np.linalg.matrix_rank``<a class="headerlink" href="#hermitian-option-added-to-np-linalg-matrix-rank" title="Permalink to this headline">¶</a></h4>
<p>The new <code class="docutils literal notranslate"><span class="pre">hermitian</span></code> option allows choosing between standard SVD based matrix
rank calculation and the more efficient eigenvalue based method for
symmetric/hermitian matrices.</p>
</div>
<div class="section" id="threshold-and-edgeitems-options-added-to-np-array2string">
<h4><code class="docutils literal notranslate"><span class="pre">threshold</span></code> and <code class="docutils literal notranslate"><span class="pre">edgeitems</span></code> options added to <code class="docutils literal notranslate"><span class="pre">np.array2string</span></code><a class="headerlink" href="#threshold-and-edgeitems-options-added-to-np-array2string" title="Permalink to this headline">¶</a></h4>
<p>These options could previously be controlled using <code class="docutils literal notranslate"><span class="pre">np.set_printoptions</span></code>, but
now can be changed on a per-call basis as arguments to <code class="docutils literal notranslate"><span class="pre">np.array2string</span></code>.</p>
</div>
<div class="section" id="concatenate-and-stack-gained-an-out-argument">
<h4><code class="docutils literal notranslate"><span class="pre">concatenate</span></code> and <code class="docutils literal notranslate"><span class="pre">stack</span></code> gained an <code class="docutils literal notranslate"><span class="pre">out</span></code> argument<a class="headerlink" href="#concatenate-and-stack-gained-an-out-argument" title="Permalink to this headline">¶</a></h4>
<p>A preallocated buffer of the desired dtype can now be used for the output of
these functions.</p>
</div>
<div class="section" id="support-for-pgi-flang-compiler-on-windows">
<h4>Support for PGI flang compiler on Windows<a class="headerlink" href="#support-for-pgi-flang-compiler-on-windows" title="Permalink to this headline">¶</a></h4>
<p>The PGI flang compiler is a Fortran front end for LLVM released by NVIDIA under
the Apache 2 license. It can be invoked by</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">config</span> <span class="o">--</span><span class="n">compiler</span><span class="o">=</span><span class="n">clang</span> <span class="o">--</span><span class="n">fcompiler</span><span class="o">=</span><span class="n">flang</span> <span class="n">install</span>
</pre></div>
</div>
<p>There is little experience with this new compiler, so any feedback from people
using it will be appreciated.</p>
</div>
</div>
<div class="section" id="id72">
<h3>Improvements<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h3>
<div class="section" id="numerator-degrees-of-freedom-in-random-noncentral-f-need-only-be-positive">
<h4>Numerator degrees of freedom in <code class="docutils literal notranslate"><span class="pre">random.noncentral_f</span></code> need only be positive.<a class="headerlink" href="#numerator-degrees-of-freedom-in-random-noncentral-f-need-only-be-positive" title="Permalink to this headline">¶</a></h4>
<p>Prior to NumPy 1.14.0, the numerator degrees of freedom needed to be &gt; 1, but
the distribution is valid for values &gt; 0, which is the new requirement.</p>
</div>
<div class="section" id="the-gil-is-released-for-all-np-einsum-variations">
<h4>The GIL is released for all <code class="docutils literal notranslate"><span class="pre">np.einsum</span></code> variations<a class="headerlink" href="#the-gil-is-released-for-all-np-einsum-variations" title="Permalink to this headline">¶</a></h4>
<p>Some specific loop structures which have an accelerated loop version
did not release the GIL prior to NumPy 1.14.0.  This oversight has been
fixed.</p>
</div>
<div class="section" id="the-np-einsum-function-will-use-blas-when-possible-and-optimize-by-default">
<h4>The <em class="xref py py-obj">np.einsum</em> function will use BLAS when possible and optimize by default<a class="headerlink" href="#the-np-einsum-function-will-use-blas-when-possible-and-optimize-by-default" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">np.einsum</span></code> function will now call <code class="docutils literal notranslate"><span class="pre">np.tensordot</span></code> when appropriate.
Because <code class="docutils literal notranslate"><span class="pre">np.tensordot</span></code> uses BLAS when possible, that will speed up execution.
By default, <code class="docutils literal notranslate"><span class="pre">np.einsum</span></code> will also attempt optimization as the overhead is
small relative to the potential improvement in speed.</p>
</div>
<div class="section" id="f2py-now-handles-arrays-of-dimension-0">
<h4><code class="docutils literal notranslate"><span class="pre">f2py</span></code> now handles arrays of dimension 0<a class="headerlink" href="#f2py-now-handles-arrays-of-dimension-0" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">f2py</span></code> now allows for the allocation of arrays of dimension 0. This allows
for more consistent handling of corner cases downstream.</p>
</div>
<div class="section" id="numpy-distutils-supports-using-msvc-and-mingw64-gfortran-together">
<h4><code class="docutils literal notranslate"><span class="pre">numpy.distutils</span></code> supports using MSVC and mingw64-gfortran together<a class="headerlink" href="#numpy-distutils-supports-using-msvc-and-mingw64-gfortran-together" title="Permalink to this headline">¶</a></h4>
<p>Numpy distutils now supports using Mingw64 gfortran and MSVC compilers
together. This enables the production of Python extension modules on Windows
containing Fortran code while retaining compatibility with the
binaries distributed by Python.org. Not all use cases are supported,
but most common ways to wrap Fortran for Python are functional.</p>
<p>Compilation in this mode is usually enabled automatically, and can be
selected via the <code class="docutils literal notranslate"><span class="pre">--fcompiler</span></code> and <code class="docutils literal notranslate"><span class="pre">--compiler</span></code> options to
<code class="docutils literal notranslate"><span class="pre">setup.py</span></code>. Moreover, linking Fortran codes to static OpenBLAS is
supported; by default a gfortran compatible static archive
<code class="docutils literal notranslate"><span class="pre">openblas.a</span></code> is looked for.</p>
</div>
<div class="section" id="np-linalg-pinv-now-works-on-stacked-matrices">
<h4><code class="docutils literal notranslate"><span class="pre">np.linalg.pinv</span></code> now works on stacked matrices<a class="headerlink" href="#np-linalg-pinv-now-works-on-stacked-matrices" title="Permalink to this headline">¶</a></h4>
<p>Previously it was limited to a single 2d array.</p>
</div>
<div class="section" id="numpy-save-aligns-data-to-64-bytes-instead-of-16">
<h4><code class="docutils literal notranslate"><span class="pre">numpy.save</span></code> aligns data to 64 bytes instead of 16<a class="headerlink" href="#numpy-save-aligns-data-to-64-bytes-instead-of-16" title="Permalink to this headline">¶</a></h4>
<p>Saving NumPy arrays in the <code class="docutils literal notranslate"><span class="pre">npy</span></code> format with <code class="docutils literal notranslate"><span class="pre">numpy.save</span></code> inserts
padding before the array data to align it at 64 bytes.  Previously
this was only 16 bytes (and sometimes less due to a bug in the code
for version 2).  Now the alignment is 64 bytes, which matches the
widest SIMD instruction set commonly available, and is also the most
common cache line size.  This makes <code class="docutils literal notranslate"><span class="pre">npy</span></code> files easier to use in
programs which open them with <code class="docutils literal notranslate"><span class="pre">mmap</span></code>, especially on Linux where an
<code class="docutils literal notranslate"><span class="pre">mmap</span></code> offset must be a multiple of the page size.</p>
</div>
<div class="section" id="npz-files-now-can-be-written-without-using-temporary-files">
<h4>NPZ files now can be written without using temporary files<a class="headerlink" href="#npz-files-now-can-be-written-without-using-temporary-files" title="Permalink to this headline">¶</a></h4>
<p>In Python 3.6+ <code class="docutils literal notranslate"><span class="pre">numpy.savez</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy.savez_compressed</span></code> now write
directly to a ZIP file, without creating intermediate temporary files.</p>
</div>
<div class="section" id="better-support-for-empty-structured-and-string-types">
<h4>Better support for empty structured and string types<a class="headerlink" href="#better-support-for-empty-structured-and-string-types" title="Permalink to this headline">¶</a></h4>
<p>Structured types can contain zero fields, and string dtypes can contain zero
characters. Zero-length strings still cannot be created directly, and must be
constructed through structured dtypes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">str0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">([(</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">N</span><span class="p">)]))[</span><span class="s1">&#39;v&#39;</span><span class="p">]</span>
<span class="n">void0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>It was always possible to work with these, but the following operations are
now supported for these arrays:</p>
<blockquote>
<div><ul class="simple">
<li><em class="xref py py-obj">arr.sort()</em></li>
<li><em class="xref py py-obj">arr.view(bytes)</em></li>
<li><em class="xref py py-obj">arr.resize(…)</em></li>
<li><em class="xref py py-obj">pickle.dumps(arr)</em></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="support-for-decimal-decimal-in-np-lib-financial">
<h4>Support for <code class="docutils literal notranslate"><span class="pre">decimal.Decimal</span></code> in <code class="docutils literal notranslate"><span class="pre">np.lib.financial</span></code><a class="headerlink" href="#support-for-decimal-decimal-in-np-lib-financial" title="Permalink to this headline">¶</a></h4>
<p>Unless otherwise stated all functions within the <code class="docutils literal notranslate"><span class="pre">financial</span></code> package now
support using the <code class="docutils literal notranslate"><span class="pre">decimal.Decimal</span></code> built-in type.</p>
</div>
<div class="section" id="float-printing-now-uses-dragon4-algorithm-for-shortest-decimal-representation">
<h4>Float printing now uses “dragon4” algorithm for shortest decimal representation<a class="headerlink" href="#float-printing-now-uses-dragon4-algorithm-for-shortest-decimal-representation" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">str</span></code> and <code class="docutils literal notranslate"><span class="pre">repr</span></code> of floating-point values (16, 32, 64 and 128 bit) are
now printed to give the shortest decimal representation which uniquely
identifies the value from others of the same type. Previously this was only
true for <code class="docutils literal notranslate"><span class="pre">float64</span></code> values. The remaining float types will now often be shorter
than in numpy 1.13. Arrays printed in scientific notation now also use the
shortest scientific representation, instead of fixed precision as before.</p>
<blockquote>
<div>Additionally, the <a class="reference external" href="https://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a> of float scalars scalars will no longer be truncated
in python2, unlike python2 <em class="xref py py-obj">float`s.  `np.double</em> scalars now have a <code class="docutils literal notranslate"><span class="pre">str</span></code>
and <code class="docutils literal notranslate"><span class="pre">repr</span></code> identical to that of a python3 float.</div></blockquote>
<p>New functions <code class="docutils literal notranslate"><span class="pre">np.format_float_scientific</span></code> and <code class="docutils literal notranslate"><span class="pre">np.format_float_positional</span></code>
are provided to generate these decimal representations.</p>
<p>A new option <code class="docutils literal notranslate"><span class="pre">floatmode</span></code> has been added to <code class="docutils literal notranslate"><span class="pre">np.set_printoptions</span></code> and
<code class="docutils literal notranslate"><span class="pre">np.array2string</span></code>, which gives control over uniqueness and rounding of
printed elements in an array. The new default is <code class="docutils literal notranslate"><span class="pre">floatmode='maxprec'</span></code> with
<code class="docutils literal notranslate"><span class="pre">precision=8</span></code>, which will print at most 8 fractional digits, or fewer if an
element can be uniquely represented with fewer. A useful new mode is
<code class="docutils literal notranslate"><span class="pre">floatmode=&quot;unique&quot;</span></code>, which will output enough digits to specify the array
elements uniquely.</p>
<p>Numpy complex-floating-scalars with values like <code class="docutils literal notranslate"><span class="pre">inf*j</span></code> or <code class="docutils literal notranslate"><span class="pre">nan*j</span></code> now
print as <code class="docutils literal notranslate"><span class="pre">infj</span></code> and <code class="docutils literal notranslate"><span class="pre">nanj</span></code>, like the pure-python <code class="docutils literal notranslate"><span class="pre">complex</span></code> type.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">FloatFormat</span></code> and <code class="docutils literal notranslate"><span class="pre">LongFloatFormat</span></code> classes are deprecated and should
both be replaced by <code class="docutils literal notranslate"><span class="pre">FloatingFormat</span></code>. Similarly <code class="docutils literal notranslate"><span class="pre">ComplexFormat</span></code> and
<code class="docutils literal notranslate"><span class="pre">LongComplexFormat</span></code> should be replaced by <code class="docutils literal notranslate"><span class="pre">ComplexFloatingFormat</span></code>.</p>
</div>
<div class="section" id="void-datatype-elements-are-now-printed-in-hex-notation">
<h4><code class="docutils literal notranslate"><span class="pre">void</span></code> datatype elements are now printed in hex notation<a class="headerlink" href="#void-datatype-elements-are-now-printed-in-hex-notation" title="Permalink to this headline">¶</a></h4>
<p>A hex representation compatible with the python <code class="docutils literal notranslate"><span class="pre">bytes</span></code> type is now printed
for unstructured <code class="docutils literal notranslate"><span class="pre">np.void</span></code> elements, e.g., <code class="docutils literal notranslate"><span class="pre">V4</span></code> datatype. Previously, in
python2 the raw void data of the element was printed to stdout, or in python3
the integer byte values were shown.</p>
</div>
<div class="section" id="printing-style-for-void-datatypes-is-now-independently-customizable">
<h4>printing style for <code class="docutils literal notranslate"><span class="pre">void</span></code> datatypes is now independently customizable<a class="headerlink" href="#printing-style-for-void-datatypes-is-now-independently-customizable" title="Permalink to this headline">¶</a></h4>
<p>The printing style of <code class="docutils literal notranslate"><span class="pre">np.void</span></code> arrays is now independently customizable
using the <code class="docutils literal notranslate"><span class="pre">formatter</span></code> argument to <code class="docutils literal notranslate"><span class="pre">np.set_printoptions</span></code>, using the
<code class="docutils literal notranslate"><span class="pre">'void'</span></code> key, instead of the catch-all <code class="docutils literal notranslate"><span class="pre">numpystr</span></code> key as before.</p>
</div>
<div class="section" id="reduced-memory-usage-of-np-loadtxt">
<h4>Reduced memory usage of <code class="docutils literal notranslate"><span class="pre">np.loadtxt</span></code><a class="headerlink" href="#reduced-memory-usage-of-np-loadtxt" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">np.loadtxt</span></code> now reads files in chunks instead of all at once which decreases
its memory usage significantly for large files.</p>
</div>
</div>
<div class="section" id="id73">
<h3>Changes<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h3>
<div class="section" id="multiple-field-indexing-assignment-of-structured-arrays">
<h4>Multiple-field indexing/assignment of structured arrays<a class="headerlink" href="#multiple-field-indexing-assignment-of-structured-arrays" title="Permalink to this headline">¶</a></h4>
<p>The indexing and assignment of structured arrays with multiple fields has
changed in a number of ways, as warned about in previous releases.</p>
<p>First, indexing a structured array with multiple fields, e.g.,
<code class="docutils literal notranslate"><span class="pre">arr[['f1',</span> <span class="pre">'f3']]</span></code>, returns a view into the original array instead of a
copy. The returned view will have extra padding bytes corresponding to
intervening fields in the original array, unlike the copy in 1.13, which will
affect code such as <code class="docutils literal notranslate"><span class="pre">arr[['f1',</span> <span class="pre">'f3']].view(newdtype)</span></code>.</p>
<p>Second, assignment between structured arrays will now occur “by position”
instead of “by field name”. The Nth field of the destination will be set to the
Nth field of the source regardless of field name, unlike in numpy versions 1.6
to 1.13 in which fields in the destination array were set to the
identically-named field in the source array or to 0 if the source did not have
a field.</p>
<p>Correspondingly, the order of fields in a structured dtypes now matters when
computing dtype equality. For example, with the dtypes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">dtype</span><span class="p">({</span><span class="s1">&#39;names&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">],</span> <span class="s1">&#39;formats&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;i4&#39;</span><span class="p">,</span> <span class="s1">&#39;f4&#39;</span><span class="p">],</span> <span class="s1">&#39;offsets&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">dtype</span><span class="p">({</span><span class="s1">&#39;names&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">],</span> <span class="s1">&#39;formats&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;f4&#39;</span><span class="p">,</span> <span class="s1">&#39;i4&#39;</span><span class="p">],</span> <span class="s1">&#39;offsets&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">]})</span>
</pre></div>
</div>
<p>the expression <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">==</span> <span class="pre">y</span></code> will now return <code class="docutils literal notranslate"><span class="pre">False</span></code>, unlike before.
This makes dictionary based dtype specifications like
<code class="docutils literal notranslate"><span class="pre">dtype({'a':</span> <span class="pre">('i4',</span> <span class="pre">0),</span> <span class="pre">'b':</span> <span class="pre">('f4',</span> <span class="pre">4)})</span></code> dangerous in python &lt; 3.6
since dict key order is not preserved in those versions.</p>
<p>Assignment from a structured array to a boolean array now raises a ValueError,
unlike in 1.13, where it always set the destination elements to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>Assignment from structured array with more than one field to a non-structured
array now raises a ValueError. In 1.13 this copied just the first field of the
source to the destination.</p>
<p>Using field “titles” in multiple-field indexing is now disallowed, as is
repeating a field name in a multiple-field index.</p>
<p>The documentation for structured arrays in the user guide has been
significantly updated to reflect these changes.</p>
</div>
<div class="section" id="integer-and-void-scalars-are-now-unaffected-by-np-set-string-function">
<h4>Integer and Void scalars are now unaffected by <code class="docutils literal notranslate"><span class="pre">np.set_string_function</span></code><a class="headerlink" href="#integer-and-void-scalars-are-now-unaffected-by-np-set-string-function" title="Permalink to this headline">¶</a></h4>
<p>Previously, unlike most other numpy scalars, the <code class="docutils literal notranslate"><span class="pre">str</span></code> and <code class="docutils literal notranslate"><span class="pre">repr</span></code> of
integer and void scalars could be controlled by <code class="docutils literal notranslate"><span class="pre">np.set_string_function</span></code>.
This is no longer possible.</p>
</div>
<div class="section" id="d-array-printing-changed-style-arg-of-array2string-deprecated">
<h4>0d array printing changed, <code class="docutils literal notranslate"><span class="pre">style</span></code> arg of array2string deprecated<a class="headerlink" href="#d-array-printing-changed-style-arg-of-array2string-deprecated" title="Permalink to this headline">¶</a></h4>
<p>Previously the <code class="docutils literal notranslate"><span class="pre">str</span></code> and <code class="docutils literal notranslate"><span class="pre">repr</span></code> of 0d arrays had idiosyncratic
implementations which returned <code class="docutils literal notranslate"><span class="pre">str(a.item())</span></code> and <code class="docutils literal notranslate"><span class="pre">'array('</span> <span class="pre">+</span>
<span class="pre">repr(a.item())</span> <span class="pre">+</span> <span class="pre">')'</span></code> respectively for 0d array <code class="docutils literal notranslate"><span class="pre">a</span></code>, unlike both numpy
scalars and higher dimension ndarrays.</p>
<p>Now, the <code class="docutils literal notranslate"><span class="pre">str</span></code> of a 0d array acts like a numpy scalar using <code class="docutils literal notranslate"><span class="pre">str(a[()])</span></code>
and the <code class="docutils literal notranslate"><span class="pre">repr</span></code> acts like higher dimension arrays using <code class="docutils literal notranslate"><span class="pre">formatter(a[()])</span></code>,
where  <code class="docutils literal notranslate"><span class="pre">formatter</span></code>  can be specified using <code class="docutils literal notranslate"><span class="pre">np.set_printoptions</span></code>. The
<code class="docutils literal notranslate"><span class="pre">style</span></code> argument of <code class="docutils literal notranslate"><span class="pre">np.array2string</span></code> is deprecated.</p>
<p>This new behavior is disabled in 1.13 legacy printing mode, see compatibility
notes above.</p>
</div>
<div class="section" id="seeding-randomstate-using-an-array-requires-a-1-d-array">
<h4>Seeding <code class="docutils literal notranslate"><span class="pre">RandomState</span></code> using an array requires a 1-d array<a class="headerlink" href="#seeding-randomstate-using-an-array-requires-a-1-d-array" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">RandomState</span></code> previously would accept empty arrays or arrays with 2 or more
dimensions, which resulted in either a failure to seed (empty arrays) or for
some of the passed values to be ignored when setting the seed.</p>
</div>
<div class="section" id="maskedarray-objects-show-a-more-useful-repr">
<h4><code class="docutils literal notranslate"><span class="pre">MaskedArray</span></code> objects show a more useful <code class="docutils literal notranslate"><span class="pre">repr</span></code><a class="headerlink" href="#maskedarray-objects-show-a-more-useful-repr" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">repr</span></code> of a <code class="docutils literal notranslate"><span class="pre">MaskedArray</span></code> is now closer to the python code that would
produce it, with arrays now being shown with commas and dtypes. Like the other
formatting changes, this can be disabled with the 1.13 legacy printing mode in
order to help transition doctests.</p>
</div>
<div class="section" id="the-repr-of-np-polynomial-classes-is-more-explicit">
<h4>The <code class="docutils literal notranslate"><span class="pre">repr</span></code> of <code class="docutils literal notranslate"><span class="pre">np.polynomial</span></code> classes is more explicit<a class="headerlink" href="#the-repr-of-np-polynomial-classes-is-more-explicit" title="Permalink to this headline">¶</a></h4>
<p>It now shows the domain and window parameters as keyword arguments to make
them more clear:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">Polynomial</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="go">Polynomial([0.,  1.,  2.,  3.], domain=[-1,  1], window=[-1,  1])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="numpy-1-13-3-release-notes">
<h2>NumPy 1.13.3 Release Notes<a class="headerlink" href="#numpy-1-13-3-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix release for some problems found since 1.13.1. The most
important fixes are for CVE-2017-12852 and temporary elision. Users of earlier
versions of 1.13 should upgrade.</p>
<p>The Python versions supported are 2.7 and 3.4 - 3.6. The Python 3.6 wheels
available from PIP are built with Python 3.6.2 and should be compatible with
all previous versions of Python 3.6. It was cythonized with Cython 0.26.1,
which should be free of the bugs found in 0.27 while also being compatible with
Python 3.7-dev. The Windows wheels were built with OpenBlas instead ATLAS,
which should improve the performance of the linear algebra functions.</p>
<p>The NumPy 1.13.3 release is a re-release of 1.13.2, which suffered from a
bug in Cython 0.27.0.</p>
<div class="section" id="id74">
<h3>Contributors<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h3>
<p>A total of 12 people contributed to this release.  People with a “+” by their
names contributed a patch for the first time.</p>
<ul class="simple">
<li>Allan Haldane</li>
<li>Brandon Carter</li>
<li>Charles Harris</li>
<li>Eric Wieser</li>
<li>Iryna Shcherbina +</li>
<li>James Bourbeau +</li>
<li>Jonathan Helmus</li>
<li>Julian Taylor</li>
<li>Matti Picus</li>
<li>Michael Lamparski +</li>
<li>Michael Seifert</li>
<li>Ralf Gommers</li>
</ul>
</div>
<div class="section" id="id75">
<h3>Pull requests merged<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h3>
<p>A total of 22 pull requests were merged for this release.</p>
<ul class="simple">
<li>#9390 BUG: Return the poly1d coefficients array directly</li>
<li>#9555 BUG: Fix regression in 1.13.x in distutils.mingw32ccompiler.</li>
<li>#9556 BUG: Fix true_divide when dtype=np.float64 specified.</li>
<li>#9557 DOC: Fix some rst markup in numpy/doc/basics.py.</li>
<li>#9558 BLD: Remove -xhost flag from IntelFCompiler.</li>
<li>#9559 DOC: Removes broken docstring example (source code, png, pdf)…</li>
<li>#9580 BUG: Add hypot and cabs functions to WIN32 blacklist.</li>
<li>#9732 BUG: Make scalar function elision check if temp is writeable.</li>
<li>#9736 BUG: Various fixes to np.gradient</li>
<li>#9742 BUG: Fix np.pad for CVE-2017-12852</li>
<li>#9744 BUG: Check for exception in sort functions, add tests</li>
<li>#9745 DOC: Add whitespace after “versionadded::” directive so it actually…</li>
<li>#9746 BUG: Memory leak in np.dot of size 0</li>
<li>#9747 BUG: Adjust gfortran version search regex</li>
<li>#9757 BUG: Cython 0.27 breaks NumPy on Python 3.</li>
<li>#9764 BUG: Ensure <em class="xref py py-obj">_npy_scaled_cexp{,f,l}</em> is defined when needed.</li>
<li>#9765 BUG: PyArray_CountNonzero does not check for exceptions</li>
<li>#9766 BUG: Fixes histogram monotonicity check for unsigned bin values</li>
<li>#9767 BUG: Ensure consistent result dtype of count_nonzero</li>
<li>#9771 BUG: MAINT: Fix mtrand for Cython 0.27.</li>
<li>#9772 DOC: Create the 1.13.2 release notes.</li>
<li>#9794 DOC: Create 1.13.3 release notes.</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-13-2-release-notes">
<h2>NumPy 1.13.2 Release Notes<a class="headerlink" href="#numpy-1-13-2-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix release for some problems found since 1.13.1. The most
important fixes are for CVE-2017-12852 and temporary elision. Users of earlier
versions of 1.13 should upgrade.</p>
<p>The Python versions supported are 2.7 and 3.4 - 3.6. The Python 3.6 wheels
available from PIP are built with Python 3.6.2 and should be compatible with
all previous versions of Python 3.6. The Windows wheels are now built
with OpenBlas instead ATLAS, which should improve the performance of the linear
algebra functions.</p>
<div class="section" id="id76">
<h3>Contributors<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h3>
<p>A total of 12 people contributed to this release.  People with a “+” by their
names contributed a patch for the first time.</p>
<ul class="simple">
<li>Allan Haldane</li>
<li>Brandon Carter</li>
<li>Charles Harris</li>
<li>Eric Wieser</li>
<li>Iryna Shcherbina +</li>
<li>James Bourbeau +</li>
<li>Jonathan Helmus</li>
<li>Julian Taylor</li>
<li>Matti Picus</li>
<li>Michael Lamparski +</li>
<li>Michael Seifert</li>
<li>Ralf Gommers</li>
</ul>
</div>
<div class="section" id="id77">
<h3>Pull requests merged<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h3>
<p>A total of 20 pull requests were merged for this release.</p>
<ul class="simple">
<li>#9390 BUG: Return the poly1d coefficients array directly</li>
<li>#9555 BUG: Fix regression in 1.13.x in distutils.mingw32ccompiler.</li>
<li>#9556 BUG: Fix true_divide when dtype=np.float64 specified.</li>
<li>#9557 DOC: Fix some rst markup in numpy/doc/basics.py.</li>
<li>#9558 BLD: Remove -xhost flag from IntelFCompiler.</li>
<li>#9559 DOC: Removes broken docstring example (source code, png, pdf)…</li>
<li>#9580 BUG: Add hypot and cabs functions to WIN32 blacklist.</li>
<li>#9732 BUG: Make scalar function elision check if temp is writeable.</li>
<li>#9736 BUG: Various fixes to np.gradient</li>
<li>#9742 BUG: Fix np.pad for CVE-2017-12852</li>
<li>#9744 BUG: Check for exception in sort functions, add tests</li>
<li>#9745 DOC: Add whitespace after “versionadded::” directive so it actually…</li>
<li>#9746 BUG: Memory leak in np.dot of size 0</li>
<li>#9747 BUG: Adjust gfortran version search regex</li>
<li>#9757 BUG: Cython 0.27 breaks NumPy on Python 3.</li>
<li>#9764 BUG: Ensure <em class="xref py py-obj">_npy_scaled_cexp{,f,l}</em> is defined when needed.</li>
<li>#9765 BUG: PyArray_CountNonzero does not check for exceptions</li>
<li>#9766 BUG: Fixes histogram monotonicity check for unsigned bin values</li>
<li>#9767 BUG: Ensure consistent result dtype of count_nonzero</li>
<li>#9771 BUG, MAINT: Fix mtrand for Cython 0.27.</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-13-1-release-notes">
<h2>NumPy 1.13.1 Release Notes<a class="headerlink" href="#numpy-1-13-1-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix release for problems found in 1.13.0. The major changes are
fixes for the new memory overlap detection and temporary elision as well as
reversion of the removal of the boolean binary <code class="docutils literal notranslate"><span class="pre">-</span></code> operator. Users of 1.13.0
should upgrade.</p>
<p>Thr Python versions supported are 2.7 and 3.4 - 3.6. Note that the Python 3.6
wheels available from PIP are built against 3.6.1, hence will not work when
used with 3.6.0 due to Python bug <a class="reference external" href="https://bugs.python.org/issue29943">29943</a>. NumPy 1.13.2 will be released shortly
after Python 3.6.2 is out to fix that problem. If you are using 3.6.0 the
workaround is to upgrade to 3.6.1 or use an earlier Python version.</p>
<div class="section" id="id79">
<h3>Pull requests merged<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h3>
<p>A total of 19 pull requests were merged for this release.</p>
<ul class="simple">
<li>#9240 DOC: BLD: fix lots of Sphinx warnings/errors.</li>
<li>#9255 Revert “DEP: Raise TypeError for subtract(bool, bool).”</li>
<li>#9261 BUG: don’t elide into readonly and updateifcopy temporaries for…</li>
<li>#9262 BUG: fix missing keyword rename for common block in numpy.f2py</li>
<li>#9263 BUG: handle resize of 0d array</li>
<li>#9267 DOC: update f2py front page and some doc build metadata.</li>
<li>#9299 BUG: Fix Intel compilation on Unix.</li>
<li>#9317 BUG: fix wrong ndim used in empty where check</li>
<li>#9319 BUG: Make extensions compilable with MinGW on Py2.7</li>
<li>#9339 BUG: Prevent crash if ufunc doc string is null</li>
<li>#9340 BUG: umath: un-break ufunc where= when no out= is given</li>
<li>#9371 DOC: Add isnat/positive ufunc to documentation</li>
<li>#9372 BUG: Fix error in fromstring function from numpy.core.records…</li>
<li>#9373 BUG: ‘)’ is printed at the end pointer of the buffer in numpy.f2py.</li>
<li>#9374 DOC: Create NumPy 1.13.1 release notes.</li>
<li>#9376 BUG: Prevent hang traversing ufunc userloop linked list</li>
<li>#9377 DOC: Use x1 and x2 in the heaviside docstring.</li>
<li>#9378 DOC: Add $PARAMS to the isnat docstring</li>
<li>#9379 DOC: Update the 1.13.1 release notes</li>
</ul>
</div>
<div class="section" id="id80">
<h3>Contributors<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h3>
<p>A total of 12 people contributed to this release.  People with a “+” by their
names contributed a patch for the first time.</p>
<ul class="simple">
<li>Andras Deak +</li>
<li>Bob Eldering +</li>
<li>Charles Harris</li>
<li>Daniel Hrisca +</li>
<li>Eric Wieser</li>
<li>Joshua Leahy +</li>
<li>Julian Taylor</li>
<li>Michael Seifert</li>
<li>Pauli Virtanen</li>
<li>Ralf Gommers</li>
<li>Roland Kaufmann</li>
<li>Warren Weckesser</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-13-0-release-notes">
<h2>NumPy 1.13.0 Release Notes<a class="headerlink" href="#numpy-1-13-0-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This release supports Python 2.7 and 3.4 - 3.6.</p>
<div class="section" id="id81">
<h3>Highlights<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>Operations like <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span> <span class="pre">+</span> <span class="pre">c</span></code> will reuse temporaries on some platforms,
resulting in less memory use and faster execution.</li>
<li>Inplace operations check if inputs overlap outputs and create temporaries
to avoid problems.</li>
<li>New <code class="docutils literal notranslate"><span class="pre">__array_ufunc__</span></code> attribute provides improved ability for classes to
override default ufunc behavior.</li>
<li>New <code class="docutils literal notranslate"><span class="pre">np.block</span></code> function for creating blocked arrays.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id82">
<h3>New functions<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New <code class="docutils literal notranslate"><span class="pre">np.positive</span></code> ufunc.</li>
<li>New <code class="docutils literal notranslate"><span class="pre">np.divmod</span></code> ufunc provides more efficient divmod.</li>
<li>New <code class="docutils literal notranslate"><span class="pre">np.isnat</span></code> ufunc tests for NaT special values.</li>
<li>New <code class="docutils literal notranslate"><span class="pre">np.heaviside</span></code> ufunc computes the Heaviside function.</li>
<li>New <code class="docutils literal notranslate"><span class="pre">np.isin</span></code> function, improves on <code class="docutils literal notranslate"><span class="pre">in1d</span></code>.</li>
<li>New <code class="docutils literal notranslate"><span class="pre">np.block</span></code> function for creating blocked arrays.</li>
<li>New <code class="docutils literal notranslate"><span class="pre">PyArray_MapIterArrayCopyIfOverlap</span></code> added to NumPy C-API.</li>
</ul>
<p>See below for details.</p>
</div>
<div class="section" id="id83">
<h3>Deprecations<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Calling <code class="docutils literal notranslate"><span class="pre">np.fix</span></code>, <code class="docutils literal notranslate"><span class="pre">np.isposinf</span></code>, and <code class="docutils literal notranslate"><span class="pre">np.isneginf</span></code> with <code class="docutils literal notranslate"><span class="pre">f(x,</span> <span class="pre">y=out)</span></code>
is deprecated - the argument should be passed as <code class="docutils literal notranslate"><span class="pre">f(x,</span> <span class="pre">out=out)</span></code>, which
matches other ufunc-like interfaces.</li>
<li>Use of the C-API <code class="docutils literal notranslate"><span class="pre">NPY_CHAR</span></code> type number deprecated since version 1.7 will
now raise deprecation warnings at runtime. Extensions built with older f2py
versions need to be recompiled to remove the warning.</li>
<li><code class="docutils literal notranslate"><span class="pre">np.ma.argsort</span></code>, <code class="docutils literal notranslate"><span class="pre">np.ma.minimum.reduce</span></code>, and <code class="docutils literal notranslate"><span class="pre">np.ma.maximum.reduce</span></code>
should be called with an explicit <em class="xref py py-obj">axis</em> argument when applied to arrays with
more than 2 dimensions, as the default value of this argument (<code class="docutils literal notranslate"><span class="pre">None</span></code>) is
inconsistent with the rest of numpy (<code class="docutils literal notranslate"><span class="pre">-1</span></code>, <code class="docutils literal notranslate"><span class="pre">0</span></code>, and <code class="docutils literal notranslate"><span class="pre">0</span></code>, respectively).</li>
<li><code class="docutils literal notranslate"><span class="pre">np.ma.MaskedArray.mini</span></code> is deprecated, as it almost duplicates the
functionality of <code class="docutils literal notranslate"><span class="pre">np.MaskedArray.min</span></code>. Exactly equivalent behaviour
can be obtained with <code class="docutils literal notranslate"><span class="pre">np.ma.minimum.reduce</span></code>.</li>
<li>The single-argument form of <code class="docutils literal notranslate"><span class="pre">np.ma.minimum</span></code> and <code class="docutils literal notranslate"><span class="pre">np.ma.maximum</span></code> is
deprecated. <code class="docutils literal notranslate"><span class="pre">np.maximum</span></code>. <code class="docutils literal notranslate"><span class="pre">np.ma.minimum(x)</span></code> should now be spelt
<code class="docutils literal notranslate"><span class="pre">np.ma.minimum.reduce(x)</span></code>, which is consistent with how this would be done
with <code class="docutils literal notranslate"><span class="pre">np.minimum</span></code>.</li>
<li>Calling <code class="docutils literal notranslate"><span class="pre">ndarray.conjugate</span></code> on non-numeric dtypes is deprecated (it
should match the behavior of <code class="docutils literal notranslate"><span class="pre">np.conjugate</span></code>, which throws an error).</li>
<li>Calling <code class="docutils literal notranslate"><span class="pre">expand_dims</span></code> when the <code class="docutils literal notranslate"><span class="pre">axis</span></code> keyword does not satisfy
<code class="docutils literal notranslate"><span class="pre">-a.ndim</span> <span class="pre">-</span> <span class="pre">1</span> <span class="pre">&lt;=</span> <span class="pre">axis</span> <span class="pre">&lt;=</span> <span class="pre">a.ndim</span></code>, where <code class="docutils literal notranslate"><span class="pre">a</span></code> is the array being reshaped,
is deprecated.</li>
</ul>
</div>
<div class="section" id="id84">
<h3>Future Changes<a class="headerlink" href="#id84" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Assignment between structured arrays with different field names will change
in NumPy 1.14. Previously, fields in the dst would be set to the value of the
identically-named field in the src. In numpy 1.14 fields will instead be
assigned ‘by position’: The n-th field of the dst will be set to the n-th
field of the src array. Note that the <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code> raised in NumPy 1.12
incorrectly reported this change as scheduled for NumPy 1.13 rather than
NumPy 1.14.</li>
</ul>
</div>
<div class="section" id="build-system-changes">
<h3>Build System Changes<a class="headerlink" href="#build-system-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">numpy.distutils</span></code> now automatically determines C-file dependencies with
GCC compatible compilers.</li>
</ul>
</div>
<div class="section" id="id85">
<h3>Compatibility notes<a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h3>
<div class="section" id="error-type-changes">
<h4>Error type changes<a class="headerlink" href="#error-type-changes" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">numpy.hstack()</span></code> now throws <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> instead of <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> when
input is empty.</li>
<li>Functions taking an axis argument, when that argument is out of range, now
throw <code class="docutils literal notranslate"><span class="pre">np.AxisError</span></code> instead of a mixture of <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> and
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code>. For backwards compatibility, <code class="docutils literal notranslate"><span class="pre">AxisError</span></code> subclasses both of
these.</li>
</ul>
</div>
<div class="section" id="tuple-object-dtypes">
<h4>Tuple object dtypes<a class="headerlink" href="#tuple-object-dtypes" title="Permalink to this headline">¶</a></h4>
<p>Support has been removed for certain obscure dtypes that were unintentionally
allowed, of the form <code class="docutils literal notranslate"><span class="pre">(old_dtype,</span> <span class="pre">new_dtype)</span></code>, where either of the dtypes
is or contains the <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype. As an exception, dtypes of the form
<code class="docutils literal notranslate"><span class="pre">(object,</span> <span class="pre">[('name',</span> <span class="pre">object)])</span></code> are still supported due to evidence of
existing use.</p>
</div>
<div class="section" id="deprecationwarning-to-error">
<h4>DeprecationWarning to error<a class="headerlink" href="#deprecationwarning-to-error" title="Permalink to this headline">¶</a></h4>
<p>See Changes section for more detail.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">partition</span></code>, TypeError when non-integer partition index is used.</li>
<li><code class="docutils literal notranslate"><span class="pre">NpyIter_AdvancedNew</span></code>, ValueError when <code class="docutils literal notranslate"><span class="pre">oa_ndim</span> <span class="pre">==</span> <span class="pre">0</span></code> and <code class="docutils literal notranslate"><span class="pre">op_axes</span></code> is NULL</li>
<li><code class="docutils literal notranslate"><span class="pre">negative(bool_)</span></code>, TypeError when negative applied to booleans.</li>
<li><code class="docutils literal notranslate"><span class="pre">subtract(bool_,</span> <span class="pre">bool_)</span></code>, TypeError when subtracting boolean from boolean.</li>
<li><code class="docutils literal notranslate"><span class="pre">np.equal,</span> <span class="pre">np.not_equal</span></code>, object identity doesn’t override failed comparison.</li>
<li><code class="docutils literal notranslate"><span class="pre">np.equal,</span> <span class="pre">np.not_equal</span></code>, object identity doesn’t override non-boolean comparison.</li>
<li>Deprecated boolean indexing behavior dropped. See Changes below for details.</li>
<li>Deprecated <code class="docutils literal notranslate"><span class="pre">np.alterdot()</span></code> and <code class="docutils literal notranslate"><span class="pre">np.restoredot()</span></code> removed.</li>
</ul>
</div>
<div class="section" id="futurewarning-to-changed-behavior">
<h4>FutureWarning to changed behavior<a class="headerlink" href="#futurewarning-to-changed-behavior" title="Permalink to this headline">¶</a></h4>
<p>See Changes section for more detail.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">numpy.average</span></code> preserves subclasses</li>
<li><code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">==</span> <span class="pre">None</span></code> and <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">!=</span> <span class="pre">None</span></code> do element-wise comparison.</li>
<li><code class="docutils literal notranslate"><span class="pre">np.equal,</span> <span class="pre">np.not_equal</span></code>, object identity doesn’t override comparison result.</li>
</ul>
</div>
<div class="section" id="dtypes-are-now-always-true">
<h4>dtypes are now always true<a class="headerlink" href="#dtypes-are-now-always-true" title="Permalink to this headline">¶</a></h4>
<p>Previously <code class="docutils literal notranslate"><span class="pre">bool(dtype)</span></code> would fall back to the default python
implementation, which checked if <code class="docutils literal notranslate"><span class="pre">len(dtype)</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>. Since <code class="docutils literal notranslate"><span class="pre">dtype</span></code> objects
implement <code class="docutils literal notranslate"><span class="pre">__len__</span></code> as the number of record fields, <code class="docutils literal notranslate"><span class="pre">bool</span></code> of scalar dtypes
would evaluate to <code class="docutils literal notranslate"><span class="pre">False</span></code>, which was unintuitive. Now <code class="docutils literal notranslate"><span class="pre">bool(dtype)</span> <span class="pre">==</span> <span class="pre">True</span></code>
for all dtypes.</p>
</div>
<div class="section" id="getslice-and-setslice-are-no-longer-needed-in-ndarray-subclasses">
<h4><code class="docutils literal notranslate"><span class="pre">__getslice__</span></code> and <code class="docutils literal notranslate"><span class="pre">__setslice__</span></code> are no longer needed in <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> subclasses<a class="headerlink" href="#getslice-and-setslice-are-no-longer-needed-in-ndarray-subclasses" title="Permalink to this headline">¶</a></h4>
<p>When subclassing np.ndarray in Python 2.7, it is no longer _necessary_ to
implement <code class="docutils literal notranslate"><span class="pre">__*slice__</span></code> on the derived class, as <code class="docutils literal notranslate"><span class="pre">__*item__</span></code> will intercept
these calls correctly.</p>
<p>Any code that did implement these will work exactly as before. Code that
invokes``ndarray.__getslice__`` (e.g. through <code class="docutils literal notranslate"><span class="pre">super(...).__getslice__</span></code>) will
now issue a DeprecationWarning - <code class="docutils literal notranslate"><span class="pre">.__getitem__(slice(start,</span> <span class="pre">end))</span></code> should be
used instead.</p>
</div>
<div class="section" id="indexing-maskedarrays-constants-with-ellipsis-now-returns-maskedarray">
<h4>Indexing MaskedArrays/Constants with <code class="docutils literal notranslate"><span class="pre">...</span></code> (ellipsis) now returns MaskedArray<a class="headerlink" href="#indexing-maskedarrays-constants-with-ellipsis-now-returns-maskedarray" title="Permalink to this headline">¶</a></h4>
<p>This behavior mirrors that of np.ndarray, and accounts for nested arrays in
MaskedArrays of object dtype, and ellipsis combined with other forms of
indexing.</p>
</div>
</div>
<div class="section" id="id86">
<h3>C API changes<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h3>
<div class="section" id="gufuncs-on-empty-arrays-and-npyiter-axis-removal">
<h4>GUfuncs on empty arrays and NpyIter axis removal<a class="headerlink" href="#gufuncs-on-empty-arrays-and-npyiter-axis-removal" title="Permalink to this headline">¶</a></h4>
<p>It is now allowed to remove a zero-sized axis from NpyIter. Which may mean
that code removing axes from NpyIter has to add an additional check when
accessing the removed dimensions later on.</p>
<p>The largest followup change is that gufuncs are now allowed to have zero-sized
inner dimensions. This means that a gufunc now has to anticipate an empty inner
dimension, while this was never possible and an error raised instead.</p>
<p>For most gufuncs no change should be necessary. However, it is now possible
for gufuncs with a signature such as <code class="docutils literal notranslate"><span class="pre">(...,</span> <span class="pre">N,</span> <span class="pre">M)</span> <span class="pre">-&gt;</span> <span class="pre">(...,</span> <span class="pre">M)</span></code> to return
a valid result if <code class="docutils literal notranslate"><span class="pre">N=0</span></code> without further wrapping code.</p>
</div>
<div class="section" id="pyarray-mapiterarraycopyifoverlap-added-to-numpy-c-api">
<h4><code class="docutils literal notranslate"><span class="pre">PyArray_MapIterArrayCopyIfOverlap</span></code> added to NumPy C-API<a class="headerlink" href="#pyarray-mapiterarraycopyifoverlap-added-to-numpy-c-api" title="Permalink to this headline">¶</a></h4>
<p>Similar to <code class="docutils literal notranslate"><span class="pre">PyArray_MapIterArray</span></code> but with an additional <code class="docutils literal notranslate"><span class="pre">copy_if_overlap</span></code>
argument. If <code class="docutils literal notranslate"><span class="pre">copy_if_overlap</span> <span class="pre">!=</span> <span class="pre">0</span></code>,  checks if input has memory overlap with
any of the other arrays and make copies as appropriate to avoid problems if the
input is modified during the iteration. See the documentation for more complete
documentation.</p>
</div>
</div>
<div class="section" id="id87">
<h3>New Features<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h3>
<div class="section" id="array-ufunc-added">
<h4><code class="docutils literal notranslate"><span class="pre">__array_ufunc__</span></code> added<a class="headerlink" href="#array-ufunc-added" title="Permalink to this headline">¶</a></h4>
<p>This is the renamed and redesigned <code class="docutils literal notranslate"><span class="pre">__numpy_ufunc__</span></code>. Any class, ndarray
subclass or not, can define this method or set it to <code class="docutils literal notranslate"><span class="pre">None</span></code> in order to
override the behavior of NumPy’s ufuncs. This works quite similarly to Python’s
<code class="docutils literal notranslate"><span class="pre">__mul__</span></code> and other binary operation routines. See the documentation for a
more detailed description of the implementation and behavior of this new
option. The API is provisional, we do not yet guarantee backward compatibility
as modifications may be made pending feedback. See <a class="reference external" href="http://www.numpy.org/neps/nep-0013-ufunc-overrides.html">NEP 13</a>  and
<a class="reference external" href="https://github.com/numpy/numpy/blob/master/doc/source/reference/arrays.classes.rst">documentation</a> for more details.</p>
</div>
<div class="section" id="new-positive-ufunc">
<h4>New <code class="docutils literal notranslate"><span class="pre">positive</span></code> ufunc<a class="headerlink" href="#new-positive-ufunc" title="Permalink to this headline">¶</a></h4>
<p>This ufunc corresponds to unary <em class="xref py py-obj">+</em>, but unlike <em class="xref py py-obj">+</em> on an ndarray it will raise
an error if array values do not support numeric operations.</p>
</div>
<div class="section" id="new-divmod-ufunc">
<h4>New <code class="docutils literal notranslate"><span class="pre">divmod</span></code> ufunc<a class="headerlink" href="#new-divmod-ufunc" title="Permalink to this headline">¶</a></h4>
<p>This ufunc corresponds to the Python builtin <a class="reference internal" href="reference/generated/numpy.divmod.html#numpy.divmod" title="numpy.divmod"><code class="xref py py-obj docutils literal notranslate"><span class="pre">divmod</span></code></a>, and is used to implement
<a class="reference internal" href="reference/generated/numpy.divmod.html#numpy.divmod" title="numpy.divmod"><code class="xref py py-obj docutils literal notranslate"><span class="pre">divmod</span></code></a> when called on numpy arrays. <code class="docutils literal notranslate"><span class="pre">np.divmod(x,</span> <span class="pre">y)</span></code> calculates a result
equivalent to <code class="docutils literal notranslate"><span class="pre">(np.floor_divide(x,</span> <span class="pre">y),</span> <span class="pre">np.remainder(x,</span> <span class="pre">y))</span></code> but is
approximately twice as fast as calling the functions separately.</p>
</div>
<div class="section" id="np-isnat-ufunc-tests-for-nat-special-datetime-and-timedelta-values">
<h4><code class="docutils literal notranslate"><span class="pre">np.isnat</span></code> ufunc tests for NaT special datetime and timedelta values<a class="headerlink" href="#np-isnat-ufunc-tests-for-nat-special-datetime-and-timedelta-values" title="Permalink to this headline">¶</a></h4>
<p>The new ufunc <code class="docutils literal notranslate"><span class="pre">np.isnat</span></code> finds the positions of special NaT values
within datetime and timedelta arrays. This is analogous to <code class="docutils literal notranslate"><span class="pre">np.isnan</span></code>.</p>
</div>
<div class="section" id="np-heaviside-ufunc-computes-the-heaviside-function">
<h4><code class="docutils literal notranslate"><span class="pre">np.heaviside</span></code> ufunc computes the Heaviside function<a class="headerlink" href="#np-heaviside-ufunc-computes-the-heaviside-function" title="Permalink to this headline">¶</a></h4>
<p>The new function <code class="docutils literal notranslate"><span class="pre">np.heaviside(x,</span> <span class="pre">h0)</span></code> (a ufunc) computes the Heaviside
function:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>                   <span class="p">{</span> <span class="mi">0</span>   <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">,</span>
<span class="n">heaviside</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">h0</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span> <span class="n">h0</span>  <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span>
                   <span class="p">{</span> <span class="mi">1</span>   <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mf">0.</span>
</pre></div>
</div>
</div>
<div class="section" id="np-block-function-for-creating-blocked-arrays">
<h4><code class="docutils literal notranslate"><span class="pre">np.block</span></code> function for creating blocked arrays<a class="headerlink" href="#np-block-function-for-creating-blocked-arrays" title="Permalink to this headline">¶</a></h4>
<p>Add a new <code class="docutils literal notranslate"><span class="pre">block</span></code> function to the current stacking functions <code class="docutils literal notranslate"><span class="pre">vstack</span></code>,
<code class="docutils literal notranslate"><span class="pre">hstack</span></code>, and <code class="docutils literal notranslate"><span class="pre">stack</span></code>. This allows concatenation across multiple axes
simultaneously, with a similar syntax to array creation, but where elements
can themselves be arrays. For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">block</span><span class="p">([</span>
<span class="gp">... </span>    <span class="p">[</span><span class="n">A</span><span class="p">,</span>               <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))],</span>
<span class="gp">... </span>    <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">B</span>               <span class="p">]</span>
<span class="gp">... </span><span class="p">])</span>
<span class="go">array([[ 2.,  0.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  2.,  0.,  0.,  0.],</span>
<span class="go">       [ 1.,  1.,  3.,  0.,  0.],</span>
<span class="go">       [ 1.,  1.,  0.,  3.,  0.],</span>
<span class="go">       [ 1.,  1.,  0.,  0.,  3.]])</span>
</pre></div>
</div>
<p>While primarily useful for block matrices, this works for arbitrary dimensions
of arrays.</p>
<p>It is similar to Matlab’s square bracket notation for creating block matrices.</p>
</div>
<div class="section" id="isin-function-improving-on-in1d">
<h4><code class="docutils literal notranslate"><span class="pre">isin</span></code> function, improving on <code class="docutils literal notranslate"><span class="pre">in1d</span></code><a class="headerlink" href="#isin-function-improving-on-in1d" title="Permalink to this headline">¶</a></h4>
<p>The new function <code class="docutils literal notranslate"><span class="pre">isin</span></code> tests whether each element of an N-dimensonal
array is present anywhere within a second array. It is an enhancement
of <code class="docutils literal notranslate"><span class="pre">in1d</span></code> that preserves the shape of the first array.</p>
</div>
<div class="section" id="temporary-elision">
<h4>Temporary elision<a class="headerlink" href="#temporary-elision" title="Permalink to this headline">¶</a></h4>
<p>On platforms providing the <code class="docutils literal notranslate"><span class="pre">backtrace</span></code> function NumPy will try to avoid
creating temporaries in expression involving basic numeric types.
For example <code class="docutils literal notranslate"><span class="pre">d</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span> <span class="pre">+</span> <span class="pre">c</span></code> is transformed to <code class="docutils literal notranslate"><span class="pre">d</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">+</span> <span class="pre">b;</span> <span class="pre">d</span> <span class="pre">+=</span> <span class="pre">c</span></code> which can
improve performance for large arrays as less memory bandwidth is required to
perform the operation.</p>
</div>
<div class="section" id="axes-argument-for-unique">
<h4><code class="docutils literal notranslate"><span class="pre">axes</span></code> argument for <code class="docutils literal notranslate"><span class="pre">unique</span></code><a class="headerlink" href="#axes-argument-for-unique" title="Permalink to this headline">¶</a></h4>
<p>In an N-dimensional array, the user can now choose the axis along which to look
for duplicate N-1-dimensional elements using <code class="docutils literal notranslate"><span class="pre">numpy.unique</span></code>. The original
behaviour is recovered if <code class="docutils literal notranslate"><span class="pre">axis=None</span></code> (default).</p>
</div>
<div class="section" id="np-gradient-now-supports-unevenly-spaced-data">
<h4><code class="docutils literal notranslate"><span class="pre">np.gradient</span></code> now supports unevenly spaced data<a class="headerlink" href="#np-gradient-now-supports-unevenly-spaced-data" title="Permalink to this headline">¶</a></h4>
<p>Users can now specify a not-constant spacing for data.
In particular <code class="docutils literal notranslate"><span class="pre">np.gradient</span></code> can now take:</p>
<ol class="arabic simple">
<li>A single scalar to specify a sample distance for all dimensions.</li>
<li>N scalars to specify a constant sample distance for each dimension.
i.e. <code class="docutils literal notranslate"><span class="pre">dx</span></code>, <code class="docutils literal notranslate"><span class="pre">dy</span></code>, <code class="docutils literal notranslate"><span class="pre">dz</span></code>, …</li>
<li>N arrays to specify the coordinates of the values along each dimension of F.
The length of the array must match the size of the corresponding dimension</li>
<li>Any combination of N scalars/arrays with the meaning of 2. and 3.</li>
</ol>
<p>This means that, e.g., it is now possible to do the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dx</span> <span class="o">=</span> <span class="mf">2.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">gradient</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="go">[array([[ 1. ,  1. , -0.5], [ 1. ,  1. , -0.5]]),</span>
<span class="go"> array([[ 2. ,  2. ,  2. ], [ 2. ,  1.7,  0.5]])]</span>
</pre></div>
</div>
</div>
<div class="section" id="support-for-returning-arrays-of-arbitrary-dimensions-in-apply-along-axis">
<h4>Support for returning arrays of arbitrary dimensions in <code class="docutils literal notranslate"><span class="pre">apply_along_axis</span></code><a class="headerlink" href="#support-for-returning-arrays-of-arbitrary-dimensions-in-apply-along-axis" title="Permalink to this headline">¶</a></h4>
<p>Previously, only scalars or 1D arrays could be returned by the function passed
to <code class="docutils literal notranslate"><span class="pre">apply_along_axis</span></code>. Now, it can return an array of any dimensionality
(including 0D), and the shape of this array replaces the axis of the array
being iterated over.</p>
</div>
<div class="section" id="ndim-property-added-to-dtype-to-complement-shape">
<h4><code class="docutils literal notranslate"><span class="pre">.ndim</span></code> property added to <code class="docutils literal notranslate"><span class="pre">dtype</span></code> to complement <code class="docutils literal notranslate"><span class="pre">.shape</span></code><a class="headerlink" href="#ndim-property-added-to-dtype-to-complement-shape" title="Permalink to this headline">¶</a></h4>
<p>For consistency with <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> and <code class="docutils literal notranslate"><span class="pre">broadcast</span></code>, <code class="docutils literal notranslate"><span class="pre">d.ndim</span></code> is a shorthand
for <code class="docutils literal notranslate"><span class="pre">len(d.shape)</span></code>.</p>
</div>
<div class="section" id="support-for-tracemalloc-in-python-3-6">
<h4>Support for tracemalloc in Python 3.6<a class="headerlink" href="#support-for-tracemalloc-in-python-3-6" title="Permalink to this headline">¶</a></h4>
<p>NumPy now supports memory tracing with <a class="reference external" href="https://docs.python.org/3/library/tracemalloc.html">tracemalloc</a> module of Python 3.6 or
newer. Memory allocations from NumPy are placed into the domain defined by
<code class="docutils literal notranslate"><span class="pre">numpy.lib.tracemalloc_domain</span></code>.
Note that NumPy allocation will not show up in <a class="reference external" href="https://docs.python.org/3/library/tracemalloc.html">tracemalloc</a> of earlier Python
versions.</p>
</div>
<div class="section" id="numpy-may-be-built-with-relaxed-stride-checking-debugging">
<h4>NumPy may be built with relaxed stride checking debugging<a class="headerlink" href="#numpy-may-be-built-with-relaxed-stride-checking-debugging" title="Permalink to this headline">¶</a></h4>
<p>Setting NPY_RELAXED_STRIDES_DEBUG=1 in the environment when relaxed stride
checking is enabled will cause NumPy to be compiled with the affected strides
set to the maximum value of npy_intp in order to help detect invalid usage of
the strides in downstream projects. When enabled, invalid usage often results
in an error being raised, but the exact type of error depends on the details of
the code. TypeError and OverflowError have been observed in the wild.</p>
<p>It was previously the case that this option was disabled for releases and
enabled in master and changing between the two required editing the code. It is
now disabled by default but can be enabled for test builds.</p>
</div>
</div>
<div class="section" id="id88">
<h3>Improvements<a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h3>
<div class="section" id="ufunc-behavior-for-overlapping-inputs">
<h4>Ufunc behavior for overlapping inputs<a class="headerlink" href="#ufunc-behavior-for-overlapping-inputs" title="Permalink to this headline">¶</a></h4>
<p>Operations where ufunc input and output operands have memory overlap
produced undefined results in previous NumPy versions, due to data
dependency issues. In NumPy 1.13.0, results from such operations are
now defined to be the same as for equivalent operations where there is
no memory overlap.</p>
<p>Operations affected now make temporary copies, as needed to eliminate
data dependency. As detecting these cases is computationally
expensive, a heuristic is used, which may in rare cases result to
needless temporary copies.  For operations where the data dependency
is simple enough for the heuristic to analyze, temporary copies will
not be made even if the arrays overlap, if it can be deduced copies
are not necessary.  As an example,``np.add(a, b, out=a)`` will not
involve copies.</p>
<p>To illustrate a previously undefined operation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">x</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">out</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</pre></div>
</div>
<p>In NumPy 1.13.0 the last line is guaranteed to be equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">x</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">out</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</pre></div>
</div>
<p>A similar operation with simple non-problematic data dependence is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">x</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">out</span><span class="o">=</span><span class="n">x</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<p>It will continue to produce the same results as in previous NumPy
versions, and will not involve unnecessary temporary copies.</p>
<p>The change applies also to in-place binary operations, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">+=</span> <span class="n">x</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
<p>This statement is now guaranteed to be equivalent to <code class="docutils literal notranslate"><span class="pre">x[...]</span> <span class="pre">=</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">x.T</span></code>,
whereas in previous NumPy versions the results were undefined.</p>
</div>
<div class="section" id="partial-support-for-64-bit-f2py-extensions-with-mingw">
<h4>Partial support for 64-bit f2py extensions with MinGW<a class="headerlink" href="#partial-support-for-64-bit-f2py-extensions-with-mingw" title="Permalink to this headline">¶</a></h4>
<p>Extensions that incorporate Fortran libraries can now be built using the free
<a class="reference external" href="https://sf.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/mingw-builds/6.2.0/threads-win32/seh/">MinGW</a> toolset, also under Python 3.5. This works best for extensions that only
do calculations and uses the runtime modestly (reading and writing from files,
for instance). Note that this does not remove the need for Mingwpy; if you make
extensive use of the runtime, you will most likely run into <a class="reference external" href="https://mingwpy.github.io/issues.html">issues</a>. Instead,
it should be regarded as a band-aid until Mingwpy is fully functional.</p>
<p>Extensions can also be compiled using the MinGW toolset using the runtime
library from the (moveable) WinPython 3.4 distribution, which can be useful for
programs with a PySide1/Qt4 front-end.</p>
</div>
<div class="section" id="performance-improvements-for-packbits-and-unpackbits">
<h4>Performance improvements for <code class="docutils literal notranslate"><span class="pre">packbits</span></code> and <code class="docutils literal notranslate"><span class="pre">unpackbits</span></code><a class="headerlink" href="#performance-improvements-for-packbits-and-unpackbits" title="Permalink to this headline">¶</a></h4>
<p>The functions <code class="docutils literal notranslate"><span class="pre">numpy.packbits</span></code> with boolean input and <code class="docutils literal notranslate"><span class="pre">numpy.unpackbits</span></code> have
been optimized to be a significantly faster for contiguous data.</p>
</div>
<div class="section" id="fix-for-ppc-long-double-floating-point-information">
<h4>Fix for PPC long double floating point information<a class="headerlink" href="#fix-for-ppc-long-double-floating-point-information" title="Permalink to this headline">¶</a></h4>
<p>In previous versions of NumPy, the <code class="docutils literal notranslate"><span class="pre">finfo</span></code> function returned invalid
information about the <a class="reference external" href="https://en.wikipedia.org/wiki/Quadruple-precision_floating-point_format#Double-double_arithmetic">double double</a> format of the <code class="docutils literal notranslate"><span class="pre">longdouble</span></code> float type
on Power PC (PPC).  The invalid values resulted from the failure of the NumPy
algorithm to deal with the variable number of digits in the significand
that are a feature of <em class="xref py py-obj">PPC long doubles</em>.  This release by-passes the failing
algorithm by using heuristics to detect the presence of the PPC double double
format.  A side-effect of using these heuristics is that the <code class="docutils literal notranslate"><span class="pre">finfo</span></code>
function is faster than previous releases.</p>
</div>
<div class="section" id="better-default-repr-for-ndarray-subclasses">
<h4>Better default repr for <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> subclasses<a class="headerlink" href="#better-default-repr-for-ndarray-subclasses" title="Permalink to this headline">¶</a></h4>
<p>Subclasses of ndarray with no <code class="docutils literal notranslate"><span class="pre">repr</span></code> specialization now correctly indent
their data and type lines.</p>
</div>
<div class="section" id="more-reliable-comparisons-of-masked-arrays">
<h4>More reliable comparisons of masked arrays<a class="headerlink" href="#more-reliable-comparisons-of-masked-arrays" title="Permalink to this headline">¶</a></h4>
<p>Comparisons of masked arrays were buggy for masked scalars and failed for
structured arrays with dimension higher than one. Both problems are now
solved. In the process, it was ensured that in getting the result for a
structured array, masked fields are properly ignored, i.e., the result is equal
if all fields that are non-masked in both are equal, thus making the behaviour
identical to what one gets by comparing an unstructured masked array and then
doing <code class="docutils literal notranslate"><span class="pre">.all()</span></code> over some axis.</p>
</div>
<div class="section" id="np-matrix-with-booleans-elements-can-now-be-created-using-the-string-syntax">
<h4>np.matrix with booleans elements can now be created using the string syntax<a class="headerlink" href="#np-matrix-with-booleans-elements-can-now-be-created-using-the-string-syntax" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">np.matrix</span></code> failed whenever one attempts to use it with booleans, e.g.,
<code class="docutils literal notranslate"><span class="pre">np.matrix('True')</span></code>. Now, this works as expected.</p>
</div>
<div class="section" id="more-linalg-operations-now-accept-empty-vectors-and-matrices">
<h4>More <code class="docutils literal notranslate"><span class="pre">linalg</span></code> operations now accept empty vectors and matrices<a class="headerlink" href="#more-linalg-operations-now-accept-empty-vectors-and-matrices" title="Permalink to this headline">¶</a></h4>
<p>All of the following functions in <code class="docutils literal notranslate"><span class="pre">np.linalg</span></code> now work when given input
arrays with a 0 in the last two dimensions: <code class="docutils literal notranslate"><span class="pre">det</span></code>, <code class="docutils literal notranslate"><span class="pre">slogdet</span></code>, <code class="docutils literal notranslate"><span class="pre">pinv</span></code>,
<code class="docutils literal notranslate"><span class="pre">eigvals</span></code>, <code class="docutils literal notranslate"><span class="pre">eigvalsh</span></code>, <code class="docutils literal notranslate"><span class="pre">eig</span></code>, <code class="docutils literal notranslate"><span class="pre">eigh</span></code>.</p>
</div>
<div class="section" id="bundled-version-of-lapack-is-now-3-2-2">
<h4>Bundled version of LAPACK is now 3.2.2<a class="headerlink" href="#bundled-version-of-lapack-is-now-3-2-2" title="Permalink to this headline">¶</a></h4>
<p>NumPy comes bundled with a minimal implementation of lapack for systems without
a lapack library installed, under the name of <code class="docutils literal notranslate"><span class="pre">lapack_lite</span></code>. This has been
upgraded from LAPACK 3.0.0 (June 30, 1999) to LAPACK 3.2.2 (June 30, 2010). See
the <a class="reference external" href="http://www.netlib.org/lapack/release_notes.html#_4_history_of_lapack_releases">LAPACK changelogs</a> for details on the all the changes this entails.</p>
<p>While no new features are exposed through <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, this fixes some bugs
regarding “workspace” sizes, and in some places may use faster algorithms.</p>
</div>
<div class="section" id="reduce-of-np-hypot-reduce-and-np-logical-xor-allowed-in-more-cases">
<h4><code class="docutils literal notranslate"><span class="pre">reduce</span></code> of <code class="docutils literal notranslate"><span class="pre">np.hypot.reduce</span></code> and <code class="docutils literal notranslate"><span class="pre">np.logical_xor</span></code> allowed in more cases<a class="headerlink" href="#reduce-of-np-hypot-reduce-and-np-logical-xor-allowed-in-more-cases" title="Permalink to this headline">¶</a></h4>
<p>This now works on empty arrays, returning 0, and can reduce over multiple axes.
Previously, a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> was thrown in these cases.</p>
</div>
<div class="section" id="better-repr-of-object-arrays">
<h4>Better <code class="docutils literal notranslate"><span class="pre">repr</span></code> of object arrays<a class="headerlink" href="#better-repr-of-object-arrays" title="Permalink to this headline">¶</a></h4>
<p>Object arrays that contain themselves no longer cause a recursion error.</p>
<p>Object arrays that contain <code class="docutils literal notranslate"><span class="pre">list</span></code> objects are now printed in a way that makes
clear the difference between a 2d object array, and a 1d object array of lists.</p>
</div>
</div>
<div class="section" id="id89">
<h3>Changes<a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h3>
<div class="section" id="argsort-on-masked-arrays-takes-the-same-default-arguments-as-sort">
<h4><code class="docutils literal notranslate"><span class="pre">argsort</span></code> on masked arrays takes the same default arguments as <code class="docutils literal notranslate"><span class="pre">sort</span></code><a class="headerlink" href="#argsort-on-masked-arrays-takes-the-same-default-arguments-as-sort" title="Permalink to this headline">¶</a></h4>
<p>By default, <code class="docutils literal notranslate"><span class="pre">argsort</span></code> now places the masked values at the end of the sorted
array, in the same way that <code class="docutils literal notranslate"><span class="pre">sort</span></code> already did. Additionally, the
<code class="docutils literal notranslate"><span class="pre">end_with</span></code> argument is added to <code class="docutils literal notranslate"><span class="pre">argsort</span></code>, for consistency with <code class="docutils literal notranslate"><span class="pre">sort</span></code>.
Note that this argument is not added at the end, so breaks any code that
passed <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> as a positional argument.</p>
</div>
<div class="section" id="average-now-preserves-subclasses">
<h4><code class="docutils literal notranslate"><span class="pre">average</span></code> now preserves subclasses<a class="headerlink" href="#average-now-preserves-subclasses" title="Permalink to this headline">¶</a></h4>
<p>For ndarray subclasses, <code class="docutils literal notranslate"><span class="pre">numpy.average</span></code> will now return an instance of the
subclass, matching the behavior of most other NumPy functions such as <code class="docutils literal notranslate"><span class="pre">mean</span></code>.
As a consequence, also calls that returned a scalar may now return a subclass
array scalar.</p>
</div>
<div class="section" id="array-none-and-array-none-do-element-wise-comparison">
<h4><code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">==</span> <span class="pre">None</span></code> and <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">!=</span> <span class="pre">None</span></code> do element-wise comparison<a class="headerlink" href="#array-none-and-array-none-do-element-wise-comparison" title="Permalink to this headline">¶</a></h4>
<p>Previously these operations returned scalars <code class="docutils literal notranslate"><span class="pre">False</span></code> and <code class="docutils literal notranslate"><span class="pre">True</span></code> respectively.</p>
</div>
<div class="section" id="np-equal-np-not-equal-for-object-arrays-ignores-object-identity">
<h4><code class="docutils literal notranslate"><span class="pre">np.equal,</span> <span class="pre">np.not_equal</span></code> for object arrays ignores object identity<a class="headerlink" href="#np-equal-np-not-equal-for-object-arrays-ignores-object-identity" title="Permalink to this headline">¶</a></h4>
<p>Previously, these functions always treated identical objects as equal. This had
the effect of overriding comparison failures, comparison of objects that did
not return booleans, such as np.arrays, and comparison of objects where the
results differed from object identity, such as NaNs.</p>
</div>
<div class="section" id="boolean-indexing-changes">
<h4>Boolean indexing changes<a class="headerlink" href="#boolean-indexing-changes" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Boolean array-likes (such as lists of python bools) are always treated as
boolean indexes.</li>
<li>Boolean scalars (including python <code class="docutils literal notranslate"><span class="pre">True</span></code>) are legal boolean indexes and
never treated as integers.</li>
<li>Boolean indexes must match the dimension of the axis that they index.</li>
<li>Boolean indexes used on the lhs of an assignment must match the dimensions of
the rhs.</li>
<li>Boolean indexing into scalar arrays return a new 1-d array.  This means that
<code class="docutils literal notranslate"><span class="pre">array(1)[array(True)]</span></code> gives <code class="docutils literal notranslate"><span class="pre">array([1])</span></code> and not the original array.</li>
</ul>
</div>
<div class="section" id="np-random-multivariate-normal-behavior-with-bad-covariance-matrix">
<h4><code class="docutils literal notranslate"><span class="pre">np.random.multivariate_normal</span></code> behavior with bad covariance matrix<a class="headerlink" href="#np-random-multivariate-normal-behavior-with-bad-covariance-matrix" title="Permalink to this headline">¶</a></h4>
<p>It is now possible to adjust the behavior the function will have when dealing
with the covariance matrix by using two new keyword arguments:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">tol</span></code> can be used to specify a tolerance to use when checking that
the covariance matrix is positive semidefinite.</li>
<li><code class="docutils literal notranslate"><span class="pre">check_valid</span></code> can be used to configure what the function will do in the
presence of a matrix that is not positive semidefinite. Valid options are
<code class="docutils literal notranslate"><span class="pre">ignore</span></code>, <code class="docutils literal notranslate"><span class="pre">warn</span></code> and <code class="docutils literal notranslate"><span class="pre">raise</span></code>. The default value, <code class="docutils literal notranslate"><span class="pre">warn</span></code> keeps the
the behavior used on previous releases.</li>
</ul>
</div>
<div class="section" id="assert-array-less-compares-np-inf-and-np-inf-now">
<h4><code class="docutils literal notranslate"><span class="pre">assert_array_less</span></code> compares <code class="docutils literal notranslate"><span class="pre">np.inf</span></code> and <code class="docutils literal notranslate"><span class="pre">-np.inf</span></code> now<a class="headerlink" href="#assert-array-less-compares-np-inf-and-np-inf-now" title="Permalink to this headline">¶</a></h4>
<p>Previously, <code class="docutils literal notranslate"><span class="pre">np.testing.assert_array_less</span></code> ignored all infinite values. This
is not the expected behavior both according to documentation and intuitively.
Now, -inf &lt; x &lt; inf is considered <code class="docutils literal notranslate"><span class="pre">True</span></code> for any real number x and all
other cases fail.</p>
</div>
<div class="section" id="assert-array-and-masked-arrays-assert-equal-hide-less-warnings">
<h4><code class="docutils literal notranslate"><span class="pre">assert_array_</span></code> and masked arrays <code class="docutils literal notranslate"><span class="pre">assert_equal</span></code> hide less warnings<a class="headerlink" href="#assert-array-and-masked-arrays-assert-equal-hide-less-warnings" title="Permalink to this headline">¶</a></h4>
<p>Some warnings that were previously hidden by the <code class="docutils literal notranslate"><span class="pre">assert_array_</span></code>
functions are not hidden anymore. In most cases the warnings should be
correct and, should they occur, will require changes to the tests using
these functions.
For the masked array <code class="docutils literal notranslate"><span class="pre">assert_equal</span></code> version, warnings may occur when
comparing NaT. The function presently does not handle NaT or NaN
specifically and it may be best to avoid it at this time should a warning
show up due to this change.</p>
</div>
<div class="section" id="offset-attribute-value-in-memmap-objects">
<h4><code class="docutils literal notranslate"><span class="pre">offset</span></code> attribute value in <code class="docutils literal notranslate"><span class="pre">memmap</span></code> objects<a class="headerlink" href="#offset-attribute-value-in-memmap-objects" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">offset</span></code> attribute in a <code class="docutils literal notranslate"><span class="pre">memmap</span></code> object is now set to the
offset into the file. This is a behaviour change only for offsets
greater than <code class="docutils literal notranslate"><span class="pre">mmap.ALLOCATIONGRANULARITY</span></code>.</p>
</div>
<div class="section" id="np-real-and-np-imag-return-scalars-for-scalar-inputs">
<h4><code class="docutils literal notranslate"><span class="pre">np.real</span></code> and <code class="docutils literal notranslate"><span class="pre">np.imag</span></code> return scalars for scalar inputs<a class="headerlink" href="#np-real-and-np-imag-return-scalars-for-scalar-inputs" title="Permalink to this headline">¶</a></h4>
<p>Previously, <code class="docutils literal notranslate"><span class="pre">np.real</span></code> and <code class="docutils literal notranslate"><span class="pre">np.imag</span></code> used to return array objects when
provided a scalar input, which was inconsistent with other functions like
<code class="docutils literal notranslate"><span class="pre">np.angle</span></code> and <code class="docutils literal notranslate"><span class="pre">np.conj</span></code>.</p>
</div>
<div class="section" id="the-polynomial-convenience-classes-cannot-be-passed-to-ufuncs">
<h4>The polynomial convenience classes cannot be passed to ufuncs<a class="headerlink" href="#the-polynomial-convenience-classes-cannot-be-passed-to-ufuncs" title="Permalink to this headline">¶</a></h4>
<p>The ABCPolyBase class, from which the convenience classes are derived, sets
<code class="docutils literal notranslate"><span class="pre">__array_ufun__</span> <span class="pre">=</span> <span class="pre">None</span></code> in order of opt out of ufuncs. If a polynomial
convenience class instance is passed as an argument to a ufunc, a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>
will now be raised.</p>
</div>
<div class="section" id="output-arguments-to-ufuncs-can-be-tuples-also-for-ufunc-methods">
<h4>Output arguments to ufuncs can be tuples also for ufunc methods<a class="headerlink" href="#output-arguments-to-ufuncs-can-be-tuples-also-for-ufunc-methods" title="Permalink to this headline">¶</a></h4>
<p>For calls to ufuncs, it was already possible, and recommended, to use an
<code class="docutils literal notranslate"><span class="pre">out</span></code> argument with a tuple for ufuncs with multiple outputs. This has now
been extended to output arguments in the <code class="docutils literal notranslate"><span class="pre">reduce</span></code>, <code class="docutils literal notranslate"><span class="pre">accumulate</span></code>, and
<code class="docutils literal notranslate"><span class="pre">reduceat</span></code> methods. This is mostly for compatibility with <code class="docutils literal notranslate"><span class="pre">__array_ufunc</span></code>;
there are no ufuncs yet that have more than one output.</p>
</div>
</div>
</div>
<div class="section" id="numpy-1-12-1-release-notes">
<h2>NumPy 1.12.1 Release Notes<a class="headerlink" href="#numpy-1-12-1-release-notes" title="Permalink to this headline">¶</a></h2>
<p>NumPy 1.12.1 supports Python 2.7 and 3.4 - 3.6 and fixes bugs and regressions
found in NumPy 1.12.0. In particular, the regression in f2py constant parsing
is fixed. Wheels for Linux, Windows, and OSX can be found on pypi,</p>
<div class="section" id="bugs-fixed">
<h3>Bugs Fixed<a class="headerlink" href="#bugs-fixed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>BUG: Fix wrong future nat warning and equiv type logic error…</li>
<li>BUG: Fix wrong masked median for some special cases</li>
<li>DOC: Place np.average in inline code</li>
<li>TST: Work around isfinite inconsistency on i386</li>
<li>BUG: Guard against replacing constants without ‘_’ spec in f2py.</li>
<li>BUG: Fix mean for float 16 non-array inputs for 1.12</li>
<li>BUG: Fix calling python api with error set and minor leaks for…</li>
<li>BUG: Make iscomplexobj compatible with custom dtypes again</li>
<li>BUG: Fix undefined behaviour induced by bad __array_wrap__</li>
<li>BUG: Fix MaskedArray.__setitem__</li>
<li>BUG: PPC64el machines are POWER for Fortran in f2py</li>
<li>BUG: Look up methods on MaskedArray in <em class="xref py py-obj">_frommethod</em></li>
<li>BUG: Remove extra digit in binary_repr at limit</li>
<li>BUG: Fix deepcopy regression for empty arrays.</li>
<li>BUG: Fix ma.median for empty ndarrays</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-12-0-release-notes">
<h2>NumPy 1.12.0 Release Notes<a class="headerlink" href="#numpy-1-12-0-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This release supports Python 2.7 and 3.4 - 3.6.</p>
<div class="section" id="id90">
<h3>Highlights<a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h3>
<p>The NumPy 1.12.0 release contains a large number of fixes and improvements, but
few that stand out above all others. That makes picking out the highlights
somewhat arbitrary but the following may be of particular interest or indicate
areas likely to have future consequences.</p>
<ul class="simple">
<li>Order of operations in <code class="docutils literal notranslate"><span class="pre">np.einsum</span></code> can now be optimized for large speed improvements.</li>
<li>New <code class="docutils literal notranslate"><span class="pre">signature</span></code> argument to <code class="docutils literal notranslate"><span class="pre">np.vectorize</span></code> for vectorizing with core dimensions.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">keepdims</span></code> argument was added to many functions.</li>
<li>New context manager for testing warnings</li>
<li>Support for BLIS in numpy.distutils</li>
<li>Much improved support for PyPy (not yet finished)</li>
</ul>
</div>
<div class="section" id="dropped-support">
<h3>Dropped Support<a class="headerlink" href="#dropped-support" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Support for Python 2.6, 3.2, and 3.3 has been dropped.</li>
</ul>
</div>
<div class="section" id="added-support">
<h3>Added Support<a class="headerlink" href="#added-support" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Support for PyPy 2.7 v5.6.0 has been added. While not complete (nditer
<code class="docutils literal notranslate"><span class="pre">updateifcopy</span></code> is not supported yet), this is a milestone for PyPy’s
C-API compatibility layer.</li>
</ul>
</div>
<div class="section" id="id91">
<h3>Build System Changes<a class="headerlink" href="#id91" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Library order is preserved, instead of being reordered to match that of
the directories.</li>
</ul>
</div>
<div class="section" id="id92">
<h3>Deprecations<a class="headerlink" href="#id92" title="Permalink to this headline">¶</a></h3>
<div class="section" id="assignment-of-ndarray-object-s-data-attribute">
<h4>Assignment of ndarray object’s <code class="docutils literal notranslate"><span class="pre">data</span></code> attribute<a class="headerlink" href="#assignment-of-ndarray-object-s-data-attribute" title="Permalink to this headline">¶</a></h4>
<p>Assigning the ‘data’ attribute is an inherently unsafe operation as pointed
out in gh-7083. Such a capability will be removed in the future.</p>
</div>
<div class="section" id="unsafe-int-casting-of-the-num-attribute-in-linspace">
<h4>Unsafe int casting of the num attribute in <code class="docutils literal notranslate"><span class="pre">linspace</span></code><a class="headerlink" href="#unsafe-int-casting-of-the-num-attribute-in-linspace" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">np.linspace</span></code> now raises DeprecationWarning when num cannot be safely
interpreted as an integer.</p>
</div>
<div class="section" id="insufficient-bit-width-parameter-to-binary-repr">
<h4>Insufficient bit width parameter to <code class="docutils literal notranslate"><span class="pre">binary_repr</span></code><a class="headerlink" href="#insufficient-bit-width-parameter-to-binary-repr" title="Permalink to this headline">¶</a></h4>
<p>If a ‘width’ parameter is passed into <code class="docutils literal notranslate"><span class="pre">binary_repr</span></code> that is insufficient to
represent the number in base 2 (positive) or 2’s complement (negative) form,
the function used to silently ignore the parameter and return a representation
using the minimal number of bits needed for the form in question. Such behavior
is now considered unsafe from a user perspective and will raise an error in the
future.</p>
</div>
</div>
<div class="section" id="id93">
<h3>Future Changes<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>In 1.13 NAT will always compare False except for <code class="docutils literal notranslate"><span class="pre">NAT</span> <span class="pre">!=</span> <span class="pre">NAT</span></code>,
which will be True.  In short, NAT will behave like NaN</li>
<li>In 1.13 <code class="docutils literal notranslate"><span class="pre">np.average</span></code> will preserve subclasses, to match the behavior of most
other numpy functions such as np.mean. In particular, this means calls which
returned a scalar may return a 0-d subclass object instead.</li>
</ul>
<div class="section" id="multiple-field-manipulation-of-structured-arrays">
<h4>Multiple-field manipulation of structured arrays<a class="headerlink" href="#multiple-field-manipulation-of-structured-arrays" title="Permalink to this headline">¶</a></h4>
<p>In 1.13 the behavior of structured arrays involving multiple fields will change
in two ways:</p>
<p>First, indexing a structured array with multiple fields (eg,
<code class="docutils literal notranslate"><span class="pre">arr[['f1',</span> <span class="pre">'f3']]</span></code>) will return a view into the original array in 1.13,
instead of a copy. Note the returned view will have extra padding bytes
corresponding to intervening fields in the original array, unlike the copy in
1.12, which will affect code such as <code class="docutils literal notranslate"><span class="pre">arr[['f1',</span> <span class="pre">'f3']].view(newdtype)</span></code>.</p>
<p>Second, for numpy versions 1.6 to 1.12 assignment between structured arrays
occurs “by field name”: Fields in the destination array are set to the
identically-named field in the source array or to 0 if the source does not have
a field:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)],</span> <span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;i4&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;i4&#39;</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="s1">&#39;i4&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;i4&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;i4&#39;</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">a</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">array([(0, 2, 1), (0, 4, 3)],</span>
<span class="go">      dtype=[(&#39;z&#39;, &#39;&lt;i4&#39;), (&#39;y&#39;, &#39;&lt;i4&#39;), (&#39;x&#39;, &#39;&lt;i4&#39;)])</span>
</pre></div>
</div>
<p>In 1.13 assignment will instead occur “by position”: The Nth field of the
destination will be set to the Nth field of the source regardless of field
name. The old behavior can be obtained by using indexing to reorder the fields
before
assignment, e.g., <code class="docutils literal notranslate"><span class="pre">b[['x',</span> <span class="pre">'y']]</span> <span class="pre">=</span> <span class="pre">a[['y',</span> <span class="pre">'x']]</span></code>.</p>
</div>
</div>
<div class="section" id="id94">
<h3>Compatibility notes<a class="headerlink" href="#id94" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id95">
<h4>DeprecationWarning to error<a class="headerlink" href="#id95" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Indexing with floats raises <code class="docutils literal notranslate"><span class="pre">IndexError</span></code>,
e.g., a[0, 0.0].</li>
<li>Indexing with non-integer array_like raises <code class="docutils literal notranslate"><span class="pre">IndexError</span></code>,
e.g., <code class="docutils literal notranslate"><span class="pre">a['1',</span> <span class="pre">'2']</span></code></li>
<li>Indexing with multiple ellipsis raises <code class="docutils literal notranslate"><span class="pre">IndexError</span></code>,
e.g., <code class="docutils literal notranslate"><span class="pre">a[...,</span> <span class="pre">...]</span></code>.</li>
<li>Non-integers used as index values raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>,
e.g., in <code class="docutils literal notranslate"><span class="pre">reshape</span></code>, <code class="docutils literal notranslate"><span class="pre">take</span></code>, and specifying reduce axis.</li>
</ul>
</div>
<div class="section" id="id96">
<h4>FutureWarning to changed behavior<a class="headerlink" href="#id96" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">np.full</span></code> now returns an array of the fill-value’s dtype if no dtype is
given, instead of defaulting to float.</li>
<li><code class="docutils literal notranslate"><span class="pre">np.average</span></code> will emit a warning if the argument is a subclass of ndarray,
as the subclass will be preserved starting in 1.13. (see Future Changes)</li>
</ul>
</div>
<div class="section" id="power-and-raise-errors-for-integer-to-negative-integer-powers">
<h4><code class="docutils literal notranslate"><span class="pre">power</span></code> and <code class="docutils literal notranslate"><span class="pre">**</span></code> raise errors for integer to negative integer powers<a class="headerlink" href="#power-and-raise-errors-for-integer-to-negative-integer-powers" title="Permalink to this headline">¶</a></h4>
<p>The previous behavior depended on whether numpy scalar integers or numpy
integer arrays were involved.</p>
<p>For arrays</p>
<ul class="simple">
<li>Zero to negative integer powers returned least integral value.</li>
<li>Both 1, -1 to negative integer powers returned correct values.</li>
<li>The remaining integers returned zero when raised to negative integer powers.</li>
</ul>
<p>For scalars</p>
<ul class="simple">
<li>Zero to negative integer powers returned least integral value.</li>
<li>Both 1, -1 to negative integer powers returned correct values.</li>
<li>The remaining integers sometimes returned zero, sometimes the
correct float depending on the integer type combination.</li>
</ul>
<p>All of these cases now raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> except for those integer
combinations whose common type is float, for instance uint64 and int8. It was
felt that a simple rule was the best way to go rather than have special
exceptions for the integer units. If you need negative powers, use an inexact
type.</p>
</div>
<div class="section" id="relaxed-stride-checking-is-the-default">
<h4>Relaxed stride checking is the default<a class="headerlink" href="#relaxed-stride-checking-is-the-default" title="Permalink to this headline">¶</a></h4>
<p>This will have some impact on code that assumed that <code class="docutils literal notranslate"><span class="pre">F_CONTIGUOUS</span></code> and
<code class="docutils literal notranslate"><span class="pre">C_CONTIGUOUS</span></code> were mutually exclusive and could be set to determine the
default order for arrays that are now both.</p>
</div>
<div class="section" id="the-np-percentile-midpoint-interpolation-method-fixed-for-exact-indices">
<h4>The <code class="docutils literal notranslate"><span class="pre">np.percentile</span></code> ‘midpoint’ interpolation method fixed for exact indices<a class="headerlink" href="#the-np-percentile-midpoint-interpolation-method-fixed-for-exact-indices" title="Permalink to this headline">¶</a></h4>
<p>The ‘midpoint’ interpolator now gives the same result as ‘lower’ and ‘higher’ when
the two coincide. Previous behavior of ‘lower’ + 0.5 is fixed.</p>
</div>
<div class="section" id="keepdims-kwarg-is-passed-through-to-user-class-methods">
<h4><code class="docutils literal notranslate"><span class="pre">keepdims</span></code> kwarg is passed through to user-class methods<a class="headerlink" href="#keepdims-kwarg-is-passed-through-to-user-class-methods" title="Permalink to this headline">¶</a></h4>
<p>numpy functions that take a <code class="docutils literal notranslate"><span class="pre">keepdims</span></code> kwarg now pass the value
through to the corresponding methods on ndarray sub-classes.  Previously the
<code class="docutils literal notranslate"><span class="pre">keepdims</span></code> keyword would be silently dropped.  These functions now have
the following behavior:</p>
<ol class="arabic simple">
<li>If user does not provide <code class="docutils literal notranslate"><span class="pre">keepdims</span></code>, no keyword is passed to the underlying
method.</li>
<li>Any user-provided value of <code class="docutils literal notranslate"><span class="pre">keepdims</span></code> is passed through as a keyword
argument to the method.</li>
</ol>
<p>This will raise in the case where the method does not support a
<code class="docutils literal notranslate"><span class="pre">keepdims</span></code> kwarg and the user explicitly passes in <code class="docutils literal notranslate"><span class="pre">keepdims</span></code>.</p>
<p>The following functions are changed: <code class="docutils literal notranslate"><span class="pre">sum</span></code>, <code class="docutils literal notranslate"><span class="pre">product</span></code>,
<code class="docutils literal notranslate"><span class="pre">sometrue</span></code>, <code class="docutils literal notranslate"><span class="pre">alltrue</span></code>, <code class="docutils literal notranslate"><span class="pre">any</span></code>, <code class="docutils literal notranslate"><span class="pre">all</span></code>, <code class="docutils literal notranslate"><span class="pre">amax</span></code>, <code class="docutils literal notranslate"><span class="pre">amin</span></code>,
<code class="docutils literal notranslate"><span class="pre">prod</span></code>, <code class="docutils literal notranslate"><span class="pre">mean</span></code>, <code class="docutils literal notranslate"><span class="pre">std</span></code>, <code class="docutils literal notranslate"><span class="pre">var</span></code>, <code class="docutils literal notranslate"><span class="pre">nanmin</span></code>, <code class="docutils literal notranslate"><span class="pre">nanmax</span></code>,
<code class="docutils literal notranslate"><span class="pre">nansum</span></code>, <code class="docutils literal notranslate"><span class="pre">nanprod</span></code>, <code class="docutils literal notranslate"><span class="pre">nanmean</span></code>, <code class="docutils literal notranslate"><span class="pre">nanmedian</span></code>, <code class="docutils literal notranslate"><span class="pre">nanvar</span></code>,
<code class="docutils literal notranslate"><span class="pre">nanstd</span></code></p>
</div>
<div class="section" id="bitwise-and-identity-changed">
<h4><code class="docutils literal notranslate"><span class="pre">bitwise_and</span></code> identity changed<a class="headerlink" href="#bitwise-and-identity-changed" title="Permalink to this headline">¶</a></h4>
<p>The previous identity was 1, it is now -1. See entry in Improvements for
more explanation.</p>
</div>
<div class="section" id="ma-median-warns-and-returns-nan-when-unmasked-invalid-values-are-encountered">
<h4>ma.median warns and returns nan when unmasked invalid values are encountered<a class="headerlink" href="#ma-median-warns-and-returns-nan-when-unmasked-invalid-values-are-encountered" title="Permalink to this headline">¶</a></h4>
<p>Similar to unmasked median the masked median <a class="reference internal" href="reference/generated/numpy.ma.median.html#numpy.ma.median" title="numpy.ma.median"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ma.median</span></code></a> now emits a Runtime
warning and returns <a class="reference internal" href="reference/constants.html#numpy.NaN" title="numpy.NaN"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NaN</span></code></a> in slices where an unmasked <a class="reference internal" href="reference/constants.html#numpy.NaN" title="numpy.NaN"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NaN</span></code></a> is present.</p>
</div>
<div class="section" id="greater-consistency-in-assert-almost-equal">
<h4>Greater consistency in <code class="docutils literal notranslate"><span class="pre">assert_almost_equal</span></code><a class="headerlink" href="#greater-consistency-in-assert-almost-equal" title="Permalink to this headline">¶</a></h4>
<p>The precision check for scalars has been changed to match that for arrays. It
is now:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">abs</span><span class="p">(</span><span class="n">actual</span> <span class="o">-</span> <span class="n">desired</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="n">decimal</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that this is looser than previously documented, but agrees with the
previous implementation used in <code class="docutils literal notranslate"><span class="pre">assert_array_almost_equal</span></code>. Due to the
change in implementation some very delicate tests may fail that did not
fail before.</p>
</div>
<div class="section" id="nosetester-behaviour-of-warnings-during-testing">
<h4><code class="docutils literal notranslate"><span class="pre">NoseTester</span></code> behaviour of warnings during testing<a class="headerlink" href="#nosetester-behaviour-of-warnings-during-testing" title="Permalink to this headline">¶</a></h4>
<p>When <code class="docutils literal notranslate"><span class="pre">raise_warnings=&quot;develop&quot;</span></code> is given, all uncaught warnings will now
be considered a test failure. Previously only selected ones were raised.
Warnings which are not caught or raised (mostly when in release mode)
will be shown once during the test cycle similar to the default python
settings.</p>
</div>
<div class="section" id="assert-warns-and-deprecated-decorator-more-specific">
<h4><code class="docutils literal notranslate"><span class="pre">assert_warns</span></code> and <code class="docutils literal notranslate"><span class="pre">deprecated</span></code> decorator more specific<a class="headerlink" href="#assert-warns-and-deprecated-decorator-more-specific" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">assert_warns</span></code> function and context manager are now more specific
to the given warning category. This increased specificity leads to them
being handled according to the outer warning settings. This means that
no warning may be raised in cases where a wrong category warning is given
and ignored outside the context. Alternatively the increased specificity
may mean that warnings that were incorrectly ignored will now be shown
or raised. See also the new <code class="docutils literal notranslate"><span class="pre">suppress_warnings</span></code> context manager.
The same is true for the <code class="docutils literal notranslate"><span class="pre">deprecated</span></code> decorator.</p>
</div>
<div class="section" id="id97">
<h4>C API<a class="headerlink" href="#id97" title="Permalink to this headline">¶</a></h4>
<p>No changes.</p>
</div>
</div>
<div class="section" id="id98">
<h3>New Features<a class="headerlink" href="#id98" title="Permalink to this headline">¶</a></h3>
<div class="section" id="writeable-keyword-argument-for-as-strided">
<h4>Writeable keyword argument for <code class="docutils literal notranslate"><span class="pre">as_strided</span></code><a class="headerlink" href="#writeable-keyword-argument-for-as-strided" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">np.lib.stride_tricks.as_strided</span></code> now has a <code class="docutils literal notranslate"><span class="pre">writeable</span></code>
keyword argument. It can be set to False when no write operation
to the returned array is expected to avoid accidental
unpredictable writes.</p>
</div>
<div class="section" id="axes-keyword-argument-for-rot90">
<h4><code class="docutils literal notranslate"><span class="pre">axes</span></code> keyword argument for <code class="docutils literal notranslate"><span class="pre">rot90</span></code><a class="headerlink" href="#axes-keyword-argument-for-rot90" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">axes</span></code> keyword argument in <code class="docutils literal notranslate"><span class="pre">rot90</span></code> determines the plane in which the
array is rotated. It defaults to <code class="docutils literal notranslate"><span class="pre">axes=(0,1)</span></code> as in the original function.</p>
</div>
<div class="section" id="generalized-flip">
<h4>Generalized <code class="docutils literal notranslate"><span class="pre">flip</span></code><a class="headerlink" href="#generalized-flip" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">flipud</span></code> and <code class="docutils literal notranslate"><span class="pre">fliplr</span></code> reverse the elements of an array along axis=0 and
axis=1 respectively. The newly added <code class="docutils literal notranslate"><span class="pre">flip</span></code> function reverses the elements of
an array along any given axis.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">np.count_nonzero</span></code> now has an <code class="docutils literal notranslate"><span class="pre">axis</span></code> parameter, allowing
non-zero counts to be generated on more than just a flattened
array object.</li>
</ul>
</div>
<div class="section" id="blis-support-in-numpy-distutils">
<h4>BLIS support in <code class="docutils literal notranslate"><span class="pre">numpy.distutils</span></code><a class="headerlink" href="#blis-support-in-numpy-distutils" title="Permalink to this headline">¶</a></h4>
<p>Building against the BLAS implementation provided by the BLIS library is now
supported.  See the <code class="docutils literal notranslate"><span class="pre">[blis]</span></code> section in <code class="docutils literal notranslate"><span class="pre">site.cfg.example</span></code> (in the root of
the numpy repo or source distribution).</p>
</div>
<div class="section" id="hook-in-numpy-init-py-to-run-distribution-specific-checks">
<h4>Hook in <code class="docutils literal notranslate"><span class="pre">numpy/__init__.py</span></code> to run distribution-specific checks<a class="headerlink" href="#hook-in-numpy-init-py-to-run-distribution-specific-checks" title="Permalink to this headline">¶</a></h4>
<p>Binary distributions of numpy may need to run specific hardware checks or load
specific libraries during numpy initialization.  For example, if we are
distributing numpy with a BLAS library that requires SSE2 instructions, we
would like to check the machine on which numpy is running does have SSE2 in
order to give an informative error.</p>
<p>Add a hook in <code class="docutils literal notranslate"><span class="pre">numpy/__init__.py</span></code> to import a <code class="docutils literal notranslate"><span class="pre">numpy/_distributor_init.py</span></code>
file that will remain empty (bar a docstring) in the standard numpy source,
but that can be overwritten by people making binary distributions of numpy.</p>
</div>
<div class="section" id="new-nanfunctions-nancumsum-and-nancumprod-added">
<h4>New nanfunctions <code class="docutils literal notranslate"><span class="pre">nancumsum</span></code> and <code class="docutils literal notranslate"><span class="pre">nancumprod</span></code> added<a class="headerlink" href="#new-nanfunctions-nancumsum-and-nancumprod-added" title="Permalink to this headline">¶</a></h4>
<p>Nan-functions <code class="docutils literal notranslate"><span class="pre">nancumsum</span></code> and <code class="docutils literal notranslate"><span class="pre">nancumprod</span></code> have been added to
compute <code class="docutils literal notranslate"><span class="pre">cumsum</span></code> and <code class="docutils literal notranslate"><span class="pre">cumprod</span></code> by ignoring nans.</p>
</div>
<div class="section" id="np-interp-can-now-interpolate-complex-values">
<h4><code class="docutils literal notranslate"><span class="pre">np.interp</span></code> can now interpolate complex values<a class="headerlink" href="#np-interp-can-now-interpolate-complex-values" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">np.lib.interp(x,</span> <span class="pre">xp,</span> <span class="pre">fp)</span></code> now allows the interpolated array <code class="docutils literal notranslate"><span class="pre">fp</span></code>
to be complex and will interpolate at <code class="docutils literal notranslate"><span class="pre">complex128</span></code> precision.</p>
</div>
<div class="section" id="new-polynomial-evaluation-function-polyvalfromroots-added">
<h4>New polynomial evaluation function <code class="docutils literal notranslate"><span class="pre">polyvalfromroots</span></code> added<a class="headerlink" href="#new-polynomial-evaluation-function-polyvalfromroots-added" title="Permalink to this headline">¶</a></h4>
<p>The new function <code class="docutils literal notranslate"><span class="pre">polyvalfromroots</span></code> evaluates a polynomial at given points
from the roots of the polynomial. This is useful for higher order polynomials,
where expansion into polynomial coefficients is inaccurate at machine
precision.</p>
</div>
<div class="section" id="new-array-creation-function-geomspace-added">
<h4>New array creation function <code class="docutils literal notranslate"><span class="pre">geomspace</span></code> added<a class="headerlink" href="#new-array-creation-function-geomspace-added" title="Permalink to this headline">¶</a></h4>
<p>The new function <code class="docutils literal notranslate"><span class="pre">geomspace</span></code> generates a geometric sequence.  It is similar
to <code class="docutils literal notranslate"><span class="pre">logspace</span></code>, but with start and stop specified directly:
<code class="docutils literal notranslate"><span class="pre">geomspace(start,</span> <span class="pre">stop)</span></code> behaves the same as
<code class="docutils literal notranslate"><span class="pre">logspace(log10(start),</span> <span class="pre">log10(stop))</span></code>.</p>
</div>
<div class="section" id="new-context-manager-for-testing-warnings">
<h4>New context manager for testing warnings<a class="headerlink" href="#new-context-manager-for-testing-warnings" title="Permalink to this headline">¶</a></h4>
<p>A new context manager <code class="docutils literal notranslate"><span class="pre">suppress_warnings</span></code> has been added to the testing
utils. This context manager is designed to help reliably test warnings.
Specifically to reliably filter/ignore warnings. Ignoring warnings
by using an “ignore” filter in Python versions before 3.4.x can quickly
result in these (or similar) warnings not being tested reliably.</p>
<p>The context manager allows to filter (as well as record) warnings similar
to the <code class="docutils literal notranslate"><span class="pre">catch_warnings</span></code> context, but allows for easier specificity.
Also printing warnings that have not been filtered or nesting the
context manager will work as expected. Additionally, it is possible
to use the context manager as a decorator which can be useful when
multiple tests give need to hide the same warning.</p>
</div>
<div class="section" id="new-masked-array-functions-ma-convolve-and-ma-correlate-added">
<h4>New masked array functions <code class="docutils literal notranslate"><span class="pre">ma.convolve</span></code> and <code class="docutils literal notranslate"><span class="pre">ma.correlate</span></code> added<a class="headerlink" href="#new-masked-array-functions-ma-convolve-and-ma-correlate-added" title="Permalink to this headline">¶</a></h4>
<p>These functions wrapped the non-masked versions, but propagate through masked
values. There are two different propagation modes. The default causes masked
values to contaminate the result with masks, but the other mode only outputs
masks if there is no alternative.</p>
</div>
<div class="section" id="new-float-power-ufunc">
<h4>New <code class="docutils literal notranslate"><span class="pre">float_power</span></code> ufunc<a class="headerlink" href="#new-float-power-ufunc" title="Permalink to this headline">¶</a></h4>
<p>The new <code class="docutils literal notranslate"><span class="pre">float_power</span></code> ufunc is like the <code class="docutils literal notranslate"><span class="pre">power</span></code> function except all
computation is done in a minimum precision of float64. There was a long
discussion on the numpy mailing list of how to treat integers to negative
integer powers and a popular proposal was that the <code class="docutils literal notranslate"><span class="pre">__pow__</span></code> operator should
always return results of at least float64 precision. The <code class="docutils literal notranslate"><span class="pre">float_power</span></code>
function implements that option. Note that it does not support object arrays.</p>
</div>
<div class="section" id="np-loadtxt-now-supports-a-single-integer-as-usecol-argument">
<h4><code class="docutils literal notranslate"><span class="pre">np.loadtxt</span></code> now supports a single integer as <code class="docutils literal notranslate"><span class="pre">usecol</span></code> argument<a class="headerlink" href="#np-loadtxt-now-supports-a-single-integer-as-usecol-argument" title="Permalink to this headline">¶</a></h4>
<p>Instead of using <code class="docutils literal notranslate"><span class="pre">usecol=(n,)</span></code> to read the nth column of a file
it is now allowed to use <code class="docutils literal notranslate"><span class="pre">usecol=n</span></code>. Also the error message is
more user friendly when a non-integer is passed as a column index.</p>
</div>
<div class="section" id="improved-automated-bin-estimators-for-histogram">
<h4>Improved automated bin estimators for <code class="docutils literal notranslate"><span class="pre">histogram</span></code><a class="headerlink" href="#improved-automated-bin-estimators-for-histogram" title="Permalink to this headline">¶</a></h4>
<p>Added ‘doane’ and ‘sqrt’ estimators to <code class="docutils literal notranslate"><span class="pre">histogram</span></code> via the <code class="docutils literal notranslate"><span class="pre">bins</span></code>
argument. Added support for range-restricted histograms with automated
bin estimation.</p>
</div>
<div class="section" id="np-roll-can-now-roll-multiple-axes-at-the-same-time">
<h4><code class="docutils literal notranslate"><span class="pre">np.roll</span></code> can now roll multiple axes at the same time<a class="headerlink" href="#np-roll-can-now-roll-multiple-axes-at-the-same-time" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">shift</span></code> and <code class="docutils literal notranslate"><span class="pre">axis</span></code> arguments to <code class="docutils literal notranslate"><span class="pre">roll</span></code> are now broadcast against each
other, and each specified axis is shifted accordingly.</p>
</div>
<div class="section" id="the-complex-method-has-been-implemented-for-the-ndarrays">
<h4>The <code class="docutils literal notranslate"><span class="pre">__complex__</span></code> method has been implemented for the ndarrays<a class="headerlink" href="#the-complex-method-has-been-implemented-for-the-ndarrays" title="Permalink to this headline">¶</a></h4>
<p>Calling <code class="docutils literal notranslate"><span class="pre">complex()</span></code> on a size 1 array will now cast to a python
complex.</p>
</div>
<div class="section" id="pathlib-path-objects-now-supported">
<h4><code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code> objects now supported<a class="headerlink" href="#pathlib-path-objects-now-supported" title="Permalink to this headline">¶</a></h4>
<p>The standard <code class="docutils literal notranslate"><span class="pre">np.load</span></code>, <code class="docutils literal notranslate"><span class="pre">np.save</span></code>, <code class="docutils literal notranslate"><span class="pre">np.loadtxt</span></code>, <code class="docutils literal notranslate"><span class="pre">np.savez</span></code>, and similar
functions can now take <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code> objects as an argument instead of a
filename or open file object.</p>
</div>
<div class="section" id="new-bits-attribute-for-np-finfo">
<h4>New <code class="docutils literal notranslate"><span class="pre">bits</span></code> attribute for <code class="docutils literal notranslate"><span class="pre">np.finfo</span></code><a class="headerlink" href="#new-bits-attribute-for-np-finfo" title="Permalink to this headline">¶</a></h4>
<p>This makes <code class="docutils literal notranslate"><span class="pre">np.finfo</span></code> consistent with <code class="docutils literal notranslate"><span class="pre">np.iinfo</span></code> which already has that
attribute.</p>
</div>
<div class="section" id="new-signature-argument-to-np-vectorize">
<h4>New <code class="docutils literal notranslate"><span class="pre">signature</span></code> argument to <code class="docutils literal notranslate"><span class="pre">np.vectorize</span></code><a class="headerlink" href="#new-signature-argument-to-np-vectorize" title="Permalink to this headline">¶</a></h4>
<p>This argument allows for vectorizing user defined functions with core
dimensions, in the style of NumPy’s
<a class="reference internal" href="reference/c-api.generalized-ufuncs.html#c-api-generalized-ufuncs"><span class="std std-ref">generalized universal functions</span></a>. This allows
for vectorizing a much broader class of functions. For example, an arbitrary
distance metric that combines two vectors to produce a scalar could be
vectorized with <code class="docutils literal notranslate"><span class="pre">signature='(n),(n)-&gt;()'</span></code>. See <code class="docutils literal notranslate"><span class="pre">np.vectorize</span></code> for full
details.</p>
</div>
<div class="section" id="emit-py3kwarnings-for-division-of-integer-arrays">
<h4>Emit py3kwarnings for division of integer arrays<a class="headerlink" href="#emit-py3kwarnings-for-division-of-integer-arrays" title="Permalink to this headline">¶</a></h4>
<p>To help people migrate their code bases from Python 2 to Python 3, the
python interpreter has a handy option -3, which issues warnings at runtime.
One of its warnings is for integer division:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python -3 -c &quot;2/3&quot;

-c:1: DeprecationWarning: classic int division
</pre></div>
</div>
<p>In Python 3, the new integer division semantics also apply to numpy arrays.
With this version, numpy will emit a similar warning:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python -3 -c &quot;import numpy as np; np.array(2)/np.array(3)&quot;

-c:1: DeprecationWarning: numpy: classic int division
</pre></div>
</div>
</div>
<div class="section" id="numpy-sctypes-now-includes-bytes-on-python3-too">
<h4>numpy.sctypes now includes bytes on Python3 too<a class="headerlink" href="#numpy-sctypes-now-includes-bytes-on-python3-too" title="Permalink to this headline">¶</a></h4>
<p>Previously, it included str (bytes) and unicode on Python2, but only str
(unicode) on Python3.</p>
</div>
</div>
<div class="section" id="id99">
<h3>Improvements<a class="headerlink" href="#id99" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id100">
<h4><code class="docutils literal notranslate"><span class="pre">bitwise_and</span></code> identity changed<a class="headerlink" href="#id100" title="Permalink to this headline">¶</a></h4>
<p>The previous identity was 1 with the result that all bits except the LSB were
masked out when the reduce method was used.  The new identity is -1, which
should work properly on twos complement machines as all bits will be set to
one.</p>
</div>
<div class="section" id="generalized-ufuncs-will-now-unlock-the-gil">
<h4>Generalized Ufuncs will now unlock the GIL<a class="headerlink" href="#generalized-ufuncs-will-now-unlock-the-gil" title="Permalink to this headline">¶</a></h4>
<p>Generalized Ufuncs, including most of the linalg module, will now unlock
the Python global interpreter lock.</p>
</div>
<div class="section" id="caches-in-np-fft-are-now-bounded-in-total-size-and-item-count">
<h4>Caches in <em class="xref py py-obj">np.fft</em> are now bounded in total size and item count<a class="headerlink" href="#caches-in-np-fft-are-now-bounded-in-total-size-and-item-count" title="Permalink to this headline">¶</a></h4>
<p>The caches in <em class="xref py py-obj">np.fft</em> that speed up successive FFTs of the same length can no
longer grow without bounds. They have been replaced with LRU (least recently
used) caches that automatically evict no longer needed items if either the
memory size or item count limit has been reached.</p>
</div>
<div class="section" id="improved-handling-of-zero-width-string-unicode-dtypes">
<h4>Improved handling of zero-width string/unicode dtypes<a class="headerlink" href="#improved-handling-of-zero-width-string-unicode-dtypes" title="Permalink to this headline">¶</a></h4>
<p>Fixed several interfaces that explicitly disallowed arrays with zero-width
string dtypes (i.e. <code class="docutils literal notranslate"><span class="pre">dtype('S0')</span></code> or <code class="docutils literal notranslate"><span class="pre">dtype('U0')</span></code>, and fixed several
bugs where such dtypes were not handled properly.  In particular, changed
<code class="docutils literal notranslate"><span class="pre">ndarray.__new__</span></code> to not implicitly convert <code class="docutils literal notranslate"><span class="pre">dtype('S0')</span></code> to
<code class="docutils literal notranslate"><span class="pre">dtype('S1')</span></code> (and likewise for unicode) when creating new arrays.</p>
</div>
<div class="section" id="integer-ufuncs-vectorized-with-avx2">
<h4>Integer ufuncs vectorized with AVX2<a class="headerlink" href="#integer-ufuncs-vectorized-with-avx2" title="Permalink to this headline">¶</a></h4>
<p>If the cpu supports it at runtime the basic integer ufuncs now use AVX2
instructions. This feature is currently only available when compiled with GCC.</p>
</div>
<div class="section" id="order-of-operations-optimization-in-np-einsum">
<h4>Order of operations optimization in <code class="docutils literal notranslate"><span class="pre">np.einsum</span></code><a class="headerlink" href="#order-of-operations-optimization-in-np-einsum" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">np.einsum</span></code> now supports the <code class="docutils literal notranslate"><span class="pre">optimize</span></code> argument which will optimize the
order of contraction. For example, <code class="docutils literal notranslate"><span class="pre">np.einsum</span></code> would complete the chain dot
example <code class="docutils literal notranslate"><span class="pre">np.einsum(‘ij,jk,kl-&gt;il’,</span> <span class="pre">a,</span> <span class="pre">b,</span> <span class="pre">c)</span></code> in a single pass which would
scale like <code class="docutils literal notranslate"><span class="pre">N^4</span></code>; however, when <code class="docutils literal notranslate"><span class="pre">optimize=True</span></code> <code class="docutils literal notranslate"><span class="pre">np.einsum</span></code> will create
an intermediate array to reduce this scaling to <code class="docutils literal notranslate"><span class="pre">N^3</span></code> or effectively
<code class="docutils literal notranslate"><span class="pre">np.dot(a,</span> <span class="pre">b).dot(c)</span></code>. Usage of intermediate tensors to reduce scaling has
been applied to the general einsum summation notation. See <code class="docutils literal notranslate"><span class="pre">np.einsum_path</span></code>
for more details.</p>
</div>
<div class="section" id="quicksort-has-been-changed-to-an-introsort">
<h4>quicksort has been changed to an introsort<a class="headerlink" href="#quicksort-has-been-changed-to-an-introsort" title="Permalink to this headline">¶</a></h4>
<p>The quicksort kind of <code class="docutils literal notranslate"><span class="pre">np.sort</span></code> and <code class="docutils literal notranslate"><span class="pre">np.argsort</span></code> is now an introsort which
is regular quicksort but changing to a heapsort when not enough progress is
made. This retains the good quicksort performance while changing the worst case
runtime from <code class="docutils literal notranslate"><span class="pre">O(N^2)</span></code> to <code class="docutils literal notranslate"><span class="pre">O(N*log(N))</span></code>.</p>
</div>
<div class="section" id="ediff1d-improved-performance-and-subclass-handling">
<h4><code class="docutils literal notranslate"><span class="pre">ediff1d</span></code> improved performance and subclass handling<a class="headerlink" href="#ediff1d-improved-performance-and-subclass-handling" title="Permalink to this headline">¶</a></h4>
<p>The ediff1d function uses an array instead on a flat iterator for the
subtraction.  When to_begin or to_end is not None, the subtraction is performed
in place to eliminate a copy operation.  A side effect is that certain
subclasses are handled better, namely astropy.Quantity, since the complete
array is created, wrapped, and then begin and end values are set, instead of
using concatenate.</p>
</div>
<div class="section" id="improved-precision-of-ndarray-mean-for-float16-arrays">
<h4>Improved precision of <code class="docutils literal notranslate"><span class="pre">ndarray.mean</span></code> for float16 arrays<a class="headerlink" href="#improved-precision-of-ndarray-mean-for-float16-arrays" title="Permalink to this headline">¶</a></h4>
<p>The computation of the mean of float16 arrays is now carried out in float32 for
improved precision. This should be useful in packages such as Theano
where the precision of float16 is adequate and its smaller footprint is
desirable.</p>
</div>
</div>
<div class="section" id="id101">
<h3>Changes<a class="headerlink" href="#id101" title="Permalink to this headline">¶</a></h3>
<div class="section" id="all-array-like-methods-are-now-called-with-keyword-arguments-in-fromnumeric-py">
<h4>All array-like methods are now called with keyword arguments in fromnumeric.py<a class="headerlink" href="#all-array-like-methods-are-now-called-with-keyword-arguments-in-fromnumeric-py" title="Permalink to this headline">¶</a></h4>
<p>Internally, many array-like methods in fromnumeric.py were being called with
positional arguments instead of keyword arguments as their external signatures
were doing. This caused a complication in the downstream ‘pandas’ library
that encountered an issue with ‘numpy’ compatibility. Now, all array-like
methods in this module are called with keyword arguments instead.</p>
</div>
<div class="section" id="operations-on-np-memmap-objects-return-numpy-arrays-in-most-cases">
<h4>Operations on np.memmap objects return numpy arrays in most cases<a class="headerlink" href="#operations-on-np-memmap-objects-return-numpy-arrays-in-most-cases" title="Permalink to this headline">¶</a></h4>
<p>Previously operations on a memmap object would misleadingly return a memmap
instance even if the result was actually not memmapped.  For example,
<code class="docutils literal notranslate"><span class="pre">arr</span> <span class="pre">+</span> <span class="pre">1</span></code> or <code class="docutils literal notranslate"><span class="pre">arr</span> <span class="pre">+</span> <span class="pre">arr</span></code> would return memmap instances, although no memory
from the output array is memmapped. Version 1.12 returns ordinary numpy arrays
from these operations.</p>
<p>Also, reduction of a memmap (e.g.  <code class="docutils literal notranslate"><span class="pre">.sum(axis=None</span></code>) now returns a numpy
scalar instead of a 0d memmap.</p>
</div>
<div class="section" id="stacklevel-of-warnings-increased">
<h4>stacklevel of warnings increased<a class="headerlink" href="#stacklevel-of-warnings-increased" title="Permalink to this headline">¶</a></h4>
<p>The stacklevel for python based warnings was increased so that most warnings
will report the offending line of the user code instead of the line the
warning itself is given. Passing of stacklevel is now tested to ensure that
new warnings will receive the <code class="docutils literal notranslate"><span class="pre">stacklevel</span></code> argument.</p>
<p>This causes warnings with the “default” or “module” filter to be shown once
for every offending user code line or user module instead of only once. On
python versions before 3.4, this can cause warnings to appear that were falsely
ignored before, which may be surprising especially in test suits.</p>
</div>
</div>
</div>
<div class="section" id="numpy-1-11-3-release-notes">
<h2>NumPy 1.11.3 Release Notes<a class="headerlink" href="#numpy-1-11-3-release-notes" title="Permalink to this headline">¶</a></h2>
<p>Numpy 1.11.3 fixes a bug that leads to file corruption when very large files
opened in append mode are used in <code class="docutils literal notranslate"><span class="pre">ndarray.tofile</span></code>. It supports Python
versions 2.6 - 2.7 and 3.2 - 3.5. Wheels for Linux, Windows, and OS X can be
found on PyPI.</p>
<div class="section" id="contributors-to-maintenance-1-11-3">
<h3>Contributors to maintenance/1.11.3<a class="headerlink" href="#contributors-to-maintenance-1-11-3" title="Permalink to this headline">¶</a></h3>
<p>A total of 2 people contributed to this release.  People with a “+” by their
names contributed a patch for the first time.</p>
<ul class="simple">
<li>Charles Harris</li>
<li>Pavel Potocek +</li>
</ul>
</div>
<div class="section" id="id102">
<h3>Pull Requests Merged<a class="headerlink" href="#id102" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/8341">#8341</a>: BUG: Fix ndarray.tofile large file corruption in append mode.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/pull/8346">#8346</a>: TST: Fix tests in PR #8341 for NumPy 1.11.x</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-11-2-release-notes">
<h2>NumPy 1.11.2 Release Notes<a class="headerlink" href="#numpy-1-11-2-release-notes" title="Permalink to this headline">¶</a></h2>
<p>Numpy 1.11.2 supports Python 2.6 - 2.7 and 3.2 - 3.5. It fixes bugs and
regressions found in Numpy 1.11.1 and includes several build related
improvements. Wheels for Linux, Windows, and OS X can be found on PyPI.</p>
<div class="section" id="id103">
<h3>Pull Requests Merged<a class="headerlink" href="#id103" title="Permalink to this headline">¶</a></h3>
<p>Fixes overridden by later merges and release notes updates are omitted.</p>
<ul class="simple">
<li>#7736 BUG: Many functions silently drop ‘keepdims’ kwarg.</li>
<li>#7738 ENH: Add extra kwargs and update doc of many MA methods.</li>
<li>#7778 DOC: Update Numpy 1.11.1 release notes.</li>
<li>#7793 BUG: MaskedArray.count treats negative axes incorrectly.</li>
<li>#7816 BUG: Fix array too big error for wide dtypes.</li>
<li>#7821 BUG: Make sure npy_mul_with_overflow_&lt;type&gt; detects overflow.</li>
<li>#7824 MAINT: Allocate fewer bytes for empty arrays.</li>
<li>#7847 MAINT,DOC: Fix some imp module uses and update f2py.compile docstring.</li>
<li>#7849 MAINT: Fix remaining uses of deprecated Python imp module.</li>
<li>#7851 BLD: Fix ATLAS version detection.</li>
<li>#7896 BUG: Construct ma.array from np.array which contains padding.</li>
<li>#7904 BUG: Fix float16 type not being called due to wrong ordering.</li>
<li>#7917 BUG: Production install of numpy should not require nose.</li>
<li>#7919 BLD: Fixed MKL detection for recent versions of this library.</li>
<li>#7920 BUG: Fix for issue #7835 (ma.median of 1d).</li>
<li>#7932 BUG: Monkey-patch _msvccompile.gen_lib_option like other compilers.</li>
<li>#7939 BUG: Check for HAVE_LDOUBLE_DOUBLE_DOUBLE_LE in npy_math_complex.</li>
<li>#7953 BUG: Guard against buggy comparisons in generic quicksort.</li>
<li>#7954 BUG: Use keyword arguments to initialize Extension base class.</li>
<li>#7955 BUG: Make sure numpy globals keep identity after reload.</li>
<li>#7972 BUG: MSVCCompiler grows ‘lib’ &amp; ‘include’ env strings exponentially.</li>
<li>#8005 BLD: Remove __NUMPY_SETUP__ from builtins at end of setup.py.</li>
<li>#8010 MAINT: Remove leftover imp module imports.</li>
<li>#8020 BUG: Fix return of np.ma.count if keepdims is True and axis is None.</li>
<li>#8024 BUG: Fix numpy.ma.median.</li>
<li>#8031 BUG: Fix np.ma.median with only one non-masked value.</li>
<li>#8044 BUG: Fix bug in NpyIter buffering with discontinuous arrays.</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-11-1-release-notes">
<h2>NumPy 1.11.1 Release Notes<a class="headerlink" href="#numpy-1-11-1-release-notes" title="Permalink to this headline">¶</a></h2>
<p>Numpy 1.11.1 supports Python 2.6 - 2.7 and 3.2 - 3.5. It fixes bugs and
regressions found in Numpy 1.11.0 and includes several build related
improvements. Wheels for Linux, Windows, and OSX can be found on pypi.</p>
<div class="section" id="fixes-merged">
<h3>Fixes Merged<a class="headerlink" href="#fixes-merged" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>#7506 BUG: Make sure numpy imports on python 2.6 when nose is unavailable.</li>
<li>#7530 BUG: Floating exception with invalid axis in np.lexsort.</li>
<li>#7535 BUG: Extend glibc complex trig functions blacklist to glibc &lt; 2.18.</li>
<li>#7551 BUG: Allow graceful recovery for no compiler.</li>
<li>#7558 BUG: Constant padding expected wrong type in constant_values.</li>
<li>#7578 BUG: Fix OverflowError in Python 3.x. in swig interface.</li>
<li>#7590 BLD: Fix configparser.InterpolationSyntaxError.</li>
<li>#7597 BUG: Make np.ma.take work on scalars.</li>
<li>#7608 BUG: linalg.norm(): Don’t convert object arrays to float.</li>
<li>#7638 BLD: Correct C compiler customization in system_info.py.</li>
<li>#7654 BUG: ma.median of 1d array should return a scalar.</li>
<li>#7656 BLD: Remove hardcoded Intel compiler flag -xSSE4.2.</li>
<li>#7660 BUG: Temporary fix for str(mvoid) for object field types.</li>
<li>#7665 BUG: Fix incorrect printing of 1D masked arrays.</li>
<li>#7670 BUG: Correct initial index estimate in histogram.</li>
<li>#7671 BUG: Boolean assignment no GIL release when transfer needs API.</li>
<li>#7676 BUG: Fix handling of right edge of final histogram bin.</li>
<li>#7680 BUG: Fix np.clip bug NaN handling for Visual Studio 2015.</li>
<li>#7724 BUG: Fix segfaults in np.random.shuffle.</li>
<li>#7731 MAINT: Change mkl_info.dir_env_var from MKL to MKLROOT.</li>
<li>#7737 BUG: Fix issue on OS X with Python 3.x, npymath.ini not installed.</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-11-0-release-notes">
<h2>NumPy 1.11.0 Release Notes<a class="headerlink" href="#numpy-1-11-0-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This release supports Python 2.6 - 2.7 and 3.2 - 3.5 and contains a number
of enhancements and improvements. Note also the build system changes listed
below as they may have subtle effects.</p>
<p>No Windows (TM) binaries are provided for this release due to a broken
toolchain. One of the providers of Python packages for Windows (TM) is your
best bet.</p>
<div class="section" id="id104">
<h3>Highlights<a class="headerlink" href="#id104" title="Permalink to this headline">¶</a></h3>
<p>Details of these improvements can be found below.</p>
<ul class="simple">
<li>The datetime64 type is now timezone naive.</li>
<li>A dtype parameter has been added to <code class="docutils literal notranslate"><span class="pre">randint</span></code>.</li>
<li>Improved detection of two arrays possibly sharing memory.</li>
<li>Automatic bin size estimation for <code class="docutils literal notranslate"><span class="pre">np.histogram</span></code>.</li>
<li>Speed optimization of A &#64; A.T and dot(A, A.T).</li>
<li>New function <code class="docutils literal notranslate"><span class="pre">np.moveaxis</span></code> for reordering array axes.</li>
</ul>
</div>
<div class="section" id="id105">
<h3>Build System Changes<a class="headerlink" href="#id105" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Numpy now uses <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> for its builds instead of plain distutils.
This fixes usage of <code class="docutils literal notranslate"><span class="pre">install_requires='numpy'</span></code> in the <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> files of
projects that depend on Numpy (see gh-6551).  It potentially affects the way
that build/install methods for Numpy itself behave though.  Please report any
unexpected behavior on the Numpy issue tracker.</li>
<li>Bento build support and related files have been removed.</li>
<li>Single file build support and related files have been removed.</li>
</ul>
</div>
<div class="section" id="id106">
<h3>Future Changes<a class="headerlink" href="#id106" title="Permalink to this headline">¶</a></h3>
<p>The following changes are scheduled for Numpy 1.12.0.</p>
<ul class="simple">
<li>Support for Python 2.6, 3.2, and 3.3 will be dropped.</li>
<li>Relaxed stride checking will become the default. See the 1.8.0 release
notes for a more extended discussion of what this change implies.</li>
<li>The behavior of the datetime64 “not a time” (NaT) value will be changed
to match that of floating point “not a number” (NaN) values: all
comparisons involving NaT will return False, except for NaT != NaT which
will return True.</li>
<li>Indexing with floats will raise IndexError,
e.g., a[0, 0.0].</li>
<li>Indexing with non-integer array_like will raise <code class="docutils literal notranslate"><span class="pre">IndexError</span></code>,
e.g., <code class="docutils literal notranslate"><span class="pre">a['1',</span> <span class="pre">'2']</span></code></li>
<li>Indexing with multiple ellipsis will raise <code class="docutils literal notranslate"><span class="pre">IndexError</span></code>,
e.g., <code class="docutils literal notranslate"><span class="pre">a[...,</span> <span class="pre">...]</span></code>.</li>
<li>Non-integers used as index values will raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>,
e.g., in <code class="docutils literal notranslate"><span class="pre">reshape</span></code>, <code class="docutils literal notranslate"><span class="pre">take</span></code>, and specifying reduce axis.</li>
</ul>
<p>In a future release the following changes will be made.</p>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">rand</span></code> function exposed in <code class="docutils literal notranslate"><span class="pre">numpy.testing</span></code> will be removed. That
function is left over from early Numpy and was implemented using the
Python random module.  The random number generators from <code class="docutils literal notranslate"><span class="pre">numpy.random</span></code>
should be used instead.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">ndarray.view</span></code> method will only allow c_contiguous arrays to be
viewed using a dtype of different size causing the last dimension to
change.  That differs from the current behavior where arrays that are
f_contiguous but not c_contiguous can be viewed as a dtype type of
different size causing the first dimension to change.</li>
<li>Slicing a <code class="docutils literal notranslate"><span class="pre">MaskedArray</span></code> will return views of both data <strong>and</strong> mask.
Currently the mask is copy-on-write and changes to the mask in the slice do
not propagate to the original mask. See the FutureWarnings section below for
details.</li>
</ul>
</div>
<div class="section" id="id107">
<h3>Compatibility notes<a class="headerlink" href="#id107" title="Permalink to this headline">¶</a></h3>
<div class="section" id="datetime64-changes">
<h4>datetime64 changes<a class="headerlink" href="#datetime64-changes" title="Permalink to this headline">¶</a></h4>
<p>In prior versions of NumPy the experimental datetime64 type always stored
times in UTC. By default, creating a datetime64 object from a string or
printing it would convert from or to local time:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># old behavior</span>
<span class="o">&gt;&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2000-01-01T00:00:00&#39;</span><span class="p">)</span>
<span class="n">numpy</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2000-01-01T00:00:00-0800&#39;</span><span class="p">)</span>  <span class="c1"># note the timezone offset -08:00</span>
</pre></div>
</div>
<p>A consensus of datetime64 users agreed that this behavior is undesirable
and at odds with how datetime64 is usually used (e.g., by <a class="reference external" href="http://pandas.pydata.org">pandas</a>). For most use cases, a timezone naive datetime
type is preferred, similar to the <code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code> type in the Python
standard library. Accordingly, datetime64 no longer assumes that input is in
local time, nor does it print local times:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;&gt; np.datetime64(&#39;2000-01-01T00:00:00&#39;)</span>
<span class="go">numpy.datetime64(&#39;2000-01-01T00:00:00&#39;)</span>
</pre></div>
</div>
<p>For backwards compatibility, datetime64 still parses timezone offsets, which
it handles by converting to UTC. However, the resulting datetime is timezone
naive:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2000-01-01T00:00:00-08&#39;</span><span class="p">)</span>
<span class="go">DeprecationWarning: parsing timezone aware datetimes is deprecated;</span>
<span class="go">this will raise an error in the future</span>
<span class="go">numpy.datetime64(&#39;2000-01-01T08:00:00&#39;)</span>
</pre></div>
</div>
<p>As a corollary to this change, we no longer prohibit casting between datetimes
with date units and datetimes with time units. With timezone naive datetimes,
the rule for casting from dates to times is no longer ambiguous.</p>
</div>
<div class="section" id="linalg-norm-return-type-changes">
<h4><code class="docutils literal notranslate"><span class="pre">linalg.norm</span></code> return type changes<a class="headerlink" href="#linalg-norm-return-type-changes" title="Permalink to this headline">¶</a></h4>
<p>The return type of the <code class="docutils literal notranslate"><span class="pre">linalg.norm</span></code> function is now floating point without
exception.  Some of the norm types previously returned integers.</p>
</div>
<div class="section" id="polynomial-fit-changes">
<h4>polynomial fit changes<a class="headerlink" href="#polynomial-fit-changes" title="Permalink to this headline">¶</a></h4>
<p>The various fit functions in the numpy polynomial package no longer accept
non-integers for degree specification.</p>
</div>
<div class="section" id="np-dot-now-raises-typeerror-instead-of-valueerror">
<h4><em>np.dot</em> now raises <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> instead of <code class="docutils literal notranslate"><span class="pre">ValueError</span></code><a class="headerlink" href="#np-dot-now-raises-typeerror-instead-of-valueerror" title="Permalink to this headline">¶</a></h4>
<p>This behaviour mimics that of other functions such as <code class="docutils literal notranslate"><span class="pre">np.inner</span></code>. If the two
arguments cannot be cast to a common type, it could have raised a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>
or <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> depending on their order. Now, <code class="docutils literal notranslate"><span class="pre">np.dot</span></code> will now always
raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.</p>
</div>
<div class="section" id="id108">
<h4>FutureWarning to changed behavior<a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>In <code class="docutils literal notranslate"><span class="pre">np.lib.split</span></code> an empty array in the result always had dimension
<code class="docutils literal notranslate"><span class="pre">(0,)</span></code> no matter the dimensions of the array being split. This
has been changed so that the dimensions will be preserved. A
<code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code> for this change has been in place since Numpy 1.9 but,
due to a bug, sometimes no warning was raised and the dimensions were
already preserved.</li>
</ul>
</div>
<div class="section" id="and-operators">
<h4><code class="docutils literal notranslate"><span class="pre">%</span></code> and <code class="docutils literal notranslate"><span class="pre">//</span></code> operators<a class="headerlink" href="#and-operators" title="Permalink to this headline">¶</a></h4>
<p>These operators are implemented with the <code class="docutils literal notranslate"><span class="pre">remainder</span></code> and <code class="docutils literal notranslate"><span class="pre">floor_divide</span></code>
functions respectively. Those functions are now based around <code class="docutils literal notranslate"><span class="pre">fmod</span></code> and are
computed together so as to be compatible with each other and with the Python
versions for float types.  The results should be marginally more accurate or
outright bug fixes compared to the previous results, but they may
differ significantly in cases where roundoff makes a difference in the integer
returned by <code class="docutils literal notranslate"><span class="pre">floor_divide</span></code>. Some corner cases also change, for instance, NaN
is always returned for both functions when the divisor is zero,
<code class="docutils literal notranslate"><span class="pre">divmod(1.0,</span> <span class="pre">inf)</span></code> returns <code class="docutils literal notranslate"><span class="pre">(0.0,</span> <span class="pre">1.0)</span></code> except on MSVC 2008, and
<code class="docutils literal notranslate"><span class="pre">divmod(-1.0,</span> <span class="pre">inf)</span></code> returns <code class="docutils literal notranslate"><span class="pre">(-1.0,</span> <span class="pre">inf)</span></code>.</p>
</div>
<div class="section" id="id109">
<h4>C API<a class="headerlink" href="#id109" title="Permalink to this headline">¶</a></h4>
<p>Removed the <code class="docutils literal notranslate"><span class="pre">check_return</span></code> and <code class="docutils literal notranslate"><span class="pre">inner_loop_selector</span></code> members of
the <code class="docutils literal notranslate"><span class="pre">PyUFuncObject</span></code> struct (replacing them with <code class="docutils literal notranslate"><span class="pre">reserved</span></code> slots
to preserve struct layout). These were never used for anything, so
it’s unlikely that any third-party code is using them either, but we
mention it here for completeness.</p>
</div>
<div class="section" id="object-dtype-detection-for-old-style-classes">
<h4>object dtype detection for old-style classes<a class="headerlink" href="#object-dtype-detection-for-old-style-classes" title="Permalink to this headline">¶</a></h4>
<p>In python 2, objects which are instances of old-style user-defined classes no
longer automatically count as ‘object’ type in the dtype-detection handler.
Instead, as in python 3, they may potentially count as sequences, but only if
they define both a <em class="xref py py-obj">__len__</em> and a <em class="xref py py-obj">__getitem__</em> method. This fixes a segfault
and inconsistency between python 2 and 3.</p>
</div>
</div>
<div class="section" id="id110">
<h3>New Features<a class="headerlink" href="#id110" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">np.histogram</span></code> now provides plugin estimators for automatically
estimating the optimal number of bins. Passing one of [‘auto’, ‘fd’,
‘scott’, ‘rice’, ‘sturges’] as the argument to ‘bins’ results in the
corresponding estimator being used.</p>
</li>
<li><p class="first">A benchmark suite using <a class="reference external" href="https://asv.readthedocs.io/">Airspeed Velocity</a> has been added, converting the
previous vbench-based one. You can run the suite locally via <code class="docutils literal notranslate"><span class="pre">python</span>
<span class="pre">runtests.py</span> <span class="pre">--bench</span></code>. For more details, see <code class="docutils literal notranslate"><span class="pre">benchmarks/README.rst</span></code>.</p>
</li>
<li><p class="first">A new function <code class="docutils literal notranslate"><span class="pre">np.shares_memory</span></code> that can check exactly whether two
arrays have memory overlap is added. <code class="docutils literal notranslate"><span class="pre">np.may_share_memory</span></code> also now has
an option to spend more effort to reduce false positives.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">SkipTest</span></code> and <code class="docutils literal notranslate"><span class="pre">KnownFailureException</span></code> exception classes are exposed
in the <code class="docutils literal notranslate"><span class="pre">numpy.testing</span></code> namespace. Raise them in a test function to mark
the test to be skipped or mark it as a known failure, respectively.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">f2py.compile</span></code> has a new <code class="docutils literal notranslate"><span class="pre">extension</span></code> keyword parameter that allows the
fortran extension to be specified for generated temp files. For instance,
the files can be specifies to be <code class="docutils literal notranslate"><span class="pre">*.f90</span></code>. The <code class="docutils literal notranslate"><span class="pre">verbose</span></code> argument is
also activated, it was previously ignored.</p>
</li>
<li><p class="first">A <code class="docutils literal notranslate"><span class="pre">dtype</span></code> parameter has been added to <code class="docutils literal notranslate"><span class="pre">np.random.randint</span></code>
Random ndarrays of the following types can now be generated:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">np.bool</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">np.int8</span></code>, <code class="docutils literal notranslate"><span class="pre">np.uint8</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">np.int16</span></code>, <code class="docutils literal notranslate"><span class="pre">np.uint16</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">np.int32</span></code>, <code class="docutils literal notranslate"><span class="pre">np.uint32</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">np.int64</span></code>, <code class="docutils literal notranslate"><span class="pre">np.uint64</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">np.int_</span> <span class="pre">``,</span> <span class="pre">``np.intp</span></code></li>
</ul>
<p>The specification is by precision rather than by C type. Hence, on some
platforms <code class="docutils literal notranslate"><span class="pre">np.int64</span></code> may be a <code class="docutils literal notranslate"><span class="pre">long</span></code> instead of <code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">long</span></code> even if
the specified dtype is <code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">long</span></code> because the two may have the same
precision. The resulting type depends on which C type numpy uses for the
given precision. The byteorder specification is also ignored, the
generated arrays are always in native byte order.</p>
</li>
<li><p class="first">A new <code class="docutils literal notranslate"><span class="pre">np.moveaxis</span></code> function allows for moving one or more array axes
to a new position by explicitly providing source and destination axes.
This function should be easier to use than the current <code class="docutils literal notranslate"><span class="pre">rollaxis</span></code>
function as well as providing more functionality.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">deg</span></code> parameter of the various <code class="docutils literal notranslate"><span class="pre">numpy.polynomial</span></code> fits has been
extended to accept a list of the degrees of the terms to be included in
the fit, the coefficients of all other terms being constrained to zero.
The change is backward compatible, passing a scalar <code class="docutils literal notranslate"><span class="pre">deg</span></code> will behave
as before.</p>
</li>
<li><p class="first">A divmod function for float types modeled after the Python version has
been added to the npy_math library.</p>
</li>
</ul>
</div>
<div class="section" id="id111">
<h3>Improvements<a class="headerlink" href="#id111" title="Permalink to this headline">¶</a></h3>
<div class="section" id="np-gradient-now-supports-an-axis-argument">
<h4><code class="docutils literal notranslate"><span class="pre">np.gradient</span></code> now supports an <code class="docutils literal notranslate"><span class="pre">axis</span></code> argument<a class="headerlink" href="#np-gradient-now-supports-an-axis-argument" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">axis</span></code> parameter was added to <code class="docutils literal notranslate"><span class="pre">np.gradient</span></code> for consistency.  It
allows to specify over which axes the gradient is calculated.</p>
</div>
<div class="section" id="np-lexsort-now-supports-arrays-with-object-data-type">
<h4><code class="docutils literal notranslate"><span class="pre">np.lexsort</span></code> now supports arrays with object data-type<a class="headerlink" href="#np-lexsort-now-supports-arrays-with-object-data-type" title="Permalink to this headline">¶</a></h4>
<p>The function now internally calls the generic <code class="docutils literal notranslate"><span class="pre">npy_amergesort</span></code> when the
type does not implement a merge-sort kind of <code class="docutils literal notranslate"><span class="pre">argsort</span></code> method.</p>
</div>
<div class="section" id="np-ma-core-maskedarray-now-supports-an-order-argument">
<h4><code class="docutils literal notranslate"><span class="pre">np.ma.core.MaskedArray</span></code> now supports an <code class="docutils literal notranslate"><span class="pre">order</span></code> argument<a class="headerlink" href="#np-ma-core-maskedarray-now-supports-an-order-argument" title="Permalink to this headline">¶</a></h4>
<p>When constructing a new <code class="docutils literal notranslate"><span class="pre">MaskedArray</span></code> instance, it can be configured with
an <code class="docutils literal notranslate"><span class="pre">order</span></code> argument analogous to the one when calling <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code>. The
addition of this argument allows for the proper processing of an <code class="docutils literal notranslate"><span class="pre">order</span></code>
argument in several MaskedArray-related utility functions such as
<code class="docutils literal notranslate"><span class="pre">np.ma.core.array</span></code> and <code class="docutils literal notranslate"><span class="pre">np.ma.core.asarray</span></code>.</p>
</div>
<div class="section" id="memory-and-speed-improvements-for-masked-arrays">
<h4>Memory and speed improvements for masked arrays<a class="headerlink" href="#memory-and-speed-improvements-for-masked-arrays" title="Permalink to this headline">¶</a></h4>
<p>Creating a masked array with <code class="docutils literal notranslate"><span class="pre">mask=True</span></code> (resp. <code class="docutils literal notranslate"><span class="pre">mask=False</span></code>) now uses
<code class="docutils literal notranslate"><span class="pre">np.ones</span></code> (resp. <code class="docutils literal notranslate"><span class="pre">np.zeros</span></code>) to create the mask, which is faster and
avoid a big memory peak. Another optimization was done to avoid a memory
peak and useless computations when printing a masked array.</p>
</div>
<div class="section" id="ndarray-tofile-now-uses-fallocate-on-linux">
<h4><code class="docutils literal notranslate"><span class="pre">ndarray.tofile</span></code> now uses fallocate on linux<a class="headerlink" href="#ndarray-tofile-now-uses-fallocate-on-linux" title="Permalink to this headline">¶</a></h4>
<p>The function now uses the fallocate system call to reserve sufficient
disk space on file systems that support it.</p>
</div>
<div class="section" id="optimizations-for-operations-of-the-form-a-t-a-and-a-a-t">
<h4>Optimizations for operations of the form <code class="docutils literal notranslate"><span class="pre">A.T</span> <span class="pre">&#64;</span> <span class="pre">A</span></code> and <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&#64;</span> <span class="pre">A.T</span></code><a class="headerlink" href="#optimizations-for-operations-of-the-form-a-t-a-and-a-a-t" title="Permalink to this headline">¶</a></h4>
<p>Previously, <code class="docutils literal notranslate"><span class="pre">gemm</span></code> BLAS operations were used for all matrix products. Now,
if the matrix product is between a matrix and its transpose, it will use
<code class="docutils literal notranslate"><span class="pre">syrk</span></code> BLAS operations for a performance boost. This optimization has been
extended to <code class="docutils literal notranslate"><span class="pre">&#64;</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.dot</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.inner</span></code>, and <code class="docutils literal notranslate"><span class="pre">numpy.matmul</span></code>.</p>
<p><strong>Note:</strong> Requires the transposed and non-transposed matrices to share data.</p>
</div>
<div class="section" id="np-testing-assert-warns-can-now-be-used-as-a-context-manager">
<h4><code class="docutils literal notranslate"><span class="pre">np.testing.assert_warns</span></code> can now be used as a context manager<a class="headerlink" href="#np-testing-assert-warns-can-now-be-used-as-a-context-manager" title="Permalink to this headline">¶</a></h4>
<p>This matches the behavior of <code class="docutils literal notranslate"><span class="pre">assert_raises</span></code>.</p>
</div>
<div class="section" id="speed-improvement-for-np-random-shuffle">
<h4>Speed improvement for np.random.shuffle<a class="headerlink" href="#speed-improvement-for-np-random-shuffle" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">np.random.shuffle</span></code> is now much faster for 1d ndarrays.</p>
</div>
</div>
<div class="section" id="id112">
<h3>Changes<a class="headerlink" href="#id112" title="Permalink to this headline">¶</a></h3>
<div class="section" id="pyrex-support-was-removed-from-numpy-distutils">
<h4>Pyrex support was removed from <code class="docutils literal notranslate"><span class="pre">numpy.distutils</span></code><a class="headerlink" href="#pyrex-support-was-removed-from-numpy-distutils" title="Permalink to this headline">¶</a></h4>
<p>The method <code class="docutils literal notranslate"><span class="pre">build_src.generate_a_pyrex_source</span></code> will remain available; it
has been monkeypatched by users to support Cython instead of Pyrex.  It’s
recommended to switch to a better supported method of build Cython
extensions though.</p>
</div>
<div class="section" id="np-broadcast-can-now-be-called-with-a-single-argument">
<h4><code class="docutils literal notranslate"><span class="pre">np.broadcast</span></code> can now be called with a single argument<a class="headerlink" href="#np-broadcast-can-now-be-called-with-a-single-argument" title="Permalink to this headline">¶</a></h4>
<p>The resulting object in that case will simply mimic iteration over
a single array. This change obsoletes distinctions like</p>
<blockquote>
<div><dl class="docutils">
<dt>if len(x) == 1:</dt>
<dd>shape = x[0].shape</dd>
<dt>else:</dt>
<dd>shape = np.broadcast(*x).shape</dd>
</dl>
</div></blockquote>
<p>Instead, <code class="docutils literal notranslate"><span class="pre">np.broadcast</span></code> can be used in all cases.</p>
</div>
<div class="section" id="np-trace-now-respects-array-subclasses">
<h4><code class="docutils literal notranslate"><span class="pre">np.trace</span></code> now respects array subclasses<a class="headerlink" href="#np-trace-now-respects-array-subclasses" title="Permalink to this headline">¶</a></h4>
<p>This behaviour mimics that of other functions such as <code class="docutils literal notranslate"><span class="pre">np.diagonal</span></code> and
ensures, e.g., that for masked arrays <code class="docutils literal notranslate"><span class="pre">np.trace(ma)</span></code> and <code class="docutils literal notranslate"><span class="pre">ma.trace()</span></code> give
the same result.</p>
</div>
<div class="section" id="id113">
<h4><code class="docutils literal notranslate"><span class="pre">np.dot</span></code> now raises <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> instead of <code class="docutils literal notranslate"><span class="pre">ValueError</span></code><a class="headerlink" href="#id113" title="Permalink to this headline">¶</a></h4>
<p>This behaviour mimics that of other functions such as <code class="docutils literal notranslate"><span class="pre">np.inner</span></code>. If the two
arguments cannot be cast to a common type, it could have raised a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>
or <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> depending on their order. Now, <code class="docutils literal notranslate"><span class="pre">np.dot</span></code> will now always
raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.</p>
</div>
<div class="section" id="id114">
<h4><code class="docutils literal notranslate"><span class="pre">linalg.norm</span></code> return type changes<a class="headerlink" href="#id114" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">linalg.norm</span></code> function now does all its computations in floating point
and returns floating results. This change fixes bugs due to integer overflow
and the failure of abs with signed integers of minimum value, e.g., int8(-128).
For consistency, floats are used even where an integer might work.</p>
</div>
</div>
<div class="section" id="id115">
<h3>Deprecations<a class="headerlink" href="#id115" title="Permalink to this headline">¶</a></h3>
<div class="section" id="views-of-arrays-in-fortran-order">
<h4>Views of arrays in Fortran order<a class="headerlink" href="#views-of-arrays-in-fortran-order" title="Permalink to this headline">¶</a></h4>
<p>The F_CONTIGUOUS flag was used to signal that views using a dtype that
changed the element size would change the first index. This was always
problematical for arrays that were both F_CONTIGUOUS and C_CONTIGUOUS
because C_CONTIGUOUS took precedence. Relaxed stride checking results in
more such dual contiguous arrays and breaks some existing code as a result.
Note that this also affects changing the dtype by assigning to the dtype
attribute of an array. The aim of this deprecation is to restrict views to
C_CONTIGUOUS arrays at some future time. A work around that is backward
compatible is to use <code class="docutils literal notranslate"><span class="pre">a.T.view(...).T</span></code> instead. A parameter may also be
added to the view method to explicitly ask for Fortran order views, but
that will not be backward compatible.</p>
</div>
<div class="section" id="invalid-arguments-for-array-ordering">
<h4>Invalid arguments for array ordering<a class="headerlink" href="#invalid-arguments-for-array-ordering" title="Permalink to this headline">¶</a></h4>
<p>It is currently possible to pass in arguments for the <code class="docutils literal notranslate"><span class="pre">order</span></code>
parameter in methods like <code class="docutils literal notranslate"><span class="pre">array.flatten</span></code> or <code class="docutils literal notranslate"><span class="pre">array.ravel</span></code>
that were not one of the following: ‘C’, ‘F’, ‘A’, ‘K’ (note that
all of these possible values are both unicode and case insensitive).
Such behavior will not be allowed in future releases.</p>
</div>
<div class="section" id="random-number-generator-in-the-testing-namespace">
<h4>Random number generator in the <code class="docutils literal notranslate"><span class="pre">testing</span></code> namespace<a class="headerlink" href="#random-number-generator-in-the-testing-namespace" title="Permalink to this headline">¶</a></h4>
<p>The Python standard library random number generator was previously exposed
in the <code class="docutils literal notranslate"><span class="pre">testing</span></code> namespace as <code class="docutils literal notranslate"><span class="pre">testing.rand</span></code>. Using this generator is
not recommended and it will be removed in a future release. Use generators
from <code class="docutils literal notranslate"><span class="pre">numpy.random</span></code> namespace instead.</p>
</div>
<div class="section" id="random-integer-generation-on-a-closed-interval">
<h4>Random integer generation on a closed interval<a class="headerlink" href="#random-integer-generation-on-a-closed-interval" title="Permalink to this headline">¶</a></h4>
<p>In accordance with the Python C API, which gives preference to the half-open
interval over the closed one, <code class="docutils literal notranslate"><span class="pre">np.random.random_integers</span></code> is being
deprecated in favor of calling <code class="docutils literal notranslate"><span class="pre">np.random.randint</span></code>, which has been
enhanced with the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> parameter as described under “New Features”.
However, <code class="docutils literal notranslate"><span class="pre">np.random.random_integers</span></code> will not be removed anytime soon.</p>
</div>
</div>
<div class="section" id="futurewarnings">
<h3>FutureWarnings<a class="headerlink" href="#futurewarnings" title="Permalink to this headline">¶</a></h3>
<div class="section" id="assigning-to-slices-views-of-maskedarray">
<h4>Assigning to slices/views of <code class="docutils literal notranslate"><span class="pre">MaskedArray</span></code><a class="headerlink" href="#assigning-to-slices-views-of-maskedarray" title="Permalink to this headline">¶</a></h4>
<p>Currently a slice of a masked array contains a view of the original data and a
copy-on-write view of the mask. Consequently, any changes to the slice’s mask
will result in a copy of the original mask being made and that new mask being
changed rather than the original. For example, if we make a slice of the
original like so, <code class="docutils literal notranslate"><span class="pre">view</span> <span class="pre">=</span> <span class="pre">original[:]</span></code>, then modifications to the data in one
array will affect the data of the other but, because the mask will be copied
during assignment operations, changes to the mask will remain local. A similar
situation occurs when explicitly constructing a masked array using
<code class="docutils literal notranslate"><span class="pre">MaskedArray(data,</span> <span class="pre">mask)</span></code>, the returned array will contain a view of <code class="docutils literal notranslate"><span class="pre">data</span></code>
but the mask will be a copy-on-write view of <code class="docutils literal notranslate"><span class="pre">mask</span></code>.</p>
<p>In the future, these cases will be normalized so that the data and mask arrays
are treated the same way and modifications to either will propagate between
views. In 1.11, numpy will issue a <code class="docutils literal notranslate"><span class="pre">MaskedArrayFutureWarning</span></code> warning
whenever user code modifies the mask of a view that in the future may cause
values to propagate back to the original.  To silence these warnings and make
your code robust against the upcoming changes, you have two options: if you
want to keep the current behavior, call <code class="docutils literal notranslate"><span class="pre">masked_view.unshare_mask()</span></code> before
modifying the mask.  If you want to get the future behavior early, use
<code class="docutils literal notranslate"><span class="pre">masked_view._sharedmask</span> <span class="pre">=</span> <span class="pre">False</span></code>. However, note that setting the
<code class="docutils literal notranslate"><span class="pre">_sharedmask</span></code> attribute will break following explicit calls to
<code class="docutils literal notranslate"><span class="pre">masked_view.unshare_mask()</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="numpy-1-10-4-release-notes">
<h2>NumPy 1.10.4 Release Notes<a class="headerlink" href="#numpy-1-10-4-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This release is a bugfix source release motivated by a segfault regression.
No windows binaries are provided for this release, as there appear to be
bugs in the toolchain we use to generate those files. Hopefully that
problem will be fixed for the next release. In the meantime, we suggest
using one of the providers of windows binaries.</p>
<div class="section" id="id116">
<h3>Compatibility notes<a class="headerlink" href="#id116" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The trace function now calls the trace method on subclasses of ndarray,
except for matrix, for which the current behavior is preserved. This is
to help with the units package of AstroPy and hopefully will not cause
problems.</li>
</ul>
</div>
<div class="section" id="issues-fixed">
<h3>Issues Fixed<a class="headerlink" href="#issues-fixed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>gh-6922 BUG: numpy.recarray.sort segfaults on Windows.</li>
<li>gh-6937 BUG: busday_offset does the wrong thing with modifiedpreceding roll.</li>
<li>gh-6949 BUG: Type is lost when slicing a subclass of recarray.</li>
</ul>
</div>
<div class="section" id="merged-prs">
<h3>Merged PRs<a class="headerlink" href="#merged-prs" title="Permalink to this headline">¶</a></h3>
<p>The following PRs have been merged into 1.10.4. When the PR is a backport,
the PR number for the original PR against master is listed.</p>
<ul class="simple">
<li>gh-6840 TST: Update travis testing script in 1.10.x</li>
<li>gh-6843 BUG: Fix use of python 3 only FileNotFoundError in test_f2py.</li>
<li>gh-6884 REL: Update pavement.py and setup.py to reflect current version.</li>
<li>gh-6916 BUG: Fix test_f2py so it runs correctly in runtests.py.</li>
<li>gh-6924 BUG: Fix segfault gh-6922.</li>
<li>gh-6942 Fix datetime roll=’modifiedpreceding’ bug.</li>
<li>gh-6943 DOC,BUG: Fix some latex generation problems.</li>
<li>gh-6950 BUG trace is not subclass aware, np.trace(ma) != ma.trace().</li>
<li>gh-6952 BUG recarray slices should preserve subclass.</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-10-3-release-notes">
<h2>NumPy 1.10.3 Release Notes<a class="headerlink" href="#numpy-1-10-3-release-notes" title="Permalink to this headline">¶</a></h2>
<p>N/A this release did not happen due to various screwups involving PyPi.</p>
</div>
<div class="section" id="numpy-1-10-2-release-notes">
<h2>NumPy 1.10.2 Release Notes<a class="headerlink" href="#numpy-1-10-2-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This release deals with a number of bugs that turned up in 1.10.1 and
adds various build and release improvements.</p>
<p>Numpy 1.10.1 supports Python 2.6 - 2.7 and 3.2 - 3.5.</p>
<div class="section" id="id117">
<h3>Compatibility notes<a class="headerlink" href="#id117" title="Permalink to this headline">¶</a></h3>
<div class="section" id="relaxed-stride-checking-is-no-longer-the-default">
<h4>Relaxed stride checking is no longer the default<a class="headerlink" href="#relaxed-stride-checking-is-no-longer-the-default" title="Permalink to this headline">¶</a></h4>
<p>There were back compatibility problems involving views changing the dtype of
multidimensional Fortran arrays that need to be dealt with over a longer
timeframe.</p>
</div>
<div class="section" id="fix-swig-bug-in-numpy-i">
<h4>Fix swig bug in <code class="docutils literal notranslate"><span class="pre">numpy.i</span></code><a class="headerlink" href="#fix-swig-bug-in-numpy-i" title="Permalink to this headline">¶</a></h4>
<p>Relaxed stride checking revealed a bug in <code class="docutils literal notranslate"><span class="pre">array_is_fortran(a)</span></code>, that was
using PyArray_ISFORTRAN to check for Fortran contiguity instead of
PyArray_IS_F_CONTIGUOUS. You may want to regenerate swigged files using the
updated numpy.i</p>
</div>
<div class="section" id="deprecate-views-changing-dimensions-in-fortran-order">
<h4>Deprecate views changing dimensions in fortran order<a class="headerlink" href="#deprecate-views-changing-dimensions-in-fortran-order" title="Permalink to this headline">¶</a></h4>
<p>This deprecates assignment of a new descriptor to the dtype attribute of
a non-C-contiguous array if it result in changing the shape. This
effectively bars viewing a multidimensional Fortran array using a dtype
that changes the element size along the first axis.</p>
<p>The reason for the deprecation is that, when relaxed strides checking is
enabled, arrays that are both C and Fortran contiguous are always treated
as C contiguous which breaks some code that depended the two being mutually
exclusive for non-scalar arrays of ndim &gt; 1. This deprecation prepares the
way to always enable relaxed stride checking.</p>
</div>
</div>
<div class="section" id="id118">
<h3>Issues Fixed<a class="headerlink" href="#id118" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>gh-6019 Masked array repr fails for structured array with multi-dimensional column.</li>
<li>gh-6462 Median of empty array produces IndexError.</li>
<li>gh-6467 Performance regression for record array access.</li>
<li>gh-6468 numpy.interp uses ‘left’ value even when x[0]==xp[0].</li>
<li>gh-6475 np.allclose returns a memmap when one of its arguments is a memmap.</li>
<li>gh-6491 Error in broadcasting stride_tricks array.</li>
<li>gh-6495 Unrecognized command line option ‘-ffpe-summary’ in gfortran.</li>
<li>gh-6497 Failure of reduce operation on recarrays.</li>
<li>gh-6498 Mention change in default casting rule in 1.10 release notes.</li>
<li>gh-6530 The partition function errors out on empty input.</li>
<li>gh-6532 numpy.inner return wrong inaccurate value sometimes.</li>
<li>gh-6563 Intent(out) broken in recent versions of f2py.</li>
<li>gh-6569 Cannot run tests after ‘python setup.py build_ext -i’</li>
<li>gh-6572 Error in broadcasting stride_tricks array component.</li>
<li>gh-6575 BUG: Split produces empty arrays with wrong number of dimensions</li>
<li>gh-6590 Fortran Array problem in numpy 1.10.</li>
<li>gh-6602 Random __all__ missing choice and dirichlet.</li>
<li>gh-6611 ma.dot no longer always returns a masked array in 1.10.</li>
<li>gh-6618 NPY_FORTRANORDER in make_fortran() in numpy.i</li>
<li>gh-6636 Memory leak in nested dtypes in numpy.recarray</li>
<li>gh-6641 Subsetting recarray by fields yields a structured array.</li>
<li>gh-6667 ma.make_mask handles ma.nomask input incorrectly.</li>
<li>gh-6675 Optimized blas detection broken in master and 1.10.</li>
<li>gh-6678 Getting unexpected error from: X.dtype = complex (or Y = X.view(complex))</li>
<li>gh-6718 f2py test fail in pip installed numpy-1.10.1 in virtualenv.</li>
<li>gh-6719 Error compiling Cython file: Pythonic division not allowed without gil.</li>
<li>gh-6771 Numpy.rec.fromarrays losing dtype metadata between versions 1.9.2 and 1.10.1</li>
<li>gh-6781 The travis-ci script in maintenance/1.10.x needs fixing.</li>
<li>gh-6807 Windows testing errors for 1.10.2</li>
</ul>
</div>
<div class="section" id="id119">
<h3>Merged PRs<a class="headerlink" href="#id119" title="Permalink to this headline">¶</a></h3>
<p>The following PRs have been merged into 1.10.2. When the PR is a backport,
the PR number for the original PR against master is listed.</p>
<ul class="simple">
<li>gh-5773 MAINT: Hide testing helper tracebacks when using them with pytest.</li>
<li>gh-6094 BUG: Fixed a bug with string representation of masked structured arrays.</li>
<li>gh-6208 MAINT: Speedup field access by removing unneeded safety checks.</li>
<li>gh-6460 BUG: Replacing the os.environ.clear by less invasive procedure.</li>
<li>gh-6470 BUG: Fix AttributeError in numpy distutils.</li>
<li>gh-6472 MAINT: Use Python 3.5 instead of 3.5-dev for travis 3.5 testing.</li>
<li>gh-6474 REL: Update Paver script for sdist and auto-switch test warnings.</li>
<li>gh-6478 BUG: Fix Intel compiler flags for OS X build.</li>
<li>gh-6481 MAINT: LIBPATH with spaces is now supported Python 2.7+ and Win32.</li>
<li>gh-6487 BUG: Allow nested use of parameters in definition of arrays in f2py.</li>
<li>gh-6488 BUG: Extend common blocks rather than overwriting in f2py.</li>
<li>gh-6499 DOC: Mention that default casting for inplace operations has changed.</li>
<li>gh-6500 BUG: Recarrays viewed as subarrays don’t convert to np.record type.</li>
<li>gh-6501 REL: Add “make upload” command for built docs, update “make dist”.</li>
<li>gh-6526 BUG: Fix use of __doc__ in setup.py for -OO mode.</li>
<li>gh-6527 BUG: Fix the IndexError when taking the median of an empty array.</li>
<li>gh-6537 BUG: Make ma.atleast_* with scalar argument return arrays.</li>
<li>gh-6538 BUG: Fix ma.masked_values does not shrink mask if requested.</li>
<li>gh-6546 BUG: Fix inner product regression for non-contiguous arrays.</li>
<li>gh-6553 BUG: Fix partition and argpartition error for empty input.</li>
<li>gh-6556 BUG: Error in broadcast_arrays with as_strided array.</li>
<li>gh-6558 MAINT: Minor update to “make upload” doc build command.</li>
<li>gh-6562 BUG: Disable view safety checks in recarray.</li>
<li>gh-6567 BUG: Revert some import * fixes in f2py.</li>
<li>gh-6574 DOC: Release notes for Numpy 1.10.2.</li>
<li>gh-6577 BUG: Fix for #6569, allowing build_ext –inplace</li>
<li>gh-6579 MAINT: Fix mistake in doc upload rule.</li>
<li>gh-6596 BUG: Fix swig for relaxed stride checking.</li>
<li>gh-6606 DOC: Update 1.10.2 release notes.</li>
<li>gh-6614 BUG: Add choice and dirichlet to numpy.random.__all__.</li>
<li>gh-6621 BUG: Fix swig make_fortran function.</li>
<li>gh-6628 BUG: Make allclose return python bool.</li>
<li>gh-6642 BUG: Fix memleak in _convert_from_dict.</li>
<li>gh-6643 ENH: make recarray.getitem return a recarray.</li>
<li>gh-6653 BUG: Fix ma dot to always return masked array.</li>
<li>gh-6668 BUG: ma.make_mask should always return nomask for nomask argument.</li>
<li>gh-6686 BUG: Fix a bug in assert_string_equal.</li>
<li>gh-6695 BUG: Fix removing tempdirs created during build.</li>
<li>gh-6697 MAINT: Fix spurious semicolon in macro definition of PyArray_FROM_OT.</li>
<li>gh-6698 TST: test np.rint bug for large integers.</li>
<li>gh-6717 BUG: Readd fallback CBLAS detection on linux.</li>
<li>gh-6721 BUG: Fix for #6719.</li>
<li>gh-6726 BUG: Fix bugs exposed by relaxed stride rollback.</li>
<li>gh-6757 BUG: link cblas library if cblas is detected.</li>
<li>gh-6756 TST: only test f2py, not f2py2.7 etc, fixes #6718.</li>
<li>gh-6747 DEP: Deprecate changing shape of non-C-contiguous array via descr.</li>
<li>gh-6775 MAINT: Include from __future__ boilerplate in some files missing it.</li>
<li>gh-6780 BUG: metadata is not copied to base_dtype.</li>
<li>gh-6783 BUG: Fix travis ci testing for new google infrastructure.</li>
<li>gh-6785 BUG: Quick and dirty fix for interp.</li>
<li>gh-6813 TST,BUG: Make test_mvoid_multidim_print work for 32 bit systems.</li>
<li>gh-6817 BUG: Disable 32-bit msvc9 compiler optimizations for npy_rint.</li>
<li>gh-6819 TST: Fix test_mvoid_multidim_print failures on Python 2.x for Windows.</li>
</ul>
<p>Initial support for mingwpy was reverted as it was causing problems for
non-windows builds.</p>
<ul class="simple">
<li>gh-6536 BUG: Revert gh-5614 to fix non-windows build problems</li>
</ul>
<p>A fix for np.lib.split was reverted because it resulted in “fixing”
behavior that will be present in the Numpy 1.11 and that was already
present in Numpy 1.9. See the discussion of the issue at gh-6575 for
clarification.</p>
<ul class="simple">
<li>gh-6576 BUG: Revert gh-6376 to fix split behavior for empty arrays.</li>
</ul>
<p>Relaxed stride checking was reverted. There were back compatibility
problems involving views changing the dtype of multidimensional Fortran
arrays that need to be dealt with over a longer timeframe.</p>
<ul class="simple">
<li>gh-6735 MAINT: Make no relaxed stride checking the default for 1.10.</li>
</ul>
</div>
<div class="section" id="notes">
<h3>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h3>
<p>A bug in the Numpy 1.10.1 release resulted in exceptions being raised for
<code class="docutils literal notranslate"><span class="pre">RuntimeWarning</span></code> and <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> in projects depending on Numpy.
That has been fixed.</p>
</div>
</div>
<div class="section" id="numpy-1-10-1-release-notes">
<h2>NumPy 1.10.1 Release Notes<a class="headerlink" href="#numpy-1-10-1-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This release deals with a few build problems that showed up in 1.10.0. Most
users would not have seen these problems. The differences are:</p>
<ul class="simple">
<li>Compiling with msvc9 or msvc10 for 32 bit Windows now requires SSE2.
This was the easiest fix for what looked to be some miscompiled code when
SSE2 was not used. If you need to compile for 32 bit Windows systems
without SSE2 support, mingw32 should still work.</li>
<li>Make compiling with VS2008 python2.7 SDK easier</li>
<li>Change Intel compiler options so that code will also be generated to
support systems without SSE4.2.</li>
<li>Some _config test functions needed an explicit integer return in
order to avoid the openSUSE rpmlinter erring out.</li>
<li>We ran into a problem with pipy not allowing reuse of filenames and a
resulting proliferation of <em>.</em>.*.postN releases. Not only were the names
getting out of hand, some packages were unable to work with the postN
suffix.</li>
</ul>
<p>Numpy 1.10.1 supports Python 2.6 - 2.7 and 3.2 - 3.5.</p>
<p>Commits:</p>
<p>45a3d84 DEP: Remove warning for <a class="reference internal" href="reference/generated/numpy.full.html#numpy.full" title="numpy.full"><code class="xref py py-obj docutils literal notranslate"><span class="pre">full</span></code></a> when dtype is set.
0c1a5df BLD: import setuptools to allow compile with VS2008 python2.7 sdk
04211c6 BUG: mask nan to 1 in ordered compare
826716f DOC: Document the reason msvc requires SSE2 on 32 bit platforms.
49fa187 BLD: enable SSE2 for 32-bit msvc 9 and 10 compilers
dcbc4cc MAINT: remove Wreturn-type warnings from config checks
d6564cb BLD: do not build exclusively for SSE4.2 processors
15cb66f BLD: do not build exclusively for SSE4.2 processors
c38bc08 DOC: fix var. reference in percentile docstring
78497f4 DOC: Sync 1.10.0-notes.rst in 1.10.x branch with master.</p>
</div>
<div class="section" id="numpy-1-10-0-release-notes">
<h2>NumPy 1.10.0 Release Notes<a class="headerlink" href="#numpy-1-10-0-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This release supports Python 2.6 - 2.7 and 3.2 - 3.5.</p>
<div class="section" id="id120">
<h3>Highlights<a class="headerlink" href="#id120" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>numpy.distutils now supports parallel compilation via the –parallel/-j
argument passed to setup.py build</li>
<li>numpy.distutils now supports additional customization via site.cfg to
control compilation parameters, i.e. runtime libraries, extra
linking/compilation flags.</li>
<li>Addition of <em>np.linalg.multi_dot</em>: compute the dot product of two or more
arrays in a single function call, while automatically selecting the fastest
evaluation order.</li>
<li>The new function <em class="xref py py-obj">np.stack</em> provides a general interface for joining a
sequence of arrays along a new axis, complementing <em class="xref py py-obj">np.concatenate</em> for
joining along an existing axis.</li>
<li>Addition of <a class="reference internal" href="reference/generated/numpy.nanprod.html#numpy.nanprod" title="numpy.nanprod"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nanprod</span></code></a> to the set of nanfunctions.</li>
<li>Support for the ‘&#64;’ operator in Python 3.5.</li>
</ul>
</div>
<div class="section" id="id121">
<h3>Dropped Support<a class="headerlink" href="#id121" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The _dotblas module has been removed. CBLAS Support is now in
Multiarray.</li>
<li>The testcalcs.py file has been removed.</li>
<li>The polytemplate.py file has been removed.</li>
<li>npy_PyFile_Dup and npy_PyFile_DupClose have been removed from
npy_3kcompat.h.</li>
<li>splitcmdline has been removed from numpy/distutils/exec_command.py.</li>
<li>try_run and get_output have been removed from
numpy/distutils/command/config.py</li>
<li>The a._format attribute is no longer supported for array printing.</li>
<li>Keywords <code class="docutils literal notranslate"><span class="pre">skiprows</span></code> and <code class="docutils literal notranslate"><span class="pre">missing</span></code> removed from np.genfromtxt.</li>
<li>Keyword <code class="docutils literal notranslate"><span class="pre">old_behavior</span></code> removed from np.correlate.</li>
</ul>
</div>
<div class="section" id="id122">
<h3>Future Changes<a class="headerlink" href="#id122" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>In array comparisons like <code class="docutils literal notranslate"><span class="pre">arr1</span> <span class="pre">==</span> <span class="pre">arr2</span></code>, many corner cases
involving strings or structured dtypes that used to return scalars
now issue <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code> or <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code>, and in the
future will be change to either perform elementwise comparisons or
raise an error.</li>
<li>In <code class="docutils literal notranslate"><span class="pre">np.lib.split</span></code> an empty array in the result always had dimension
<code class="docutils literal notranslate"><span class="pre">(0,)</span></code> no matter the dimensions of the array being split. In Numpy 1.11
that behavior will be changed so that the dimensions will be preserved. A
<code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code> for this change has been in place since Numpy 1.9 but,
due to a bug, sometimes no warning was raised and the dimensions were
already preserved.</li>
<li>The SafeEval class will be removed in Numpy 1.11.</li>
<li>The alterdot and restoredot functions will be removed in Numpy 1.11.</li>
</ul>
<p>See below for more details on these changes.</p>
</div>
<div class="section" id="id123">
<h3>Compatibility notes<a class="headerlink" href="#id123" title="Permalink to this headline">¶</a></h3>
<div class="section" id="default-casting-rule-change">
<h4>Default casting rule change<a class="headerlink" href="#default-casting-rule-change" title="Permalink to this headline">¶</a></h4>
<p>Default casting for inplace operations has changed to <code class="docutils literal notranslate"><span class="pre">'same_kind'</span></code>. For
instance, if n is an array of integers, and f is an array of floats, then
<code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">+=</span> <span class="pre">f</span></code> will result in a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>, whereas in previous Numpy
versions the floats would be silently cast to ints. In the unlikely case
that the example code is not an actual bug, it can be updated in a backward
compatible way by rewriting it as <code class="docutils literal notranslate"><span class="pre">np.add(n,</span> <span class="pre">f,</span> <span class="pre">out=n,</span> <span class="pre">casting='unsafe')</span></code>.
The old <code class="docutils literal notranslate"><span class="pre">'unsafe'</span></code> default has been deprecated since Numpy 1.7.</p>
</div>
<div class="section" id="numpy-version-string">
<h4>numpy version string<a class="headerlink" href="#numpy-version-string" title="Permalink to this headline">¶</a></h4>
<p>The numpy version string for development builds has been changed from
<code class="docutils literal notranslate"><span class="pre">x.y.z.dev-githash</span></code> to <code class="docutils literal notranslate"><span class="pre">x.y.z.dev0+githash</span></code> (note the +) in order to comply
with PEP 440.</p>
</div>
<div class="section" id="relaxed-stride-checking">
<h4>relaxed stride checking<a class="headerlink" href="#relaxed-stride-checking" title="Permalink to this headline">¶</a></h4>
<p>NPY_RELAXED_STRIDE_CHECKING is now true by default.</p>
<p>UPDATE: In 1.10.2 the default value of  NPY_RELAXED_STRIDE_CHECKING was
changed to false for back compatibility reasons. More time is needed before
it can be made the default. As part of the roadmap a deprecation of
dimension changing views of f_contiguous not c_contiguous arrays was also
added.</p>
</div>
<div class="section" id="concatenation-of-1d-arrays-along-any-but-axis-0-raises-indexerror">
<h4>Concatenation of 1d arrays along any but <code class="docutils literal notranslate"><span class="pre">axis=0</span></code> raises <code class="docutils literal notranslate"><span class="pre">IndexError</span></code><a class="headerlink" href="#concatenation-of-1d-arrays-along-any-but-axis-0-raises-indexerror" title="Permalink to this headline">¶</a></h4>
<p>Using axis != 0 has raised a DeprecationWarning since NumPy 1.7, it now
raises an error.</p>
</div>
<div class="section" id="np-ravel-np-diagonal-and-np-diag-now-preserve-subtypes">
<h4><em>np.ravel</em>, <em>np.diagonal</em> and <em>np.diag</em> now preserve subtypes<a class="headerlink" href="#np-ravel-np-diagonal-and-np-diag-now-preserve-subtypes" title="Permalink to this headline">¶</a></h4>
<p>There was inconsistent behavior between <em>x.ravel()</em> and <em>np.ravel(x)</em>, as
well as between <em>x.diagonal()</em> and <em>np.diagonal(x)</em>, with the methods
preserving subtypes while the functions did not. This has been fixed and
the functions now behave like the methods, preserving subtypes except in
the case of matrices.  Matrices are special cased for backward
compatibility and still return 1-D arrays as before. If you need to
preserve the matrix subtype, use the methods instead of the functions.</p>
</div>
<div class="section" id="rollaxis-and-swapaxes-always-return-a-view">
<h4><em>rollaxis</em> and <em>swapaxes</em> always return a view<a class="headerlink" href="#rollaxis-and-swapaxes-always-return-a-view" title="Permalink to this headline">¶</a></h4>
<p>Previously, a view was returned except when no change was made in the order
of the axes, in which case the input array was returned.  A view is now
returned in all cases.</p>
</div>
<div class="section" id="nonzero-now-returns-base-ndarrays">
<h4><em>nonzero</em> now returns base ndarrays<a class="headerlink" href="#nonzero-now-returns-base-ndarrays" title="Permalink to this headline">¶</a></h4>
<p>Previously, an inconsistency existed between 1-D inputs (returning a
base ndarray) and higher dimensional ones (which preserved subclasses).
Behavior has been unified, and the return will now be a base ndarray.
Subclasses can still override this behavior by providing their own
<em>nonzero</em> method.</p>
</div>
<div class="section" id="id124">
<h4>C API<a class="headerlink" href="#id124" title="Permalink to this headline">¶</a></h4>
<p>The changes to <em>swapaxes</em> also apply to the <em>PyArray_SwapAxes</em> C function,
which now returns a view in all cases.</p>
<p>The changes to <em>nonzero</em> also apply to the <em>PyArray_Nonzero</em> C function,
which now returns a base ndarray in all cases.</p>
<p>The dtype structure (PyArray_Descr) has a new member at the end to cache
its hash value.  This shouldn’t affect any well-written applications.</p>
<p>The change to the concatenation function DeprecationWarning also affects
PyArray_ConcatenateArrays,</p>
</div>
<div class="section" id="recarray-field-return-types">
<h4>recarray field return types<a class="headerlink" href="#recarray-field-return-types" title="Permalink to this headline">¶</a></h4>
<p>Previously the returned types for recarray fields accessed by attribute and by
index were inconsistent, and fields of string type were returned as chararrays.
Now, fields accessed by either attribute or indexing will return an ndarray for
fields of non-structured type, and a recarray for fields of structured type.
Notably, this affect recarrays containing strings with whitespace, as trailing
whitespace is trimmed from chararrays but kept in ndarrays of string type.
Also, the dtype.type of nested structured fields is now inherited.</p>
</div>
<div class="section" id="recarray-views">
<h4>recarray views<a class="headerlink" href="#recarray-views" title="Permalink to this headline">¶</a></h4>
<p>Viewing an ndarray as a recarray now automatically converts the dtype to
np.record. See new record array documentation. Additionally, viewing a recarray
with a non-structured dtype no longer converts the result’s type to ndarray -
the result will remain a recarray.</p>
</div>
<div class="section" id="out-keyword-argument-of-ufuncs-now-accepts-tuples-of-arrays">
<h4>‘out’ keyword argument of ufuncs now accepts tuples of arrays<a class="headerlink" href="#out-keyword-argument-of-ufuncs-now-accepts-tuples-of-arrays" title="Permalink to this headline">¶</a></h4>
<p>When using the ‘out’ keyword argument of a ufunc, a tuple of arrays, one per
ufunc output, can be provided. For ufuncs with a single output a single array
is also a valid ‘out’ keyword argument. Previously a single array could be
provided in the ‘out’ keyword argument, and it would be used as the first
output for ufuncs with multiple outputs, is deprecated, and will result in a
<em class="xref py py-obj">DeprecationWarning</em> now and an error in the future.</p>
</div>
<div class="section" id="byte-array-indices-now-raises-an-indexerror">
<h4>byte-array indices now raises an IndexError<a class="headerlink" href="#byte-array-indices-now-raises-an-indexerror" title="Permalink to this headline">¶</a></h4>
<p>Indexing an ndarray using a byte-string in Python 3 now raises an IndexError
instead of a ValueError.</p>
</div>
<div class="section" id="masked-arrays-containing-objects-with-arrays">
<h4>Masked arrays containing objects with arrays<a class="headerlink" href="#masked-arrays-containing-objects-with-arrays" title="Permalink to this headline">¶</a></h4>
<p>For such (rare) masked arrays, getting a single masked item no longer returns a
corrupted masked array, but a fully masked version of the item.</p>
</div>
<div class="section" id="median-warns-and-returns-nan-when-invalid-values-are-encountered">
<h4>Median warns and returns nan when invalid values are encountered<a class="headerlink" href="#median-warns-and-returns-nan-when-invalid-values-are-encountered" title="Permalink to this headline">¶</a></h4>
<p>Similar to mean, median and percentile now emits a Runtime warning and
returns <a class="reference internal" href="reference/constants.html#numpy.NaN" title="numpy.NaN"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NaN</span></code></a> in slices where a <a class="reference internal" href="reference/constants.html#numpy.NaN" title="numpy.NaN"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NaN</span></code></a> is present.
To compute the median or percentile while ignoring invalid values use the
new <a class="reference internal" href="reference/generated/numpy.nanmedian.html#numpy.nanmedian" title="numpy.nanmedian"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nanmedian</span></code></a> or <a class="reference internal" href="reference/generated/numpy.nanpercentile.html#numpy.nanpercentile" title="numpy.nanpercentile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nanpercentile</span></code></a> functions.</p>
</div>
<div class="section" id="functions-available-from-numpy-ma-testutils-have-changed">
<h4>Functions available from numpy.ma.testutils have changed<a class="headerlink" href="#functions-available-from-numpy-ma-testutils-have-changed" title="Permalink to this headline">¶</a></h4>
<p>All functions from numpy.testing were once available from
numpy.ma.testutils but not all of them were redefined to work with masked
arrays. Most of those functions have now been removed from
numpy.ma.testutils with a small subset retained in order to preserve
backward compatibility. In the long run this should help avoid mistaken use
of the wrong functions, but it may cause import problems for some.</p>
</div>
</div>
<div class="section" id="id125">
<h3>New Features<a class="headerlink" href="#id125" title="Permalink to this headline">¶</a></h3>
<div class="section" id="reading-extra-flags-from-site-cfg">
<h4>Reading extra flags from site.cfg<a class="headerlink" href="#reading-extra-flags-from-site-cfg" title="Permalink to this headline">¶</a></h4>
<p>Previously customization of compilation of dependency libraries and numpy
itself was only accomblishable via code changes in the distutils package.
Now numpy.distutils reads in the following extra flags from each group of the
<em>site.cfg</em>:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">runtime_library_dirs/rpath</span></code>, sets runtime library directories to override</dt>
<dd><code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code></dd>
</dl>
</li>
<li><code class="docutils literal notranslate"><span class="pre">extra_compile_args</span></code>, add extra flags to the compilation of sources</li>
<li><code class="docutils literal notranslate"><span class="pre">extra_link_args</span></code>, add extra flags when linking libraries</li>
</ul>
<p>This should, at least partially, complete user customization.</p>
</div>
<div class="section" id="np-cbrt-to-compute-cube-root-for-real-floats">
<h4><em>np.cbrt</em> to compute cube root for real floats<a class="headerlink" href="#np-cbrt-to-compute-cube-root-for-real-floats" title="Permalink to this headline">¶</a></h4>
<p><em>np.cbrt</em> wraps the C99 cube root function <em>cbrt</em>.
Compared to <em>np.power(x, 1./3.)</em> it is well defined for negative real floats
and a bit faster.</p>
</div>
<div class="section" id="numpy-distutils-now-allows-parallel-compilation">
<h4>numpy.distutils now allows parallel compilation<a class="headerlink" href="#numpy-distutils-now-allows-parallel-compilation" title="Permalink to this headline">¶</a></h4>
<p>By passing <em>–parallel=n</em> or <em>-j n</em> to <em>setup.py build</em> the compilation of
extensions is now performed in <em>n</em> parallel processes.
The parallelization is limited to files within one extension so projects using
Cython will not profit because it builds extensions from single files.</p>
</div>
<div class="section" id="genfromtxt-has-a-new-max-rows-argument">
<h4><em>genfromtxt</em> has a new <code class="docutils literal notranslate"><span class="pre">max_rows</span></code> argument<a class="headerlink" href="#genfromtxt-has-a-new-max-rows-argument" title="Permalink to this headline">¶</a></h4>
<p>A <code class="docutils literal notranslate"><span class="pre">max_rows</span></code> argument has been added to <em>genfromtxt</em> to limit the
number of rows read in a single call. Using this functionality, it is
possible to read in multiple arrays stored in a single file by making
repeated calls to the function.</p>
</div>
<div class="section" id="new-function-np-broadcast-to-for-invoking-array-broadcasting">
<h4>New function <em>np.broadcast_to</em> for invoking array broadcasting<a class="headerlink" href="#new-function-np-broadcast-to-for-invoking-array-broadcasting" title="Permalink to this headline">¶</a></h4>
<p><em>np.broadcast_to</em> manually broadcasts an array to a given shape according to
numpy’s broadcasting rules. The functionality is similar to broadcast_arrays,
which in fact has been rewritten to use broadcast_to internally, but only a
single array is necessary.</p>
</div>
<div class="section" id="new-context-manager-clear-and-catch-warnings-for-testing-warnings">
<h4>New context manager <em>clear_and_catch_warnings</em> for testing warnings<a class="headerlink" href="#new-context-manager-clear-and-catch-warnings-for-testing-warnings" title="Permalink to this headline">¶</a></h4>
<p>When Python emits a warning, it records that this warning has been emitted in
the module that caused the warning, in a module attribute
<code class="docutils literal notranslate"><span class="pre">__warningregistry__</span></code>.  Once this has happened, it is not possible to emit
the warning again, unless you clear the relevant entry in
<code class="docutils literal notranslate"><span class="pre">__warningregistry__</span></code>.  This makes is hard and fragile to test warnings,
because if your test comes after another that has already caused the warning,
you will not be able to emit the warning or test it. The context manager
<code class="docutils literal notranslate"><span class="pre">clear_and_catch_warnings</span></code> clears warnings from the module registry on entry
and resets them on exit, meaning that warnings can be re-raised.</p>
</div>
<div class="section" id="cov-has-new-fweights-and-aweights-arguments">
<h4><em>cov</em> has new <code class="docutils literal notranslate"><span class="pre">fweights</span></code> and <code class="docutils literal notranslate"><span class="pre">aweights</span></code> arguments<a class="headerlink" href="#cov-has-new-fweights-and-aweights-arguments" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">fweights</span></code> and <code class="docutils literal notranslate"><span class="pre">aweights</span></code> arguments add new functionality to
covariance calculations by applying two types of weighting to observation
vectors. An array of <code class="docutils literal notranslate"><span class="pre">fweights</span></code> indicates the number of repeats of each
observation vector, and an array of <code class="docutils literal notranslate"><span class="pre">aweights</span></code> provides their relative
importance or probability.</p>
</div>
<div class="section" id="support-for-the-operator-in-python-3-5">
<h4>Support for the ‘&#64;’ operator in Python 3.5+<a class="headerlink" href="#support-for-the-operator-in-python-3-5" title="Permalink to this headline">¶</a></h4>
<p>Python 3.5 adds support for a matrix multiplication operator ‘&#64;’ proposed
in PEP465. Preliminary support for that has been implemented, and an
equivalent function <code class="docutils literal notranslate"><span class="pre">matmul</span></code> has also been added for testing purposes and
use in earlier Python versions. The function is preliminary and the order
and number of its optional arguments can be expected to change.</p>
</div>
<div class="section" id="new-argument-norm-to-fft-functions">
<h4>New argument <code class="docutils literal notranslate"><span class="pre">norm</span></code> to fft functions<a class="headerlink" href="#new-argument-norm-to-fft-functions" title="Permalink to this headline">¶</a></h4>
<p>The default normalization has the direct transforms unscaled and the inverse
transforms are scaled by <img class="math" src="_images/math/5fb412b4e8f9665622ddc2263d9925cd9a97207e.svg" alt="1/n"/>. It is possible to obtain unitary
transforms by setting the keyword argument <code class="docutils literal notranslate"><span class="pre">norm</span></code> to <code class="docutils literal notranslate"><span class="pre">&quot;ortho&quot;</span></code> (default is
<em class="xref py py-obj">None</em>) so that both direct and inverse transforms will be scaled by
<img class="math" src="_images/math/589822d8ab1b82cfe52fcb74e226ff7e7723af6e.svg" alt="1/\\sqrt{n}"/>.</p>
</div>
</div>
<div class="section" id="id126">
<h3>Improvements<a class="headerlink" href="#id126" title="Permalink to this headline">¶</a></h3>
<div class="section" id="np-digitize-using-binary-search">
<h4><em>np.digitize</em> using binary search<a class="headerlink" href="#np-digitize-using-binary-search" title="Permalink to this headline">¶</a></h4>
<p><em>np.digitize</em> is now implemented in terms of <em>np.searchsorted</em>. This means
that a binary search is used to bin the values, which scales much better
for larger number of bins than the previous linear search. It also removes
the requirement for the input array to be 1-dimensional.</p>
</div>
<div class="section" id="np-poly-now-casts-integer-inputs-to-float">
<h4><em>np.poly</em> now casts integer inputs to float<a class="headerlink" href="#np-poly-now-casts-integer-inputs-to-float" title="Permalink to this headline">¶</a></h4>
<p><em>np.poly</em> will now cast 1-dimensional input arrays of integer type to double
precision floating point, to prevent integer overflow when computing the monic
polynomial. It is still possible to obtain higher precision results by
passing in an array of object type, filled e.g. with Python ints.</p>
</div>
<div class="section" id="np-interp-can-now-be-used-with-periodic-functions">
<h4><em>np.interp</em> can now be used with periodic functions<a class="headerlink" href="#np-interp-can-now-be-used-with-periodic-functions" title="Permalink to this headline">¶</a></h4>
<p><em>np.interp</em> now has a new parameter <em>period</em> that supplies the period of the
input data <em>xp</em>. In such case, the input data is properly normalized to the
given period and one end point is added to each extremity of <em>xp</em> in order to
close the previous and the next period cycles, resulting in the correct
interpolation behavior.</p>
</div>
<div class="section" id="np-pad-supports-more-input-types-for-pad-width-and-constant-values">
<h4><em>np.pad</em> supports more input types for <code class="docutils literal notranslate"><span class="pre">pad_width</span></code> and <code class="docutils literal notranslate"><span class="pre">constant_values</span></code><a class="headerlink" href="#np-pad-supports-more-input-types-for-pad-width-and-constant-values" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">constant_values</span></code> parameters now accepts NumPy arrays and float values.
NumPy arrays are supported as input for <code class="docutils literal notranslate"><span class="pre">pad_width</span></code>, and an exception is
raised if its values are not of integral type.</p>
</div>
<div class="section" id="np-argmax-and-np-argmin-now-support-an-out-argument">
<h4><em>np.argmax</em> and <em>np.argmin</em> now support an <code class="docutils literal notranslate"><span class="pre">out</span></code> argument<a class="headerlink" href="#np-argmax-and-np-argmin-now-support-an-out-argument" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">out</span></code> parameter was added to <em>np.argmax</em> and <em>np.argmin</em> for consistency
with <em>ndarray.argmax</em> and <em>ndarray.argmin</em>. The new parameter behaves exactly
as it does in those methods.</p>
</div>
<div class="section" id="more-system-c99-complex-functions-detected-and-used">
<h4>More system C99 complex functions detected and used<a class="headerlink" href="#more-system-c99-complex-functions-detected-and-used" title="Permalink to this headline">¶</a></h4>
<p>All of the functions <code class="docutils literal notranslate"><span class="pre">in</span> <span class="pre">complex.h</span></code> are now detected. There are new
fallback implementations of the following functions.</p>
<ul class="simple">
<li>npy_ctan,</li>
<li>npy_cacos, npy_casin, npy_catan</li>
<li>npy_ccosh, npy_csinh, npy_ctanh,</li>
<li>npy_cacosh, npy_casinh, npy_catanh</li>
</ul>
<p>As a result of these improvements, there will be some small changes in
returned values, especially for corner cases.</p>
</div>
<div class="section" id="np-loadtxt-support-for-the-strings-produced-by-the-float-hex-method">
<h4><em>np.loadtxt</em> support for the strings produced by the <code class="docutils literal notranslate"><span class="pre">float.hex</span></code> method<a class="headerlink" href="#np-loadtxt-support-for-the-strings-produced-by-the-float-hex-method" title="Permalink to this headline">¶</a></h4>
<p>The strings produced by <code class="docutils literal notranslate"><span class="pre">float.hex</span></code> look like <code class="docutils literal notranslate"><span class="pre">0x1.921fb54442d18p+1</span></code>,
so this is not the hex used to represent unsigned integer types.</p>
</div>
<div class="section" id="np-isclose-properly-handles-minimal-values-of-integer-dtypes">
<h4><em>np.isclose</em> properly handles minimal values of integer dtypes<a class="headerlink" href="#np-isclose-properly-handles-minimal-values-of-integer-dtypes" title="Permalink to this headline">¶</a></h4>
<p>In order to properly handle minimal values of integer types, <em>np.isclose</em> will
now cast to the float dtype during comparisons. This aligns its behavior with
what was provided by <em>np.allclose</em>.</p>
</div>
<div class="section" id="np-allclose-uses-np-isclose-internally">
<h4><em>np.allclose</em> uses <em>np.isclose</em> internally.<a class="headerlink" href="#np-allclose-uses-np-isclose-internally" title="Permalink to this headline">¶</a></h4>
<p><em>np.allclose</em> now uses <em>np.isclose</em> internally and inherits the ability to
compare NaNs as equal by setting <code class="docutils literal notranslate"><span class="pre">equal_nan=True</span></code>. Subclasses, such as
<em>np.ma.MaskedArray</em>, are also preserved now.</p>
</div>
<div class="section" id="np-genfromtxt-now-handles-large-integers-correctly">
<h4><em>np.genfromtxt</em> now handles large integers correctly<a class="headerlink" href="#np-genfromtxt-now-handles-large-integers-correctly" title="Permalink to this headline">¶</a></h4>
<p><em>np.genfromtxt</em> now correctly handles integers larger than <code class="docutils literal notranslate"><span class="pre">2**31-1</span></code> on
32-bit systems and larger than <code class="docutils literal notranslate"><span class="pre">2**63-1</span></code> on 64-bit systems (it previously
crashed with an <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> in these cases). Integers larger than
<code class="docutils literal notranslate"><span class="pre">2**63-1</span></code> are converted to floating-point values.</p>
</div>
<div class="section" id="np-load-np-save-have-pickle-backward-compatibility-flags">
<h4><em>np.load</em>, <em>np.save</em> have pickle backward compatibility flags<a class="headerlink" href="#np-load-np-save-have-pickle-backward-compatibility-flags" title="Permalink to this headline">¶</a></h4>
<p>The functions <em>np.load</em> and <em>np.save</em> have additional keyword
arguments for controlling backward compatibility of pickled Python
objects. This enables Numpy on Python 3 to load npy files containing
object arrays that were generated on Python 2.</p>
</div>
<div class="section" id="maskedarray-support-for-more-complicated-base-classes">
<h4>MaskedArray support for more complicated base classes<a class="headerlink" href="#maskedarray-support-for-more-complicated-base-classes" title="Permalink to this headline">¶</a></h4>
<p>Built-in assumptions that the baseclass behaved like a plain array are being
removed. In particular, setting and getting elements and ranges will respect
baseclass overrides of <code class="docutils literal notranslate"><span class="pre">__setitem__</span></code> and <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code>, and arithmetic
will respect overrides of <code class="docutils literal notranslate"><span class="pre">__add__</span></code>, <code class="docutils literal notranslate"><span class="pre">__sub__</span></code>, etc.</p>
</div>
</div>
<div class="section" id="id127">
<h3>Changes<a class="headerlink" href="#id127" title="Permalink to this headline">¶</a></h3>
<div class="section" id="dotblas-functionality-moved-to-multiarray">
<h4>dotblas functionality moved to multiarray<a class="headerlink" href="#dotblas-functionality-moved-to-multiarray" title="Permalink to this headline">¶</a></h4>
<p>The cblas versions of dot, inner, and vdot have been integrated into
the multiarray module. In particular, vdot is now a multiarray function,
which it was not before.</p>
</div>
<div class="section" id="stricter-check-of-gufunc-signature-compliance">
<h4>stricter check of gufunc signature compliance<a class="headerlink" href="#stricter-check-of-gufunc-signature-compliance" title="Permalink to this headline">¶</a></h4>
<p>Inputs to generalized universal functions are now more strictly checked
against the function’s signature: all core dimensions are now required to
be present in input arrays; core dimensions with the same label must have
the exact same size; and output core dimension’s must be specified, either
by a same label input core dimension or by a passed-in output array.</p>
</div>
<div class="section" id="views-returned-from-np-einsum-are-writeable">
<h4>views returned from <em>np.einsum</em> are writeable<a class="headerlink" href="#views-returned-from-np-einsum-are-writeable" title="Permalink to this headline">¶</a></h4>
<p>Views returned by <em>np.einsum</em> will now be writeable whenever the input
array is writeable.</p>
</div>
<div class="section" id="np-argmin-skips-nat-values">
<h4><em>np.argmin</em> skips NaT values<a class="headerlink" href="#np-argmin-skips-nat-values" title="Permalink to this headline">¶</a></h4>
<p><em>np.argmin</em> now skips NaT values in datetime64 and timedelta64 arrays,
making it consistent with <em>np.min</em>, <em>np.argmax</em> and <em>np.max</em>.</p>
</div>
</div>
<div class="section" id="id128">
<h3>Deprecations<a class="headerlink" href="#id128" title="Permalink to this headline">¶</a></h3>
<div class="section" id="array-comparisons-involving-strings-or-structured-dtypes">
<h4>Array comparisons involving strings or structured dtypes<a class="headerlink" href="#array-comparisons-involving-strings-or-structured-dtypes" title="Permalink to this headline">¶</a></h4>
<p>Normally, comparison operations on arrays perform elementwise
comparisons and return arrays of booleans. But in some corner cases,
especially involving strings are structured dtypes, NumPy has
historically returned a scalar instead. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">### Current behaviour</span>

<span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;foo&quot;</span>
<span class="c1"># -&gt; False</span>

<span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="s2">&quot;foo&quot;</span>
<span class="c1"># -&gt; True on Python 2, error on Python 3</span>

<span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;i4,i4&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;i4,i4,i4&quot;</span><span class="p">)</span>
<span class="c1"># -&gt; False</span>
</pre></div>
</div>
<p>Continuing work started in 1.9, in 1.10 these comparisons will now
raise <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code> or <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code>, and in the future
they will be modified to behave more consistently with other
comparison operations, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">### Future behaviour</span>

<span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;foo&quot;</span>
<span class="c1"># -&gt; array([False, False])</span>

<span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="s2">&quot;foo&quot;</span>
<span class="c1"># -&gt; error, strings and numbers are not orderable</span>

<span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;i4,i4&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;i4,i4,i4&quot;</span><span class="p">)</span>
<span class="c1"># -&gt; [False, False]</span>
</pre></div>
</div>
</div>
<div class="section" id="safeeval">
<h4>SafeEval<a class="headerlink" href="#safeeval" title="Permalink to this headline">¶</a></h4>
<p>The SafeEval class in numpy/lib/utils.py is deprecated and will be removed
in the next release.</p>
</div>
<div class="section" id="alterdot-restoredot">
<h4>alterdot, restoredot<a class="headerlink" href="#alterdot-restoredot" title="Permalink to this headline">¶</a></h4>
<p>The alterdot and restoredot functions no longer do anything, and are
deprecated.</p>
</div>
<div class="section" id="pkgload-packageloader">
<h4>pkgload, PackageLoader<a class="headerlink" href="#pkgload-packageloader" title="Permalink to this headline">¶</a></h4>
<p>These ways of loading packages are now deprecated.</p>
</div>
<div class="section" id="bias-ddof-arguments-to-corrcoef">
<h4>bias, ddof arguments to corrcoef<a class="headerlink" href="#bias-ddof-arguments-to-corrcoef" title="Permalink to this headline">¶</a></h4>
<p>The values for the <code class="docutils literal notranslate"><span class="pre">bias</span></code> and <code class="docutils literal notranslate"><span class="pre">ddof</span></code> arguments to the <code class="docutils literal notranslate"><span class="pre">corrcoef</span></code>
function canceled in the division implied by the correlation coefficient and
so had no effect on the returned values.</p>
<p>We now deprecate these arguments to <code class="docutils literal notranslate"><span class="pre">corrcoef</span></code> and the masked array version
<code class="docutils literal notranslate"><span class="pre">ma.corrcoef</span></code>.</p>
<p>Because we are deprecating the <code class="docutils literal notranslate"><span class="pre">bias</span></code> argument to <code class="docutils literal notranslate"><span class="pre">ma.corrcoef</span></code>, we also
deprecate the use of the <code class="docutils literal notranslate"><span class="pre">allow_masked</span></code> argument as a positional argument,
as its position will change with the removal of <code class="docutils literal notranslate"><span class="pre">bias</span></code>.  <code class="docutils literal notranslate"><span class="pre">allow_masked</span></code>
will in due course become a keyword-only argument.</p>
</div>
<div class="section" id="dtype-string-representation-changes">
<h4>dtype string representation changes<a class="headerlink" href="#dtype-string-representation-changes" title="Permalink to this headline">¶</a></h4>
<p>Since 1.6, creating a dtype object from its string representation, e.g.
<code class="docutils literal notranslate"><span class="pre">'f4'</span></code>, would issue a deprecation warning if the size did not correspond
to an existing type, and default to creating a dtype of the default size
for the type. Starting with this release, this will now raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.</p>
<p>The only exception is object dtypes, where both <code class="docutils literal notranslate"><span class="pre">'O4'</span></code> and <code class="docutils literal notranslate"><span class="pre">'O8'</span></code> will
still issue a deprecation warning. This platform-dependent representation
will raise an error in the next release.</p>
<p>In preparation for this upcoming change, the string representation of an
object dtype, i.e. <code class="docutils literal notranslate"><span class="pre">np.dtype(object).str</span></code>, no longer includes the item
size, i.e. will return <code class="docutils literal notranslate"><span class="pre">'|O'</span></code> instead of <code class="docutils literal notranslate"><span class="pre">'|O4'</span></code> or <code class="docutils literal notranslate"><span class="pre">'|O8'</span></code> as
before.</p>
</div>
</div>
</div>
<div class="section" id="numpy-1-9-2-release-notes">
<h2>NumPy 1.9.2 Release Notes<a class="headerlink" href="#numpy-1-9-2-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix only release in the 1.9.x series.</p>
<div class="section" id="id129">
<h3>Issues fixed<a class="headerlink" href="#id129" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://github.com/numpy/numpy/issues/5316">#5316</a>: fix too large dtype alignment of strings and complex types</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/issues/5424">#5424</a>: fix ma.median when used on ndarrays</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/issues/5481">#5481</a>: Fix astype for structured array fields of different byte order</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/issues/5354">#5354</a>: fix segfault when clipping complex arrays</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/issues/5524">#5524</a>: allow np.argpartition on non ndarrays</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/issues/5612">#5612</a>: Fixes ndarray.fill to accept full range of uint64</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/issues/5155">#5155</a>: Fix loadtxt with comments=None and a string None data</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/issues/4476">#4476</a>: Masked array view fails if structured dtype has datetime component</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/issues/5388">#5388</a>: Make RandomState.set_state and RandomState.get_state threadsafe</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/issues/5390">#5390</a>: make seed, randint and shuffle threadsafe</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/issues/5374">#5374</a>: Fixed incorrect assert_array_almost_equal_nulp documentation</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/issues/5393">#5393</a>: Add support for ATLAS &gt; 3.9.33.</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/issues/5313">#5313</a>: PyArray_AsCArray caused segfault for 3d arrays</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/issues/5492">#5492</a>: handle out of memory in rfftf</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/issues/4181">#4181</a>: fix a few bugs in the random.pareto docstring</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/issues/5359">#5359</a>: minor changes to linspace docstring</li>
<li><a class="reference external" href="https://github.com/numpy/numpy/issues/4723">#4723</a>: fix a compile issues on AIX</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-9-1-release-notes">
<h2>NumPy 1.9.1 Release Notes<a class="headerlink" href="#numpy-1-9-1-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix only release in the 1.9.x series.</p>
<div class="section" id="id130">
<h3>Issues fixed<a class="headerlink" href="#id130" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>gh-5184: restore linear edge behaviour of gradient to as it was in &lt; 1.9.
The second order behaviour is available via the <em class="xref py py-obj">edge_order</em> keyword</li>
<li>gh-4007: workaround Accelerate sgemv crash on OSX 10.9</li>
<li>gh-5100: restore object dtype inference from iterable objects without <em class="xref py py-obj">len()</em></li>
<li>gh-5163: avoid gcc-4.1.2 (red hat 5) miscompilation causing a crash</li>
<li>gh-5138: fix nanmedian on arrays containing inf</li>
<li>gh-5240: fix not returning out array from ufuncs with subok=False set</li>
<li>gh-5203: copy inherited masks in MaskedArray.__array_finalize__</li>
<li>gh-2317: genfromtxt did not handle filling_values=0 correctly</li>
<li>gh-5067: restore api of npy_PyFile_DupClose in python2</li>
<li>gh-5063: cannot convert invalid sequence index to tuple</li>
<li>gh-5082: Segmentation fault with argmin() on unicode arrays</li>
<li>gh-5095: don’t propagate subtypes from np.where</li>
<li>gh-5104: np.inner segfaults with SciPy’s sparse matrices</li>
<li>gh-5251: Issue with fromarrays not using correct format for unicode arrays</li>
<li>gh-5136: Import dummy_threading if importing threading fails</li>
<li>gh-5148: Make numpy import when run with Python flag ‘-OO’</li>
<li>gh-5147: Einsum double contraction in particular order causes ValueError</li>
<li>gh-479: Make f2py work with intent(in out)</li>
<li>gh-5170: Make python2 .npy files readable in python3</li>
<li>gh-5027: Use ‘ll’ as the default length specifier for long long</li>
<li>gh-4896: fix build error with MSVC 2013 caused by C99 complex support</li>
<li>gh-4465: Make PyArray_PutTo respect writeable flag</li>
<li>gh-5225: fix crash when using arange on datetime without dtype set</li>
<li>gh-5231: fix build in c99 mode</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-9-0-release-notes">
<h2>NumPy 1.9.0 Release Notes<a class="headerlink" href="#numpy-1-9-0-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This release supports Python 2.6 - 2.7 and 3.2 - 3.4.</p>
<div class="section" id="id131">
<h3>Highlights<a class="headerlink" href="#id131" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Numerous performance improvements in various areas, most notably indexing and
operations on small arrays are significantly faster.
Indexing operations now also release the GIL.</li>
<li>Addition of <a class="reference internal" href="reference/generated/numpy.nanmedian.html#numpy.nanmedian" title="numpy.nanmedian"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nanmedian</span></code></a> and <a class="reference internal" href="reference/generated/numpy.nanpercentile.html#numpy.nanpercentile" title="numpy.nanpercentile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nanpercentile</span></code></a> rounds out the nanfunction set.</li>
</ul>
</div>
<div class="section" id="id132">
<h3>Dropped Support<a class="headerlink" href="#id132" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The oldnumeric and numarray modules have been removed.</li>
<li>The doc/pyrex and doc/cython directories have been removed.</li>
<li>The doc/numpybook directory has been removed.</li>
<li>The numpy/testing/numpytest.py file has been removed together with
the importall function it contained.</li>
</ul>
</div>
<div class="section" id="id133">
<h3>Future Changes<a class="headerlink" href="#id133" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The numpy/polynomial/polytemplate.py file will be removed in NumPy 1.10.0.</li>
<li>Default casting for inplace operations will change to ‘same_kind’ in
Numpy 1.10.0. This will certainly break some code that is currently
ignoring the warning.</li>
<li>Relaxed stride checking will be the default in 1.10.0</li>
<li>String version checks will break because, e.g., ‘1.9’ &gt; ‘1.10’ is True. A
NumpyVersion class has been added that can be used for such comparisons.</li>
<li>The diagonal and diag functions will return writeable views in 1.10.0</li>
<li>The <em class="xref py py-obj">S</em> and/or <em class="xref py py-obj">a</em> dtypes may be changed to represent Python strings
instead of bytes, in Python 3 these two types are very different.</li>
</ul>
</div>
<div class="section" id="id134">
<h3>Compatibility notes<a class="headerlink" href="#id134" title="Permalink to this headline">¶</a></h3>
<div class="section" id="the-diagonal-and-diag-functions-return-readonly-views">
<h4>The diagonal and diag functions return readonly views.<a class="headerlink" href="#the-diagonal-and-diag-functions-return-readonly-views" title="Permalink to this headline">¶</a></h4>
<p>In NumPy 1.8, the diagonal and diag functions returned readonly copies, in
NumPy 1.9 they return readonly views, and in 1.10 they will return writeable
views.</p>
</div>
<div class="section" id="special-scalar-float-values-don-t-cause-upcast-to-double-anymore">
<h4>Special scalar float values don’t cause upcast to double anymore<a class="headerlink" href="#special-scalar-float-values-don-t-cause-upcast-to-double-anymore" title="Permalink to this headline">¶</a></h4>
<p>In previous numpy versions operations involving floating point scalars
containing special values <code class="docutils literal notranslate"><span class="pre">NaN</span></code>, <code class="docutils literal notranslate"><span class="pre">Inf</span></code> and <code class="docutils literal notranslate"><span class="pre">-Inf</span></code> caused the result
type to be at least <code class="docutils literal notranslate"><span class="pre">float64</span></code>.  As the special values can be represented
in the smallest available floating point type, the upcast is not performed
anymore.</p>
<p>For example the dtype of:</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">np.array([1.],</span> <span class="pre">dtype=np.float32)</span> <span class="pre">*</span> <span class="pre">float('nan')</span></code></div></blockquote>
<p>now remains <code class="docutils literal notranslate"><span class="pre">float32</span></code> instead of being cast to <code class="docutils literal notranslate"><span class="pre">float64</span></code>.
Operations involving non-special values have not been changed.</p>
</div>
<div class="section" id="percentile-output-changes">
<h4>Percentile output changes<a class="headerlink" href="#percentile-output-changes" title="Permalink to this headline">¶</a></h4>
<p>If given more than one percentile to compute numpy.percentile returns an
array instead of a list. A single percentile still returns a scalar.  The
array is equivalent to converting the list returned in older versions
to an array via <code class="docutils literal notranslate"><span class="pre">np.array</span></code>.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">overwrite_input</span></code> option is used the input is only partially
instead of fully sorted.</p>
</div>
<div class="section" id="ndarray-tofile-exception-type">
<h4>ndarray.tofile exception type<a class="headerlink" href="#ndarray-tofile-exception-type" title="Permalink to this headline">¶</a></h4>
<p>All <code class="docutils literal notranslate"><span class="pre">tofile</span></code> exceptions are now <code class="docutils literal notranslate"><span class="pre">IOError</span></code>, some were previously
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code>.</p>
</div>
<div class="section" id="invalid-fill-value-exceptions">
<h4>Invalid fill value exceptions<a class="headerlink" href="#invalid-fill-value-exceptions" title="Permalink to this headline">¶</a></h4>
<p>Two changes to numpy.ma.core._check_fill_value:</p>
<ul class="simple">
<li>When the fill value is a string and the array type is not one of
‘OSUV’, TypeError is raised instead of the default fill value being used.</li>
<li>When the fill value overflows the array type, TypeError is raised instead
of OverflowError.</li>
</ul>
</div>
<div class="section" id="polynomial-classes-no-longer-derived-from-polybase">
<h4>Polynomial Classes no longer derived from PolyBase<a class="headerlink" href="#polynomial-classes-no-longer-derived-from-polybase" title="Permalink to this headline">¶</a></h4>
<p>This may cause problems with folks who depended on the polynomial classes
being derived from PolyBase. They are now all derived from the abstract
base class ABCPolyBase. Strictly speaking, there should be a deprecation
involved, but no external code making use of the old baseclass could be
found.</p>
</div>
<div class="section" id="using-numpy-random-binomial-may-change-the-rng-state-vs-numpy-1-9">
<h4>Using numpy.random.binomial may change the RNG state vs. numpy &lt; 1.9<a class="headerlink" href="#using-numpy-random-binomial-may-change-the-rng-state-vs-numpy-1-9" title="Permalink to this headline">¶</a></h4>
<p>A bug in one of the algorithms to generate a binomial random variate has
been fixed. This change will likely alter the number of random draws
performed, and hence the sequence location will be different after a
call to distribution.c::rk_binomial_btpe. Any tests which rely on the RNG
being in a known state should be checked and/or updated as a result.</p>
</div>
<div class="section" id="random-seed-enforced-to-be-a-32-bit-unsigned-integer">
<h4>Random seed enforced to be a 32 bit unsigned integer<a class="headerlink" href="#random-seed-enforced-to-be-a-32-bit-unsigned-integer" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">np.random.seed</span></code> and <code class="docutils literal notranslate"><span class="pre">np.random.RandomState</span></code> now throw a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>
if the seed cannot safely be converted to 32 bit unsigned integers.
Applications that now fail can be fixed by masking the higher 32 bit values to
zero: <code class="docutils literal notranslate"><span class="pre">seed</span> <span class="pre">=</span> <span class="pre">seed</span> <span class="pre">&amp;</span> <span class="pre">0xFFFFFFFF</span></code>. This is what is done silently in older
versions so the random stream remains the same.</p>
</div>
<div class="section" id="argmin-and-argmax-out-argument">
<h4>Argmin and argmax out argument<a class="headerlink" href="#argmin-and-argmax-out-argument" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">out</span></code> argument to <code class="docutils literal notranslate"><span class="pre">np.argmin</span></code> and <code class="docutils literal notranslate"><span class="pre">np.argmax</span></code> and their
equivalent C-API functions is now checked to match the desired output shape
exactly.  If the check fails a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> instead of <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> is
raised.</p>
</div>
<div class="section" id="einsum">
<h4>Einsum<a class="headerlink" href="#einsum" title="Permalink to this headline">¶</a></h4>
<p>Remove unnecessary broadcasting notation restrictions.
<code class="docutils literal notranslate"><span class="pre">np.einsum('ijk,j-&gt;ijk',</span> <span class="pre">A,</span> <span class="pre">B)</span></code> can also be written as
<code class="docutils literal notranslate"><span class="pre">np.einsum('ij...,j-&gt;ij...',</span> <span class="pre">A,</span> <span class="pre">B)</span></code> (ellipsis is no longer required on ‘j’)</p>
</div>
<div class="section" id="indexing">
<h4>Indexing<a class="headerlink" href="#indexing" title="Permalink to this headline">¶</a></h4>
<p>The NumPy indexing has seen a complete rewrite in this version. This makes
most advanced integer indexing operations much faster and should have no
other implications.  However some subtle changes and deprecations were
introduced in advanced indexing operations:</p>
<ul class="simple">
<li>Boolean indexing into scalar arrays will always return a new 1-d array.
This means that <code class="docutils literal notranslate"><span class="pre">array(1)[array(True)]</span></code> gives <code class="docutils literal notranslate"><span class="pre">array([1])</span></code> and
not the original array.</li>
<li>Advanced indexing into one dimensional arrays used to have
(undocumented) special handling regarding repeating the value array in
assignments when the shape of the value array was too small or did not
match.  Code using this will raise an error. For compatibility you can
use <code class="docutils literal notranslate"><span class="pre">arr.flat[index]</span> <span class="pre">=</span> <span class="pre">values</span></code>, which uses the old code branch.  (for
example <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">=</span> <span class="pre">np.ones(10);</span> <span class="pre">a[np.arange(10)]</span> <span class="pre">=</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code>)</li>
<li>The iteration order over advanced indexes used to be always C-order.
In NumPy 1.9. the iteration order adapts to the inputs and is not
guaranteed (with the exception of a <em>single</em> advanced index which is
never reversed for compatibility reasons). This means that the result
is undefined if multiple values are assigned to the same element.  An
example for this is <code class="docutils literal notranslate"><span class="pre">arr[[0,</span> <span class="pre">0],</span> <span class="pre">[1,</span> <span class="pre">1]]</span> <span class="pre">=</span> <span class="pre">[1,</span> <span class="pre">2]</span></code>, which may set
<code class="docutils literal notranslate"><span class="pre">arr[0,</span> <span class="pre">1]</span></code> to either 1 or 2.</li>
<li>Equivalent to the iteration order, the memory layout of the advanced
indexing result is adapted for faster indexing and cannot be predicted.</li>
<li>All indexing operations return a view or a copy. No indexing operation
will return the original array object. (For example <code class="docutils literal notranslate"><span class="pre">arr[...]</span></code>)</li>
<li>In the future Boolean array-likes (such as lists of python bools) will
always be treated as Boolean indexes and Boolean scalars (including
python <code class="docutils literal notranslate"><span class="pre">True</span></code>) will be a legal <em>boolean</em> index. At this time, this is
already the case for scalar arrays to allow the general
<code class="docutils literal notranslate"><span class="pre">positive</span> <span class="pre">=</span> <span class="pre">a[a</span> <span class="pre">&gt;</span> <span class="pre">0]</span></code> to work when <code class="docutils literal notranslate"><span class="pre">a</span></code> is zero dimensional.</li>
<li>In NumPy 1.8 it was possible to use <code class="docutils literal notranslate"><span class="pre">array(True)</span></code> and
<code class="docutils literal notranslate"><span class="pre">array(False)</span></code> equivalent to 1 and 0 if the result of the operation
was a scalar.  This will raise an error in NumPy 1.9 and, as noted
above, treated as a boolean index in the future.</li>
<li>All non-integer array-likes are deprecated, object arrays of custom
integer like objects may have to be cast explicitly.</li>
<li>The error reporting for advanced indexing is more informative, however
the error type has changed in some cases. (Broadcasting errors of
indexing arrays are reported as <code class="docutils literal notranslate"><span class="pre">IndexError</span></code>)</li>
<li>Indexing with more then one ellipsis (<code class="docutils literal notranslate"><span class="pre">...</span></code>) is deprecated.</li>
</ul>
</div>
<div class="section" id="non-integer-reduction-axis-indexes-are-deprecated">
<h4>Non-integer reduction axis indexes are deprecated<a class="headerlink" href="#non-integer-reduction-axis-indexes-are-deprecated" title="Permalink to this headline">¶</a></h4>
<p>Non-integer axis indexes to reduction ufuncs like <code class="xref py py-obj docutils literal notranslate"><span class="pre">add.reduce</span></code> or <a class="reference internal" href="reference/generated/numpy.sum.html#numpy.sum" title="numpy.sum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sum</span></code></a> are
deprecated.</p>
</div>
<div class="section" id="promote-types-and-string-dtype">
<h4><code class="docutils literal notranslate"><span class="pre">promote_types</span></code> and string dtype<a class="headerlink" href="#promote-types-and-string-dtype" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">promote_types</span></code> function now returns a valid string length when given an
integer or float dtype as one argument and a string dtype as another
argument.  Previously it always returned the input string dtype, even if it
wasn’t long enough to store the max integer/float value converted to a
string.</p>
</div>
<div class="section" id="can-cast-and-string-dtype">
<h4><code class="docutils literal notranslate"><span class="pre">can_cast</span></code> and string dtype<a class="headerlink" href="#can-cast-and-string-dtype" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">can_cast</span></code> function now returns False in “safe” casting mode for
integer/float dtype and string dtype if the string dtype length is not long
enough to store the max integer/float value converted to a string.
Previously <code class="docutils literal notranslate"><span class="pre">can_cast</span></code> in “safe” mode returned True for integer/float
dtype and a string dtype of any length.</p>
</div>
<div class="section" id="astype-and-string-dtype">
<h4>astype and string dtype<a class="headerlink" href="#astype-and-string-dtype" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">astype</span></code> method now returns an error if the string dtype to cast to
is not long enough in “safe” casting mode to hold the max value of
integer/float array that is being casted. Previously the casting was
allowed even if the result was truncated.</p>
</div>
<div class="section" id="npyio-recfromcsv-keyword-arguments-change">
<h4><em class="xref py py-obj">npyio.recfromcsv</em> keyword arguments change<a class="headerlink" href="#npyio-recfromcsv-keyword-arguments-change" title="Permalink to this headline">¶</a></h4>
<p><em class="xref py py-obj">npyio.recfromcsv</em> no longer accepts the undocumented <em class="xref py py-obj">update</em> keyword,
which used to override the <a class="reference internal" href="reference/generated/numpy.dtype.html#numpy.dtype" title="numpy.dtype"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dtype</span></code></a> keyword.</p>
</div>
<div class="section" id="the-doc-swig-directory-moved">
<h4>The <code class="docutils literal notranslate"><span class="pre">doc/swig</span></code> directory moved<a class="headerlink" href="#the-doc-swig-directory-moved" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">doc/swig</span></code> directory has been moved to <code class="docutils literal notranslate"><span class="pre">tools/swig</span></code>.</p>
</div>
<div class="section" id="the-npy-3kcompat-h-header-changed">
<h4>The <code class="docutils literal notranslate"><span class="pre">npy_3kcompat.h</span></code> header changed<a class="headerlink" href="#the-npy-3kcompat-h-header-changed" title="Permalink to this headline">¶</a></h4>
<p>The unused <code class="docutils literal notranslate"><span class="pre">simple_capsule_dtor</span></code> function has been removed from
<code class="docutils literal notranslate"><span class="pre">npy_3kcompat.h</span></code>.  Note that this header is not meant to be used outside
of numpy; other projects should be using their own copy of this file when
needed.</p>
</div>
<div class="section" id="negative-indices-in-c-api-sq-item-and-sq-ass-item-sequence-methods">
<h4>Negative indices in C-Api <code class="docutils literal notranslate"><span class="pre">sq_item</span></code> and <code class="docutils literal notranslate"><span class="pre">sq_ass_item</span></code> sequence methods<a class="headerlink" href="#negative-indices-in-c-api-sq-item-and-sq-ass-item-sequence-methods" title="Permalink to this headline">¶</a></h4>
<p>When directly accessing the <code class="docutils literal notranslate"><span class="pre">sq_item</span></code> or <code class="docutils literal notranslate"><span class="pre">sq_ass_item</span></code> PyObject slots
for item getting, negative indices will not be supported anymore.
<code class="docutils literal notranslate"><span class="pre">PySequence_GetItem</span></code> and <code class="docutils literal notranslate"><span class="pre">PySequence_SetItem</span></code> however fix negative
indices so that they can be used there.</p>
</div>
<div class="section" id="nditer">
<h4>NDIter<a class="headerlink" href="#nditer" title="Permalink to this headline">¶</a></h4>
<p>When <code class="docutils literal notranslate"><span class="pre">NpyIter_RemoveAxis</span></code> is now called, the iterator range will be reset.</p>
<p>When a multi index is being tracked and an iterator is not buffered, it is
possible to use <code class="docutils literal notranslate"><span class="pre">NpyIter_RemoveAxis</span></code>. In this case an iterator can shrink
in size. Because the total size of an iterator is limited, the iterator
may be too large before these calls. In this case its size will be set to <code class="docutils literal notranslate"><span class="pre">-1</span></code>
and an error issued not at construction time but when removing the multi
index, setting the iterator range, or getting the next function.</p>
<p>This has no effect on currently working code, but highlights the necessity
of checking for an error return if these conditions can occur. In most
cases the arrays being iterated are as large as the iterator so that such
a problem cannot occur.</p>
<p>This change was already applied to the 1.8.1 release.</p>
</div>
<div class="section" id="zeros-like-for-string-dtypes-now-returns-empty-strings">
<h4><code class="docutils literal notranslate"><span class="pre">zeros_like</span></code> for string dtypes now returns empty strings<a class="headerlink" href="#zeros-like-for-string-dtypes-now-returns-empty-strings" title="Permalink to this headline">¶</a></h4>
<p>To match the <a class="reference internal" href="reference/generated/numpy.zeros.html#numpy.zeros" title="numpy.zeros"><code class="xref py py-obj docutils literal notranslate"><span class="pre">zeros</span></code></a> function <a class="reference internal" href="reference/generated/numpy.zeros_like.html#numpy.zeros_like" title="numpy.zeros_like"><code class="xref py py-obj docutils literal notranslate"><span class="pre">zeros_like</span></code></a> now returns an array initialized
with empty strings instead of an array filled with <em class="xref py py-obj">‘0’</em>.</p>
</div>
</div>
<div class="section" id="id135">
<h3>New Features<a class="headerlink" href="#id135" title="Permalink to this headline">¶</a></h3>
<div class="section" id="percentile-supports-more-interpolation-options">
<h4>Percentile supports more interpolation options<a class="headerlink" href="#percentile-supports-more-interpolation-options" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">np.percentile</span></code> now has the interpolation keyword argument to specify in
which way points should be interpolated if the percentiles fall between two
values.  See the documentation for the available options.</p>
</div>
<div class="section" id="generalized-axis-support-for-median-and-percentile">
<h4>Generalized axis support for median and percentile<a class="headerlink" href="#generalized-axis-support-for-median-and-percentile" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">np.median</span></code> and <code class="docutils literal notranslate"><span class="pre">np.percentile</span></code> now support generalized axis arguments like
ufunc reductions do since 1.7. One can now say axis=(index, index) to pick a
list of axes for the reduction. The <code class="docutils literal notranslate"><span class="pre">keepdims</span></code> keyword argument was also
added to allow convenient broadcasting to arrays of the original shape.</p>
</div>
<div class="section" id="dtype-parameter-added-to-np-linspace-and-np-logspace">
<h4>Dtype parameter added to <code class="docutils literal notranslate"><span class="pre">np.linspace</span></code> and <code class="docutils literal notranslate"><span class="pre">np.logspace</span></code><a class="headerlink" href="#dtype-parameter-added-to-np-linspace-and-np-logspace" title="Permalink to this headline">¶</a></h4>
<p>The returned data type from the <code class="docutils literal notranslate"><span class="pre">linspace</span></code> and <code class="docutils literal notranslate"><span class="pre">logspace</span></code> functions can
now be specified using the dtype parameter.</p>
</div>
<div class="section" id="more-general-np-triu-and-np-tril-broadcasting">
<h4>More general <code class="docutils literal notranslate"><span class="pre">np.triu</span></code> and <code class="docutils literal notranslate"><span class="pre">np.tril</span></code> broadcasting<a class="headerlink" href="#more-general-np-triu-and-np-tril-broadcasting" title="Permalink to this headline">¶</a></h4>
<p>For arrays with <code class="docutils literal notranslate"><span class="pre">ndim</span></code> exceeding 2, these functions will now apply to the
final two axes instead of raising an exception.</p>
</div>
<div class="section" id="tobytes-alias-for-tostring-method">
<h4><code class="docutils literal notranslate"><span class="pre">tobytes</span></code> alias for <code class="docutils literal notranslate"><span class="pre">tostring</span></code> method<a class="headerlink" href="#tobytes-alias-for-tostring-method" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">ndarray.tobytes</span></code> and <code class="docutils literal notranslate"><span class="pre">MaskedArray.tobytes</span></code> have been added as aliases
for <code class="docutils literal notranslate"><span class="pre">tostring</span></code> which exports arrays as <code class="docutils literal notranslate"><span class="pre">bytes</span></code>. This is more consistent
in Python 3 where <code class="docutils literal notranslate"><span class="pre">str</span></code> and <code class="docutils literal notranslate"><span class="pre">bytes</span></code> are not the same.</p>
</div>
<div class="section" id="id136">
<h4>Build system<a class="headerlink" href="#id136" title="Permalink to this headline">¶</a></h4>
<p>Added experimental support for the ppc64le and OpenRISC architecture.</p>
</div>
<div class="section" id="compatibility-to-python-numbers-module">
<h4>Compatibility to python <code class="docutils literal notranslate"><span class="pre">numbers</span></code> module<a class="headerlink" href="#compatibility-to-python-numbers-module" title="Permalink to this headline">¶</a></h4>
<p>All numerical numpy types are now registered with the type hierarchy in
the python <code class="docutils literal notranslate"><span class="pre">numbers</span></code> module.</p>
</div>
<div class="section" id="increasing-parameter-added-to-np-vander">
<h4><code class="docutils literal notranslate"><span class="pre">increasing</span></code> parameter added to <code class="docutils literal notranslate"><span class="pre">np.vander</span></code><a class="headerlink" href="#increasing-parameter-added-to-np-vander" title="Permalink to this headline">¶</a></h4>
<p>The ordering of the columns of the Vandermonde matrix can be specified with
this new boolean argument.</p>
</div>
<div class="section" id="unique-counts-parameter-added-to-np-unique">
<h4><code class="docutils literal notranslate"><span class="pre">unique_counts</span></code> parameter added to <code class="docutils literal notranslate"><span class="pre">np.unique</span></code><a class="headerlink" href="#unique-counts-parameter-added-to-np-unique" title="Permalink to this headline">¶</a></h4>
<p>The number of times each unique item comes up in the input can now be
obtained as an optional return value.</p>
</div>
<div class="section" id="support-for-median-and-percentile-in-nanfunctions">
<h4>Support for median and percentile in nanfunctions<a class="headerlink" href="#support-for-median-and-percentile-in-nanfunctions" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">np.nanmedian</span></code> and <code class="docutils literal notranslate"><span class="pre">np.nanpercentile</span></code> functions behave like
the median and percentile functions except that NaNs are ignored.</p>
</div>
<div class="section" id="numpyversion-class-added">
<h4>NumpyVersion class added<a class="headerlink" href="#numpyversion-class-added" title="Permalink to this headline">¶</a></h4>
<p>The class may be imported from numpy.lib and can be used for version
comparison when the numpy version goes to 1.10.devel. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">numpy.lib</span> <span class="k">import</span> <span class="n">NumpyVersion</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">NumpyVersion</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span> <span class="o">&lt;</span> <span class="s1">&#39;1.10.0&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Wow, that is an old NumPy version!&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="allow-saving-arrays-with-large-number-of-named-columns">
<h4>Allow saving arrays with large number of named columns<a class="headerlink" href="#allow-saving-arrays-with-large-number-of-named-columns" title="Permalink to this headline">¶</a></h4>
<p>The numpy storage format 1.0 only allowed the array header to have a total size
of 65535 bytes. This can be exceeded by structured arrays with a large number
of columns. A new format 2.0 has been added which extends the header size to 4
GiB. <em class="xref py py-obj">np.save</em> will automatically save in 2.0 format if the data requires it,
else it will always use the more compatible 1.0 format.</p>
</div>
<div class="section" id="full-broadcasting-support-for-np-cross">
<h4>Full broadcasting support for <code class="docutils literal notranslate"><span class="pre">np.cross</span></code><a class="headerlink" href="#full-broadcasting-support-for-np-cross" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">np.cross</span></code> now properly broadcasts its two input arrays, even if they
have different number of dimensions. In earlier versions this would result
in either an error being raised, or wrong results computed.</p>
</div>
</div>
<div class="section" id="id137">
<h3>Improvements<a class="headerlink" href="#id137" title="Permalink to this headline">¶</a></h3>
<div class="section" id="better-numerical-stability-for-sum-in-some-cases">
<h4>Better numerical stability for sum in some cases<a class="headerlink" href="#better-numerical-stability-for-sum-in-some-cases" title="Permalink to this headline">¶</a></h4>
<p>Pairwise summation is now used in the sum method, but only along the fast
axis and for groups of the values &lt;= 8192 in length. This should also
improve the accuracy of var and std in some common cases.</p>
</div>
<div class="section" id="percentile-implemented-in-terms-of-np-partition">
<h4>Percentile implemented in terms of <code class="docutils literal notranslate"><span class="pre">np.partition</span></code><a class="headerlink" href="#percentile-implemented-in-terms-of-np-partition" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">np.percentile</span></code> has been implemented in terms of <code class="docutils literal notranslate"><span class="pre">np.partition</span></code> which
only partially sorts the data via a selection algorithm. This improves the
time complexity from <code class="docutils literal notranslate"><span class="pre">O(nlog(n))</span></code> to <code class="docutils literal notranslate"><span class="pre">O(n)</span></code>.</p>
</div>
<div class="section" id="performance-improvement-for-np-array">
<h4>Performance improvement for <code class="docutils literal notranslate"><span class="pre">np.array</span></code><a class="headerlink" href="#performance-improvement-for-np-array" title="Permalink to this headline">¶</a></h4>
<p>The performance of converting lists containing arrays to arrays using
<code class="docutils literal notranslate"><span class="pre">np.array</span></code> has been improved. It is now equivalent in speed to
<code class="docutils literal notranslate"><span class="pre">np.vstack(list)</span></code>.</p>
</div>
<div class="section" id="performance-improvement-for-np-searchsorted">
<h4>Performance improvement for <code class="docutils literal notranslate"><span class="pre">np.searchsorted</span></code><a class="headerlink" href="#performance-improvement-for-np-searchsorted" title="Permalink to this headline">¶</a></h4>
<p>For the built-in numeric types, <code class="docutils literal notranslate"><span class="pre">np.searchsorted</span></code> no longer relies on the
data type’s <code class="docutils literal notranslate"><span class="pre">compare</span></code> function to perform the search, but is now
implemented by type specific functions. Depending on the size of the
inputs, this can result in performance improvements over 2x.</p>
</div>
<div class="section" id="optional-reduced-verbosity-for-np-distutils">
<h4>Optional reduced verbosity for np.distutils<a class="headerlink" href="#optional-reduced-verbosity-for-np-distutils" title="Permalink to this headline">¶</a></h4>
<p>Set <code class="docutils literal notranslate"><span class="pre">numpy.distutils.system_info.system_info.verbosity</span> <span class="pre">=</span> <span class="pre">0</span></code> and then
calls to <code class="docutils literal notranslate"><span class="pre">numpy.distutils.system_info.get_info('blas_opt')</span></code> will not
print anything on the output. This is mostly for other packages using
numpy.distutils.</p>
</div>
<div class="section" id="covariance-check-in-np-random-multivariate-normal">
<h4>Covariance check in <code class="docutils literal notranslate"><span class="pre">np.random.multivariate_normal</span></code><a class="headerlink" href="#covariance-check-in-np-random-multivariate-normal" title="Permalink to this headline">¶</a></h4>
<p>A <code class="docutils literal notranslate"><span class="pre">RuntimeWarning</span></code> warning is raised when the covariance matrix is not
positive-semidefinite.</p>
</div>
<div class="section" id="polynomial-classes-no-longer-template-based">
<h4>Polynomial Classes no longer template based<a class="headerlink" href="#polynomial-classes-no-longer-template-based" title="Permalink to this headline">¶</a></h4>
<p>The polynomial classes have been refactored to use an abstract base class
rather than a template in order to implement a common interface. This makes
importing the polynomial package faster as the classes do not need to be
compiled on import.</p>
</div>
<div class="section" id="more-gil-releases">
<h4>More GIL releases<a class="headerlink" href="#more-gil-releases" title="Permalink to this headline">¶</a></h4>
<p>Several more functions now release the Global Interpreter Lock allowing more
efficient parallelization using the <code class="docutils literal notranslate"><span class="pre">threading</span></code> module. Most notably the GIL is
now released for fancy indexing, <code class="docutils literal notranslate"><span class="pre">np.where</span></code> and the <code class="docutils literal notranslate"><span class="pre">random</span></code> module now
uses a per-state lock instead of the GIL.</p>
</div>
<div class="section" id="id138">
<h4>MaskedArray support for more complicated base classes<a class="headerlink" href="#id138" title="Permalink to this headline">¶</a></h4>
<p>Built-in assumptions that the baseclass behaved like a plain array are being
removed. In particalur, <code class="docutils literal notranslate"><span class="pre">repr</span></code> and <code class="docutils literal notranslate"><span class="pre">str</span></code> should now work more reliably.</p>
</div>
<div class="section" id="id139">
<h4>C-API<a class="headerlink" href="#id139" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="id140">
<h3>Deprecations<a class="headerlink" href="#id140" title="Permalink to this headline">¶</a></h3>
<div class="section" id="non-integer-scalars-for-sequence-repetition">
<h4>Non-integer scalars for sequence repetition<a class="headerlink" href="#non-integer-scalars-for-sequence-repetition" title="Permalink to this headline">¶</a></h4>
<p>Using non-integer numpy scalars to repeat python sequences is deprecated.
For example <code class="docutils literal notranslate"><span class="pre">np.float_(2)</span> <span class="pre">*</span> <span class="pre">[1]</span></code> will be an error in the future.</p>
</div>
<div class="section" id="select-input-deprecations">
<h4><code class="docutils literal notranslate"><span class="pre">select</span></code> input deprecations<a class="headerlink" href="#select-input-deprecations" title="Permalink to this headline">¶</a></h4>
<p>The integer and empty input to <code class="docutils literal notranslate"><span class="pre">select</span></code> is deprecated. In the future only
boolean arrays will be valid conditions and an empty <code class="docutils literal notranslate"><span class="pre">condlist</span></code> will be
considered an input error instead of returning the default.</p>
</div>
<div class="section" id="rank-function">
<h4><code class="docutils literal notranslate"><span class="pre">rank</span></code> function<a class="headerlink" href="#rank-function" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">rank</span></code> function has been deprecated to avoid confusion with
<code class="docutils literal notranslate"><span class="pre">numpy.linalg.matrix_rank</span></code>.</p>
</div>
<div class="section" id="object-array-equality-comparisons">
<h4>Object array equality comparisons<a class="headerlink" href="#object-array-equality-comparisons" title="Permalink to this headline">¶</a></h4>
<p>In the future object array comparisons both <em class="xref py py-obj">==</em> and <em class="xref py py-obj">np.equal</em> will not
make use of identity checks anymore. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">==</span> <span class="n">b</span>
</pre></div>
</div>
<p>will consistently return False (and in the future an error) even if the array
in <em class="xref py py-obj">a</em> and <em class="xref py py-obj">b</em> was the same object.</p>
<p>The equality operator <em class="xref py py-obj">==</em> will in the future raise errors like <em class="xref py py-obj">np.equal</em>
if broadcasting or element comparisons, etc. fails.</p>
<p>Comparison with <em class="xref py py-obj">arr == None</em> will in the future do an elementwise comparison
instead of just returning False. Code should be using <em class="xref py py-obj">arr is None</em>.</p>
<p>All of these changes will give Deprecation- or FutureWarnings at this time.</p>
</div>
<div class="section" id="id141">
<h4>C-API<a class="headerlink" href="#id141" title="Permalink to this headline">¶</a></h4>
<p>The utility function npy_PyFile_Dup and npy_PyFile_DupClose are broken by the
internal buffering python 3 applies to its file objects.
To fix this two new functions npy_PyFile_Dup2 and npy_PyFile_DupClose2 are
declared in npy_3kcompat.h and the old functions are deprecated.
Due to the fragile nature of these functions it is recommended to instead use
the python API when possible.</p>
<p>This change was already applied to the 1.8.1 release.</p>
</div>
</div>
</div>
<div class="section" id="numpy-1-8-2-release-notes">
<h2>NumPy 1.8.2 Release Notes<a class="headerlink" href="#numpy-1-8-2-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix only release in the 1.8.x series.</p>
<div class="section" id="id142">
<h3>Issues fixed<a class="headerlink" href="#id142" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>gh-4836: partition produces wrong results for multiple selections in equal ranges</li>
<li>gh-4656: Make fftpack._raw_fft threadsafe</li>
<li>gh-4628: incorrect argument order to _copyto in in np.nanmax, np.nanmin</li>
<li>gh-4642: Hold GIL for converting dtypes types with fields</li>
<li>gh-4733: fix np.linalg.svd(b, compute_uv=False)</li>
<li>gh-4853: avoid unaligned simd load on reductions on i386</li>
<li>gh-4722: Fix seg fault converting empty string to object</li>
<li>gh-4613: Fix lack of NULL check in array_richcompare</li>
<li>gh-4774: avoid unaligned access for strided byteswap</li>
<li>gh-650: Prevent division by zero when creating arrays from some buffers</li>
<li>gh-4602: ifort has issues with optimization flag O2, use O1</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-8-1-release-notes">
<h2>NumPy 1.8.1 Release Notes<a class="headerlink" href="#numpy-1-8-1-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix only release in the 1.8.x series.</p>
<div class="section" id="id143">
<h3>Issues fixed<a class="headerlink" href="#id143" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>gh-4276: Fix mean, var, std methods for object arrays</li>
<li>gh-4262: remove insecure mktemp usage</li>
<li>gh-2385: absolute(complex(inf)) raises invalid warning in python3</li>
<li>gh-4024: Sequence assignment doesn’t raise exception on shape mismatch</li>
<li>gh-4027: Fix chunked reading of strings longer than BUFFERSIZE</li>
<li>gh-4109: Fix object scalar return type of 0-d array indices</li>
<li>gh-4018: fix missing check for memory allocation failure in ufuncs</li>
<li>gh-4156: high order linalg.norm discards imaginary elements of complex arrays</li>
<li>gh-4144: linalg: norm fails on longdouble, signed int</li>
<li>gh-4094: fix NaT handling in _strided_to_strided_string_to_datetime</li>
<li>gh-4051: fix uninitialized use in _strided_to_strided_string_to_datetime</li>
<li>gh-4093: Loading compressed .npz file fails under Python 2.6.6</li>
<li>gh-4138: segfault with non-native endian memoryview in python 3.4</li>
<li>gh-4123: Fix missing NULL check in lexsort</li>
<li>gh-4170: fix native-only long long check in memoryviews</li>
<li>gh-4187: Fix large file support on 32 bit</li>
<li>gh-4152: fromfile: ensure file handle positions are in sync in python3</li>
<li>gh-4176: clang compatibility: Typos in conversion_utils</li>
<li>gh-4223: Fetching a non-integer item caused array return</li>
<li>gh-4197: fix minor memory leak in memoryview failure case</li>
<li>gh-4206: fix build with single-threaded python</li>
<li>gh-4220: add versionadded:: 1.8.0 to ufunc.at docstring</li>
<li>gh-4267: improve handling of memory allocation failure</li>
<li>gh-4267: fix use of capi without gil in ufunc.at</li>
<li>gh-4261: Detect vendor versions of GNU Compilers</li>
<li>gh-4253: IRR was returning nan instead of valid negative answer</li>
<li>gh-4254: fix unnecessary byte order flag change for byte arrays</li>
<li>gh-3263: numpy.random.shuffle clobbers mask of a MaskedArray</li>
<li>gh-4270: np.random.shuffle not work with flexible dtypes</li>
<li>gh-3173: Segmentation fault when ‘size’ argument to random.multinomial</li>
<li>gh-2799: allow using unique with lists of complex</li>
<li>gh-3504: fix linspace truncation for integer array scalar</li>
<li>gh-4191: get_info(‘openblas’) does not read libraries key</li>
<li>gh-3348: Access violation in _descriptor_from_pep3118_format</li>
<li>gh-3175: segmentation fault with numpy.array() from bytearray</li>
<li>gh-4266: histogramdd - wrong result for entries very close to last boundary</li>
<li>gh-4408: Fix stride_stricks.as_strided function for object arrays</li>
<li>gh-4225: fix log1p and exmp1 return for np.inf on windows compiler builds</li>
<li>gh-4359: Fix infinite recursion in str.format of flex arrays</li>
<li>gh-4145: Incorrect shape of broadcast result with the exponent operator</li>
<li>gh-4483: Fix commutativity of {dot,multiply,inner}(scalar, matrix_of_objs)</li>
<li>gh-4466: Delay npyiter size check when size may change</li>
<li>gh-4485: Buffered stride was erroneously marked fixed</li>
<li>gh-4354: byte_bounds fails with datetime dtypes</li>
<li>gh-4486: segfault/error converting from/to high-precision datetime64 objects</li>
<li>gh-4428: einsum(None, None, None, None) causes segfault</li>
<li>gh-4134: uninitialized use for for size 1 object reductions</li>
</ul>
</div>
<div class="section" id="id144">
<h3>Changes<a class="headerlink" href="#id144" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id145">
<h4>NDIter<a class="headerlink" href="#id145" title="Permalink to this headline">¶</a></h4>
<p>When <code class="docutils literal notranslate"><span class="pre">NpyIter_RemoveAxis</span></code> is now called, the iterator range will be reset.</p>
<p>When a multi index is being tracked and an iterator is not buffered, it is
possible to use <code class="docutils literal notranslate"><span class="pre">NpyIter_RemoveAxis</span></code>. In this case an iterator can shrink
in size. Because the total size of an iterator is limited, the iterator
may be too large before these calls. In this case its size will be set to <code class="docutils literal notranslate"><span class="pre">-1</span></code>
and an error issued not at construction time but when removing the multi
index, setting the iterator range, or getting the next function.</p>
<p>This has no effect on currently working code, but highlights the necessity
of checking for an error return if these conditions can occur. In most
cases the arrays being iterated are as large as the iterator so that such
a problem cannot occur.</p>
</div>
<div class="section" id="id146">
<h4>Optional reduced verbosity for np.distutils<a class="headerlink" href="#id146" title="Permalink to this headline">¶</a></h4>
<p>Set <code class="docutils literal notranslate"><span class="pre">numpy.distutils.system_info.system_info.verbosity</span> <span class="pre">=</span> <span class="pre">0</span></code> and then
calls to <code class="docutils literal notranslate"><span class="pre">numpy.distutils.system_info.get_info('blas_opt')</span></code> will not
print anything on the output. This is mostly for other packages using
numpy.distutils.</p>
</div>
</div>
<div class="section" id="id147">
<h3>Deprecations<a class="headerlink" href="#id147" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id148">
<h4>C-API<a class="headerlink" href="#id148" title="Permalink to this headline">¶</a></h4>
<p>The utility function npy_PyFile_Dup and npy_PyFile_DupClose are broken by the
internal buffering python 3 applies to its file objects.
To fix this two new functions npy_PyFile_Dup2 and npy_PyFile_DupClose2 are
declared in npy_3kcompat.h and the old functions are deprecated.
Due to the fragile nature of these functions it is recommended to instead use
the python API when possible.</p>
</div>
</div>
</div>
<div class="section" id="numpy-1-8-0-release-notes">
<h2>NumPy 1.8.0 Release Notes<a class="headerlink" href="#numpy-1-8-0-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This release supports  Python 2.6 -2.7 and 3.2 - 3.3.</p>
<div class="section" id="id149">
<h3>Highlights<a class="headerlink" href="#id149" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New, no 2to3, Python 2 and Python 3 are supported by a common code base.</li>
<li>New, gufuncs for linear algebra, enabling operations on stacked arrays.</li>
<li>New, inplace fancy indexing for ufuncs with the <code class="docutils literal notranslate"><span class="pre">.at</span></code> method.</li>
<li>New, <code class="docutils literal notranslate"><span class="pre">partition</span></code> function, partial sorting via selection for fast median.</li>
<li>New, <code class="docutils literal notranslate"><span class="pre">nanmean</span></code>, <code class="docutils literal notranslate"><span class="pre">nanvar</span></code>, and <code class="docutils literal notranslate"><span class="pre">nanstd</span></code> functions skipping NaNs.</li>
<li>New, <code class="docutils literal notranslate"><span class="pre">full</span></code> and <code class="docutils literal notranslate"><span class="pre">full_like</span></code> functions to create value initialized arrays.</li>
<li>New, <code class="docutils literal notranslate"><span class="pre">PyUFunc_RegisterLoopForDescr</span></code>, better ufunc support for user dtypes.</li>
<li>Numerous performance improvements in many areas.</li>
</ul>
</div>
<div class="section" id="id150">
<h3>Dropped Support<a class="headerlink" href="#id150" title="Permalink to this headline">¶</a></h3>
<p>Support for Python versions 2.4 and 2.5 has been dropped,</p>
<p>Support for SCons has been removed.</p>
</div>
<div class="section" id="id151">
<h3>Future Changes<a class="headerlink" href="#id151" title="Permalink to this headline">¶</a></h3>
<p>The Datetime64 type remains experimental in this release. In 1.9 there will
probably be some changes to make it more useable.</p>
<p>The diagonal method currently returns a new array and raises a
FutureWarning. In 1.9 it will return a readonly view.</p>
<p>Multiple field selection from an array of structured type currently
returns a new array and raises a FutureWarning. In 1.9 it will return a
readonly view.</p>
<p>The numpy/oldnumeric and numpy/numarray compatibility modules will be
removed in 1.9.</p>
</div>
<div class="section" id="id152">
<h3>Compatibility notes<a class="headerlink" href="#id152" title="Permalink to this headline">¶</a></h3>
<p>The doc/sphinxext content has been moved into its own github repository,
and is included in numpy as a submodule. See the instructions in
doc/HOWTO_BUILD_DOCS.rst.txt for how to access the content.</p>
<p>The hash function of numpy.void scalars has been changed.  Previously the
pointer to the data was hashed as an integer.  Now, the hash function uses
the tuple-hash algorithm to combine the hash functions of the elements of
the scalar, but only if the scalar is read-only.</p>
<p>Numpy has switched its build system to using ‘separate compilation’ by
default.  In previous releases this was supported, but not default. This
should produce the same results as the old system, but if you’re trying to
do something complicated like link numpy statically or using an unusual
compiler, then it’s possible you will encounter problems. If so, please
file a bug and as a temporary workaround you can re-enable the old build
system by exporting the shell variable NPY_SEPARATE_COMPILATION=0.</p>
<p>For the AdvancedNew iterator the <code class="docutils literal notranslate"><span class="pre">oa_ndim</span></code> flag should now be -1 to indicate
that no <code class="docutils literal notranslate"><span class="pre">op_axes</span></code> and <code class="docutils literal notranslate"><span class="pre">itershape</span></code> are passed in. The <code class="docutils literal notranslate"><span class="pre">oa_ndim</span> <span class="pre">==</span> <span class="pre">0</span></code>
case, now indicates a 0-D iteration and <code class="docutils literal notranslate"><span class="pre">op_axes</span></code> being NULL and the old
usage is deprecated. This does not effect the <code class="docutils literal notranslate"><span class="pre">NpyIter_New</span></code> or
<code class="docutils literal notranslate"><span class="pre">NpyIter_MultiNew</span></code> functions.</p>
<p>The functions nanargmin and nanargmax now return np.iinfo[‘intp’].min for
the index in all-NaN slices. Previously the functions would raise a ValueError
for array returns and NaN for scalar returns.</p>
<div class="section" id="npy-relaxed-strides-checking">
<h4>NPY_RELAXED_STRIDES_CHECKING<a class="headerlink" href="#npy-relaxed-strides-checking" title="Permalink to this headline">¶</a></h4>
<p>There is a new compile time environment variable
<code class="docutils literal notranslate"><span class="pre">NPY_RELAXED_STRIDES_CHECKING</span></code>. If this variable is set to 1, then
numpy will consider more arrays to be C- or F-contiguous – for
example, it becomes possible to have a column vector which is
considered both C- and F-contiguous simultaneously. The new definition
is more accurate, allows for faster code that makes fewer unnecessary
copies, and simplifies numpy’s code internally. However, it may also
break third-party libraries that make too-strong assumptions about the
stride values of C- and F-contiguous arrays. (It is also currently
known that this breaks Cython code using memoryviews, which will be
fixed in Cython.) THIS WILL BECOME THE DEFAULT IN A FUTURE RELEASE, SO
PLEASE TEST YOUR CODE NOW AGAINST NUMPY BUILT WITH:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">NPY_RELAXED_STRIDES_CHECKING</span><span class="o">=</span><span class="mi">1</span> <span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
<p>You can check whether NPY_RELAXED_STRIDES_CHECKING is in effect by
running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">order</span><span class="o">=</span><span class="s2">&quot;C&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">f_contiguous</span>
</pre></div>
</div>
<p>This will be <code class="docutils literal notranslate"><span class="pre">True</span></code> if relaxed strides checking is enabled, and
<code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise. The typical problem we’ve seen so far is C code
that works with C-contiguous arrays, and assumes that the itemsize can
be accessed by looking at the last element in the <code class="docutils literal notranslate"><span class="pre">PyArray_STRIDES(arr)</span></code>
array. When relaxed strides are in effect, this is not true (and in
fact, it never was true in some corner cases). Instead, use
<code class="docutils literal notranslate"><span class="pre">PyArray_ITEMSIZE(arr)</span></code>.</p>
<p>For more information check the “Internal memory layout of an ndarray”
section in the documentation.</p>
</div>
<div class="section" id="binary-operations-with-non-arrays-as-second-argument">
<h4>Binary operations with non-arrays as second argument<a class="headerlink" href="#binary-operations-with-non-arrays-as-second-argument" title="Permalink to this headline">¶</a></h4>
<p>Binary operations of the form <code class="docutils literal notranslate"><span class="pre">&lt;array-or-subclass&gt;</span> <span class="pre">*</span> <span class="pre">&lt;non-array-subclass&gt;</span></code>
where <code class="docutils literal notranslate"><span class="pre">&lt;non-array-subclass&gt;</span></code> declares an <code class="docutils literal notranslate"><span class="pre">__array_priority__</span></code> higher than
that of <code class="docutils literal notranslate"><span class="pre">&lt;array-or-subclass&gt;</span></code> will now unconditionally return
<em>NotImplemented</em>, giving <code class="docutils literal notranslate"><span class="pre">&lt;non-array-subclass&gt;</span></code> a chance to handle the
operation.  Previously, <em class="xref py py-obj">NotImplemented</em> would only be returned if
<code class="docutils literal notranslate"><span class="pre">&lt;non-array-subclass&gt;</span></code> actually implemented the reversed operation, and after
a (potentially expensive) array conversion of <code class="docutils literal notranslate"><span class="pre">&lt;non-array-subclass&gt;</span></code> had been
attempted. (<a class="reference external" href="https://github.com/numpy/numpy/issues/3375">bug</a>, <a class="reference external" href="https://github.com/numpy/numpy/pull/3501">pull request</a>)</p>
</div>
<div class="section" id="function-median-used-with-overwrite-input-only-partially-sorts-array">
<h4>Function <a class="reference internal" href="reference/generated/numpy.median.html#numpy.median" title="numpy.median"><code class="xref py py-obj docutils literal notranslate"><span class="pre">median</span></code></a> used with <em class="xref py py-obj">overwrite_input</em> only partially sorts array<a class="headerlink" href="#function-median-used-with-overwrite-input-only-partially-sorts-array" title="Permalink to this headline">¶</a></h4>
<p>If <a class="reference internal" href="reference/generated/numpy.median.html#numpy.median" title="numpy.median"><code class="xref py py-obj docutils literal notranslate"><span class="pre">median</span></code></a> is used with <em class="xref py py-obj">overwrite_input</em> option the input array will now only
be partially sorted instead of fully sorted.</p>
</div>
<div class="section" id="fix-to-financial-npv">
<h4>Fix to financial.npv<a class="headerlink" href="#fix-to-financial-npv" title="Permalink to this headline">¶</a></h4>
<p>The npv function had a bug. Contrary to what the documentation stated, it
summed from indexes <code class="docutils literal notranslate"><span class="pre">1</span></code> to <code class="docutils literal notranslate"><span class="pre">M</span></code> instead of from <code class="docutils literal notranslate"><span class="pre">0</span></code> to <code class="docutils literal notranslate"><span class="pre">M</span> <span class="pre">-</span> <span class="pre">1</span></code>. The
fix changes the returned value. The mirr function called the npv function,
but worked around the problem, so that was also fixed and the return value
of the mirr function remains unchanged.</p>
</div>
<div class="section" id="runtime-warnings-when-comparing-nan-numbers">
<h4>Runtime warnings when comparing NaN numbers<a class="headerlink" href="#runtime-warnings-when-comparing-nan-numbers" title="Permalink to this headline">¶</a></h4>
<p>Comparing <code class="docutils literal notranslate"><span class="pre">NaN</span></code> floating point numbers now raises the <code class="docutils literal notranslate"><span class="pre">invalid</span></code> runtime
warning. If a <code class="docutils literal notranslate"><span class="pre">NaN</span></code> is expected the warning can be ignored using np.errstate.
E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">np</span><span class="o">.</span><span class="n">errstate</span><span class="p">(</span><span class="n">invalid</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">):</span>
    <span class="n">operation</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id153">
<h3>New Features<a class="headerlink" href="#id153" title="Permalink to this headline">¶</a></h3>
<div class="section" id="support-for-linear-algebra-on-stacked-arrays">
<h4>Support for linear algebra on stacked arrays<a class="headerlink" href="#support-for-linear-algebra-on-stacked-arrays" title="Permalink to this headline">¶</a></h4>
<p>The gufunc machinery is now used for np.linalg, allowing operations on
stacked arrays and vectors. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([[[ 1.,  1.],</span>
<span class="go">        [ 0.,  1.]],</span>

<span class="go">       [[ 1.,  1.],</span>
<span class="go">        [ 0.,  1.]]])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">array([[[ 1., -1.],</span>
<span class="go">        [ 0.,  1.]],</span>

<span class="go">       [[ 1., -1.],</span>
<span class="go">        [ 0.,  1.]]])</span>
</pre></div>
</div>
</div>
<div class="section" id="in-place-fancy-indexing-for-ufuncs">
<h4>In place fancy indexing for ufuncs<a class="headerlink" href="#in-place-fancy-indexing-for-ufuncs" title="Permalink to this headline">¶</a></h4>
<p>The function <code class="docutils literal notranslate"><span class="pre">at</span></code> has been added to ufunc objects to allow in place
ufuncs with no buffering when fancy indexing is used. For example, the
following will increment the first and second items in the array, and will
increment the third item twice: <code class="docutils literal notranslate"><span class="pre">numpy.add.at(arr,</span> <span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">2],</span> <span class="pre">1)</span></code></p>
<p>This is what many have mistakenly thought <code class="docutils literal notranslate"><span class="pre">arr[[0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">2]]</span> <span class="pre">+=</span> <span class="pre">1</span></code> would do,
but that does not work as the incremented value of <code class="docutils literal notranslate"><span class="pre">arr[2]</span></code> is simply copied
into the third slot in <code class="docutils literal notranslate"><span class="pre">arr</span></code> twice, not incremented twice.</p>
</div>
<div class="section" id="new-functions-partition-and-argpartition">
<h4>New functions <a class="reference internal" href="reference/generated/numpy.partition.html#numpy.partition" title="numpy.partition"><code class="xref py py-obj docutils literal notranslate"><span class="pre">partition</span></code></a> and <a class="reference internal" href="reference/generated/numpy.argpartition.html#numpy.argpartition" title="numpy.argpartition"><code class="xref py py-obj docutils literal notranslate"><span class="pre">argpartition</span></code></a><a class="headerlink" href="#new-functions-partition-and-argpartition" title="Permalink to this headline">¶</a></h4>
<p>New functions to partially sort arrays via a selection algorithm.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">partition</span></code> by index <code class="docutils literal notranslate"><span class="pre">k</span></code> moves the <code class="docutils literal notranslate"><span class="pre">k</span></code> smallest element to the front of
an array.  All elements before <code class="docutils literal notranslate"><span class="pre">k</span></code> are then smaller or equal than the value
in position <code class="docutils literal notranslate"><span class="pre">k</span></code> and all elements following <code class="docutils literal notranslate"><span class="pre">k</span></code> are then greater or equal
than the value in position <code class="docutils literal notranslate"><span class="pre">k</span></code>. The ordering of the values within these
bounds is undefined.
A sequence of indices can be provided to sort all of them into their sorted
position at once iterative partitioning.
This can be used to efficiently obtain order statistics like median or
percentiles of samples.
<code class="docutils literal notranslate"><span class="pre">partition</span></code> has a linear time complexity of <code class="docutils literal notranslate"><span class="pre">O(n)</span></code> while a full sort has
<code class="docutils literal notranslate"><span class="pre">O(n</span> <span class="pre">log(n))</span></code>.</p>
</div>
<div class="section" id="new-functions-nanmean-nanvar-and-nanstd">
<h4>New functions <a class="reference internal" href="reference/generated/numpy.nanmean.html#numpy.nanmean" title="numpy.nanmean"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nanmean</span></code></a>, <a class="reference internal" href="reference/generated/numpy.nanvar.html#numpy.nanvar" title="numpy.nanvar"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nanvar</span></code></a> and <a class="reference internal" href="reference/generated/numpy.nanstd.html#numpy.nanstd" title="numpy.nanstd"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nanstd</span></code></a><a class="headerlink" href="#new-functions-nanmean-nanvar-and-nanstd" title="Permalink to this headline">¶</a></h4>
<p>New nan aware statistical functions are added. In these functions the
results are what would be obtained if nan values were omitted from all
computations.</p>
</div>
<div class="section" id="new-functions-full-and-full-like">
<h4>New functions <a class="reference internal" href="reference/generated/numpy.full.html#numpy.full" title="numpy.full"><code class="xref py py-obj docutils literal notranslate"><span class="pre">full</span></code></a> and <a class="reference internal" href="reference/generated/numpy.full_like.html#numpy.full_like" title="numpy.full_like"><code class="xref py py-obj docutils literal notranslate"><span class="pre">full_like</span></code></a><a class="headerlink" href="#new-functions-full-and-full-like" title="Permalink to this headline">¶</a></h4>
<p>New convenience functions to create arrays filled with a specific value;
complementary to the existing <a class="reference internal" href="reference/generated/numpy.zeros.html#numpy.zeros" title="numpy.zeros"><code class="xref py py-obj docutils literal notranslate"><span class="pre">zeros</span></code></a> and <a class="reference internal" href="reference/generated/numpy.zeros_like.html#numpy.zeros_like" title="numpy.zeros_like"><code class="xref py py-obj docutils literal notranslate"><span class="pre">zeros_like</span></code></a> functions.</p>
</div>
<div class="section" id="io-compatibility-with-large-files">
<h4>IO compatibility with large files<a class="headerlink" href="#io-compatibility-with-large-files" title="Permalink to this headline">¶</a></h4>
<p>Large NPZ files &gt;2GB can be loaded on 64-bit systems.</p>
</div>
<div class="section" id="building-against-openblas">
<h4>Building against OpenBLAS<a class="headerlink" href="#building-against-openblas" title="Permalink to this headline">¶</a></h4>
<p>It is now possible to build numpy against OpenBLAS by editing site.cfg.</p>
</div>
<div class="section" id="new-constant">
<h4>New constant<a class="headerlink" href="#new-constant" title="Permalink to this headline">¶</a></h4>
<p>Euler’s constant is now exposed in numpy as euler_gamma.</p>
</div>
<div class="section" id="new-modes-for-qr">
<h4>New modes for qr<a class="headerlink" href="#new-modes-for-qr" title="Permalink to this headline">¶</a></h4>
<p>New modes ‘complete’, ‘reduced’, and ‘raw’ have been added to the qr
factorization and the old ‘full’ and ‘economic’ modes are deprecated.
The ‘reduced’ mode replaces the old ‘full’ mode and is the default as was
the ‘full’ mode, so backward compatibility can be maintained by not
specifying the mode.</p>
<p>The ‘complete’ mode returns a full dimensional factorization, which can be
useful for obtaining a basis for the orthogonal complement of the range
space. The ‘raw’ mode returns arrays that contain the Householder
reflectors and scaling factors that can be used in the future to apply q
without needing to convert to a matrix. The ‘economic’ mode is simply
deprecated, there isn’t much use for it and it isn’t any more efficient
than the ‘raw’ mode.</p>
</div>
<div class="section" id="new-invert-argument-to-in1d">
<h4>New <a class="reference internal" href="reference/generated/numpy.invert.html#numpy.invert" title="numpy.invert"><code class="xref py py-obj docutils literal notranslate"><span class="pre">invert</span></code></a> argument to <a class="reference internal" href="reference/generated/numpy.in1d.html#numpy.in1d" title="numpy.in1d"><code class="xref py py-obj docutils literal notranslate"><span class="pre">in1d</span></code></a><a class="headerlink" href="#new-invert-argument-to-in1d" title="Permalink to this headline">¶</a></h4>
<p>The function <a class="reference internal" href="reference/generated/numpy.in1d.html#numpy.in1d" title="numpy.in1d"><code class="xref py py-obj docutils literal notranslate"><span class="pre">in1d</span></code></a> now accepts a <a class="reference internal" href="reference/generated/numpy.invert.html#numpy.invert" title="numpy.invert"><code class="xref py py-obj docutils literal notranslate"><span class="pre">invert</span></code></a> argument which, when <em class="xref py py-obj">True</em>,
causes the returned array to be inverted.</p>
</div>
<div class="section" id="advanced-indexing-using-np-newaxis">
<h4>Advanced indexing using <em class="xref py py-obj">np.newaxis</em><a class="headerlink" href="#advanced-indexing-using-np-newaxis" title="Permalink to this headline">¶</a></h4>
<p>It is now possible to use <em class="xref py py-obj">np.newaxis</em>/<em class="xref py py-obj">None</em> together with index
arrays instead of only in simple indices. This means that
<code class="docutils literal notranslate"><span class="pre">array[np.newaxis,</span> <span class="pre">[0,</span> <span class="pre">1]]</span></code> will now work as expected and select the first
two rows while prepending a new axis to the array.</p>
</div>
<div class="section" id="id154">
<h4>C-API<a class="headerlink" href="#id154" title="Permalink to this headline">¶</a></h4>
<p>New ufuncs can now be registered with builtin input types and a custom
output type. Before this change, NumPy wouldn’t be able to find the right
ufunc loop function when the ufunc was called from Python, because the ufunc
loop signature matching logic wasn’t looking at the output operand type.
Now the correct ufunc loop is found, as long as the user provides an output
argument with the correct output type.</p>
</div>
<div class="section" id="runtests-py">
<h4>runtests.py<a class="headerlink" href="#runtests-py" title="Permalink to this headline">¶</a></h4>
<p>A simple test runner script <code class="docutils literal notranslate"><span class="pre">runtests.py</span></code> was added. It also builds Numpy via
<code class="docutils literal notranslate"><span class="pre">setup.py</span> <span class="pre">build</span></code> and can be used to run tests easily during development.</p>
</div>
</div>
<div class="section" id="id155">
<h3>Improvements<a class="headerlink" href="#id155" title="Permalink to this headline">¶</a></h3>
<div class="section" id="io-performance-improvements">
<h4>IO performance improvements<a class="headerlink" href="#io-performance-improvements" title="Permalink to this headline">¶</a></h4>
<p>Performance in reading large files was improved by chunking (see also IO compatibility).</p>
</div>
<div class="section" id="performance-improvements-to-pad">
<h4>Performance improvements to <a class="reference internal" href="reference/generated/numpy.pad.html#numpy.pad" title="numpy.pad"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pad</span></code></a><a class="headerlink" href="#performance-improvements-to-pad" title="Permalink to this headline">¶</a></h4>
<p>The <a class="reference internal" href="reference/generated/numpy.pad.html#numpy.pad" title="numpy.pad"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pad</span></code></a> function has a new implementation, greatly improving performance for
all inputs except <em class="xref py py-obj">mode=</em> (retained for backwards compatibility).
Scaling with dimensionality is dramatically improved for rank &gt;= 4.</p>
</div>
<div class="section" id="performance-improvements-to-isnan-isinf-isfinite-and-byteswap">
<h4>Performance improvements to <a class="reference internal" href="reference/generated/numpy.isnan.html#numpy.isnan" title="numpy.isnan"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isnan</span></code></a>, <a class="reference internal" href="reference/generated/numpy.isinf.html#numpy.isinf" title="numpy.isinf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isinf</span></code></a>, <a class="reference internal" href="reference/generated/numpy.isfinite.html#numpy.isfinite" title="numpy.isfinite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isfinite</span></code></a> and <em class="xref py py-obj">byteswap</em><a class="headerlink" href="#performance-improvements-to-isnan-isinf-isfinite-and-byteswap" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="reference/generated/numpy.isnan.html#numpy.isnan" title="numpy.isnan"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isnan</span></code></a>, <a class="reference internal" href="reference/generated/numpy.isinf.html#numpy.isinf" title="numpy.isinf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isinf</span></code></a>, <a class="reference internal" href="reference/generated/numpy.isfinite.html#numpy.isfinite" title="numpy.isfinite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isfinite</span></code></a> and <em class="xref py py-obj">byteswap</em> have been improved to take
advantage of compiler builtins to avoid expensive calls to libc.
This improves performance of these operations by about a factor of two on gnu
libc systems.</p>
</div>
<div class="section" id="performance-improvements-via-sse2-vectorization">
<h4>Performance improvements via SSE2 vectorization<a class="headerlink" href="#performance-improvements-via-sse2-vectorization" title="Permalink to this headline">¶</a></h4>
<p>Several functions have been optimized to make use of SSE2 CPU SIMD instructions.</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>Float32 and float64:</dt>
<dd><ul class="first last">
<li>base math (<a class="reference internal" href="reference/generated/numpy.add.html#numpy.add" title="numpy.add"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add</span></code></a>, <a class="reference internal" href="reference/generated/numpy.subtract.html#numpy.subtract" title="numpy.subtract"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subtract</span></code></a>, <a class="reference internal" href="reference/generated/numpy.divide.html#numpy.divide" title="numpy.divide"><code class="xref py py-obj docutils literal notranslate"><span class="pre">divide</span></code></a>, <a class="reference internal" href="reference/generated/numpy.multiply.html#numpy.multiply" title="numpy.multiply"><code class="xref py py-obj docutils literal notranslate"><span class="pre">multiply</span></code></a>)</li>
<li><a class="reference internal" href="reference/generated/numpy.sqrt.html#numpy.sqrt" title="numpy.sqrt"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sqrt</span></code></a></li>
<li><em class="xref py py-obj">minimum/maximum</em></li>
<li><a class="reference internal" href="reference/generated/numpy.absolute.html#numpy.absolute" title="numpy.absolute"><code class="xref py py-obj docutils literal notranslate"><span class="pre">absolute</span></code></a></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Bool:</dt>
<dd><ul class="first last">
<li><a class="reference internal" href="reference/generated/numpy.logical_or.html#numpy.logical_or" title="numpy.logical_or"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logical_or</span></code></a></li>
<li><a class="reference internal" href="reference/generated/numpy.logical_and.html#numpy.logical_and" title="numpy.logical_and"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logical_and</span></code></a></li>
<li><a class="reference internal" href="reference/generated/numpy.logical_not.html#numpy.logical_not" title="numpy.logical_not"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logical_not</span></code></a></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>This improves performance of these operations up to 4x/2x for float32/float64
and up to 10x for bool depending on the location of the data in the CPU caches.
The performance gain is greatest for in-place operations.</p>
<p>In order to use the improved functions the SSE2 instruction set must be enabled
at compile time. It is enabled by default on x86_64 systems. On x86_32 with a
capable CPU it must be enabled by passing the appropriate flag to the CFLAGS
build variable (-msse2 with gcc).</p>
</div>
<div class="section" id="performance-improvements-to-median">
<h4>Performance improvements to <a class="reference internal" href="reference/generated/numpy.median.html#numpy.median" title="numpy.median"><code class="xref py py-obj docutils literal notranslate"><span class="pre">median</span></code></a><a class="headerlink" href="#performance-improvements-to-median" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="reference/generated/numpy.median.html#numpy.median" title="numpy.median"><code class="xref py py-obj docutils literal notranslate"><span class="pre">median</span></code></a> is now implemented in terms of <a class="reference internal" href="reference/generated/numpy.partition.html#numpy.partition" title="numpy.partition"><code class="xref py py-obj docutils literal notranslate"><span class="pre">partition</span></code></a> instead of <a class="reference internal" href="reference/generated/numpy.sort.html#numpy.sort" title="numpy.sort"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sort</span></code></a> which
reduces its time complexity from O(n log(n)) to O(n).
If used with the <em class="xref py py-obj">overwrite_input</em> option the array will now only be partially
sorted instead of fully sorted.</p>
</div>
<div class="section" id="overrideable-operand-flags-in-ufunc-c-api">
<h4>Overrideable operand flags in ufunc C-API<a class="headerlink" href="#overrideable-operand-flags-in-ufunc-c-api" title="Permalink to this headline">¶</a></h4>
<p>When creating a ufunc, the default ufunc operand flags can be overridden
via the new op_flags attribute of the ufunc object. For example, to set
the operand flag for the first input to read/write:</p>
<p>PyObject *ufunc = PyUFunc_FromFuncAndData(…);
ufunc-&gt;op_flags[0] = NPY_ITER_READWRITE;</p>
<p>This allows a ufunc to perform an operation in place. Also, global nditer flags
can be overridden via the new iter_flags attribute of the ufunc object.
For example, to set the reduce flag for a ufunc:</p>
<p>ufunc-&gt;iter_flags = NPY_ITER_REDUCE_OK;</p>
</div>
</div>
<div class="section" id="id156">
<h3>Changes<a class="headerlink" href="#id156" title="Permalink to this headline">¶</a></h3>
<div class="section" id="general">
<h4>General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h4>
<p>The function np.take now allows 0-d arrays as indices.</p>
<p>The separate compilation mode is now enabled by default.</p>
<p>Several changes to np.insert and np.delete:</p>
<ul class="simple">
<li>Previously, negative indices and indices that pointed past the end of
the array were simply ignored. Now, this will raise a Future or Deprecation
Warning. In the future they will be treated like normal indexing treats
them – negative indices will wrap around, and out-of-bound indices will
generate an error.</li>
<li>Previously, boolean indices were treated as if they were integers (always
referring to either the 0th or 1st item in the array). In the future, they
will be treated as masks. In this release, they raise a FutureWarning
warning of this coming change.</li>
<li>In Numpy 1.7. np.insert already allowed the syntax
<em class="xref py py-obj">np.insert(arr, 3, [1,2,3])</em> to insert multiple items at a single position.
In Numpy 1.8. this is also possible for <em class="xref py py-obj">np.insert(arr, [3], [1, 2, 3])</em>.</li>
</ul>
<p>Padded regions from np.pad are now correctly rounded, not truncated.</p>
</div>
<div class="section" id="c-api-array-additions">
<h4>C-API Array Additions<a class="headerlink" href="#c-api-array-additions" title="Permalink to this headline">¶</a></h4>
<p>Four new functions have been added to the array C-API.</p>
<ul class="simple">
<li>PyArray_Partition</li>
<li>PyArray_ArgPartition</li>
<li>PyArray_SelectkindConverter</li>
<li>PyDataMem_NEW_ZEROED</li>
</ul>
</div>
<div class="section" id="c-api-ufunc-additions">
<h4>C-API Ufunc Additions<a class="headerlink" href="#c-api-ufunc-additions" title="Permalink to this headline">¶</a></h4>
<p>One new function has been added to the ufunc C-API that allows to register
an inner loop for user types using the descr.</p>
<ul class="simple">
<li>PyUFunc_RegisterLoopForDescr</li>
</ul>
</div>
<div class="section" id="c-api-developer-improvements">
<h4>C-API Developer Improvements<a class="headerlink" href="#c-api-developer-improvements" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">PyArray_Type</span></code> instance creation function <code class="docutils literal notranslate"><span class="pre">tp_new</span></code> now
uses <code class="docutils literal notranslate"><span class="pre">tp_basicsize</span></code> to determine how much memory to allocate.
In previous releases only <code class="docutils literal notranslate"><span class="pre">sizeof(PyArrayObject)</span></code> bytes of
memory were allocated, often requiring C-API subtypes to
reimplement <code class="docutils literal notranslate"><span class="pre">tp_new</span></code>.</p>
</div>
</div>
<div class="section" id="id157">
<h3>Deprecations<a class="headerlink" href="#id157" title="Permalink to this headline">¶</a></h3>
<p>The ‘full’ and ‘economic’ modes of qr factorization are deprecated.</p>
<div class="section" id="id158">
<h4>General<a class="headerlink" href="#id158" title="Permalink to this headline">¶</a></h4>
<p>The use of non-integer for indices and most integer arguments has been
deprecated. Previously float indices and function arguments such as axes or
shapes were truncated to integers without warning. For example
<em class="xref py py-obj">arr.reshape(3., -1)</em> or <em class="xref py py-obj">arr[0.]</em> will trigger a deprecation warning in
NumPy 1.8., and in some future version of NumPy they will raise an error.</p>
</div>
</div>
<div class="section" id="authors">
<h3>Authors<a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h3>
<p>This release contains work by the following people who contributed at least
one patch to this release. The names are in alphabetical order by first name:</p>
<ul class="simple">
<li>87</li>
<li>Adam Ginsburg +</li>
<li>Adam Griffiths +</li>
<li>Alexander Belopolsky +</li>
<li>Alex Barth +</li>
<li>Alex Ford +</li>
<li>Andreas Hilboll +</li>
<li>Andreas Kloeckner +</li>
<li>Andreas Schwab +</li>
<li>Andrew Horton +</li>
<li>argriffing +</li>
<li>Arink Verma +</li>
<li>Bago Amirbekian +</li>
<li>Bartosz Telenczuk +</li>
<li>bebert218 +</li>
<li>Benjamin Root +</li>
<li>Bill Spotz +</li>
<li>Bradley M. Froehle</li>
<li>Carwyn Pelley +</li>
<li>Charles Harris</li>
<li>Chris</li>
<li>Christian Brueffer +</li>
<li>Christoph Dann +</li>
<li>Christoph Gohlke</li>
<li>Dan Hipschman +</li>
<li>Daniel +</li>
<li>Dan Miller +</li>
<li>daveydave400 +</li>
<li>David Cournapeau</li>
<li>David Warde-Farley</li>
<li>Denis Laxalde</li>
<li>dmuellner +</li>
<li>Edward Catmur +</li>
<li>Egor Zindy +</li>
<li>endolith</li>
<li>Eric Firing</li>
<li>Eric Fode</li>
<li>Eric Moore +</li>
<li>Eric Price +</li>
<li>Fazlul Shahriar +</li>
<li>Félix Hartmann +</li>
<li>Fernando Perez</li>
<li>Frank B +</li>
<li>Frank Breitling +</li>
<li>Frederic</li>
<li>Gabriel</li>
<li>GaelVaroquaux</li>
<li>Guillaume Gay +</li>
<li>Han Genuit</li>
<li>HaroldMills +</li>
<li>hklemm +</li>
<li>jamestwebber +</li>
<li>Jason Madden +</li>
<li>Jay Bourque</li>
<li>jeromekelleher +</li>
<li>Jesús Gómez +</li>
<li>jmozmoz +</li>
<li>jnothman +</li>
<li>Johannes Schönberger +</li>
<li>John Benediktsson +</li>
<li>John Salvatier +</li>
<li>John Stechschulte +</li>
<li>Jonathan Waltman +</li>
<li>Joon Ro +</li>
<li>Jos de Kloe +</li>
<li>Joseph Martinot-Lagarde +</li>
<li>Josh Warner (Mac) +</li>
<li>Jostein Bø Fløystad +</li>
<li>Juan Luis Cano Rodríguez +</li>
<li>Julian Taylor +</li>
<li>Julien Phalip +</li>
<li>K.-Michael Aye +</li>
<li>Kumar Appaiah +</li>
<li>Lars Buitinck</li>
<li>Leon Weber +</li>
<li>Luis Pedro Coelho</li>
<li>Marcin Juszkiewicz</li>
<li>Mark Wiebe</li>
<li>Marten van Kerkwijk +</li>
<li>Martin Baeuml +</li>
<li>Martin Spacek</li>
<li>Martin Teichmann +</li>
<li>Matt Davis +</li>
<li>Matthew Brett</li>
<li>Maximilian Albert +</li>
<li>m-d-w +</li>
<li>Michael Droettboom</li>
<li>mwtoews +</li>
<li>Nathaniel J. Smith</li>
<li>Nicolas Scheffer +</li>
<li>Nils Werner +</li>
<li>ochoadavid +</li>
<li>Ondřej Čertík</li>
<li>ovillellas +</li>
<li>Paul Ivanov</li>
<li>Pauli Virtanen</li>
<li>peterjc</li>
<li>Ralf Gommers</li>
<li>Raul Cota +</li>
<li>Richard Hattersley +</li>
<li>Robert Costa +</li>
<li>Robert Kern</li>
<li>Rob Ruana +</li>
<li>Ronan Lamy</li>
<li>Sandro Tosi</li>
<li>Sascha Peilicke +</li>
<li>Sebastian Berg</li>
<li>Skipper Seabold</li>
<li>Stefan van der Walt</li>
<li>Steve +</li>
<li>Takafumi Arakaki +</li>
<li>Thomas Robitaille +</li>
<li>Tomas Tomecek +</li>
<li>Travis E. Oliphant</li>
<li>Valentin Haenel</li>
<li>Vladimir Rutsky +</li>
<li>Warren Weckesser</li>
<li>Yaroslav Halchenko</li>
<li>Yury V. Zaytsev +</li>
</ul>
<p>A total of 119 people contributed to this release.
People with a “+” by their names contributed a patch for the first time.</p>
</div>
</div>
<div class="section" id="numpy-1-7-2-release-notes">
<h2>NumPy 1.7.2 Release Notes<a class="headerlink" href="#numpy-1-7-2-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix only release in the 1.7.x series.
It supports Python 2.4 - 2.7 and 3.1 - 3.3 and is the last series that
supports Python 2.4 - 2.5.</p>
<div class="section" id="id159">
<h3>Issues fixed<a class="headerlink" href="#id159" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>gh-3153: Do not reuse nditer buffers when not filled enough</li>
<li>gh-3192: f2py crashes with UnboundLocalError exception</li>
<li>gh-442: Concatenate with axis=None now requires equal number of array elements</li>
<li>gh-2485: Fix for astype(‘S’) string truncate issue</li>
<li>gh-3312: bug in count_nonzero</li>
<li>gh-2684: numpy.ma.average casts complex to float under certain conditions</li>
<li>gh-2403: masked array with named components does not behave as expected</li>
<li>gh-2495: np.ma.compress treated inputs in wrong order</li>
<li>gh-576: add __len__ method to ma.mvoid</li>
<li>gh-3364: reduce performance regression of mmap slicing</li>
<li>gh-3421: fix non-swapping strided copies in GetStridedCopySwap</li>
<li>gh-3373: fix small leak in datetime metadata initialization</li>
<li>gh-2791: add platform specific python include directories to search paths</li>
<li>gh-3168: fix undefined function and add integer divisions</li>
<li>gh-3301: memmap does not work with TemporaryFile in python3</li>
<li>gh-3057: distutils.misc_util.get_shared_lib_extension returns wrong debug extension</li>
<li>gh-3472: add module extensions to load_library search list</li>
<li>gh-3324: Make comparison function (gt, ge, …) respect __array_priority__</li>
<li>gh-3497: np.insert behaves incorrectly with argument ‘axis=-1’</li>
<li>gh-3541: make preprocessor tests consistent in halffloat.c</li>
<li>gh-3458: array_ass_boolean_subscript() writes ‘non-existent’ data to array</li>
<li>gh-2892: Regression in ufunc.reduceat with zero-sized index array</li>
<li>gh-3608: Regression when filling struct from tuple</li>
<li>gh-3701: add support for Python 3.4 ast.NameConstant</li>
<li>gh-3712: do not assume that GIL is enabled in xerbla</li>
<li>gh-3712: fix LAPACK error handling in lapack_litemodule</li>
<li>gh-3728: f2py fix decref on wrong object</li>
<li>gh-3743: Hash changed signature in Python 3.3</li>
<li>gh-3793: scalar int hashing broken on 64 bit python3</li>
<li>gh-3160: SandboxViolation easyinstalling 1.7.0 on Mac OS X 10.8.3</li>
<li>gh-3871: npy_math.h has invalid isinf for Solaris with SUNWspro12.2</li>
<li>gh-2561: Disable check for oldstyle classes in python3</li>
<li>gh-3900: Ensure NotImplemented is passed on in MaskedArray ufunc’s</li>
<li>gh-2052: del scalar subscript causes segfault</li>
<li>gh-3832: fix a few uninitialized uses and memleaks</li>
<li>gh-3971: f2py changed string.lowercase to string.ascii_lowercase for python3</li>
<li>gh-3480: numpy.random.binomial raised ValueError for n == 0</li>
<li>gh-3992: hypot(inf, 0) shouldn’t raise a warning, hypot(inf, inf) wrong result</li>
<li>gh-4018: Segmentation fault dealing with very large arrays</li>
<li>gh-4094: fix NaT handling in _strided_to_strided_string_to_datetime</li>
<li>gh-4051: fix uninitialized use in _strided_to_strided_string_to_datetime</li>
<li>gh-4123: lexsort segfault</li>
<li>gh-4141: Fix a few issues that show up with python 3.4b1</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-7-1-release-notes">
<h2>NumPy 1.7.1 Release Notes<a class="headerlink" href="#numpy-1-7-1-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix only release in the 1.7.x series.
It supports Python 2.4 - 2.7 and 3.1 - 3.3 and is the last series that
supports Python 2.4 - 2.5.</p>
<div class="section" id="id160">
<h3>Issues fixed<a class="headerlink" href="#id160" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>gh-2973: Fix <em class="xref py py-obj">1</em> is printed during numpy.test()</li>
<li>gh-2983: BUG: gh-2969: Backport memory leak fix 80b3a34.</li>
<li>gh-3007: Backport gh-3006</li>
<li>gh-2984: Backport fix complex polynomial fit</li>
<li>gh-2982: BUG: Make nansum work with booleans.</li>
<li>gh-2985: Backport large sort fixes</li>
<li>gh-3039: Backport object take</li>
<li>gh-3105: Backport nditer fix op axes initialization</li>
<li>gh-3108: BUG: npy-pkg-config ini files were missing after Bento build.</li>
<li>gh-3124: BUG: PyArray_LexSort allocates too much temporary memory.</li>
<li>gh-3131: BUG: Exported f2py_size symbol prevents linking multiple f2py modules.</li>
<li>gh-3117: Backport gh-2992</li>
<li>gh-3135: DOC: Add mention of PyArray_SetBaseObject stealing a reference</li>
<li>gh-3134: DOC: Fix typo in fft docs (the indexing variable is ‘m’, not ‘n’).</li>
<li>gh-3136: Backport #3128</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-7-0-release-notes">
<h2>NumPy 1.7.0 Release Notes<a class="headerlink" href="#numpy-1-7-0-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This release includes several new features as well as numerous bug fixes and
refactorings. It supports Python 2.4 - 2.7 and 3.1 - 3.3 and is the last
release that supports Python 2.4 - 2.5.</p>
<div class="section" id="id161">
<h3>Highlights<a class="headerlink" href="#id161" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">where=</span></code> parameter to ufuncs (allows the use of boolean arrays to choose
where a computation should be done)</li>
<li><code class="docutils literal notranslate"><span class="pre">vectorize</span></code> improvements (added ‘excluded’ and ‘cache’ keyword, general
cleanup and bug fixes)</li>
<li><code class="docutils literal notranslate"><span class="pre">numpy.random.choice</span></code> (random sample generating function)</li>
</ul>
</div>
<div class="section" id="id162">
<h3>Compatibility notes<a class="headerlink" href="#id162" title="Permalink to this headline">¶</a></h3>
<p>In a future version of numpy, the functions np.diag, np.diagonal, and the
diagonal method of ndarrays will return a view onto the original array,
instead of producing a copy as they do now. This makes a difference if you
write to the array returned by any of these functions. To facilitate this
transition, numpy 1.7 produces a FutureWarning if it detects that you may
be attempting to write to such an array. See the documentation for
np.diagonal for details.</p>
<p>Similar to np.diagonal above, in a future version of numpy, indexing a
record array by a list of field names will return a view onto the original
array, instead of producing a copy as they do now. As with np.diagonal,
numpy 1.7 produces a FutureWarning if it detects that you may be attempting
to write to such an array. See the documentation for array indexing for
details.</p>
<p>In a future version of numpy, the default casting rule for UFunc out=
parameters will be changed from ‘unsafe’ to ‘same_kind’. (This also applies
to in-place operations like a += b, which is equivalent to np.add(a, b,
out=a).) Most usages which violate the ‘same_kind’ rule are likely bugs, so
this change may expose previously undetected errors in projects that depend
on NumPy. In this version of numpy, such usages will continue to succeed,
but will raise a DeprecationWarning.</p>
<p>Full-array boolean indexing has been optimized to use a different,
optimized code path.   This code path should produce the same results,
but any feedback about changes to your code would be appreciated.</p>
<p>Attempting to write to a read-only array (one with <code class="docutils literal notranslate"><span class="pre">arr.flags.writeable</span></code>
set to <code class="docutils literal notranslate"><span class="pre">False</span></code>) used to raise either a RuntimeError, ValueError, or
TypeError inconsistently, depending on which code path was taken. It now
consistently raises a ValueError.</p>
<p>The &lt;ufunc&gt;.reduce functions evaluate some reductions in a different order
than in previous versions of NumPy, generally providing higher performance.
Because of the nature of floating-point arithmetic, this may subtly change
some results, just as linking NumPy to a different BLAS implementations
such as MKL can.</p>
<p>If upgrading from 1.5, then generally in 1.6 and 1.7 there have been
substantial code added and some code paths altered, particularly in the
areas of type resolution and buffered iteration over universal functions.
This might have an impact on your code particularly if you relied on
accidental behavior in the past.</p>
</div>
<div class="section" id="id163">
<h3>New features<a class="headerlink" href="#id163" title="Permalink to this headline">¶</a></h3>
<div class="section" id="reduction-ufuncs-generalize-axis-parameter">
<h4>Reduction UFuncs Generalize axis= Parameter<a class="headerlink" href="#reduction-ufuncs-generalize-axis-parameter" title="Permalink to this headline">¶</a></h4>
<p>Any ufunc.reduce function call, as well as other reductions like sum, prod,
any, all, max and min support the ability to choose a subset of the axes to
reduce over. Previously, one could say axis=None to mean all the axes or
axis=# to pick a single axis.  Now, one can also say axis=(#,#) to pick a
list of axes for reduction.</p>
</div>
<div class="section" id="reduction-ufuncs-new-keepdims-parameter">
<h4>Reduction UFuncs New keepdims= Parameter<a class="headerlink" href="#reduction-ufuncs-new-keepdims-parameter" title="Permalink to this headline">¶</a></h4>
<p>There is a new keepdims= parameter, which if set to True, doesn’t throw
away the reduction axes but instead sets them to have size one.  When this
option is set, the reduction result will broadcast correctly to the
original operand which was reduced.</p>
</div>
<div class="section" id="datetime-support">
<h4>Datetime support<a class="headerlink" href="#datetime-support" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The datetime API is <em>experimental</em> in 1.7.0, and may undergo changes
in future versions of NumPy.</p>
</div>
<p>There have been a lot of fixes and enhancements to datetime64 compared
to NumPy 1.6:</p>
<ul class="simple">
<li>the parser is quite strict about only accepting ISO 8601 dates, with a few
convenience extensions</li>
<li>converts between units correctly</li>
<li>datetime arithmetic works correctly</li>
<li>business day functionality (allows the datetime to be used in contexts where
only certain days of the week are valid)</li>
</ul>
<p>The notes in <a class="reference external" href="https://github.com/numpy/numpy/blob/maintenance/1.7.x/doc/source/reference/arrays.datetime.rst">doc/source/reference/arrays.datetime.rst</a>
(also available in the online docs at <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/arrays.datetime.html">arrays.datetime.html</a>) should be
consulted for more details.</p>
</div>
<div class="section" id="custom-formatter-for-printing-arrays">
<h4>Custom formatter for printing arrays<a class="headerlink" href="#custom-formatter-for-printing-arrays" title="Permalink to this headline">¶</a></h4>
<p>See the new <code class="docutils literal notranslate"><span class="pre">formatter</span></code> parameter of the <code class="docutils literal notranslate"><span class="pre">numpy.set_printoptions</span></code>
function.</p>
</div>
<div class="section" id="new-function-numpy-random-choice">
<h4>New function numpy.random.choice<a class="headerlink" href="#new-function-numpy-random-choice" title="Permalink to this headline">¶</a></h4>
<p>A generic sampling function has been added which will generate samples from
a given array-like. The samples can be with or without replacement, and
with uniform or given non-uniform probabilities.</p>
</div>
<div class="section" id="new-function-isclose">
<h4>New function isclose<a class="headerlink" href="#new-function-isclose" title="Permalink to this headline">¶</a></h4>
<p>Returns a boolean array where two arrays are element-wise equal within a
tolerance. Both relative and absolute tolerance can be specified.</p>
</div>
<div class="section" id="preliminary-multi-dimensional-support-in-the-polynomial-package">
<h4>Preliminary multi-dimensional support in the polynomial package<a class="headerlink" href="#preliminary-multi-dimensional-support-in-the-polynomial-package" title="Permalink to this headline">¶</a></h4>
<p>Axis keywords have been added to the integration and differentiation
functions and a tensor keyword was added to the evaluation functions.
These additions allow multi-dimensional coefficient arrays to be used in
those functions. New functions for evaluating 2-D and 3-D coefficient
arrays on grids or sets of points were added together with 2-D and 3-D
pseudo-Vandermonde matrices that can be used for fitting.</p>
</div>
<div class="section" id="ability-to-pad-rank-n-arrays">
<h4>Ability to pad rank-n arrays<a class="headerlink" href="#ability-to-pad-rank-n-arrays" title="Permalink to this headline">¶</a></h4>
<p>A pad module containing functions for padding n-dimensional arrays has been
added. The various private padding functions are exposed as options to a
public ‘pad’ function.  Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pad</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Current modes are <code class="docutils literal notranslate"><span class="pre">constant</span></code>, <code class="docutils literal notranslate"><span class="pre">edge</span></code>, <code class="docutils literal notranslate"><span class="pre">linear_ramp</span></code>, <code class="docutils literal notranslate"><span class="pre">maximum</span></code>,
<code class="docutils literal notranslate"><span class="pre">mean</span></code>, <code class="docutils literal notranslate"><span class="pre">median</span></code>, <code class="docutils literal notranslate"><span class="pre">minimum</span></code>, <code class="docutils literal notranslate"><span class="pre">reflect</span></code>, <code class="docutils literal notranslate"><span class="pre">symmetric</span></code>, <code class="docutils literal notranslate"><span class="pre">wrap</span></code>, and
<code class="docutils literal notranslate"><span class="pre">&lt;function&gt;</span></code>.</p>
</div>
<div class="section" id="new-argument-to-searchsorted">
<h4>New argument to searchsorted<a class="headerlink" href="#new-argument-to-searchsorted" title="Permalink to this headline">¶</a></h4>
<p>The function searchsorted now accepts a ‘sorter’ argument that is a
permutation array that sorts the array to search.</p>
</div>
<div class="section" id="id164">
<h4>Build system<a class="headerlink" href="#id164" title="Permalink to this headline">¶</a></h4>
<p>Added experimental support for the AArch64 architecture.</p>
</div>
<div class="section" id="id165">
<h4>C API<a class="headerlink" href="#id165" title="Permalink to this headline">¶</a></h4>
<p>New function <code class="docutils literal notranslate"><span class="pre">PyArray_RequireWriteable</span></code> provides a consistent interface
for checking array writeability – any C code which works with arrays whose
WRITEABLE flag is not known to be True a priori, should make sure to call
this function before writing.</p>
<p>NumPy C Style Guide added (<code class="docutils literal notranslate"><span class="pre">doc/C_STYLE_GUIDE.rst.txt</span></code>).</p>
</div>
</div>
<div class="section" id="id166">
<h3>Changes<a class="headerlink" href="#id166" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id167">
<h4>General<a class="headerlink" href="#id167" title="Permalink to this headline">¶</a></h4>
<p>The function np.concatenate tries to match the layout of its input arrays.
Previously, the layout did not follow any particular reason, and depended
in an undesirable way on the particular axis chosen for concatenation. A
bug was also fixed which silently allowed out of bounds axis arguments.</p>
<p>The ufuncs logical_or, logical_and, and logical_not now follow Python’s
behavior with object arrays, instead of trying to call methods on the
objects. For example the expression (3 and ‘test’) produces the string
‘test’, and now np.logical_and(np.array(3, ‘O’), np.array(‘test’, ‘O’))
produces ‘test’ as well.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.base</span></code> attribute on ndarrays, which is used on views to ensure that the
underlying array owning the memory is not deallocated prematurely, now
collapses out references when you have a view-of-a-view. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</pre></div>
</div>
<p>In numpy 1.6, <code class="docutils literal notranslate"><span class="pre">c.base</span></code> is <code class="docutils literal notranslate"><span class="pre">b</span></code>, and <code class="docutils literal notranslate"><span class="pre">c.base.base</span></code> is <code class="docutils literal notranslate"><span class="pre">a</span></code>. In numpy 1.7,
<code class="docutils literal notranslate"><span class="pre">c.base</span></code> is <code class="docutils literal notranslate"><span class="pre">a</span></code>.</p>
<p>To increase backwards compatibility for software which relies on the old
behaviour of <code class="docutils literal notranslate"><span class="pre">.base</span></code>, we only ‘skip over’ objects which have exactly the same
type as the newly created view. This makes a difference if you use <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>
subclasses. For example, if we have a mix of <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> and <code class="docutils literal notranslate"><span class="pre">matrix</span></code> objects
which are all views on the same original <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asmatrix</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">:]</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">:]</span>
</pre></div>
</div>
<p>then <code class="docutils literal notranslate"><span class="pre">d.base</span></code> will be <code class="docutils literal notranslate"><span class="pre">b</span></code>. This is because <code class="docutils literal notranslate"><span class="pre">d</span></code> is a <code class="docutils literal notranslate"><span class="pre">matrix</span></code> object,
and so the collapsing process only continues so long as it encounters other
<code class="docutils literal notranslate"><span class="pre">matrix</span></code> objects. It considers <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, and <code class="docutils literal notranslate"><span class="pre">a</span></code> in that order, and
<code class="docutils literal notranslate"><span class="pre">b</span></code> is the last entry in that list which is a <code class="docutils literal notranslate"><span class="pre">matrix</span></code> object.</p>
</div>
<div class="section" id="casting-rules">
<h4>Casting Rules<a class="headerlink" href="#casting-rules" title="Permalink to this headline">¶</a></h4>
<p>Casting rules have undergone some changes in corner cases, due to the
NA-related work. In particular for combinations of scalar+scalar:</p>
<ul class="simple">
<li>the <code class="xref py py-obj docutils literal notranslate"><span class="pre">longlong</span></code> type (<em class="xref py py-obj">q</em>) now stays <code class="xref py py-obj docutils literal notranslate"><span class="pre">longlong</span></code> for operations with any other
number (<em class="xref py py-obj">? b h i l q p B H I</em>), previously it was cast as <code class="xref py py-obj docutils literal notranslate"><span class="pre">int_</span></code> (<em class="xref py py-obj">l</em>). The
<code class="xref py py-obj docutils literal notranslate"><span class="pre">ulonglong</span></code> type (<em class="xref py py-obj">Q</em>) now stays as <code class="xref py py-obj docutils literal notranslate"><span class="pre">ulonglong</span></code> instead of <code class="xref py py-obj docutils literal notranslate"><span class="pre">uint</span></code> (<em class="xref py py-obj">L</em>).</li>
<li>the <code class="xref py py-obj docutils literal notranslate"><span class="pre">timedelta64</span></code> type (<em class="xref py py-obj">m</em>) can now be mixed with any integer type (<em class="xref py py-obj">b h i l
q p B H I L Q P</em>), previously it raised <em class="xref py py-obj">TypeError</em>.</li>
</ul>
<p>For array + scalar, the above rules just broadcast except the case when
the array and scalars are unsigned/signed integers, then the result gets
converted to the array type (of possibly larger size) as illustrated by the
following examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">(</span><span class="mi">257</span><span class="p">))</span><span class="o">.</span><span class="n">dtype</span>
<span class="go">dtype(&#39;uint16&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int8</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">uint16</span><span class="p">(</span><span class="mi">257</span><span class="p">))</span><span class="o">.</span><span class="n">dtype</span>
<span class="go">dtype(&#39;int16&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">uint32</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">17</span><span class="p">))</span><span class="o">.</span><span class="n">dtype</span>
<span class="go">dtype(&#39;int32&#39;)</span>
</pre></div>
</div>
<p>Whether the size gets increased depends on the size of the scalar, for
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">(</span><span class="mi">255</span><span class="p">))</span><span class="o">.</span><span class="n">dtype</span>
<span class="go">dtype(&#39;uint8&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">(</span><span class="mi">256</span><span class="p">))</span><span class="o">.</span><span class="n">dtype</span>
<span class="go">dtype(&#39;uint16&#39;)</span>
</pre></div>
</div>
<p>Also a <code class="docutils literal notranslate"><span class="pre">complex128</span></code> scalar + <code class="docutils literal notranslate"><span class="pre">float32</span></code> array is cast to <code class="docutils literal notranslate"><span class="pre">complex64</span></code>.</p>
<p>In NumPy 1.7 the <code class="xref py py-obj docutils literal notranslate"><span class="pre">datetime64</span></code> type (<em class="xref py py-obj">M</em>) must be constructed by explicitly
specifying the type as the second argument (e.g. <code class="docutils literal notranslate"><span class="pre">np.datetime64(2000,</span> <span class="pre">'Y')</span></code>).</p>
</div>
</div>
<div class="section" id="id168">
<h3>Deprecations<a class="headerlink" href="#id168" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id169">
<h4>General<a class="headerlink" href="#id169" title="Permalink to this headline">¶</a></h4>
<p>Specifying a custom string formatter with a <em class="xref py py-obj">_format</em> array attribute is
deprecated. The new <a class="reference external" href="https://docs.python.org/dev/library/formatter.html#module-formatter" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">formatter</span></code></a> keyword in <code class="docutils literal notranslate"><span class="pre">numpy.set_printoptions</span></code> or
<code class="docutils literal notranslate"><span class="pre">numpy.array2string</span></code> can be used instead.</p>
<p>The deprecated imports in the polynomial package have been removed.</p>
<p><code class="docutils literal notranslate"><span class="pre">concatenate</span></code> now raises DepractionWarning for 1D arrays if <code class="docutils literal notranslate"><span class="pre">axis</span> <span class="pre">!=</span> <span class="pre">0</span></code>.
Versions of numpy &lt; 1.7.0 ignored axis argument value for 1D arrays. We
allow this for now, but in due course we will raise an error.</p>
</div>
<div class="section" id="id170">
<h4>C-API<a class="headerlink" href="#id170" title="Permalink to this headline">¶</a></h4>
<p>Direct access to the fields of PyArrayObject* has been deprecated. Direct
access has been recommended against for many releases. Expect similar
deprecations for PyArray_Descr* and other core objects in the future as
preparation for NumPy 2.0.</p>
<p>The macros in old_defines.h are deprecated and will be removed in the next
major release (&gt;= 2.0). The sed script tools/replace_old_macros.sed can be
used to replace these macros with the newer versions.</p>
<p>You can test your code against the deprecated C API by adding a line
composed of <code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">NPY_NO_DEPRECATED_API</span></code> and the target version number,
such as <code class="docutils literal notranslate"><span class="pre">NPY_1_7_API_VERSION</span></code>, before including any NumPy headers.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">NPY_CHAR</span></code> member of the <code class="docutils literal notranslate"><span class="pre">NPY_TYPES</span></code> enum is deprecated and will be
removed in NumPy 1.8. See the discussion at
<a class="reference external" href="https://github.com/numpy/numpy/issues/2801">gh-2801</a> for more details.</p>
</div>
</div>
</div>
<div class="section" id="numpy-1-6-2-release-notes">
<h2>NumPy 1.6.2 Release Notes<a class="headerlink" href="#numpy-1-6-2-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix release in the 1.6.x series.  Due to the delay of the NumPy
1.7.0 release, this release contains far more fixes than a regular NumPy bugfix
release.  It also includes a number of documentation and build improvements.</p>
<div class="section" id="id171">
<h3>Issues fixed<a class="headerlink" href="#id171" title="Permalink to this headline">¶</a></h3>
<div class="section" id="numpy-core">
<h4><code class="docutils literal notranslate"><span class="pre">numpy.core</span></code><a class="headerlink" href="#numpy-core" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>#2063: make unique() return consistent index</li>
<li>#1138: allow creating arrays from empty buffers or empty slices</li>
<li>#1446: correct note about correspondence vstack and concatenate</li>
<li>#1149: make argmin() work for datetime</li>
<li>#1672: fix allclose() to work for scalar inf</li>
<li>#1747: make np.median() work for 0-D arrays</li>
<li>#1776: make complex division by zero to yield inf properly</li>
<li>#1675: add scalar support for the format() function</li>
<li>#1905: explicitly check for NaNs in allclose()</li>
<li>#1952: allow floating ddof in std() and var()</li>
<li>#1948: fix regression for indexing chararrays with empty list</li>
<li>#2017: fix type hashing</li>
<li>#2046: deleting array attributes causes segfault</li>
<li>#2033: a**2.0 has incorrect type</li>
<li>#2045: make attribute/iterator_element deletions not segfault</li>
<li>#2021: fix segfault in searchsorted()</li>
<li>#2073: fix float16 __array_interface__ bug</li>
</ul>
</div>
<div class="section" id="numpy-lib">
<h4><code class="docutils literal notranslate"><span class="pre">numpy.lib</span></code><a class="headerlink" href="#numpy-lib" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>#2048: break reference cycle in NpzFile</li>
<li>#1573: savetxt() now handles complex arrays</li>
<li>#1387: allow bincount() to accept empty arrays</li>
<li>#1899: fixed histogramdd() bug with empty inputs</li>
<li>#1793: fix failing npyio test under py3k</li>
<li>#1936: fix extra nesting for subarray dtypes</li>
<li>#1848: make tril/triu return the same dtype as the original array</li>
<li>#1918: use Py_TYPE to access ob_type, so it works also on Py3</li>
</ul>
</div>
<div class="section" id="numpy-distutils">
<h4><code class="docutils literal notranslate"><span class="pre">numpy.distutils</span></code><a class="headerlink" href="#numpy-distutils" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>#1261: change compile flag on AIX from -O5 to -O3</li>
<li>#1377: update HP compiler flags</li>
<li>#1383: provide better support for C++ code on HPUX</li>
<li>#1857: fix build for py3k + pip</li>
<li>BLD: raise a clearer warning in case of building without cleaning up first</li>
<li>BLD: follow build_ext coding convention in build_clib</li>
<li>BLD: fix up detection of Intel CPU on OS X in system_info.py</li>
<li>BLD: add support for the new X11 directory structure on Ubuntu &amp; co.</li>
<li>BLD: add ufsparse to the libraries search path.</li>
<li>BLD: add ‘pgfortran’ as a valid compiler in the Portland Group</li>
<li>BLD: update version match regexp for IBM AIX Fortran compilers.</li>
</ul>
</div>
<div class="section" id="numpy-random">
<h4><code class="docutils literal notranslate"><span class="pre">numpy.random</span></code><a class="headerlink" href="#numpy-random" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>BUG: Use npy_intp instead of long in mtrand</li>
</ul>
</div>
</div>
<div class="section" id="id172">
<h3>Changes<a class="headerlink" href="#id172" title="Permalink to this headline">¶</a></h3>
<div class="section" id="numpy-f2py">
<h4><code class="docutils literal notranslate"><span class="pre">numpy.f2py</span></code><a class="headerlink" href="#numpy-f2py" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>ENH: Introduce new options extra_f77_compiler_args and extra_f90_compiler_args</li>
<li>BLD: Improve reporting of fcompiler value</li>
<li>BUG: Fix f2py test_kind.py test</li>
</ul>
</div>
<div class="section" id="numpy-poly">
<h4><code class="docutils literal notranslate"><span class="pre">numpy.poly</span></code><a class="headerlink" href="#numpy-poly" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>ENH: Add some tests for polynomial printing</li>
<li>ENH: Add companion matrix functions</li>
<li>DOC: Rearrange the polynomial documents</li>
<li>BUG: Fix up links to classes</li>
<li>DOC: Add version added to some of the polynomial package modules</li>
<li>DOC: Document xxxfit functions in the polynomial package modules</li>
<li>BUG: The polynomial convenience classes let different types interact</li>
<li>DOC: Document the use of the polynomial convenience classes</li>
<li>DOC: Improve numpy reference documentation of polynomial classes</li>
<li>ENH: Improve the computation of polynomials from roots</li>
<li>STY: Code cleanup in polynomial [*]fromroots functions</li>
<li>DOC: Remove references to cast and NA, which were added in 1.7</li>
</ul>
</div>
</div>
</div>
<div class="section" id="numpy-1-6-1-release-notes">
<h2>NumPy 1.6.1 Release Notes<a class="headerlink" href="#numpy-1-6-1-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix only release in the 1.6.x series.</p>
<div class="section" id="id173">
<h3>Issues Fixed<a class="headerlink" href="#id173" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>#1834: einsum fails for specific shapes</li>
<li>#1837: einsum throws nan or freezes python for specific array shapes</li>
<li>#1838: object &lt;-&gt; structured type arrays regression</li>
<li>#1851: regression for SWIG based code in 1.6.0</li>
<li>#1863: Buggy results when operating on array copied with astype()</li>
<li>#1870: Fix corner case of object array assignment</li>
<li>#1843: Py3k: fix error with recarray</li>
<li>#1885: nditer: Error in detecting double reduction loop</li>
<li>#1874: f2py: fix –include_paths bug</li>
<li>#1749: Fix ctypes.load_library()</li>
<li>#1895/1896:  iter: writeonly operands weren’t always being buffered correctly</li>
</ul>
</div>
</div>
<div class="section" id="numpy-1-6-0-release-notes">
<h2>NumPy 1.6.0 Release Notes<a class="headerlink" href="#numpy-1-6-0-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This release includes several new features as well as numerous bug fixes and
improved documentation.  It is backward compatible with the 1.5.0 release, and
supports Python 2.4 - 2.7 and 3.1 - 3.2.</p>
<div class="section" id="id174">
<h3>Highlights<a class="headerlink" href="#id174" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Re-introduction of datetime dtype support to deal with dates in arrays.</li>
<li>A new 16-bit floating point type.</li>
<li>A new iterator, which improves performance of many functions.</li>
</ul>
</div>
<div class="section" id="id175">
<h3>New features<a class="headerlink" href="#id175" title="Permalink to this headline">¶</a></h3>
<div class="section" id="new-16-bit-floating-point-type">
<h4>New 16-bit floating point type<a class="headerlink" href="#new-16-bit-floating-point-type" title="Permalink to this headline">¶</a></h4>
<p>This release adds support for the IEEE 754-2008 binary16 format, available as
the data type <code class="docutils literal notranslate"><span class="pre">numpy.half</span></code>.  Within Python, the type behaves similarly to
<a class="reference external" href="https://docs.python.org/dev/library/functions.html#float" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code></a> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">double</span></code>, and C extensions can add support for it with the exposed
half-float API.</p>
</div>
<div class="section" id="new-iterator">
<h4>New iterator<a class="headerlink" href="#new-iterator" title="Permalink to this headline">¶</a></h4>
<p>A new iterator has been added, replacing the functionality of the
existing iterator and multi-iterator with a single object and API.
This iterator works well with general memory layouts different from
C or Fortran contiguous, and handles both standard NumPy and
customized broadcasting. The buffering, automatic data type
conversion, and optional output parameters, offered by
ufuncs but difficult to replicate elsewhere, are now exposed by this
iterator.</p>
</div>
<div class="section" id="legendre-laguerre-hermite-hermitee-polynomials-in-numpy-polynomial">
<h4>Legendre, Laguerre, Hermite, HermiteE polynomials in <code class="docutils literal notranslate"><span class="pre">numpy.polynomial</span></code><a class="headerlink" href="#legendre-laguerre-hermite-hermitee-polynomials-in-numpy-polynomial" title="Permalink to this headline">¶</a></h4>
<p>Extend the number of polynomials available in the polynomial package. In
addition, a new <code class="docutils literal notranslate"><span class="pre">window</span></code> attribute has been added to the classes in
order to specify the range the <code class="docutils literal notranslate"><span class="pre">domain</span></code> maps to. This is mostly useful
for the Laguerre, Hermite, and HermiteE polynomials whose natural domains
are infinite and provides a more intuitive way to get the correct mapping
of values without playing unnatural tricks with the domain.</p>
</div>
<div class="section" id="fortran-assumed-shape-array-and-size-function-support-in-numpy-f2py">
<h4>Fortran assumed shape array and size function support in <code class="docutils literal notranslate"><span class="pre">numpy.f2py</span></code><a class="headerlink" href="#fortran-assumed-shape-array-and-size-function-support-in-numpy-f2py" title="Permalink to this headline">¶</a></h4>
<p>F2py now supports wrapping Fortran 90 routines that use assumed shape
arrays.  Before such routines could be called from Python but the
corresponding Fortran routines received assumed shape arrays as zero
length arrays which caused unpredicted results. Thanks to Lorenz
Hüdepohl for pointing out the correct way to interface routines with
assumed shape arrays.</p>
<p>In addition, f2py supports now automatic wrapping of Fortran routines
that use two argument <code class="docutils literal notranslate"><span class="pre">size</span></code> function in dimension specifications.</p>
</div>
<div class="section" id="other-new-functions">
<h4>Other new functions<a class="headerlink" href="#other-new-functions" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">numpy.ravel_multi_index</span></code> : Converts a multi-index tuple into
an array of flat indices, applying boundary modes to the indices.</p>
<p><code class="docutils literal notranslate"><span class="pre">numpy.einsum</span></code> : Evaluate the Einstein summation convention.  Using the
Einstein summation convention, many common multi-dimensional array operations
can be represented in a simple fashion.  This function provides a way compute
such summations.</p>
<p><code class="docutils literal notranslate"><span class="pre">numpy.count_nonzero</span></code> : Counts the number of non-zero elements in an array.</p>
<p><code class="docutils literal notranslate"><span class="pre">numpy.result_type</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy.min_scalar_type</span></code> : These functions expose
the underlying type promotion used by the ufuncs and other operations to
determine the types of outputs. These improve upon the <code class="docutils literal notranslate"><span class="pre">numpy.common_type</span></code>
and <code class="docutils literal notranslate"><span class="pre">numpy.mintypecode</span></code> which provide similar functionality but do
not match the ufunc implementation.</p>
</div>
</div>
<div class="section" id="id176">
<h3>Changes<a class="headerlink" href="#id176" title="Permalink to this headline">¶</a></h3>
<div class="section" id="default-error-handling">
<h4><code class="docutils literal notranslate"><span class="pre">default</span> <span class="pre">error</span> <span class="pre">handling</span></code><a class="headerlink" href="#default-error-handling" title="Permalink to this headline">¶</a></h4>
<p>The default error handling has been change from <code class="docutils literal notranslate"><span class="pre">print</span></code> to <code class="docutils literal notranslate"><span class="pre">warn</span></code> for
all except for <code class="docutils literal notranslate"><span class="pre">underflow</span></code>, which remains as <code class="docutils literal notranslate"><span class="pre">ignore</span></code>.</p>
</div>
<div class="section" id="id177">
<h4><code class="docutils literal notranslate"><span class="pre">numpy.distutils</span></code><a class="headerlink" href="#id177" title="Permalink to this headline">¶</a></h4>
<p>Several new compilers are supported for building Numpy: the Portland Group
Fortran compiler on OS X, the PathScale compiler suite and the 64-bit Intel C
compiler on Linux.</p>
</div>
<div class="section" id="numpy-testing">
<h4><code class="docutils literal notranslate"><span class="pre">numpy.testing</span></code><a class="headerlink" href="#numpy-testing" title="Permalink to this headline">¶</a></h4>
<p>The testing framework gained <code class="docutils literal notranslate"><span class="pre">numpy.testing.assert_allclose</span></code>, which provides
a more convenient way to compare floating point arrays than
<em class="xref py py-obj">assert_almost_equal</em>, <em class="xref py py-obj">assert_approx_equal</em> and <em class="xref py py-obj">assert_array_almost_equal</em>.</p>
</div>
<div class="section" id="id178">
<h4><code class="docutils literal notranslate"><span class="pre">C</span> <span class="pre">API</span></code><a class="headerlink" href="#id178" title="Permalink to this headline">¶</a></h4>
<p>In addition to the APIs for the new iterator and half data type, a number
of other additions have been made to the C API. The type promotion
mechanism used by ufuncs is exposed via <code class="docutils literal notranslate"><span class="pre">PyArray_PromoteTypes</span></code>,
<code class="docutils literal notranslate"><span class="pre">PyArray_ResultType</span></code>, and <code class="docutils literal notranslate"><span class="pre">PyArray_MinScalarType</span></code>. A new enumeration
<code class="docutils literal notranslate"><span class="pre">NPY_CASTING</span></code> has been added which controls what types of casts are
permitted. This is used by the new functions <code class="docutils literal notranslate"><span class="pre">PyArray_CanCastArrayTo</span></code>
and <code class="docutils literal notranslate"><span class="pre">PyArray_CanCastTypeTo</span></code>.  A more flexible way to handle
conversion of arbitrary python objects into arrays is exposed by
<code class="docutils literal notranslate"><span class="pre">PyArray_GetArrayParamsFromObject</span></code>.</p>
</div>
</div>
<div class="section" id="deprecated-features">
<h3>Deprecated features<a class="headerlink" href="#deprecated-features" title="Permalink to this headline">¶</a></h3>
<p>The “normed” keyword in <code class="docutils literal notranslate"><span class="pre">numpy.histogram</span></code> is deprecated. Its functionality
will be replaced by the new “density” keyword.</p>
</div>
<div class="section" id="removed-features">
<h3>Removed features<a class="headerlink" href="#removed-features" title="Permalink to this headline">¶</a></h3>
<div class="section" id="numpy-fft">
<h4><code class="docutils literal notranslate"><span class="pre">numpy.fft</span></code><a class="headerlink" href="#numpy-fft" title="Permalink to this headline">¶</a></h4>
<p>The functions <em class="xref py py-obj">refft</em>, <em class="xref py py-obj">refft2</em>, <em class="xref py py-obj">refftn</em>, <em class="xref py py-obj">irefft</em>, <em class="xref py py-obj">irefft2</em>, <em class="xref py py-obj">irefftn</em>,
which were aliases for the same functions without the ‘e’ in the name, were
removed.</p>
</div>
<div class="section" id="numpy-memmap">
<h4><code class="docutils literal notranslate"><span class="pre">numpy.memmap</span></code><a class="headerlink" href="#numpy-memmap" title="Permalink to this headline">¶</a></h4>
<p>The <em class="xref py py-obj">sync()</em> and <em class="xref py py-obj">close()</em> methods of memmap were removed.  Use <em class="xref py py-obj">flush()</em> and
“del memmap” instead.</p>
</div>
<div class="section" id="id179">
<h4><code class="docutils literal notranslate"><span class="pre">numpy.lib</span></code><a class="headerlink" href="#id179" title="Permalink to this headline">¶</a></h4>
<p>The deprecated functions <code class="docutils literal notranslate"><span class="pre">numpy.unique1d</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.setmember1d</span></code>,
<code class="docutils literal notranslate"><span class="pre">numpy.intersect1d_nu</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy.lib.ufunclike.log2</span></code> were removed.</p>
</div>
<div class="section" id="numpy-ma">
<h4><code class="docutils literal notranslate"><span class="pre">numpy.ma</span></code><a class="headerlink" href="#numpy-ma" title="Permalink to this headline">¶</a></h4>
<p>Several deprecated items were removed from the <code class="docutils literal notranslate"><span class="pre">numpy.ma</span></code> module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>* ``numpy.ma.MaskedArray`` &quot;raw_data&quot; method
* ``numpy.ma.MaskedArray`` constructor &quot;flag&quot; keyword
* ``numpy.ma.make_mask`` &quot;flag&quot; keyword
* ``numpy.ma.allclose`` &quot;fill_value&quot; keyword
</pre></div>
</div>
</div>
<div class="section" id="id180">
<h4><code class="docutils literal notranslate"><span class="pre">numpy.distutils</span></code><a class="headerlink" href="#id180" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">numpy.get_numpy_include</span></code> function was removed, use <code class="docutils literal notranslate"><span class="pre">numpy.get_include</span></code>
instead.</p>
</div>
</div>
</div>
<div class="section" id="numpy-1-5-0-release-notes">
<h2>NumPy 1.5.0 Release Notes<a class="headerlink" href="#numpy-1-5-0-release-notes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id181">
<h3>Highlights<a class="headerlink" href="#id181" title="Permalink to this headline">¶</a></h3>
<div class="section" id="python-3-compatibility">
<h4>Python 3 compatibility<a class="headerlink" href="#python-3-compatibility" title="Permalink to this headline">¶</a></h4>
<p>This is the first NumPy release which is compatible with Python 3. Support for
Python 3 and Python 2 is done from a single code base. Extensive notes on
changes can be found at
<a class="reference external" href="http://projects.scipy.org/numpy/browser/trunk/doc/Py3K.txt">http://projects.scipy.org/numpy/browser/trunk/doc/Py3K.txt</a>.</p>
<p>Note that the Numpy testing framework relies on nose, which does not have a
Python 3 compatible release yet. A working Python 3 branch of nose can be found
at <a class="reference external" href="http://bitbucket.org/jpellerin/nose3/">http://bitbucket.org/jpellerin/nose3/</a> however.</p>
<p>Porting of SciPy to Python 3 is expected to be completed soon.</p>
</div>
<div class="section" id="pep-3118-compatibility">
<h4><span class="target" id="index-0"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3118"><strong>PEP 3118</strong></a> compatibility<a class="headerlink" href="#pep-3118-compatibility" title="Permalink to this headline">¶</a></h4>
<p>The new buffer protocol described by PEP 3118 is fully supported in this
version of Numpy. On Python versions &gt;= 2.6 Numpy arrays expose the buffer
interface, and array(), asarray() and other functions accept new-style buffers
as input.</p>
</div>
</div>
<div class="section" id="id182">
<h3>New features<a class="headerlink" href="#id182" title="Permalink to this headline">¶</a></h3>
<div class="section" id="warning-on-casting-complex-to-real">
<h4>Warning on casting complex to real<a class="headerlink" href="#warning-on-casting-complex-to-real" title="Permalink to this headline">¶</a></h4>
<p>Numpy now emits a <code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ComplexWarning</span></code> when a complex number is cast
into a real number. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="n">j</span><span class="p">,</span> <span class="mi">1</span><span class="o">-</span><span class="mi">2</span><span class="n">j</span><span class="p">])</span>
<span class="go">ComplexWarning: Casting complex values to real discards the imaginary part</span>
</pre></div>
</div>
<p>The cast indeed discards the imaginary part, and this may not be the
intended behavior in all cases, hence the warning. This warning can be
turned off in the standard way:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ComplexWarning</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="dot-method-for-ndarrays">
<h4>Dot method for ndarrays<a class="headerlink" href="#dot-method-for-ndarrays" title="Permalink to this headline">¶</a></h4>
<p>Ndarrays now have the dot product also as a method, which allows writing
chains of matrix products as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</pre></div>
</div>
<p>instead of the longer alternative</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="linalg-slogdet-function">
<h4>linalg.slogdet function<a class="headerlink" href="#linalg-slogdet-function" title="Permalink to this headline">¶</a></h4>
<p>The slogdet function returns the sign and logarithm of the determinant
of a matrix. Because the determinant may involve the product of many
small/large values, the result is often more accurate than that obtained
by simple multiplication.</p>
</div>
<div class="section" id="new-header">
<h4>new header<a class="headerlink" href="#new-header" title="Permalink to this headline">¶</a></h4>
<p>The new header file ndarraytypes.h contains the symbols from
ndarrayobject.h that do not depend on the PY_ARRAY_UNIQUE_SYMBOL and
NO_IMPORT/_ARRAY macros. Broadly, these symbols are types, typedefs,
and enumerations; the array function calls are left in
ndarrayobject.h. This allows users to include array-related types and
enumerations without needing to concern themselves with the macro
expansions and their side- effects.</p>
</div>
</div>
<div class="section" id="id183">
<h3>Changes<a class="headerlink" href="#id183" title="Permalink to this headline">¶</a></h3>
<div class="section" id="polynomial-polynomial">
<h4>polynomial.polynomial<a class="headerlink" href="#polynomial-polynomial" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The polyint and polyder functions now check that the specified number
integrations or derivations is a non-negative integer. The number 0 is
a valid value for both functions.</li>
<li>A degree method has been added to the Polynomial class.</li>
<li>A trimdeg method has been added to the Polynomial class. It operates like
truncate except that the argument is the desired degree of the result,
not the number of coefficients.</li>
<li>Polynomial.fit now uses None as the default domain for the fit. The default
Polynomial domain can be specified by using [] as the domain value.</li>
<li>Weights can be used in both polyfit and Polynomial.fit</li>
<li>A linspace method has been added to the Polynomial class to ease plotting.</li>
<li>The polymulx function was added.</li>
</ul>
</div>
<div class="section" id="polynomial-chebyshev">
<h4>polynomial.chebyshev<a class="headerlink" href="#polynomial-chebyshev" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The chebint and chebder functions now check that the specified number
integrations or derivations is a non-negative integer. The number 0 is
a valid value for both functions.</li>
<li>A degree method has been added to the Chebyshev class.</li>
<li>A trimdeg method has been added to the Chebyshev class. It operates like
truncate except that the argument is the desired degree of the result,
not the number of coefficients.</li>
<li>Chebyshev.fit now uses None as the default domain for the fit. The default
Chebyshev domain can be specified by using [] as the domain value.</li>
<li>Weights can be used in both chebfit and Chebyshev.fit</li>
<li>A linspace method has been added to the Chebyshev class to ease plotting.</li>
<li>The chebmulx function was added.</li>
<li>Added functions for the Chebyshev points of the first and second kind.</li>
</ul>
</div>
<div class="section" id="histogram">
<h4>histogram<a class="headerlink" href="#histogram" title="Permalink to this headline">¶</a></h4>
<p>After a two years transition period, the old behavior of the histogram function
has been phased out, and the “new” keyword has been removed.</p>
</div>
<div class="section" id="correlate">
<h4>correlate<a class="headerlink" href="#correlate" title="Permalink to this headline">¶</a></h4>
<p>The old behavior of correlate was deprecated in 1.4.0, the new behavior (the
usual definition for cross-correlation) is now the default.</p>
</div>
</div>
</div>
<div class="section" id="numpy-1-4-0-release-notes">
<h2>NumPy 1.4.0 Release Notes<a class="headerlink" href="#numpy-1-4-0-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This minor includes numerous bug fixes, as well as a few new features. It
is backward compatible with 1.3.0 release.</p>
<div class="section" id="id184">
<h3>Highlights<a class="headerlink" href="#id184" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New datetime dtype support to deal with dates in arrays</li>
<li>Faster import time</li>
<li>Extended array wrapping mechanism for ufuncs</li>
<li>New Neighborhood iterator (C-level only)</li>
<li>C99-like complex functions in npymath</li>
</ul>
</div>
<div class="section" id="id185">
<h3>New features<a class="headerlink" href="#id185" title="Permalink to this headline">¶</a></h3>
<div class="section" id="extended-array-wrapping-mechanism-for-ufuncs">
<h4>Extended array wrapping mechanism for ufuncs<a class="headerlink" href="#extended-array-wrapping-mechanism-for-ufuncs" title="Permalink to this headline">¶</a></h4>
<p>An __array_prepare__ method has been added to ndarray to provide subclasses
greater flexibility to interact with ufuncs and ufunc-like functions. ndarray
already provided __array_wrap__, which allowed subclasses to set the array type
for the result and populate metadata on the way out of the ufunc (as seen in
the implementation of MaskedArray). For some applications it is necessary to
provide checks and populate metadata <em>on the way in</em>. __array_prepare__ is
therefore called just after the ufunc has initialized the output array but
before computing the results and populating it. This way, checks can be made
and errors raised before operations which may modify data in place.</p>
</div>
<div class="section" id="automatic-detection-of-forward-incompatibilities">
<h4>Automatic detection of forward incompatibilities<a class="headerlink" href="#automatic-detection-of-forward-incompatibilities" title="Permalink to this headline">¶</a></h4>
<p>Previously, if an extension was built against a version N of NumPy, and used on
a system with NumPy M &lt; N, the import_array was successful, which could cause
crashes because the version M does not have a function in N. Starting from
NumPy 1.4.0, this will cause a failure in import_array, so the error will be
caught early on.</p>
</div>
<div class="section" id="new-iterators">
<h4>New iterators<a class="headerlink" href="#new-iterators" title="Permalink to this headline">¶</a></h4>
<p>A new neighborhood iterator has been added to the C API. It can be used to
iterate over the items in a neighborhood of an array, and can handle boundaries
conditions automatically. Zero and one padding are available, as well as
arbitrary constant value, mirror and circular padding.</p>
</div>
<div class="section" id="new-polynomial-support">
<h4>New polynomial support<a class="headerlink" href="#new-polynomial-support" title="Permalink to this headline">¶</a></h4>
<p>New modules chebyshev and polynomial have been added. The new polynomial module
is not compatible with the current polynomial support in numpy, but is much
like the new chebyshev module. The most noticeable difference to most will
be that coefficients are specified from low to high power, that the low
level functions do <em>not</em> work with the Chebyshev and Polynomial classes as
arguments, and that the Chebyshev and Polynomial classes include a domain.
Mapping between domains is a linear substitution and the two classes can be
converted one to the other, allowing, for instance, a Chebyshev series in
one domain to be expanded as a polynomial in another domain. The new classes
should generally be used instead of the low level functions, the latter are
provided for those who wish to build their own classes.</p>
<p>The new modules are not automatically imported into the numpy namespace,
they must be explicitly brought in with an “import numpy.polynomial”
statement.</p>
</div>
<div class="section" id="new-c-api">
<h4>New C API<a class="headerlink" href="#new-c-api" title="Permalink to this headline">¶</a></h4>
<p>The following C functions have been added to the C API:</p>
<blockquote>
<div><ol class="arabic simple">
<li>PyArray_GetNDArrayCFeatureVersion: return the <em>API</em> version of the
loaded numpy.</li>
<li>PyArray_Correlate2 - like PyArray_Correlate, but implements the usual
definition of correlation. Inputs are not swapped, and conjugate is
taken for complex arrays.</li>
<li>PyArray_NeighborhoodIterNew - a new iterator to iterate over a
neighborhood of a point, with automatic boundaries handling. It is
documented in the iterators section of the C-API reference, and you can
find some examples in  the multiarray_test.c.src file in numpy.core.</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="new-ufuncs">
<h4>New ufuncs<a class="headerlink" href="#new-ufuncs" title="Permalink to this headline">¶</a></h4>
<p>The following ufuncs have been added to the C API:</p>
<blockquote>
<div><ol class="arabic simple">
<li>copysign - return the value of the first argument with the sign copied
from the second argument.</li>
<li>nextafter - return the next representable floating point value of the
first argument toward the second argument.</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="new-defines">
<h4>New defines<a class="headerlink" href="#new-defines" title="Permalink to this headline">¶</a></h4>
<p>The alpha processor is now defined and available in numpy/npy_cpu.h. The
failed detection of the PARISC processor has been fixed. The defines are:</p>
<blockquote>
<div><ol class="arabic simple">
<li>NPY_CPU_HPPA: PARISC</li>
<li>NPY_CPU_ALPHA: Alpha</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="testing">
<h4>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ol class="arabic simple">
<li>deprecated decorator: this decorator may be used to avoid cluttering
testing output while testing DeprecationWarning is effectively raised by
the decorated test.</li>
<li>assert_array_almost_equal_nulps: new method to compare two arrays of
floating point values. With this function, two values are considered
close if there are not many representable floating point values in
between, thus being more robust than assert_array_almost_equal when the
values fluctuate a lot.</li>
<li>assert_array_max_ulp: raise an assertion if there are more than N
representable numbers between two floating point values.</li>
<li>assert_warns: raise an AssertionError if a callable does not generate a
warning of the appropriate class, without altering the warning state.</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="reusing-npymath">
<h4>Reusing npymath<a class="headerlink" href="#reusing-npymath" title="Permalink to this headline">¶</a></h4>
<p>In 1.3.0, we started putting portable C math routines in npymath library, so
that people can use those to write portable extensions. Unfortunately, it was
not possible to easily link against this library: in 1.4.0, support has been
added to numpy.distutils so that 3rd party can reuse this library. See coremath
documentation for more information.</p>
</div>
<div class="section" id="improved-set-operations">
<h4>Improved set operations<a class="headerlink" href="#improved-set-operations" title="Permalink to this headline">¶</a></h4>
<p>In previous versions of NumPy some set functions (intersect1d,
setxor1d, setdiff1d and setmember1d) could return incorrect results if
the input arrays contained duplicate items. These now work correctly
for input arrays with duplicates. setmember1d has been renamed to
in1d, as with the change to accept arrays with duplicates it is
no longer a set operation, and is conceptually similar to an
elementwise version of the Python operator ‘in’.  All of these
functions now accept the boolean keyword assume_unique. This is False
by default, but can be set True if the input arrays are known not
to contain duplicates, which can increase the functions’ execution
speed.</p>
</div>
</div>
<div class="section" id="id186">
<h3>Improvements<a class="headerlink" href="#id186" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ol class="arabic">
<li><p class="first">numpy import is noticeably faster (from 20 to 30 % depending on the
platform and computer)</p>
</li>
<li><p class="first">The sort functions now sort nans to the end.</p>
<blockquote>
<div><ul class="simple">
<li>Real sort order is [R, nan]</li>
<li>Complex sort order is [R + Rj, R + nanj, nan + Rj, nan + nanj]</li>
</ul>
</div></blockquote>
<p>Complex numbers with the same nan placements are sorted according to
the non-nan part if it exists.</p>
</li>
<li><p class="first">The type comparison functions have been made consistent with the new
sort order of nans. Searchsorted now works with sorted arrays
containing nan values.</p>
</li>
<li><p class="first">Complex division has been made more resistant to overflow.</p>
</li>
<li><p class="first">Complex floor division has been made more resistant to overflow.</p>
</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="id187">
<h3>Deprecations<a class="headerlink" href="#id187" title="Permalink to this headline">¶</a></h3>
<p>The following functions are deprecated:</p>
<blockquote>
<div><ol class="arabic simple">
<li>correlate: it takes a new keyword argument old_behavior. When True (the
default), it returns the same result as before. When False, compute the
conventional correlation, and take the conjugate for complex arrays. The
old behavior will be removed in NumPy 1.5, and raises a
DeprecationWarning in 1.4.</li>
<li>unique1d: use unique instead. unique1d raises a deprecation
warning in 1.4, and will be removed in 1.5.</li>
<li>intersect1d_nu: use intersect1d instead. intersect1d_nu raises
a deprecation warning in 1.4, and will be removed in 1.5.</li>
<li>setmember1d: use in1d instead. setmember1d raises a deprecation
warning in 1.4, and will be removed in 1.5.</li>
</ol>
</div></blockquote>
<p>The following raise errors:</p>
<blockquote>
<div><ol class="arabic simple">
<li>When operating on 0-d arrays, <code class="docutils literal notranslate"><span class="pre">numpy.max</span></code> and other functions accept
only <code class="docutils literal notranslate"><span class="pre">axis=0</span></code>, <code class="docutils literal notranslate"><span class="pre">axis=-1</span></code> and <code class="docutils literal notranslate"><span class="pre">axis=None</span></code>. Using an out-of-bounds
axes is an indication of a bug, so Numpy raises an error for these cases
now.</li>
<li>Specifying <code class="docutils literal notranslate"><span class="pre">axis</span> <span class="pre">&gt;</span> <span class="pre">MAX_DIMS</span></code> is no longer allowed; Numpy raises now an
error instead of behaving similarly as for <code class="docutils literal notranslate"><span class="pre">axis=None</span></code>.</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="internal-changes">
<h3>Internal changes<a class="headerlink" href="#internal-changes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="use-c99-complex-functions-when-available">
<h4>Use C99 complex functions when available<a class="headerlink" href="#use-c99-complex-functions-when-available" title="Permalink to this headline">¶</a></h4>
<p>The numpy complex types are now guaranteed to be ABI compatible with C99
complex type, if available on the platform. Moreover, the complex ufunc now use
the platform C99 functions instead of our own.</p>
</div>
<div class="section" id="split-multiarray-and-umath-source-code">
<h4>split multiarray and umath source code<a class="headerlink" href="#split-multiarray-and-umath-source-code" title="Permalink to this headline">¶</a></h4>
<p>The source code of multiarray and umath has been split into separate logic
compilation units. This should make the source code more amenable for
newcomers.</p>
</div>
<div class="section" id="separate-compilation">
<h4>Separate compilation<a class="headerlink" href="#separate-compilation" title="Permalink to this headline">¶</a></h4>
<p>By default, every file of multiarray (and umath) is merged into one for
compilation as was the case before, but if NPY_SEPARATE_COMPILATION env
variable is set to a non-negative value, experimental individual compilation of
each file is enabled. This makes the compile/debug cycle much faster when
working on core numpy.</p>
</div>
<div class="section" id="separate-core-math-library">
<h4>Separate core math library<a class="headerlink" href="#separate-core-math-library" title="Permalink to this headline">¶</a></h4>
<p>New functions which have been added:</p>
<blockquote>
<div><ul class="simple">
<li>npy_copysign</li>
<li>npy_nextafter</li>
<li>npy_cpack</li>
<li>npy_creal</li>
<li>npy_cimag</li>
<li>npy_cabs</li>
<li>npy_cexp</li>
<li>npy_clog</li>
<li>npy_cpow</li>
<li>npy_csqr</li>
<li>npy_ccos</li>
<li>npy_csin</li>
</ul>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="numpy-1-3-0-release-notes">
<h2>NumPy 1.3.0 Release Notes<a class="headerlink" href="#numpy-1-3-0-release-notes" title="Permalink to this headline">¶</a></h2>
<p>This minor includes numerous bug fixes, official python 2.6 support, and
several new features such as generalized ufuncs.</p>
<div class="section" id="id188">
<h3>Highlights<a class="headerlink" href="#id188" title="Permalink to this headline">¶</a></h3>
<div class="section" id="python-2-6-support">
<h4>Python 2.6 support<a class="headerlink" href="#python-2-6-support" title="Permalink to this headline">¶</a></h4>
<p>Python 2.6 is now supported on all previously supported platforms, including
windows.</p>
<p><a class="reference external" href="https://www.python.org/dev/peps/pep-0361/">https://www.python.org/dev/peps/pep-0361/</a></p>
</div>
<div class="section" id="generalized-ufuncs">
<h4>Generalized ufuncs<a class="headerlink" href="#generalized-ufuncs" title="Permalink to this headline">¶</a></h4>
<p>There is a general need for looping over not only functions on scalars but also
over functions on vectors (or arrays), as explained on
<a class="reference external" href="http://scipy.org/scipy/numpy/wiki/GeneralLoopingFunctions">http://scipy.org/scipy/numpy/wiki/GeneralLoopingFunctions</a>. We propose to
realize this concept by generalizing the universal functions (ufuncs), and
provide a C implementation that adds ~500 lines to the numpy code base. In
current (specialized) ufuncs, the elementary function is limited to
element-by-element operations, whereas the generalized version supports
“sub-array” by “sub-array” operations. The Perl vector library PDL provides a
similar functionality and its terms are re-used in the following.</p>
<p>Each generalized ufunc has information associated with it that states what the
“core” dimensionality of the inputs is, as well as the corresponding
dimensionality of the outputs (the element-wise ufuncs have zero core
dimensions). The list of the core dimensions for all arguments is called the
“signature” of a ufunc. For example, the ufunc numpy.add has signature
“(),()-&gt;()” defining two scalar inputs and one scalar output.</p>
<p>Another example is (see the GeneralLoopingFunctions page) the function
inner1d(a,b) with a signature of “(i),(i)-&gt;()”. This applies the inner product
along the last axis of each input, but keeps the remaining indices intact. For
example, where a is of shape (3,5,N) and b is of shape (5,N), this will return
an output of shape (3,5). The underlying elementary function is called 3*5
times. In the signature, we specify one core dimension “(i)” for each input and
zero core dimensions “()” for the output, since it takes two 1-d arrays and
returns a scalar. By using the same name “i”, we specify that the two
corresponding dimensions should be of the same size (or one of them is of size
1 and will be broadcasted).</p>
<p>The dimensions beyond the core dimensions are called “loop” dimensions. In the
above example, this corresponds to (3,5).</p>
<p>The usual numpy “broadcasting” rules apply, where the signature determines how
the dimensions of each input/output object are split into core and loop
dimensions:</p>
<p>While an input array has a smaller dimensionality than the corresponding number
of core dimensions, 1’s are pre-pended to its shape.  The core dimensions are
removed from all inputs and the remaining dimensions are broadcasted; defining
the loop dimensions.  The output is given by the loop dimensions plus the
output core dimensions.</p>
</div>
<div class="section" id="experimental-windows-64-bits-support">
<h4>Experimental Windows 64 bits support<a class="headerlink" href="#experimental-windows-64-bits-support" title="Permalink to this headline">¶</a></h4>
<p>Numpy can now be built on windows 64 bits (amd64 only, not IA64), with both MS
compilers and mingw-w64 compilers:</p>
<p>This is <em>highly experimental</em>: DO NOT USE FOR PRODUCTION USE. See INSTALL.txt,
Windows 64 bits section for more information on limitations and how to build it
by yourself.</p>
</div>
</div>
<div class="section" id="id189">
<h3>New features<a class="headerlink" href="#id189" title="Permalink to this headline">¶</a></h3>
<div class="section" id="formatting-issues">
<h4>Formatting issues<a class="headerlink" href="#formatting-issues" title="Permalink to this headline">¶</a></h4>
<p>Float formatting is now handled by numpy instead of the C runtime: this enables
locale independent formatting, more robust fromstring and related methods.
Special values (inf and nan) are also more consistent across platforms (nan vs
IND/NaN, etc…), and more consistent with recent python formatting work (in
2.6 and later).</p>
</div>
<div class="section" id="nan-handling-in-max-min">
<h4>Nan handling in max/min<a class="headerlink" href="#nan-handling-in-max-min" title="Permalink to this headline">¶</a></h4>
<p>The maximum/minimum ufuncs now reliably propagate nans. If one of the
arguments is a nan, then nan is returned. This affects np.min/np.max, amin/amax
and the array methods max/min. New ufuncs fmax and fmin have been added to deal
with non-propagating nans.</p>
</div>
<div class="section" id="nan-handling-in-sign">
<h4>Nan handling in sign<a class="headerlink" href="#nan-handling-in-sign" title="Permalink to this headline">¶</a></h4>
<p>The ufunc sign now returns nan for the sign of anan.</p>
</div>
<div class="section" id="id190">
<h4>New ufuncs<a class="headerlink" href="#id190" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li>fmax - same as maximum for integer types and non-nan floats. Returns the
non-nan argument if one argument is nan and returns nan if both arguments
are nan.</li>
<li>fmin - same as minimum for integer types and non-nan floats. Returns the
non-nan argument if one argument is nan and returns nan if both arguments
are nan.</li>
<li>deg2rad - converts degrees to radians, same as the radians ufunc.</li>
<li>rad2deg - converts radians to degrees, same as the degrees ufunc.</li>
<li>log2 - base 2 logarithm.</li>
<li>exp2 - base 2 exponential.</li>
<li>trunc - truncate floats to nearest integer towards zero.</li>
<li>logaddexp - add numbers stored as logarithms and return the logarithm
of the result.</li>
<li>logaddexp2 - add numbers stored as base 2 logarithms and return the base 2
logarithm of the result.</li>
</ol>
</div>
<div class="section" id="masked-arrays">
<h4>Masked arrays<a class="headerlink" href="#masked-arrays" title="Permalink to this headline">¶</a></h4>
<p>Several new features and bug fixes, including:</p>
<blockquote>
<div><ul class="simple">
<li>structured arrays should now be fully supported by MaskedArray
(r6463, r6324, r6305, r6300, r6294…)</li>
<li>Minor bug fixes (r6356, r6352, r6335, r6299, r6298)</li>
<li>Improved support for __iter__ (r6326)</li>
<li>made baseclass, sharedmask and hardmask accessible to the user (but
read-only)</li>
<li>doc update</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="gfortran-support-on-windows">
<h4>gfortran support on windows<a class="headerlink" href="#gfortran-support-on-windows" title="Permalink to this headline">¶</a></h4>
<p>Gfortran can now be used as a fortran compiler for numpy on windows, even when
the C compiler is Visual Studio (VS 2005 and above; VS 2003 will NOT work).
Gfortran + Visual studio does not work on windows 64 bits (but gcc + gfortran
does). It is unclear whether it will be possible to use gfortran and visual
studio at all on x64.</p>
</div>
<div class="section" id="arch-option-for-windows-binary">
<h4>Arch option for windows binary<a class="headerlink" href="#arch-option-for-windows-binary" title="Permalink to this headline">¶</a></h4>
<p>Automatic arch detection can now be bypassed from the command line for the superpack installed:</p>
<blockquote>
<div>numpy-1.3.0-superpack-win32.exe /arch=nosse</div></blockquote>
<p>will install a numpy which works on any x86, even if the running computer
supports SSE set.</p>
</div>
</div>
<div class="section" id="id191">
<h3>Deprecated features<a class="headerlink" href="#id191" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id192">
<h4>Histogram<a class="headerlink" href="#id192" title="Permalink to this headline">¶</a></h4>
<p>The semantics of histogram has been modified to fix long-standing issues
with outliers handling. The main changes concern</p>
<ol class="arabic simple">
<li>the definition of the bin edges, now including the rightmost edge, and</li>
<li>the handling of upper outliers, now ignored rather than tallied in the
rightmost bin.</li>
</ol>
<p>The previous behavior is still accessible using <em class="xref py py-obj">new=False</em>, but this is
deprecated, and will be removed entirely in 1.4.0.</p>
</div>
</div>
<div class="section" id="documentation-changes">
<h3>Documentation changes<a class="headerlink" href="#documentation-changes" title="Permalink to this headline">¶</a></h3>
<p>A lot of documentation has been added. Both user guide and references can be
built from sphinx.</p>
</div>
<div class="section" id="id193">
<h3>New C API<a class="headerlink" href="#id193" title="Permalink to this headline">¶</a></h3>
<div class="section" id="multiarray-api">
<h4>Multiarray API<a class="headerlink" href="#multiarray-api" title="Permalink to this headline">¶</a></h4>
<p>The following functions have been added to the multiarray C API:</p>
<blockquote>
<div><ul class="simple">
<li>PyArray_GetEndianness: to get runtime endianness</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="ufunc-api">
<h4>Ufunc API<a class="headerlink" href="#ufunc-api" title="Permalink to this headline">¶</a></h4>
<p>The following functions have been added to the ufunc API:</p>
<blockquote>
<div><ul class="simple">
<li>PyUFunc_FromFuncAndDataAndSignature: to declare a more general ufunc
(generalized ufunc).</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id194">
<h4>New defines<a class="headerlink" href="#id194" title="Permalink to this headline">¶</a></h4>
<p>New public C defines are available for ARCH specific code through numpy/npy_cpu.h:</p>
<blockquote>
<div><ul class="simple">
<li>NPY_CPU_X86: x86 arch (32 bits)</li>
<li>NPY_CPU_AMD64: amd64 arch (x86_64, NOT Itanium)</li>
<li>NPY_CPU_PPC: 32 bits ppc</li>
<li>NPY_CPU_PPC64: 64 bits ppc</li>
<li>NPY_CPU_SPARC: 32 bits sparc</li>
<li>NPY_CPU_SPARC64: 64 bits sparc</li>
<li>NPY_CPU_S390: S390</li>
<li>NPY_CPU_IA64: ia64</li>
<li>NPY_CPU_PARISC: PARISC</li>
</ul>
</div></blockquote>
<p>New macros for CPU endianness has been added as well (see internal changes
below for details):</p>
<blockquote>
<div><ul class="simple">
<li>NPY_BYTE_ORDER: integer</li>
<li>NPY_LITTLE_ENDIAN/NPY_BIG_ENDIAN defines</li>
</ul>
</div></blockquote>
<p>Those provide portable alternatives to glibc endian.h macros for platforms
without it.</p>
</div>
<div class="section" id="portable-nan-infinity-etc">
<h4>Portable NAN, INFINITY, etc…<a class="headerlink" href="#portable-nan-infinity-etc" title="Permalink to this headline">¶</a></h4>
<p>npy_math.h now makes available several portable macro to get NAN, INFINITY:</p>
<blockquote>
<div><ul class="simple">
<li>NPY_NAN: equivalent to NAN, which is a GNU extension</li>
<li>NPY_INFINITY: equivalent to C99 INFINITY</li>
<li>NPY_PZERO, NPY_NZERO: positive and negative zero respectively</li>
</ul>
</div></blockquote>
<p>Corresponding single and extended precision macros are available as well. All
references to NAN, or home-grown computation of NAN on the fly have been
removed for consistency.</p>
</div>
</div>
<div class="section" id="id195">
<h3>Internal changes<a class="headerlink" href="#id195" title="Permalink to this headline">¶</a></h3>
<div class="section" id="numpy-core-math-configuration-revamp">
<h4>numpy.core math configuration revamp<a class="headerlink" href="#numpy-core-math-configuration-revamp" title="Permalink to this headline">¶</a></h4>
<p>This should make the porting to new platforms easier, and more robust. In
particular, the configuration stage does not need to execute any code on the
target platform, which is a first step toward cross-compilation.</p>
<p><a class="reference external" href="https://www.numpy.org/neps/nep-0003-math_config_clean.html">https://www.numpy.org/neps/nep-0003-math_config_clean.html</a></p>
</div>
<div class="section" id="umath-refactor">
<h4>umath refactor<a class="headerlink" href="#umath-refactor" title="Permalink to this headline">¶</a></h4>
<p>A lot of code cleanup for umath/ufunc code (charris).</p>
</div>
<div class="section" id="improvements-to-build-warnings">
<h4>Improvements to build warnings<a class="headerlink" href="#improvements-to-build-warnings" title="Permalink to this headline">¶</a></h4>
<p>Numpy can now build with -W -Wall without warnings</p>
<p><a class="reference external" href="https://www.numpy.org/neps/nep-0002-warnfix.html">https://www.numpy.org/neps/nep-0002-warnfix.html</a></p>
</div>
<div class="section" id="id196">
<h4>Separate core math library<a class="headerlink" href="#id196" title="Permalink to this headline">¶</a></h4>
<p>The core math functions (sin, cos, etc… for basic C types) have been put into
a separate library; it acts as a compatibility layer, to support most C99 maths
functions (real only for now). The library includes platform-specific fixes for
various maths functions, such as using those versions should be more robust
than using your platform functions directly. The API for existing functions is
exactly the same as the C99 math functions API; the only difference is the npy
prefix (npy_cos vs cos).</p>
<p>The core library will be made available to any extension in 1.4.0.</p>
</div>
<div class="section" id="cpu-arch-detection">
<h4>CPU arch detection<a class="headerlink" href="#cpu-arch-detection" title="Permalink to this headline">¶</a></h4>
<p>npy_cpu.h defines numpy specific CPU defines, such as NPY_CPU_X86, etc…
Those are portable across OS and toolchains, and set up when the header is
parsed, so that they can be safely used even in the case of cross-compilation
(the values is not set when numpy is built), or for multi-arch binaries (e.g.
fat binaries on Max OS X).</p>
<p>npy_endian.h defines numpy specific endianness defines, modeled on the glibc
endian.h. NPY_BYTE_ORDER  is equivalent to BYTE_ORDER, and one of
NPY_LITTLE_ENDIAN or NPY_BIG_ENDIAN is defined. As for CPU archs, those are set
when the header is parsed by the compiler, and as such can be used for
cross-compilation and multi-arch binaries.</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2008-2019, The SciPy community.
      </li>
      <li>
      Last updated on Jul 26, 2019.
      </li>
      <li>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.8.5.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>